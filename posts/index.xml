<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>Posts on 明天吃什么？</title><link>https://tnzzz.top/posts/</link><description>Recent content in Posts on 明天吃什么？</description><generator>Hugo -- 0.147.8</generator><language>zh-cn</language><lastBuildDate>Wed, 18 Jun 2025 00:00:00 +0000</lastBuildDate><atom:link href="https://tnzzz.top/posts/index.xml" rel="self" type="application/rss+xml"/><item><title>关于网页体验优化</title><link>https://tnzzz.top/posts/%E5%AD%A6%E4%B9%A0/%E5%89%8D%E7%AB%AF/%E5%85%B3%E4%BA%8E%E9%A1%B5%E9%9D%A2%E4%BD%93%E9%AA%8C%E4%BC%98%E5%8C%96/</link><pubDate>Wed, 18 Jun 2025 00:00:00 +0000</pubDate><guid>https://tnzzz.top/posts/%E5%AD%A6%E4%B9%A0/%E5%89%8D%E7%AB%AF/%E5%85%B3%E4%BA%8E%E9%A1%B5%E9%9D%A2%E4%BD%93%E9%AA%8C%E4%BC%98%E5%8C%96/</guid><description>&lt;p>首先我们要确定可以从什么方向对体验进行优化
影响网页体验有很多方面，不过一般方向无非下面这三大类&lt;/p>
&lt;ul>
&lt;li>网络&lt;/li>
&lt;li>JS执行&lt;/li>
&lt;li>页面渲染&lt;/li>
&lt;/ul>
&lt;h2 id="关于网络优化">关于网络优化&lt;/h2>
&lt;p>关于网络优化，我们要先了解发起网络请求的流程&lt;/p>
&lt;ol>
&lt;li>查询对应的域名&lt;/li>
&lt;li>加入请求队列&lt;/li>
&lt;li>发起连接&lt;/li>
&lt;li>发送请求&lt;/li>
&lt;li>等待响应&lt;/li>
&lt;li>下载内容&lt;/li>
&lt;/ol>
&lt;p>其中 4, 5, 6 步都是受客户端到服务器之间的网络影响，前端几乎没什么能优化的所以着重说下剩下的几个方面如何优化&lt;/p>
&lt;h3 id="dns-影响小">DNS (影响小)&lt;/h3>
&lt;p>首先什么是 DNS 可以参考 &lt;a href="https://zh.wikipedia.org/wiki/%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9F">Wikipedia 域名系统&lt;/a>&lt;/p>
&lt;p>这部分优化说白了就是让浏览器在拿到地址时就直接把对应的 IP 解析出来，不要在真正发起请求的时候再解析。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-javascript" data-lang="javascript">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#a6e22e">link&lt;/span> &lt;span style="color:#a6e22e">rel&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;dns-prefetch&amp;#34;&lt;/span> &lt;span style="color:#a6e22e">href&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;https://fonts.googleapis.com/&amp;#34;&lt;/span> &lt;span style="color:#f92672">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;a href="https://developer.mozilla.org/zh-CN/docs/Web/Performance/Guides/dns-prefetch">参考 MDN 文档&lt;/a>&lt;/p>
&lt;h3 id="请求队列">请求队列&lt;/h3>
&lt;p>浏览器对于单个域名只能同时建立4~6个TCP连接（不同浏览器实现有差异）。&lt;/p>
&lt;p>如果在 &lt;code>http/1.1&lt;/code> 的情况下比如说我现在有六个大体积的图片正在加载，剩下一个影响布局的 JS 请求只能等待前面的任意一个请求完成才能发起，很明显这会增加布局完成的时间降低用户体验，但是在 &lt;code>HTTP/2&lt;/code> 中则不存在这个问题，优化方面有下面这几个&lt;/p>
&lt;h4 id="使用-http2">使用 HTTP/2&lt;/h4>
&lt;p>这个需要服务端启用 HTTP/2 协议，浏览器会自动与服务端协商。如果服务端支持 HTTP/2，浏览器会优先使用这个协议。否则会回退到 HTTP/1.1。&lt;/p>
&lt;h4 id="域名分片">域名分片&lt;/h4>
&lt;p>把原来耗时的请求例如图片、字体等放到另一个域名中。这是最常见的做法
例如谷歌就把字体等图片放到不同的域名中
&lt;img alt="alt text" loading="lazy" src="https://tnzzz.top/posts/%E5%AD%A6%E4%B9%A0/%E5%89%8D%E7%AB%AF/%E5%85%B3%E4%BA%8E%E9%A1%B5%E9%9D%A2%E4%BD%93%E9%AA%8C%E4%BC%98%E5%8C%96/img/image-1.png">&lt;/p>
&lt;h4 id="将耗时的请求延后">将耗时的请求延后&lt;/h4>
&lt;p>确定哪些请求比较重要，先加载会影响页面布局的资源。&lt;/p>
&lt;p>例如下面的 JS 标签 defer 属性可以让浏览器在 HTML 解析完成后再执行脚本，这样就不会阻塞页面渲染。但是注意，这个属性对模块脚本无效。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-html" data-lang="html">&lt;span style="display:flex;">&lt;span>&amp;lt;&lt;span style="color:#f92672">script&lt;/span> &lt;span style="color:#a6e22e">src&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;https://example.com/script.js&amp;#34;&lt;/span> &lt;span style="color:#a6e22e">defer&lt;/span>&amp;gt;&amp;lt;/&lt;span style="color:#f92672">script&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>对于图片和 iframe 可以使用 &lt;code>loading=&amp;quot;lazy&amp;quot;&lt;/code> 属性来延迟加载，只有当进入视口时才会加载。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-html" data-lang="html">&lt;span style="display:flex;">&lt;span>&amp;lt;&lt;span style="color:#f92672">img&lt;/span> &lt;span style="color:#a6e22e">src&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;image.jpg&amp;#34;&lt;/span> &lt;span style="color:#a6e22e">loading&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;lazy&amp;#34;&lt;/span> &lt;span style="color:#a6e22e">alt&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Lazy loaded image&amp;#34;&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="发起连接">发起连接&lt;/h4>
&lt;p>思路同样是预连接&lt;/p></description></item><item><title>JavaScript 中的 this 指向</title><link>https://tnzzz.top/posts/%E5%AD%A6%E4%B9%A0/js/this/</link><pubDate>Tue, 17 Jun 2025 00:00:00 +0000</pubDate><guid>https://tnzzz.top/posts/%E5%AD%A6%E4%B9%A0/js/this/</guid><description>&lt;h3 id="this-的值是运行时计算出来的">this 的值是运行时计算出来的&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-javascript" data-lang="javascript">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">let&lt;/span> &lt;span style="color:#a6e22e">user&lt;/span> &lt;span style="color:#f92672">=&lt;/span> { &lt;span style="color:#a6e22e">name&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#e6db74">&amp;#34;John&amp;#34;&lt;/span> };
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">let&lt;/span> &lt;span style="color:#a6e22e">admin&lt;/span> &lt;span style="color:#f92672">=&lt;/span> { &lt;span style="color:#a6e22e">name&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#e6db74">&amp;#34;Admin&amp;#34;&lt;/span> };
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">function&lt;/span> &lt;span style="color:#a6e22e">sayHi&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">alert&lt;/span>( &lt;span style="color:#66d9ef">this&lt;/span>.&lt;span style="color:#a6e22e">name&lt;/span> );
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// 在两个对象中使用相同的函数
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#a6e22e">user&lt;/span>.&lt;span style="color:#a6e22e">f&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#a6e22e">sayHi&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">admin&lt;/span>.&lt;span style="color:#a6e22e">f&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#a6e22e">sayHi&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// 这两个调用有不同的 this 值
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// 函数内部的 &amp;#34;this&amp;#34; 是“点符号前面”的那个对象
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#a6e22e">user&lt;/span>.&lt;span style="color:#a6e22e">f&lt;/span>(); &lt;span style="color:#75715e">// John（this == user）
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#a6e22e">admin&lt;/span>.&lt;span style="color:#a6e22e">f&lt;/span>(); &lt;span style="color:#75715e">// Admin（this == admin）
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">admin&lt;/span>[&lt;span style="color:#e6db74">&amp;#39;f&amp;#39;&lt;/span>](); &lt;span style="color:#75715e">// Admin（使用点符号或方括号语法来访问这个方法，都没有关系。）
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="没有对象的情况下">没有对象的情况下&lt;/h3>
&lt;ul>
&lt;li>在严格模式下，函数中的 this 是 undefined。&lt;/li>
&lt;li>在非严格模式下，this 是全局对象（浏览器中是 window 对象）。&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-javascript" data-lang="javascript">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">function&lt;/span> &lt;span style="color:#a6e22e">showThis&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">console&lt;/span>.&lt;span style="color:#a6e22e">log&lt;/span>(&lt;span style="color:#66d9ef">this&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">showThis&lt;/span>(); &lt;span style="color:#75715e">// 在非严格模式下，this指向全局对象
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="箭头函数没有自己的this">箭头函数没有自己的this&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-javascript" data-lang="javascript">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">let&lt;/span> &lt;span style="color:#a6e22e">user&lt;/span> &lt;span style="color:#f92672">=&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">firstName&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#e6db74">&amp;#34;Ilya&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">sayHi&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">let&lt;/span> &lt;span style="color:#a6e22e">arrow&lt;/span> &lt;span style="color:#f92672">=&lt;/span> () =&amp;gt; &lt;span style="color:#a6e22e">console&lt;/span>.&lt;span style="color:#a6e22e">log&lt;/span>(&lt;span style="color:#66d9ef">this&lt;/span>.&lt;span style="color:#a6e22e">firstName&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">arrow&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>};
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">user&lt;/span>.&lt;span style="color:#a6e22e">sayHi&lt;/span>(); &lt;span style="color:#75715e">// Ilya
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="调用函数时指定this">调用函数时指定this&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-javascript" data-lang="javascript">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">function&lt;/span> &lt;span style="color:#a6e22e">say&lt;/span>(&lt;span style="color:#a6e22e">phrase&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">alert&lt;/span>(&lt;span style="color:#66d9ef">this&lt;/span>.&lt;span style="color:#a6e22e">name&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#e6db74">&amp;#39;: &amp;#39;&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#a6e22e">phrase&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">let&lt;/span> &lt;span style="color:#a6e22e">user&lt;/span> &lt;span style="color:#f92672">=&lt;/span> { &lt;span style="color:#a6e22e">name&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#e6db74">&amp;#34;John&amp;#34;&lt;/span> };
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">let&lt;/span> &lt;span style="color:#a6e22e">admin&lt;/span> &lt;span style="color:#f92672">=&lt;/span> { &lt;span style="color:#a6e22e">name&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#e6db74">&amp;#34;Admin&amp;#34;&lt;/span> };
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">say&lt;/span>.&lt;span style="color:#a6e22e">call&lt;/span>(&lt;span style="color:#a6e22e">user&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;Hello&amp;#34;&lt;/span>); &lt;span style="color:#75715e">// John: Hello
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#a6e22e">say&lt;/span>.&lt;span style="color:#a6e22e">call&lt;/span>(&lt;span style="color:#a6e22e">admin&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;Hello&amp;#34;&lt;/span>); &lt;span style="color:#75715e">// Admin: Hello
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#a6e22e">say&lt;/span>.&lt;span style="color:#a6e22e">apply&lt;/span>(&lt;span style="color:#a6e22e">user&lt;/span>, [&lt;span style="color:#e6db74">&amp;#34;Hello&amp;#34;&lt;/span>]); &lt;span style="color:#75715e">// John: Hello
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#a6e22e">say&lt;/span>.&lt;span style="color:#a6e22e">apply&lt;/span>(&lt;span style="color:#a6e22e">admin&lt;/span>, [&lt;span style="color:#e6db74">&amp;#34;Hello&amp;#34;&lt;/span>]); &lt;span style="color:#75715e">// Admin: Hello
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#a6e22e">say&lt;/span>.&lt;span style="color:#a6e22e">bind&lt;/span>(&lt;span style="color:#a6e22e">user&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;Hello&amp;#34;&lt;/span>)(); &lt;span style="color:#75715e">// John: Hello
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#a6e22e">say&lt;/span>.&lt;span style="color:#a6e22e">bind&lt;/span>(&lt;span style="color:#a6e22e">admin&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;Hello&amp;#34;&lt;/span>)(); &lt;span style="color:#75715e">// Admin: Hello
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="例子">例子&lt;/h3>
&lt;h4 id="在对象字面量中使用-this">在对象字面量中使用 &amp;ldquo;this&amp;rdquo;&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-javascript" data-lang="javascript">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">function&lt;/span> &lt;span style="color:#a6e22e">makeUser&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">name&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#e6db74">&amp;#34;John&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">ref&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#66d9ef">this&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> };
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">let&lt;/span> &lt;span style="color:#a6e22e">user&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#a6e22e">makeUser&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">alert&lt;/span>( &lt;span style="color:#a6e22e">user&lt;/span>.&lt;span style="color:#a6e22e">ref&lt;/span>.&lt;span style="color:#a6e22e">name&lt;/span> ); &lt;span style="color:#75715e">// 结果是什么？
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;!-- raw HTML omitted -->
&lt;p>因为在调用 &lt;code>makeUser&lt;/code> 函数时，不是通过对象调用的，所以 &lt;code>this&lt;/code> 是 &lt;code>undefined&lt;/code>。因此，&lt;code>user.ref&lt;/code> 是 &lt;code>undefined&lt;/code>，访问 &lt;code>user.ref.name&lt;/code> 会导致错误。&lt;/p></description></item><item><title>JS事件莫名其妙不触发解决方法</title><link>https://tnzzz.top/posts/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/js%E4%BA%8B%E4%BB%B6%E8%8E%AB%E5%90%8D%E5%85%B6%E5%A6%99%E4%B8%8D%E8%A7%A6%E5%8F%91/</link><pubDate>Mon, 16 Jun 2025 13:01:40 +0800</pubDate><guid>https://tnzzz.top/posts/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/js%E4%BA%8B%E4%BB%B6%E8%8E%AB%E5%90%8D%E5%85%B6%E5%A6%99%E4%B8%8D%E8%A7%A6%E5%8F%91/</guid><description>&lt;h3 id="问题描述">问题描述&lt;/h3>
&lt;p>监听 JavaScript 事件时，对应处理函数只有一个console.log()，但事件并没有触发。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-javascript" data-lang="javascript">&lt;span style="display:flex;">&lt;span>document.&lt;span style="color:#a6e22e">getElementById&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;myButton&amp;#34;&lt;/span>).&lt;span style="color:#a6e22e">addEventListener&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;click&amp;#34;&lt;/span>, (&lt;span style="color:#a6e22e">e&lt;/span>) =&amp;gt; {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">console&lt;/span>.&lt;span style="color:#a6e22e">log&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;Button clicked&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>});
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="问题原因">问题原因&lt;/h3>
&lt;p>Vite 中配置了去除 console.log 的功能，导致在生产环境中无法输出日志。&lt;/p>
&lt;h3 id="解决方法">解决方法&lt;/h3>
&lt;p>删除对应的 Vite 配置即可&lt;/p></description></item><item><title>日语 - Day 2</title><link>https://tnzzz.top/posts/%E5%AD%A6%E4%B9%A0/%E6%97%A5%E8%AF%AD/day-2/</link><pubDate>Mon, 16 Jun 2025 00:00:00 +0000</pubDate><guid>https://tnzzz.top/posts/%E5%AD%A6%E4%B9%A0/%E6%97%A5%E8%AF%AD/day-2/</guid><description>&lt;h2 id="か行假名">か行假名&lt;/h2>
&lt;p>か　き　く　け　こ
カ　キ　ク　ケ　コ&lt;/p>
&lt;h2 id="さ行假名">さ行假名&lt;/h2>
&lt;p>さ　し　す　せ　そ
サ　シ　ス　セ　ソ&lt;/p>
&lt;h2 id="た行假名">た行假名&lt;/h2>
&lt;p>た　ち　つ　て　と
タ　チ　ツ　テ　ト&lt;/p></description></item><item><title>日语 - Day 3</title><link>https://tnzzz.top/posts/%E5%AD%A6%E4%B9%A0/%E6%97%A5%E8%AF%AD/day-3/</link><pubDate>Mon, 16 Jun 2025 00:00:00 +0000</pubDate><guid>https://tnzzz.top/posts/%E5%AD%A6%E4%B9%A0/%E6%97%A5%E8%AF%AD/day-3/</guid><description>&lt;h2 id="な行假名">な行假名&lt;/h2>
&lt;p>な　に　ぬ　ね　の
ナ　ニ　ヌ　ネ　ノ&lt;/p>
&lt;h2 id="は行假名">は行假名&lt;/h2>
&lt;p>は　ひ　ふ　へ　ほ
ハ　ヒ　フ　ヘ　ホ&lt;/p>
&lt;h2 id="ま行假名">ま行假名&lt;/h2>
&lt;p>ま　み　む　め　も
マ　ミ　ム　メ　モ&lt;/p></description></item><item><title>日语 - Day 1</title><link>https://tnzzz.top/posts/%E5%AD%A6%E4%B9%A0/%E6%97%A5%E8%AF%AD/day-1/</link><pubDate>Sun, 15 Jun 2025 00:00:00 +0000</pubDate><guid>https://tnzzz.top/posts/%E5%AD%A6%E4%B9%A0/%E6%97%A5%E8%AF%AD/day-1/</guid><description>&lt;h2 id="浊音">浊音&lt;/h2>
&lt;p>&lt;img alt="浊音" loading="lazy" src="https://tnzzz.top/posts/%E5%AD%A6%E4%B9%A0/%E6%97%A5%E8%AF%AD/day-1/img/image-1.png">&lt;/p>
&lt;ul>
&lt;li>か、た、ぱ行假名位于单词词中或词末时可以念不送气音 不送气音 ≠ 浊音&lt;/li>
&lt;/ul>
&lt;h2 id="音调">音调&lt;/h2>
&lt;p>&lt;img alt="规律" loading="lazy" src="https://tnzzz.top/posts/%E5%AD%A6%E4%B9%A0/%E6%97%A5%E8%AF%AD/day-1/img/image.png">&lt;/p>
&lt;h3 id="一个假名一个音节">一个假名一个音节&lt;/h3>
&lt;h4 id="规律总结">规律总结&lt;/h4>
&lt;ul>
&lt;li>前面标的序号就代表在第几个音节音调下降，都是在第一个音节开始上升后保持不变&lt;/li>
&lt;li>0 调是例外，在第一个音节后就保持在高音调&lt;/li>
&lt;/ul></description></item><item><title>亚马逊 - Day 1</title><link>https://tnzzz.top/posts/%E5%AD%A6%E4%B9%A0/%E7%94%B5%E5%95%86/%E4%BA%9A%E9%A9%AC%E9%80%8A/day-1/</link><pubDate>Wed, 11 Jun 2025 00:00:00 +0000</pubDate><guid>https://tnzzz.top/posts/%E5%AD%A6%E4%B9%A0/%E7%94%B5%E5%95%86/%E4%BA%9A%E9%A9%AC%E9%80%8A/day-1/</guid><description>&lt;h2 id="选品">选品&lt;/h2>
&lt;h3 id="选品的原则">选品的原则&lt;/h3>
&lt;ul>
&lt;li>多SKU / 多新款&lt;/li>
&lt;li>品牌并不重要&lt;/li>
&lt;li>品牌集中度低&lt;/li>
&lt;/ul>
&lt;h4 id="推荐品类">推荐品类&lt;/h4>
&lt;ul>
&lt;li>玩具
&lt;ul>
&lt;li>优点
&lt;ul>
&lt;li>SKU多&lt;/li>
&lt;li>新款多&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>风险
&lt;ul>
&lt;li>易侵权&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>MRO ( Maintenance, Repair, and Operations) 维修件
&lt;ul>
&lt;li>风险
&lt;ul>
&lt;li>专利侵权&lt;/li>
&lt;li>可能需要铺货（大批量上传产品）&lt;/li>
&lt;li>单品销售量(PCS)低&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>装饰品
&lt;ul>
&lt;li>风险
&lt;ul>
&lt;li>专利侵权&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="店铺关联">店铺关联&lt;/h2>
&lt;p>重点：&lt;strong>一个公司一个店铺&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>强关联
&lt;ul>
&lt;li>IP&lt;/li>
&lt;li>公司信息&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>弱关联
&lt;ul>
&lt;li>品牌授权&lt;/li>
&lt;li>法人姓名&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="站点选择">站点选择&lt;/h2>
&lt;p>日 墨 德 法&lt;/p>
&lt;ul>
&lt;li>消费力高&lt;/li>
&lt;/ul>
&lt;p>欧洲站点注意欧盟合规问题&lt;/p>
&lt;h2 id="vat">VAT&lt;/h2>
&lt;h3 id="进口-vat">进口 VAT&lt;/h3>
&lt;p>进口 VAT = (头程运费+申报货值+关税)×VAT税率&lt;/p>
&lt;p>举例 头程运费 2欧 申报货值 10欧 关税 0.5欧 VAT税率 20%&lt;/p>
&lt;p>进口 VAT = (2 + 10 + 0.5) × 20% = 2.5 × 20% = 0.5欧&lt;/p></description></item><item><title>亚马逊 - Day 2</title><link>https://tnzzz.top/posts/%E5%AD%A6%E4%B9%A0/%E7%94%B5%E5%95%86/%E4%BA%9A%E9%A9%AC%E9%80%8A/day-2/</link><pubDate>Wed, 11 Jun 2025 00:00:00 +0000</pubDate><guid>https://tnzzz.top/posts/%E5%AD%A6%E4%B9%A0/%E7%94%B5%E5%95%86/%E4%BA%9A%E9%A9%AC%E9%80%8A/day-2/</guid><description>&lt;h2 id="选品">选品&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>目标&lt;/p>
&lt;ul>
&lt;li>市场需求&lt;/li>
&lt;li>市场上已经有了什么产品，哪些是我能拿起来就卖，并且卖得了的，我就卖。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>错误思维&lt;/p>
&lt;ul>
&lt;li>产品单一化&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>CSS 重温 - Day 1</title><link>https://tnzzz.top/posts/%E5%AD%A6%E4%B9%A0/css/day1/</link><pubDate>Sun, 08 Jun 2025 00:00:00 +0000</pubDate><guid>https://tnzzz.top/posts/%E5%AD%A6%E4%B9%A0/css/day1/</guid><description>&lt;h3 id="选择器">选择器&lt;/h3>
&lt;h4 id="标签选择器">标签选择器&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-css" data-lang="css">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#f92672">h1&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span>&lt;span style="color:#f92672">标题&lt;/span>&lt;span style="color:#f92672">&amp;lt;/&lt;/span>&lt;span style="color:#f92672">h1&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">h1&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">color&lt;/span>: &lt;span style="color:#66d9ef">blue&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="类选择器">类选择器&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-css" data-lang="css">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#f92672">div&lt;/span> &lt;span style="color:#f92672">class&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;header&amp;#34;&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#f92672">h1&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span>&lt;span style="color:#f92672">标题&lt;/span>&lt;span style="color:#f92672">&amp;lt;/&lt;/span>&lt;span style="color:#f92672">h1&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;lt;/&lt;/span>&lt;span style="color:#f92672">div&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>.&lt;span style="color:#a6e22e">header&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">color&lt;/span>: &lt;span style="color:#66d9ef">blue&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="id选择器">ID选择器&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-css" data-lang="css">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#f92672">div&lt;/span> &lt;span style="color:#f92672">id&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;header&amp;#34;&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#f92672">h1&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span>&lt;span style="color:#f92672">标题&lt;/span>&lt;span style="color:#f92672">&amp;lt;/&lt;/span>&lt;span style="color:#f92672">h1&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;lt;/&lt;/span>&lt;span style="color:#f92672">div&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>#header {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">color&lt;/span>: &lt;span style="color:#66d9ef">blue&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="组合选择器">组合选择器&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-css" data-lang="css">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">/* 会同时选中所有 h1 和 .special */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#f92672">h1&lt;/span> &lt;span style="color:#f92672">class&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;title&amp;#34;&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span>&lt;span style="color:#f92672">标题1&lt;/span>&lt;span style="color:#f92672">&amp;lt;/&lt;/span>&lt;span style="color:#f92672">h1&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#f92672">h1&lt;/span> &lt;span style="color:#f92672">class&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;title&amp;#34;&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span>&lt;span style="color:#f92672">标题2&lt;/span>&lt;span style="color:#f92672">&amp;lt;/&lt;/span>&lt;span style="color:#f92672">h1&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#f92672">div&lt;/span> &lt;span style="color:#f92672">class&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;special&amp;#34;&lt;/span>&lt;span style="color:#f92672">&amp;gt;&amp;lt;/&lt;/span>&lt;span style="color:#f92672">div&lt;/span>&lt;span style="color:#f92672">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">h1&lt;/span>&lt;span style="color:#f92672">,&lt;/span> .&lt;span style="color:#a6e22e">special&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">color&lt;/span>: &lt;span style="color:#66d9ef">blue&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="属性选择器">属性选择器&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-css" data-lang="css">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">li&lt;/span>&lt;span style="color:#f92672">[&lt;/span>&lt;span style="color:#f92672">class&lt;/span>&lt;span style="color:#f92672">]&lt;/span> {&lt;span style="color:#75715e">/* 选择所有有 class 属性的 li 标签 */&lt;/span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">li&lt;/span>&lt;span style="color:#f92672">[&lt;/span>&lt;span style="color:#f92672">class&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;a&amp;#34;&lt;/span>&lt;span style="color:#f92672">]&lt;/span> {&lt;span style="color:#75715e">/* 选择 class 属性值为 &amp;#34;a&amp;#34; 的 li 标签 */&lt;/span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">li&lt;/span>&lt;span style="color:#f92672">[&lt;/span>&lt;span style="color:#f92672">class&lt;/span>&lt;span style="color:#f92672">~=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;a&amp;#34;&lt;/span>&lt;span style="color:#f92672">]&lt;/span> {&lt;span style="color:#75715e">/* 选择 class 属性值包含 &amp;#34;a类&amp;#34; 的 li 标签 */&lt;/span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">li&lt;/span>&lt;span style="color:#f92672">[&lt;/span>&lt;span style="color:#f92672">class&lt;/span>&lt;span style="color:#f92672">|=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;zh&amp;#34;&lt;/span>&lt;span style="color:#f92672">]&lt;/span> {&lt;span style="color:#75715e">/* 选择 class 属性值以 &amp;#34;zh&amp;#34; 开头并且后面跟随一个连字符&amp;#39;-&amp;#39;的 li 标签 */&lt;/span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">li&lt;/span>&lt;span style="color:#f92672">[&lt;/span>&lt;span style="color:#f92672">class&lt;/span>&lt;span style="color:#f92672">^=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;a&amp;#34;&lt;/span>&lt;span style="color:#f92672">]&lt;/span> {&lt;span style="color:#75715e">/* 选择 class 属性值以 &amp;#34;a&amp;#34; 开头的 li 标签 */&lt;/span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">li&lt;/span>&lt;span style="color:#f92672">[&lt;/span>&lt;span style="color:#f92672">class&lt;/span>&lt;span style="color:#f92672">$=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;a&amp;#34;&lt;/span>&lt;span style="color:#f92672">]&lt;/span> {&lt;span style="color:#75715e">/* 选择 class 属性值以 &amp;#34;a&amp;#34; 结尾的 li 标签 */&lt;/span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">li&lt;/span>&lt;span style="color:#f92672">[&lt;/span>&lt;span style="color:#f92672">class&lt;/span>&lt;span style="color:#f92672">*=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;a&amp;#34;&lt;/span>&lt;span style="color:#f92672">]&lt;/span> {&lt;span style="color:#75715e">/* 选择 class 属性值包含 &amp;#34;a&amp;#34; 的 li 标签 */&lt;/span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="关系选择器">关系选择器&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-css" data-lang="css">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">article&lt;/span> &lt;span style="color:#f92672">p&lt;/span> {&lt;span style="color:#75715e">/* 选择 article 下的所有 p 元素 */&lt;/span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">article&lt;/span> &lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#f92672">p&lt;/span> {&lt;span style="color:#75715e">/* 选择 article 下的直接子元素 p 元素, 不会选中嵌套的 p 元素 */&lt;/span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">h1&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#f92672">p&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">/* 选择 h1 元素的下一个兄弟元素 p 元素, 会选中紧接着 h1 的 p 元素 */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">&amp;lt;article&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">&amp;lt;h1&amp;gt;A&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">heading&amp;lt;/h1&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">&amp;lt;p&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">Veggies&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">es&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">bonus&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">vobis,&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">proinde&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">vos&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">postulo&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">essum&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">magis&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">kohlrabi&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">welsh&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">onion&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">daikon&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">amaranth&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">tatsoi&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">tomatillo&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">melon&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">azuki&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">bean&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">garlic.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">&amp;lt;/p&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">&amp;lt;p&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">Gumbo&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">beet&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">greens&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">corn&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">soko&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">endive&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">gumbo&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">gourd.&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">Parsley&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">shallot&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">courgette&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">tatsoi&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">pea&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">sprouts&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">fava&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">bean&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">collard&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">greens&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">dandelion&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">okra&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">wakame&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">tomato.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">Dandelion&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">cucumber&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">earthnut&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">pea&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">peanut&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">soko&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">zucchini.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">&amp;lt;/p&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">&amp;lt;/article&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">article&lt;/span> &lt;span style="color:#f92672">~&lt;/span> &lt;span style="color:#f92672">p&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">/* 选择 article 元素之后的所有兄弟元素 p 元素, 会选中下方所有的 p 元素 */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">&amp;lt;article&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">&amp;lt;h1&amp;gt;A&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">heading&amp;lt;/h1&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">&amp;lt;p&amp;gt;I&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">am&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">a&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">paragraph.&amp;lt;/p&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">&amp;lt;div&amp;gt;I&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">am&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">a&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">div&amp;lt;/div&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">&amp;lt;p&amp;gt;I&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">am&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">another&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">paragraph.&amp;lt;/p&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">&amp;lt;/article&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="伪类和伪元素">伪类和伪元素&lt;/h3>
&lt;h4 id="常用伪类">常用伪类&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-css" data-lang="css">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">article&lt;/span> &lt;span style="color:#f92672">p&lt;/span>:&lt;span style="color:#a6e22e">first-child&lt;/span> { &lt;span style="color:#75715e">/* 选择 article 下第一个 p 元素 */&lt;/span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">article&lt;/span> &lt;span style="color:#f92672">p&lt;/span>:&lt;span style="color:#a6e22e">last-child&lt;/span> { &lt;span style="color:#75715e">/* 选择 article 下最后一个 p 元素 */&lt;/span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">article&lt;/span> &lt;span style="color:#f92672">p&lt;/span>:&lt;span style="color:#a6e22e">nth-child&lt;/span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#f92672">2&lt;/span>&lt;span style="color:#f92672">)&lt;/span> { &lt;span style="color:#75715e">/* 选择 article 下第二个 p 元素 */&lt;/span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="伪元素">伪元素&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-css" data-lang="css">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">article&lt;/span> &lt;span style="color:#f92672">p&lt;/span>:&lt;span style="color:#a6e22e">first-child&lt;/span>::&lt;span style="color:#a6e22e">first-line&lt;/span> {&lt;span style="color:#75715e">/* 选择 article 下的第一个 p 元素的第一行 */&lt;/span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">p&lt;/span>::&lt;span style="color:#a6e22e">first-line&lt;/span> {&lt;span style="color:#75715e">/* 选择 p 元素的第一行 */&lt;/span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">p&lt;/span>::&lt;span style="color:#a6e22e">first-letter&lt;/span> { &lt;span style="color:#75715e">/* 选择 p 元素的第一个字符 */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">font-size&lt;/span>: &lt;span style="color:#ae81ff">200&lt;/span>&lt;span style="color:#66d9ef">%&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">color&lt;/span>: &lt;span style="color:#66d9ef">red&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">p&lt;/span>::&lt;span style="color:#a6e22e">before&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">content&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;前缀&amp;#34;&lt;/span>; &lt;span style="color:#75715e">/* 在 p 元素前插入内容 */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">p&lt;/span>::&lt;span style="color:#a6e22e">after&lt;/span> { &lt;span style="color:#75715e">/* 在 p 元素后插入内容 */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">content&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;后缀&amp;#34;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="盒模型">盒模型&lt;/h3>
&lt;p>用display属性来控制盒子的显示类型。&lt;/p></description></item><item><title>unbound 配置文件中文文档</title><link>https://tnzzz.top/posts/%E6%96%87%E6%A1%A3/unbound/</link><pubDate>Thu, 22 May 2025 12:17:40 +0800</pubDate><guid>https://tnzzz.top/posts/%E6%96%87%E6%A1%A3/unbound/</guid><description>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-plaintext" data-lang="plaintext">&lt;span style="display:flex;">&lt;span>unbound.conf(5) unbound 1.23.0 unbound.conf(5)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>NAME
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> unbound.conf - Unbound 配置文件.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>SYNOPSIS
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> unbound.conf
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>DESCRIPTION
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> unbound.conf 用于配置 unbound(8)。文件格式包含属性和值。某些属性内部包含其他属性。表示法为：attribute: value。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 注释以 # 开头，并持续到行尾。空行和行首的空白将被忽略。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 可以使用 unbound-checkconf(8) 工具在使用前检查 unbound.conf。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>EXAMPLE
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 下面显示了一个示例配置文件。将其复制到 /etc/unbound/unbound.conf 并使用以下命令启动服务器：
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> $ unbound -c /etc/unbound/unbound.conf
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 大多数设置都是默认值。使用以下命令停止服务器：
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> $ kill `cat /etc/unbound/unbound.pid`
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 下面是一个最小的配置文件。源代码发行版包含一个带有所有选项的 extensive example.conf 文件。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> # unbound.conf(5) unbound(8) 的配置文件。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> server:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> directory: &amp;#34;/etc/unbound&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> username: unbound
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> # 确保 unbound 可以从 chroot 内部访问熵。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> # 例如在 Linux 上使用这些命令（在 BSD 上，使用 devfs(8)）：
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> # mount --bind -n /dev/urandom /etc/unbound/dev/urandom
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> # 并且 mount --bind -n /dev/log /etc/unbound/dev/log
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> chroot: &amp;#34;/etc/unbound&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> # logfile: &amp;#34;/etc/unbound/unbound.log&amp;#34; #取消注释以使用日志文件。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> pidfile: &amp;#34;/etc/unbound/unbound.pid&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> # verbosity: 1 # 取消注释并增加以获取更多日志记录。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> # 监听所有接口，应答来自本地子网的查询。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> interface: 0.0.0.0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> interface: ::0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> access-control: 10.0.0.0/8 allow
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> access-control: 2001:DB8::/64 allow
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FILE FORMAT
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 关键字之间必须有空格。属性关键字以冒号“:”结尾。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 属性后面跟着一个值，或者包含它的属性（在这种情况下它被称为一个子句）。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 子句可以在整个文件（或包含的文件）中重复，以将属性分组到同一个子句下。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 可以使用 include: 指令包含文件。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 它可以出现在任何地方，接受单个文件名作为参数。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 处理将继续，就好像被包含文件中的文本被复制到配置文件的那个位置一样。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 如果同时使用 chroot，则使用被包含文件的完整路径名有效；
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 如果守护进程启动的目录等于其 chroot/工作目录，或者在 include 语句之前用 directory: dir 指定了工作目录，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 则被包含文件的相对路径名也有效。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 可以使用通配符包含多个文件，请参阅 glob(7)。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 对于更结构化的包含选项，可以使用 include-toplevel: 指令。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 这将关闭当前活动的任何子句（如果有），并强制在被包含的文件中以及此指令之后使用子句。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Server Options
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 这些选项属于服务器配置中的`server:`部分。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> verbosity: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 详细程度等级，0级表示无详细信息，仅显示错误。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 1级提供操作信息。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 2级则包含详细的操作信息，每条查询都有简短说明。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 3级深入到查询层面，逐条输出查询信息。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 4级揭示算法层面的信息。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 5级记录缓存未命中时的客户端标识。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 默认级别为1。详细程度也可通过命令行提升，详见unbound(8)手册。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> statistics-interval: &amp;lt;seconds&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 打印统计信息到日志的间隔秒数，针对每个线程。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 设置为0或&amp;#34;&amp;#34;以禁用此功能，默认情况下是禁用的。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 直方图统计信息仅在统计间隔期间有回复发送时才会打印，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 而请求列表统计信息则会在每个间隔打印（但可能为0）。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 这是因为中位数计算需要存在数据。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> statistics-cumulative: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 若启用此选项，统计信息将自Unbound启动起累计，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 且在记录统计后不清除统计计数器。默认设置为`no`。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> extended-statistics: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 若启用，将从unbound-control(8)打印扩展统计信息。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 默认设置为`no`，因为跟踪更多统计信息需要时间。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 计数器在unbound-control(8)中列出。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> statistics-inhibit-zero: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 若启用，值为0的选定扩展统计信息将被抑制
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 不会在unbound-control(8)中打印。这些包括
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 查询类型、查询类、查询操作码、回答rcodes（除了
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> NOERROR、FORMERR、SERVFAIL、NXDOMAIN、NOTIMPL、REFUSED）和RPZ
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 操作。默认设置为`yes`。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> num-threads: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 创建用于服务客户端的线程数量。若无需多线程，请设置为1。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> port: &amp;lt;port number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 服务器响应查询的端口号，默认为53。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> interface: &amp;lt;ip address or interface name [@port]&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 用于连接网络的接口。此接口用于监听来自客户端的查询，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 并从中向客户端提供响应。可多次指定以在多个接口上工作。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 若未指定，则默认监听本地主机。若使用接口名称而非IP地址，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 则采用该接口上的所有IP地址列表。在重新加载（kill -HUP）时，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 接口不会变更，仅重启时生效。可通过@端口号（接口与端口号间无空格）指定端口，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 未指定时则使用默认端口（来自port设置）。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ip-address: &amp;lt;ip address or interface name [@port]&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 与 interface 相同：（以便于与nsd.conf兼容）。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> interface-automatic: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 监听所有（当前及未来）接口上的所有地址，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 检测UDP查询的源接口并将其复制到回复中。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 这与ip-transparent非常相似，但此选项服务于所有接口，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 而使用ip-transparent时，您可以选择Unbound在哪些（未来）接口上提供服务。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 此功能尚处于实验阶段，需要您的操作系统支持特定的套接字选项。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 默认值为`no`。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> interface-automatic-ports: &amp;lt;string&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 列出interface-automatic监听的端口号。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 若为空，则默认监听默认端口。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 端口号在字符串中以空格分隔，默认值为&amp;#34;&amp;#34;。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 此设置可用于让interface-automatic处理接口，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 并通过在列表中包含正常端口号来监听该端口，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 同时也可通过将HTTPS或DNS over TLS的端口号加入列表，实现对它们的监听。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> outgoing-interface: &amp;lt;ip address or ip6 netblock&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 用于连接网络的接口。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 此接口用于向权威服务器发送查询并接收其回复。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 可多次指定以在多个接口上工作。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 若未指定，则默认使用所有接口。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 您可以在`interface:`和`outgoing-interface:`行中指定相同的接口，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 这些接口将同时用于两种目的。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 为防止欺骗，出站查询会通过随机选择的出站接口发送。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 若指定的是IPv6网段而非单个IPv6地址，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 则外发的UDP查询将采用从该网段中随机选取的源地址，以应对欺骗攻击。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 此功能要求该IPv6网段需路由至运行Unbound的主机，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 并且操作系统需支持非特权非本地绑定（目前仅Linux支持）。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 可通过多个`outgoing-interface:`选项指定多个网段，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 但切勿同时指定单个IPv6地址与IPv6网段，否则随机化机制将失效。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 建议结合`prefer-ip6: yes`使用，以提高选择IPv6域名服务器进行查询的可能性。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 在Linux系统上，需执行以下两条命令，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 以便利用`freebind`套接字选项接收指定IPv6网段的流量：
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> `ip -6 addr add 你的网段/64 dev lo &amp;amp;&amp;amp; ip -6 route add local 你的网段/64 dev lo`。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> outgoing-range: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 要打开的端口数量。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 每个线程可打开的文件描述符数量至少为1，默认值取决于编译选项。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 较大的数值需要操作系统提供额外资源。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 为了获得最佳性能，建议设置一个非常大的值，并利用libevent来实现这一目标。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> outgoing-port-permit: &amp;lt;port number or range&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 允许 Unbound 打开此端口或端口范围，用于发送查询。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 允许更多的出站端口能增强抵御欺骗攻击的能力。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 请确保这些端口不被其他守护进程占用。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 默认情况下，仅使用 IANA 未分配的 1024 以上端口。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 请提供一个端口号或“低-高”形式的范围，中间不要有空格。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> `outgoing-port-permit` 和 `outgoing-port-avoid` 语句按照配置文件的顺序逐行处理，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 将允许的端口加入并从允许的端口集合中减去避免的端口。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 处理开始时，允许的端口集合包含非 IANA 分配的、高于 1024 的端口。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> outgoing-port-avoid: &amp;lt;port number or range&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 不允许Unbound打开此端口或端口范围用于发送查询。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 使用此选项可确保Unbound不会占用其他守护进程所需的端口。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 该端口在所有出站接口上均被避开，包括IPv4和IPv6。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 默认情况下，仅使用IANA未分配的1024以上端口。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 请提供一个端口号或“低-高”形式的范围，中间不要有空格。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> outgoing-num-tcp: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 为每个线程分配的外发TCP缓冲区数量。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 默认值为10。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 若设置为0，或当do-tcp为“否”时，将不会向权威服务器发送TCP查询。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 对于较大规模的部署，建议适当增加此值。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> incoming-num-tcp: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 为每个线程分配的入站TCP缓冲区数量。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 默认值为10。若设置为0，或当do-tcp为“否”时，将不会接受来自客户端的TCP查询。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 对于较大规模的部署，建议适当增加此值。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> edns-buffer-size: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 作为EDNS重组缓冲区大小通告的字节数。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 此值用于通过UDP向对等方发送的数据报中。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 实际缓冲区大小由msg-buffer-size决定（适用于TCP和UDP）。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 请勿设置高于该值。默认值为1232，这是2020年DNS标志日的推荐值。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 设置为512可以规避最严格的路径MTU问题，但被视为极端做法，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 因为由此产生的TCP回退量过大（可能也适用于此解析器，建议调整出站TCP数量）。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> max-udp-size: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 最大UDP响应大小（不适用于TCP响应）。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 65536表示禁用UDP响应大小上限，始终采用客户端的选择。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 建议值范围为512至4096。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 默认值为1232，该默认值与edns-buffer-size的默认设置相同。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> stream-wait-size: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 用于等待流缓冲区的最大字节数。默认值为4兆字节。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 纯数字表示字节，可附加&amp;#39;k&amp;#39;、&amp;#39;m&amp;#39;或&amp;#39;g&amp;#39;分别表示千字节、兆字节或吉字节（1兆字节为1024*1024字节）。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 由于TCP和TLS流会排队多个结果，这些缓冲区占用的内存总量不会超过此数值，否则将丢弃响应。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 此设置用于管理服务器在高负载下的总内存使用量，同时每个连接上可排队的请求数量也受到限制，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 额外的请求将在TCP缓冲区中等待。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> msg-buffer-size: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 消息缓冲区的字节大小，默认设置为65552字节，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 足以容纳64Kb的数据包，这是DNS消息的最大尺寸。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 任何超过此大小的消息都无法发送或接收。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 为了节省内存，可以减小此值，但某些对DNS数据的请求，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 如针对大型资源记录的查询，可能会导致向客户端返回SERVFAIL（服务失败）响应。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> msg-cache-size: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 消息缓存的大小字节数，默认值为4兆字节。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 纯数字表示字节数，可附加&amp;#39;k&amp;#39;、&amp;#39;m&amp;#39;或&amp;#39;g&amp;#39;分别表示千字节、兆字节或吉字节（1兆字节等于1024*1024字节）。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> msg-cache-slabs: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 消息缓存中的分片数量。分片通过减少线程间的锁争用来提升性能。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 必须设置为2的幂次方。将其设置为接近CPU核心数的值是一个合理的估计。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> num-queries-per-thread: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 每个线程同时处理的查询数量。若需服务的查询超出此限，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 且无法通过竞争超时机制（参见jostle-timeout）移除已有查询，则新查询将被丢弃。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 此举促使客户端在超时后重新发送请求，为服务器留出时间处理现有查询。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 默认值依据编译选项而定，通常为512或1024。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> jostle-timeout: &amp;lt;msec&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 当服务器非常繁忙时使用的超时设置。该值通常设定为能确保一次往返权威服务器的时长。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 若查询请求过多，则允许50%的查询完成执行，而另外50%若已超出其允许时间，则会被新到达的查询替换。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 此机制旨在防止因慢查询或高查询率导致的服务拒绝。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 默认值为200毫秒。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 其效果是，对于耗时较长的查询，其每秒查询率（qps）大约为（每线程查询数/2）除以（此类长查询的平均时间）。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 而对于短查询，其qps可达到（每线程查询数/2）除以（以整秒计的jostletimeout），
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 默认情况下约为（1024/2）* 5 = 2560 qps每线程。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> delay-close: &amp;lt;msec&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 在UDP端口因超时被关闭前，额外延迟时间以毫秒计。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 默认值为0，即不启用此功能。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 此设置旨在防止来自上游（递归）服务器的延迟响应数据包撞击已关闭的端口，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 从而触发各种关闭端口的计数器，例如1500毫秒。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 当发生超时时，系统需要额外的套接字来检查数据包的ID和远程IP，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 不符合条件的数据包将被计入无效数据包计数器。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> udp-connect: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 为UDP套接字执行连接操作，以减轻ICMP侧信道泄露风险。默认设置为`yes`。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> unknown-server-time-limit: &amp;lt;msec&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 等待未知服务器响应的毫秒时间。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 若您处于较慢的卫星链路环境下，可适当增加此值，例如设为1128毫秒。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 这样能避免因超时导致每次初始查询都需要重新发起。默认值为376毫秒。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> discard-timeout: &amp;lt;msec&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 递归请求被丢弃的等待时间，以毫秒计。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 此举旨在防止大量回复堆积。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 这些请求不会收到回复，工作项将继续递归。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 如果启用了服务过期客户端超时，建议此值稍大一些。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 建议值为1900毫秒。值为0则禁用此功能。默认值为1900毫秒。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> wait-limit: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 每个IP地址可等待递归回复的数量。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 这为每个IP地址设置了等待递归回复的速率限制，防止大量查询积压等待返回至单一目的地。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 若值为0，则禁用等待限制。默认值为1000。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> wait-limit-cookie: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 对于发送带有有效DNS Cookie查询的IP地址，可等待递归处理的回复数量。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 由于Cookie验证了客户端地址，此限制可适当提高，默认值为10000。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> wait-limit-netblock: &amp;lt;netblock&amp;gt; &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 网段等待限制。若未指定，则采用默认的等待限制值。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 系统会根据最具体的网段来确定限制，这对于为特定组、个人或服务器覆盖默认设置非常有用。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 值为-1时，表示该网段无等待限制。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 默认情况下，回环地址的等待限制网段为-1，即不受限，因为它与网络其他部分隔离，防止伪造数据包。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 回环地址127.0.0.0/8和::1/128默认设置为-1。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> wait-limit-cookie-netblock: &amp;lt;netblock&amp;gt; &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 当查询带有DNS cookie时，针对网段的等待限制。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 若未指定，则采用wait-limit-cookie的值。值为-1时，该网段无等待限制。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 默认情况下，回环地址127.0.0.0/8和::1/128的等待限制设置为-1。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> so-rcvbuf: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 如果非零，则设置SO_RCVBUF套接字选项，以在UDP端口53的入站查询上获取更多缓冲区空间。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 这样，在繁忙服务器上的短暂流量高峰不会导致丢包（参见netstat -su中的计数器）。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 默认值为0（使用系统值）。否则，指定请求的字节数，在繁忙服务器上可尝试“4m”。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 操作系统会设定一个上限，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 在Linux上，Unbound需要root权限才能突破此限制，或者管理员可以使用sysctl net.core.rmem_max进行调整。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 在BSD系统中，需修改/etc/sysctl.conf中的kern.ipc.maxsockbuf。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 在OpenBSD上，需更改头文件并重新编译内核。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 在Solaris上，使用ndd -set /dev/udp udp_max_buf 8388608进行设置。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> so-sndbuf: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 若非0，则设置SO_SNDBUF套接字选项，以在UDP端口53的对外查询中获取更多缓冲区空间。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 这对于非常繁忙的服务器而言，能有效应对应答流量的突发高峰，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 否则可能会记录“发送：资源暂时不可用”的错误，且通过netstat -su也能观察到缓冲区溢出的情况。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 默认值为0（使用系统设定值）。指定请求的字节数，在极其繁忙的服务器上可尝试“4m”。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 操作系统会设定一个上限，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 在Linux上，Unbound需要root权限才能突破此限制，或者管理员可以使用sysctl net.core.wmem_max进行调整。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 在BSD和Solaris系统中，更改方式与so-rcvbuf类似。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> so-reuseport: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 若选择`yes`，则为每个线程开启专用的监听套接字以接收查询，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 并尝试在每个套接字上设置SO_REUSEPORT选项。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 此举可能更均匀地分配查询至各线程。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 默认设置为`yes`。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 在Linux系统中，此功能支持内核版本&amp;gt;=3.9。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 其他系统如FreeBSD、OSX也可能适用。您可在任何平台及内核上启用此功能，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 系统将尝试打开端口并在编译时若该选项可用则传递之；
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 若成功则使用，失败则静默继续（除非详细级别为3），不采用该选项。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 在极高负载情况下，关闭此选项可能更利于查询的均匀分配，此现象在Linux系统（4.4.x版本）中有报告。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ip-transparent: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 如果是，则在Unbound监听入站流量的套接字上使用IP_TRANSPARENT套接字选项。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 默认情况下为`no`。此选项允许您绑定到非本地接口，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 例如，对于将来会存在但目前不存在的IP地址，配合主机故障转移配置使用。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 这与interface-automatic非常相似，但后者服务于所有接口，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 而通过此选项，您可以选择Unbound将在哪些（未来）接口上提供服务。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 在某些系统上，此选项需要Unbound以root权限启动。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 在FreeBSD系统上，该选项使用IP_BINDANY，在OpenBSD系统上则使用SO_BINDANY。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ip-freebind: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 如果是，则在监听未绑定地址的套接字上使用IP_FREEBIND选项。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 默认情况下为`no`。此选项允许您绑定到非本地或不存在的IP地址，例如当网络接口或IP地址不可用时。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 该选项仅存在于Linux系统中，同时也可使用类似的ip-transparent选项。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ip-dscp: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 传出IP数据包头中区分服务字段（DS）内的区分服务代码点（DSCP）值。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 该字段取代了过时的IPv4服务类型字段及IPv6流量类别字段。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rrset-cache-size: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> RRset缓存的大小以字节数计，默认值为4兆字节。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 纯数字表示字节，可附加&amp;#39;k&amp;#39;、&amp;#39;m&amp;#39;或&amp;#39;g&amp;#39;分别表示千字节、兆字节或吉字节（1兆字节等于1024*1024字节）。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rrset-cache-slabs: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> RRset缓存中的slab数量。slab通过减少线程间的锁争用来提升性能。必须设置为2的幂次方。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cache-max-ttl: &amp;lt;seconds&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> RRsets和消息在缓存中的最大生存时间（TTL），默认值为86400秒（1天）。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 当TTL到期时，缓存项即视为过期。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 可通过设置更低的TTL值，强制解析器频繁查询数据，而不依赖（过大的）TTL值。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 下游客户端同样会看到这一较低的TTL设置。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cache-min-ttl: &amp;lt;seconds&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> RRsets和消息在缓存中的最小生存时间。默认值为0。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 若启用最小值，数据将被缓存超过域名所有者预期的时间，从而减少查询次数以查找数据。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 设置为零确保缓存中的数据符合域名所有者的意图，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 而较高的值，尤其是超过一小时左右，可能导致缓存数据与实际数据不再匹配，从而引发问题。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cache-max-negative-ttl: &amp;lt;seconds&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 负响应的生存时间上限，这些响应在授权部分包含一个时间受限的SOA记录。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 默认值为3600秒。此设置适用于nxdomain（域名不存在）和nodata（无数据）类型的应答。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cache-min-negative-ttl: &amp;lt;seconds&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 负面响应的最小生存时间，这些响应在权威部分包含一个有时间限制的SOA记录。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 默认值为0（禁用）。如果此功能被禁用且配置了cache-min-ttl，则后者将生效。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 在这种情况下，您可以将其设置为1以遵循上游的TTL。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 此设置适用于nxdomain和nodata类型的应答。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> infra-host-ttl: &amp;lt;seconds&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 主机缓存中条目的生存时间。该缓存包含往返时间、故障状态及EDNS支持信息。默认值为900。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> infra-cache-slabs: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 基础设施缓存中的slab数量。slab通过减少线程间的锁争用来提升性能，必须设置为2的幂次方。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> infra-cache-numhosts: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 缓存信息的主机数量，默认值为10000。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> infra-cache-min-rtt: &amp;lt;msec&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 基础设施缓存中动态重传超时计算的下限值，默认设置为50毫秒。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 若使用需更长时间进行递归名称解析的转发器，请适当增加此值。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> infra-cache-max-rtt: &amp;lt;msec&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 基础设施缓存中动态重传超时计算的上限值，默认设置为2分钟。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> infra-keep-probing: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 若启用此功能，服务器将持续对已宕机的主机进行探测，采用一次一探的模式。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 默认设置为`no`。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 对于已宕机的主机，例如在单次探测期间未响应者，将被标记为宕机状态，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 并可能需要等待 infra-host-ttl 时间后才会再次被探测。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> define-tag: &amp;lt;&amp;#34;list of tags&amp;#34;&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 定义可与本地区域（local-zone）和访问控制（access-control）一同使用的标签。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 将列表用引号（&amp;#34;&amp;#34;）括起，并在标签之间留出空格。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> do-ip4: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 启用或禁用是否响应或发起ip4查询。默认设置为`yes`。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> do-ip6: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 启用或禁用是否响应或发起IPv6查询。默认设置为`yes`。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 若禁用，则不会在IPv6上响应查询，也不会通过IPv6向互联网域名服务器发送查询。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 此选项可用于关闭IPv6传输以发送DNS流量，但不会影响DNS流量的内容，其中可能包含IPv4和IPv6地址。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> prefer-ip4: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 若启用此选项，将优先使用IPv4传输向互联网域名服务器发送DNS查询。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 默认设置为`no`。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 当服务器所在的IPv6网段（整个/64）并非由单一运营商所有，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 且该网段/64的信誉存在问题时，此选项尤为有用，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 此时使用IPv4可利用上游服务器已有的IPv4过滤机制。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> prefer-ip6: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 若启用，将优先使用IPv6传输向互联网域名服务器发送DNS查询。默认设置为否。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> do-udp: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 启用或禁用是否响应或发起UDP查询。默认设置为`yes`。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> do-tcp: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 启用或禁用TCP查询的应答与发起，默认设置为`yes`。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tcp-mss: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 服务器响应查询时，TCP套接字的最大段大小（MSS）。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 设置低于以太网常见MSS的值（例如1220）可解决路径MTU问题。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 需注意，并非所有平台都支持通过套接字选项设置MSS（TCP_MAXSEG）。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 默认情况下，MSS由接口MTU及服务器与客户端之间的协商决定，采用系统默认值。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> outgoing-tcp-mss: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> TCP套接字用于发出查询（从Unbound到其他服务器）的最大段大小（MSS）。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 设置低于以太网常见MSS的值（例如1220）可解决路径MTU问题。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 需要注意的是，并非所有平台都支持通过套接字选项设置MSS（TCP_MAXSEG）。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 默认情况下，MSS由接口MTU及Unbound与其他服务器之间的协商决定，采用系统默认值。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tcp-idle-timeout: &amp;lt;msec&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Unbound在TCP连接上等待查询的时长，若超时则关闭连接。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 此选项默认值为30000毫秒。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 当空闲的入站TCP缓冲区数量低于配置总数的50%时，该选项值会逐步降低：
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 首先降至配置值的1%，若空闲缓冲区进一步低于总数的35%，则降至配置值的0.2%，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 最终若空闲缓冲区低于总数的20%，则降至0。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 无论采用何种选项值，最小超时时间均保持为200毫秒。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 若启用了edns-tcp-keepalive，此设置将被edns-tcp-keepalive-timeout覆盖。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tcp-reuse-timeout: &amp;lt;msec&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Unbound 期间将保持与权威服务器的 TCP 持久连接开启。此选项默认值为 60000 毫秒。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> max-reuse-tcp-queries: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 在持久TCP连接上可发送的最大查询数量，此选项默认设置为200次查询。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tcp-auth-query-timeout: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> TCP查询认证服务器的超时时间，以毫秒为单位。此选项默认值为3000毫秒。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> edns-tcp-keepalive: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 启用或禁用EDNS TCP保持连接功能。默认设置为`no`。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> edns-tcp-keepalive-timeout: &amp;lt;msec&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 当启用edns-tcp-keepalive时，此设置将覆盖tcp-idle-timeout。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 若客户端支持EDNS TCP保持连接选项，Unbound会向客户端发送超时值，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 以促使客户端在服务器超时前关闭连接。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 此选项默认值为120000毫秒。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> sock-queue-timeout: &amp;lt;sec&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 在套接字缓冲区中等待过久的UDP查询可被丢弃。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 默认值为0，即禁用此功能。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 时间以秒为单位设置，3秒可能是一个合适的值，用于忽略那些客户端可能已不再需要回复的旧查询。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 这种情况可能发生在主机暂时无法处理查询时，例如Unbound未运行，之后又重新启用。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 该功能利用了时间戳套接字选项。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tcp-upstream: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 启用或禁用上游查询是否仅使用TCP进行传输。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 默认设置为`no`。在隧道场景中非常有用。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 如果设置为否，您可以通过分别使用forward-tcp-upstream或stub-tcp-upstream，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 仅为选定的转发区域或存根区域指定TCP传输。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> udp-upstream-without-downstream: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 即使do-udp设置为否，也启用UDP上行。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 默认情况下为否，此设置不会改变任何现有配置。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 对于TLS服务提供商而言，若希望禁止UDP下行但需通过UDP获取上行数据，此功能尤为实用。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tls-upstream: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 启用或禁用上游查询是否仅使用TLS进行传输。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 默认值为`no`。在隧道场景中非常有用。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> TLS包含以TCP线格式传输的纯DNS数据。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 另一台服务器必须支持此功能（参见tls-service-key）。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 如果启用此选项，还需配置tls-cert-bundle或使用tls-win-cert、tls-system-cert加载CA证书，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 否则连接无法进行身份验证。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 此选项为所有上游查询启用TLS，但如果不设置此选项，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 可以通过forward-tls-upstream为特定转发区域单独配置TLS，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 同样适用于stub-tls-upstream。如果启用了tls-upstream选项，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 则对所有转发和存根区域生效，此时forward-tls-upstream和stub-tls-upstream选项将被忽略，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 视为已设置为`yes`。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ssl-upstream: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tls-upstream 的替代语法。若配置文件中两者均存在，则以最后一项为准。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tls-service-key: &amp;lt;file&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 若启用此功能，服务器将在通过tls-port或https-port隐式或显式标记的TCP端口上
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 提供DNS-over-TLS或DNS-over-HTTPS服务。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 配置文件必须包含TLS会话的私钥，公钥证书则位于tls-service-pem文件中，且若指定了tls-service-key，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 也必须同时指定。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 默认值为空，即关闭状态。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 启用或禁用此服务需重启服务器（仅重载配置不够），因为密钥读取需在持有root权限及chroot（如有）之前进行。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 通过tls-port:和https-port:隐式或显式启用的端口不提供常规的DNS TCP服务。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Unbound需编译时包含libnghttp2以支持DNS-over-HTTPS。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ssl-service-key: &amp;lt;file&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tls-service-key 的替代语法。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tls-service-pem: &amp;lt;file&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 用于TLS服务的公钥证书pem文件。默认值为&amp;#34;&amp;#34;，表示关闭。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ssl-service-pem: &amp;lt;file&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tls-service-pem 的替代语法。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tls-port: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 提供TCP TLS服务的端口号，默认为853，只有配置了该端口号作为@number的接口才能获得TLS服务。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ssl-port: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tls端口的替代语法。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tls-cert-bundle: &amp;lt;file&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 若为空或&amp;#34;&amp;#34;，则不使用任何文件。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 请将其设置为证书包文件，例如&amp;#34;/etc/pki/tls/certs/ca-bundle.crt&amp;#34;。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 这些证书用于验证与外部对等方建立的连接，如认证区域URL及DNS over TLS连接。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 该文件在启动时、权限降级和chroot之前被读取。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ssl-cert-bundle: &amp;lt;file&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tls-cert-bundle 的替代语法。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tls-win-cert: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 将系统证书添加到认证所需的证书包中。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 若无证书包，则仅使用这些证书。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 默认情况下不启用此功能。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 在Windows系统上，此选项会使用证书存储中的证书。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 在其他系统上，请使用`tls-cert-bundle`选项来启用系统证书。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tls-system-cert: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 此设置与tls-win-cert设置相同，只是名称不同，因为它并非专为Windows设计。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tls-additional-port: &amp;lt;portnr&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 将端口号列为tls-additional-port，并在定义接口时（例如使用@port后缀），
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 作为此端口号，它们将提供DNS over TLS服务。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 可列出多个，每个端口号单独一行声明。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tls-session-ticket-keys: &amp;lt;file&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 若非空，则列出包含80字节随机内容的文件，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 这些文件用于为使用Unbound服务器的客户端执行TLS会话恢复。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 这些文件内含有TLS会话票据的密钥。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 首个密钥用于加密和解密TLS会话票据，其余密钥仅用于解密。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 通过生成新的首个文件，并在其后暂时保留旧文件以允许解密，可以实现密钥的轮换。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 待客户端不再使用旧密钥后，即可移除旧密钥。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 创建此类文件的一种方法是使用命令`dd if=/dev/random bs=1 count=80 of=ticket.dat`。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 若需创建第二个密钥，其前16字节应与旧密钥不同，这部分用于标识密钥。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 随后是32字节的随机数据作为AES密钥，再接着32字节的随机数据作为HMAC密钥。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tls-ciphers: &amp;lt;string with cipher list&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 设置服务TLS时允许的加密套件列表。使用&amp;#34;&amp;#34;表示默认值，且此为默认设置。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tls-ciphersuites: &amp;lt;string with ciphersuites list&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 设置服务TLS时允许的加密套件列表，适用于较新的TLS 1.3连接。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 使用&amp;#34;&amp;#34;表示采用默认值，这也是默认设置。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> pad-responses: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 若启用此功能，包含EDNS填充选项的TLS服务查询将导致响应被填充至最接近pad-responses-block-size指定大小的倍数。默认设置为`yes`。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> pad-responses-block-size: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 用于填充通过TLS服务的响应的块大小。仅对填充查询的响应进行填充。默认值为468。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> pad-queries: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 若启用此功能，所有通过TLS上游发送的查询将被填充至最接近pad-queries-block-size指定大小的倍数。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 默认设置为`yes`。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> pad-queries-block-size: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 用于填充通过TLS上游发送的查询的块大小，默认值为128。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tls-use-sni: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 启用或禁用在TLS连接上发送SNI扩展。默认值为`yes`。更改此值需重新加载配置。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> https-port: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 提供DNS-over-HTTPS服务的端口号，默认443，只有配置了该端口号作为@number的接口才能获得HTTPS服务。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> http-endpoint: &amp;lt;endpoint string&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 提供DNS-over-HTTPS服务的HTTP端点，默认为&amp;#34;/dns-query&amp;#34;。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> http-max-streams: &amp;lt;number of streams&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 用于DNS-over-HTTPS连接的HTTP/2 SETTINGS帧中SETTINGS_MAX_CONCURRENT_STREAMS参数的数值，默认设置为100。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> http-query-buffer-size: &amp;lt;size in bytes&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 所有HTTP/2查询缓冲区合并使用的最大字节数。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 这些缓冲区包含等待请求流完成的（部分）DNS查询。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 对于超出此限制的流，将发送RST_STREAM帧。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 默认值为4兆字节。纯数字表示字节，可附加&amp;#39;k&amp;#39;、&amp;#39;m&amp;#39;或&amp;#39;g&amp;#39;分别表示千字节、兆字节或吉字节（1兆字节等于1024*1024字节）。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> http-response-buffer-size: &amp;lt;size in bytes&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 所有HTTP/2响应缓冲区合并使用的最大字节数。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 这些缓冲区包含等待写回客户端的DNS响应。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 对于超出此限制的流，将发送RST_STREAM帧。默认值为4兆字节。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 纯数字表示字节，可附加&amp;#39;k&amp;#39;、&amp;#39;m&amp;#39;或&amp;#39;g&amp;#39;分别表示千字节、兆字节或吉字节（1兆字节等于1024*1024字节）。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> http-nodelay: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 在用于提供DNS-over-HTTPS服务的套接字上设置TCP_NODELAY选项。若该选项不可用，则忽略。默认值为`yes`。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> http-notls-downstream: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 禁用下游DNS-over-HTTP连接的TLS使用。适用于本地后端服务器。默认设置为`no`。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> proxy-protocol-port: &amp;lt;portnr&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 将端口号列为代理协议端口（proxy-protocol-port），
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 并在定义接口时，如使用@port后缀，指定为此端口号，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 这些接口将支持并预期接收PROXYv2协议。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 在此情况下，代理地址仅用于网络通信及初始的访问控制列表（ACL，检查代理本身是否被配置拒绝）。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 随后，被代理的地址（如有）将作为真实客户端地址，
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 并在日志记录、ACL、DNSTAP、RPZ及IP限速等适用场景中使用。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> PROXYv2协议支持UDP和TCP/TLS监听接口，但在DoH、DoQ或DNSCrypt监听接口上不支持PROXYv2。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 可列出多个端口，每个端口单独一行声明。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> quic-port: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The port number on which to provide DNS-over-QUIC service, de-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fault 853, only interfaces configured with that port number as
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> @number get the QUIC service. The interface uses QUIC for the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> UDP traffic on that port number.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> quic-size: &amp;lt;size in bytes&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Maximum number of bytes for all QUIC buffers and data combined.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Default is 8 megabytes. A plain number is in bytes, append &amp;#39;k&amp;#39;,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;#39;m&amp;#39; or &amp;#39;g&amp;#39; for kilobytes, megabytes or gigabytes (1024*1024
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> bytes in a megabyte). New connections receive connection refused
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> when the limit is exceeded. New streams are reset when the limit
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> is exceeded.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> use-systemd: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Enable or disable systemd socket activation. Default is no.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> do-daemonize: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Enable or disable whether the Unbound server forks into the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> background as a daemon. Set the value to no when Unbound runs
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> as systemd service. Default is yes.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tcp-connection-limit: &amp;lt;IP netblock&amp;gt; &amp;lt;limit&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Allow up to limit simultaneous TCP connections from the given
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> netblock. When at the limit, further connections are accepted
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> but closed immediately. This option is experimental at this
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> time.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> access-control: &amp;lt;IP netblock&amp;gt; &amp;lt;action&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Specify treatment of incoming queries from their originating IP
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> address. Queries can be allowed to have access to this server
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> that gives DNS answers, or refused, with other actions possible.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The IP address range can be specified as a netblock, it is pos-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> sible to give the statement several times in order to specify
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the treatment of different netblocks.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The netblock is given as an IP4 or IP6 address with /size ap-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> pended for a classless network block. The action can be deny,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> refuse, allow, allow_setrd, allow_snoop, allow_cookie,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> deny_non_local or refuse_non_local. The most specific netblock
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> match is used, if none match refuse is used. The order of the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> access-control statements therefore does not matter.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The deny action stops queries from hosts from that netblock.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The refuse action stops queries too, but sends a DNS rcode RE-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> FUSED error message back.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The allow action gives access to clients from that netblock. It
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> gives only access for recursion clients (which is what almost
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> all clients need). Nonrecursive queries are refused.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The allow action does allow nonrecursive queries to access the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-data that is configured. The reason is that this does not
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> involve the Unbound server recursive lookup algorithm, and sta-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tic data is served in the reply. This supports normal opera-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tions where nonrecursive queries are made for the authoritative
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> data. For nonrecursive queries any replies from the dynamic
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cache are refused.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The allow_setrd action ignores the recursion desired (RD) bit
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> and treats all requests as if the recursion desired bit is set.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Note that this behavior violates RFC 1034 which states that a
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> name server should never perform recursive service unless asked
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> via the RD bit since this interferes with trouble shooting of
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> name servers and their databases. This prohibited behavior may
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> be useful if another DNS server must forward requests for spe-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cific zones to a resolver DNS server, but only supports stub do-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mains and sends queries to the resolver DNS server with the RD
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> bit cleared.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The allow_snoop action gives nonrecursive access too. This give
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> both recursive and non recursive access. The name allow_snoop
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> refers to cache snooping, a technique to use nonrecursive
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> queries to examine the cache contents (for malicious acts).
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> However, nonrecursive queries can also be a valuable debugging
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tool (when you want to examine the cache contents). In that case
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> use allow_snoop for your administration host.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The allow_cookie action allows access only to UDP queries that
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> contain a valid DNS Cookie as specified in RFC 7873 and RFC
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 9018, when the answer-cookie option is enabled. UDP queries
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> containing only a DNS Client Cookie and no Server Cookie, or an
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> invalid DNS Cookie, will receive a BADCOOKIE response including
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> a newly generated DNS Cookie, allowing clients to retry with
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> that DNS Cookie. The allow_cookie action will also accept re-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> quests over stateful transports, regardless of the presence of
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> an DNS Cookie and regardless of the answer-cookie setting. UDP
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> queries without a DNS Cookie receive REFUSED responses with the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> TC flag set, that may trigger fall back to TCP for those
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> clients.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> By default only localhost (the 127.0.0.0/8 IP netblock, not the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> loopback interface) is implicitly allowed, the rest is refused.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The default is refused, because that is protocol-friendly. The
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> DNS protocol is not designed to handle dropped packets due to
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> policy, and dropping may result in (possibly excessive) retried
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> queries.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The deny_non_local and refuse_non_local settings are for hosts
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> that are only allowed to query for the authoritative local-data,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> they are not allowed full recursion but only the static data.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> With deny_non_local, messages that are disallowed are dropped,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> with refuse_non_local they receive error code REFUSED.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> access-control-tag: &amp;lt;IP netblock&amp;gt; &amp;lt;&amp;#34;list of tags&amp;#34;&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Assign tags to access-control elements. Clients using this ac-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cess control element use localzones that are tagged with one of
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> these tags. Tags must be defined in define-tags. Enclose list
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> of tags in quotes (&amp;#34;&amp;#34;) and put spaces between tags. If ac-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cess-control-tag is configured for a netblock that does not have
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> an access-control, an access-control element with action allow
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> is configured for this netblock.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> access-control-tag-action: &amp;lt;IP netblock&amp;gt; &amp;lt;tag&amp;gt; &amp;lt;action&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Set action for particular tag for given access control element.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If you have multiple tag values, the tag used to lookup the ac-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tion is the first tag match between access-control-tag and lo-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cal-zone-tag where &amp;#34;first&amp;#34; comes from the order of the define-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tag values.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> access-control-tag-data: &amp;lt;IP netblock&amp;gt; &amp;lt;tag&amp;gt; &amp;lt;&amp;#34;resource record string&amp;#34;&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Set redirect data for particular tag for given access control
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> element.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> access-control-view: &amp;lt;IP netblock&amp;gt; &amp;lt;view name&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Set view for given access control element.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> interface-action: &amp;lt;ip address or interface name [@port]&amp;gt; &amp;lt;action&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Similar to access-control: but for interfaces.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The action is the same as the ones defined under access-con-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> trol:. Interfaces are refused by default. By default only lo-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> calhost (the 127.0.0.0/8 IP netblock, not the loopback inter-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> face) is implicitly allowed through the default access-control:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> behavior. This also means that any attempt to use the inter-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> face-*: options for the loopback interface will not work as they
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> will be overridden by the implicit default &amp;#34;access-control:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 127.0.0.0/8 allow&amp;#34; option.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Note that the interface needs to be already specified with in-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> terface: and that any access-control*: setting overrides all in-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> terface-*: settings for targeted clients.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> interface-tag: &amp;lt;ip address or interface name [@port]&amp;gt; &amp;lt;&amp;#34;list of tags&amp;#34;&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Similar to access-control-tag: but for interfaces.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Note that the interface needs to be already specified with in-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> terface: and that any access-control*: setting overrides all in-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> terface-*: settings for targeted clients.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> interface-tag-action: &amp;lt;ip address or interface name [@port]&amp;gt; &amp;lt;tag&amp;gt; &amp;lt;ac-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tion&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Similar to access-control-tag-action: but for interfaces.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Note that the interface needs to be already specified with in-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> terface: and that any access-control*: setting overrides all in-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> terface-*: settings for targeted clients.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> interface-tag-data: &amp;lt;ip address or interface name [@port]&amp;gt; &amp;lt;tag&amp;gt; &amp;lt;&amp;#34;re-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> source record string&amp;#34;&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Similar to access-control-tag-data: but for interfaces.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Note that the interface needs to be already specified with in-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> terface: and that any access-control*: setting overrides all in-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> terface-*: settings for targeted clients.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> interface-view: &amp;lt;ip address or interface name [@port]&amp;gt; &amp;lt;view name&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Similar to access-control-view: but for interfaces.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Note that the interface needs to be already specified with in-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> terface: and that any access-control*: setting overrides all in-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> terface-*: settings for targeted clients.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> chroot: &amp;lt;directory&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If chroot is enabled, you should pass the configfile (from the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> commandline) as a full path from the original root. After the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> chroot has been performed the now defunct portion of the config
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> file path is removed to be able to reread the config after a re-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> load.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> All other file paths (working dir, logfile, roothints, and key
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> files) can be specified in several ways: as an absolute path
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> relative to the new root, as a relative path to the working di-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rectory, or as an absolute path relative to the original root.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> In the last case the path is adjusted to remove the unused por-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tion.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The pidfile can be either a relative path to the working direc-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tory, or an absolute path relative to the original root. It is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> written just prior to chroot and dropping permissions. This al-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> lows the pidfile to be /var/run/unbound.pid and the chroot to be
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> /var/unbound, for example. Note that Unbound is not able to re-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> move the pidfile after termination when it is located outside of
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the chroot directory.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Additionally, Unbound may need to access /dev/urandom (for en-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tropy) from inside the chroot.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If given a chroot is done to the given directory. The chroot is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> by default set to &amp;#34;/usr/local/etc/unbound&amp;#34;. If you give &amp;#34;&amp;#34; no
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> chroot is performed.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> username: &amp;lt;name&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If given, after binding the port the user privileges are
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dropped. Default is &amp;#34;unbound&amp;#34;. If you give username: &amp;#34;&amp;#34; no user
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> change is performed.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If this user is not capable of binding the port, reloads (by
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> signal HUP) will still retain the opened ports. If you change
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the port number in the config file, and that new port number re-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> quires privileges, then a reload will fail; a restart is needed.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> directory: &amp;lt;directory&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Sets the working directory for the program. Default is &amp;#34;/usr/lo-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cal/etc/unbound&amp;#34;. On Windows the string &amp;#34;%EXECUTABLE%&amp;#34; tries to
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> change to the directory that unbound.exe resides in. If you
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> give a server: directory: dir before include: file statements
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> then those includes can be relative to the working directory.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> logfile: &amp;lt;filename&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If &amp;#34;&amp;#34; is given, logging goes to stderr, or nowhere once daemo-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> nized. The logfile is appended to, in the following format:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [seconds since 1970] unbound[pid:tid]: type: message.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If this option is given, the use-syslog is option is set to
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;#34;no&amp;#34;. The logfile is reopened (for append) when the config file
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> is reread, on SIGHUP.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> use-syslog: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Sets Unbound to send log messages to the syslogd, using sys-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> log(3). The log facility LOG_DAEMON is used, with identity &amp;#34;un-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> bound&amp;#34;. The logfile setting is overridden when use-syslog is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> turned on. The default is to log to syslog.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> log-identity: &amp;lt;string&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If &amp;#34;&amp;#34; is given (default), then the name of the executable, usu-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ally &amp;#34;unbound&amp;#34; is used to report to the log. Enter a string to
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> override it with that, which is useful on systems that run more
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> than one instance of Unbound, with different configurations, so
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> that the logs can be easily distinguished against.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> log-time-ascii: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Sets logfile lines to use a timestamp in UTC ascii. Default is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> no, which prints the seconds since 1970 in brackets. No effect
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> if using syslog, in that case syslog formats the timestamp
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> printed into the log files.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> log-time-iso: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Log time in ISO8601 format, if log-time-ascii: yes is also set.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Default is no.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> log-queries: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Prints one line per query to the log, with the log timestamp and
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> IP address, name, type and class. Default is no. Note that it
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> takes time to print these lines which makes the server (signifi-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cantly) slower. Odd (nonprintable) characters in names are
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> printed as &amp;#39;?&amp;#39;.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> log-replies: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Prints one line per reply to the log, with the log timestamp and
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> IP address, name, type, class, return code, time to resolve,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> from cache and response size. Default is no. Note that it
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> takes time to print these lines which makes the server (signifi-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cantly) slower. Odd (nonprintable) characters in names are
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> printed as &amp;#39;?&amp;#39;.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> log-tag-queryreply: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Prints the word &amp;#39;query&amp;#39; and &amp;#39;reply&amp;#39; with log-queries and
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> log-replies. This makes filtering logs easier. The default is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> off (for backwards compatibility).
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> log-destaddr: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Prints the destination address, port and type in the log-replies
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> output. This disambiguates what type of traffic, eg. udp or
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tcp, and to what local port the traffic was sent to.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> log-local-actions: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Print log lines to inform about local zone actions. These lines
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> are like the local-zone type inform prints out, but they are
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> also printed for the other types of local zones.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> log-servfail: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Print log lines that say why queries return SERVFAIL to clients.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> This is separate from the verbosity debug logs, much smaller,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> and printed at the error level, not the info level of debug info
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> from verbosity.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> pidfile: &amp;lt;filename&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The process id is written to the file. Default is &amp;#34;/usr/lo-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cal/etc/unbound/unbound.pid&amp;#34;. So,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> kill -HUP `cat /usr/local/etc/unbound/unbound.pid`
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> triggers a reload,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> kill -TERM `cat /usr/local/etc/unbound/unbound.pid`
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> gracefully terminates.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> root-hints: &amp;lt;filename&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Read the root hints from this file. Default is nothing, using
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> builtin hints for the IN class. The file has the format of zone
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> files, with root nameserver names and addresses only. The de-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fault may become outdated, when servers change, therefore it is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> good practice to use a root-hints file.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> hide-identity: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If enabled id.server and hostname.bind queries are refused.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> identity: &amp;lt;string&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Set the identity to report. If set to &amp;#34;&amp;#34;, the default, then the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> hostname of the server is returned.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> hide-version: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If enabled version.server and version.bind queries are refused.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> version: &amp;lt;string&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Set the version to report. If set to &amp;#34;&amp;#34;, the default, then the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> package version is returned.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> hide-http-user-agent: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If enabled the HTTP header User-Agent is not set. Use with cau-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tion as some webserver configurations may reject HTTP requests
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> lacking this header. If needed, it is better to explicitly set
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the http-user-agent below.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> http-user-agent: &amp;lt;string&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Set the HTTP User-Agent header for outgoing HTTP requests. If
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> set to &amp;#34;&amp;#34;, the default, then the package name and version are
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> used.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> nsid: &amp;lt;string&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Add the specified nsid to the EDNS section of the answer when
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> queried with an NSID EDNS enabled packet. As a sequence of hex
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> characters or with ascii_ prefix and then an ascii string.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> hide-trustanchor: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If enabled trustanchor.unbound queries are refused.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> target-fetch-policy: &amp;lt;&amp;#34;list of numbers&amp;#34;&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Set the target fetch policy used by Unbound to determine if it
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> should fetch nameserver target addresses opportunistically. The
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> policy is described per dependency depth.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The number of values determines the maximum dependency depth
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> that Unbound will pursue in answering a query. A value of -1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> means to fetch all targets opportunistically for that dependency
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> depth. A value of 0 means to fetch on demand only. A positive
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> value fetches that many targets opportunistically.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Enclose the list between quotes (&amp;#34;&amp;#34;) and put spaces between num-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> bers. The default is &amp;#34;3 2 1 0 0&amp;#34;. Setting all zeroes, &amp;#34;0 0 0 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 0&amp;#34; gives behaviour closer to that of BIND 9, while setting &amp;#34;-1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -1 -1 -1 -1&amp;#34; gives behaviour rumoured to be closer to that of
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> BIND 8.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> harden-short-bufsize: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Very small EDNS buffer sizes from queries are ignored. Default
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> is yes, as described in the standard.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> harden-large-queries: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Very large queries are ignored. Default is no, since it is legal
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> protocol wise to send these, and could be necessary for opera-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tion if TSIG or EDNS payload is very large.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> harden-glue: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Will trust glue only if it is within the servers authority. De-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fault is yes.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> harden-unverified-glue: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Will trust only in-zone glue. Will try to resolve all out of
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> zone (&amp;lt;unverfied&amp;gt;) glue. Will fallback to the original glue if
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> unable to resolve. Default is no.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> harden-dnssec-stripped: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Require DNSSEC data for trust-anchored zones, if such data is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> absent, the zone becomes bogus. If turned off, and no DNSSEC
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> data is received (or the DNSKEY data fails to validate), then
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the zone is made insecure, this behaves like there is no trust
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> anchor. You could turn this off if you are sometimes behind an
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> intrusive firewall (of some sort) that removes DNSSEC data from
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> packets, or a zone changes from signed to unsigned to badly
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> signed often. If turned off you run the risk of a downgrade at-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tack that disables security for a zone. Default is yes.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> harden-below-nxdomain: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> From RFC 8020 (with title &amp;#34;NXDOMAIN: There Really Is Nothing Un-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> derneath&amp;#34;), returns nxdomain to queries for a name below another
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> name that is already known to be nxdomain. DNSSEC mandates no-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> error for empty nonterminals, hence this is possible. Very old
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> software might return nxdomain for empty nonterminals (that usu-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ally happen for reverse IP address lookups), and thus may be in-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> compatible with this. To try to avoid this only DNSSEC-secure
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> nxdomains are used, because the old software does not have
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> DNSSEC. Default is yes. The nxdomain must be secure, this
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> means nsec3 with optout is insufficient.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> harden-referral-path: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Harden the referral path by performing additional queries for
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> infrastructure data. Validates the replies if trust anchors are
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> configured and the zones are signed. This enforces DNSSEC vali-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dation on nameserver NS sets and the nameserver addresses that
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> are encountered on the referral path to the answer. Default no,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> because it burdens the authority servers, and it is not RFC
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> standard, and could lead to performance problems because of the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> extra query load that is generated. Experimental option. If
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> you enable it consider adding more numbers after the tar-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> get-fetch-policy to increase the max depth that is checked to.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> harden-algo-downgrade: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Harden against algorithm downgrade when multiple algorithms are
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> advertised in the DS record. This works by first choosing only
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the strongest DS digest type as per RFC 4509 (Unbound treats the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> highest algorithm as the strongest) and then expecting signa-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tures from all the advertised signing algorithms from the chosen
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> DS(es) to be present. If no, allows any one supported algorithm
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> to validate the zone, even if other advertised algorithms are
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> broken. Default is no. RFC 6840 mandates that zone signers
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> must produce zones signed with all advertised algorithms, but
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> sometimes they do not. RFC 6840 also clarifies that this re-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> quirement is not for validators and validators should accept any
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> single valid path. It should thus be explicitly noted that this
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> option violates RFC 6840 for DNSSEC validation and should only
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> be used to perform a signature completeness test to support
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> troubleshooting. Using this option may break DNSSEC resolution
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> with non-RFC6840-conforming signers and/or in multi-signer con-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> figurations that don&amp;#39;t send all the advertised signatures.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> harden-unknown-additional: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Harden against unknown records in the authority section and ad-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ditional section. Default is no. If no, such records are copied
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> from the upstream and presented to the client together with the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> answer. If yes, it could hamper future protocol developments
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> that want to add records.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> use-caps-for-id: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Use 0x20-encoded random bits in the query to foil spoof at-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tempts. This perturbs the lowercase and uppercase of query
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> names sent to authority servers and checks if the reply still
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> has the correct casing. Disabled by default. This feature is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> an experimental implementation of draft dns-0x20.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> caps-exempt: &amp;lt;domain&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Exempt the domain so that it does not receive caps-for-id per-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> turbed queries. For domains that do not support 0x20 and also
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fail with fallback because they keep sending different answers,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> like some load balancers. Can be given multiple times, for dif-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ferent domains.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> caps-whitelist: &amp;lt;domain&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Alternate syntax for caps-exempt.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> qname-minimisation: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Send minimum amount of information to upstream servers to en-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> hance privacy. Only send minimum required labels of the QNAME
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> and set QTYPE to A when possible. Best effort approach; full
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> QNAME and original QTYPE will be sent when upstream replies with
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> a RCODE other than NOERROR, except when receiving NXDOMAIN from
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> a DNSSEC signed zone. Default is yes.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> qname-minimisation-strict: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> QNAME minimisation in strict mode. Do not fall-back to sending
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> full QNAME to potentially broken nameservers. A lot of domains
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> will not be resolvable when this option in enabled. Only use if
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> you know what you are doing. This option only has effect when
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> qname-minimisation is enabled. Default is no.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> aggressive-nsec: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Aggressive NSEC uses the DNSSEC NSEC chain to synthesize NXDO-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> MAIN and other denials, using information from previous NXDO-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> MAINs answers. Default is yes. It helps to reduce the query
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rate towards targets that get a very high nonexistent name
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> lookup rate.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> private-address: &amp;lt;IP address or subnet&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Give IPv4 of IPv6 addresses or classless subnets. These are ad-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dresses on your private network, and are not allowed to be re-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> turned for public internet names. Any occurrence of such ad-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dresses are removed from DNS answers. Additionally, the DNSSEC
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> validator may mark the answers bogus. This protects against
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> so-called DNS Rebinding, where a user browser is turned into a
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> network proxy, allowing remote access through the browser to
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> other parts of your private network. Some names can be allowed
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> to contain your private addresses, by default all the local-data
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> that you configured is allowed to, and you can specify addi-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tional names using private-domain. No private addresses are en-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> abled by default. We consider to enable this for the RFC1918
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> private IP address space by default in later releases. That
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> would enable private addresses for 10.0.0.0/8 172.16.0.0/12
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 192.168.0.0/16 169.254.0.0/16 fd00::/8 and fe80::/10, since the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> RFC standards say these addresses should not be visible on the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> public internet. Turning on 127.0.0.0/8 would hinder many spam-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> blocklists as they use that. Adding ::ffff:0:0/96 stops
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> IPv4-mapped IPv6 addresses from bypassing the filter.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> private-domain: &amp;lt;domain name&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Allow this domain, and all its subdomains to contain private ad-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dresses. Give multiple times to allow multiple domain names to
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> contain private addresses. Default is none.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> unwanted-reply-threshold: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If set, a total number of unwanted replies is kept track of in
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> every thread. When it reaches the threshold, a defensive action
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> is taken and a warning is printed to the log. The defensive ac-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tion is to clear the rrset and message caches, hopefully flush-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ing away any poison. A value of 10 million is suggested. De-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fault is 0 (turned off).
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> do-not-query-address: &amp;lt;IP address&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Do not query the given IP address. Can be IP4 or IP6. Append
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> /num to indicate a classless delegation netblock, for example
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> like 10.2.3.4/24 or 2001::11/64.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> do-not-query-localhost: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If yes, localhost is added to the do-not-query-address entries,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> both IP6 ::1 and IP4 127.0.0.1/8. If no, then localhost can be
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> used to send queries to. Default is yes.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> prefetch: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If yes, cache hits on message cache elements that are on their
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> last 10 percent of their TTL value trigger a prefetch to keep
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the cache up to date. Default is no. Turning it on gives about
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 10 percent more traffic and load on the machine, but popular
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> items do not expire from the cache.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> prefetch-key: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If yes, fetch the DNSKEYs earlier in the validation process,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> when a DS record is encountered. This lowers the latency of re-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> quests. It does use a little more CPU. Also if the cache is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> set to 0, it is no use. Default is no.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> deny-any: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If yes, deny queries of type ANY with an empty response. De-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fault is no. If disabled, Unbound responds with a short list of
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> resource records if some can be found in the cache and makes the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> upstream type ANY query if there are none.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rrset-roundrobin: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If yes, Unbound rotates RRSet order in response (the random num-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ber is taken from the query ID, for speed and thread safety).
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Default is yes.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> minimal-responses: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If yes, Unbound does not insert authority/additional sections
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> into response messages when those sections are not required.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> This reduces response size significantly, and may avoid TCP
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fallback for some responses which may cause a slight speedup.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The default is yes, even though the DNS protocol RFCs mandate
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> these sections, and the additional content could save roundtrips
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> for clients that use the additional content. However these sec-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tions are hardly used by clients. Enabling prefetch can benefit
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> clients that need the additional content by trying to keep that
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> content fresh in the cache.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> disable-dnssec-lame-check: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If true, disables the DNSSEC lameness check in the iterator.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> This check sees if RRSIGs are present in the answer, when dnssec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> is expected, and retries another authority if RRSIGs are unex-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> pectedly missing. The validator will insist in RRSIGs for
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> DNSSEC signed domains regardless of this setting, if a trust an-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> chor is loaded.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> module-config: &amp;lt;&amp;#34;module names&amp;#34;&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Module configuration, a list of module names separated by
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> spaces, surround the string with quotes (&amp;#34;&amp;#34;). The modules can be
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> respip, validator, or iterator (and possibly more, see below).
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Setting this to just &amp;#34;iterator&amp;#34; will result in a non-validating
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> server. Setting this to &amp;#34;validator iterator&amp;#34; will turn on
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> DNSSEC validation. The ordering of the modules is significant,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the order decides the order of processing. You must also set
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> trust-anchors for validation to be useful. Adding respip to the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> front will cause RPZ processing to be done on all queries. The
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> default is &amp;#34;validator iterator&amp;#34;.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Most modules that need to be listed here have to be listed at
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the beginning of the line. The subnetcachedb module has to be
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> listed just before the iterator. The python module can be
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> listed in different places, it then processes the output of the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> module it is just before. The dynlib module can be listed pretty
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> much anywhere, it is only a very thin wrapper that allows dy-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> namic libraries to run in its place.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> trust-anchor-file: &amp;lt;filename&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> File with trusted keys for validation. Both DS and DNSKEY en-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tries can appear in the file. The format of the file is the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> standard DNS Zone file format. Default is &amp;#34;&amp;#34;, or no trust an-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> chor file.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> auto-trust-anchor-file: &amp;lt;filename&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> File with trust anchor for one zone, which is tracked with
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> RFC5011 probes. The probes are run several times per month,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> thus the machine must be online frequently. The initial file
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> can be one with contents as described in trust-anchor-file. The
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> file is written to when the anchor is updated, so the Unbound
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> user must have write permission. Write permission to the file,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> but also to the directory it is in (to create a temporary file,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> which is necessary to deal with filesystem full events), it must
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> also be inside the chroot (if that is used).
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> trust-anchor: &amp;lt;&amp;#34;Resource Record&amp;#34;&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> A DS or DNSKEY RR for a key to use for validation. Multiple en-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tries can be given to specify multiple trusted keys, in addition
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> to the trust-anchor-files. The resource record is entered in
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the same format as &amp;#39;dig&amp;#39; or &amp;#39;drill&amp;#39; prints them, the same format
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> as in the zone file. Has to be on a single line, with &amp;#34;&amp;#34; around
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> it. A TTL can be specified for ease of cut and paste, but is ig-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> nored. A class can be specified, but class IN is default.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> trusted-keys-file: &amp;lt;filename&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> File with trusted keys for validation. Specify more than one
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> file with several entries, one file per entry. Like trust-an-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> chor-file but has a different file format. Format is BIND-9
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> style format, the trusted-keys { name flag proto algo &amp;#34;key&amp;#34;; };
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> clauses are read. It is possible to use wildcards with this
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> statement, the wildcard is expanded on start and on reload.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> trust-anchor-signaling: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Send RFC8145 key tag query after trust anchor priming. Default
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> is yes.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> root-key-sentinel: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Root key trust anchor sentinel. Default is yes.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> domain-insecure: &amp;lt;domain name&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Sets domain name to be insecure, DNSSEC chain of trust is ig-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> nored towards the domain name. So a trust anchor above the do-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> main name can not make the domain secure with a DS record, such
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> a DS record is then ignored. Can be given multiple times to
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> specify multiple domains that are treated as if unsigned. If
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> you set trust anchors for the domain they override this setting
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (and the domain is secured).
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> This can be useful if you want to make sure a trust anchor for
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> external lookups does not affect an (unsigned) internal domain.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> A DS record externally can create validation failures for that
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> internal domain.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> val-override-date: &amp;lt;rrsig-style date spec&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Default is &amp;#34;&amp;#34; or &amp;#34;0&amp;#34;, which disables this debugging feature. If
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> enabled by giving a RRSIG style date, that date is used for ver-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ifying RRSIG inception and expiration dates, instead of the cur-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rent date. Do not set this unless you are debugging signature
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> inception and expiration. The value -1 ignores the date alto-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> gether, useful for some special applications.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> val-sig-skew-min: &amp;lt;seconds&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Minimum number of seconds of clock skew to apply to validated
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> signatures. A value of 10% of the signature lifetime (expira-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tion - inception) is used, capped by this setting. Default is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 3600 (1 hour) which allows for daylight savings differences.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Lower this value for more strict checking of short lived signa-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tures.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> val-sig-skew-max: &amp;lt;seconds&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Maximum number of seconds of clock skew to apply to validated
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> signatures. A value of 10% of the signature lifetime (expira-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tion - inception) is used, capped by this setting. Default is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 86400 (24 hours) which allows for timezone setting problems in
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> stable domains. Setting both min and max very low disables the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> clock skew allowances. Setting both min and max very high makes
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the validator check the signature timestamps less strictly.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> val-max-restart: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The maximum number the validator should restart validation with
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> another authority in case of failed validation. Default is 5.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> val-bogus-ttl: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The time to live for bogus data. This is data that has failed
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> validation; due to invalid signatures or other checks. The TTL
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> from that data cannot be trusted, and this value is used in-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> stead. The value is in seconds, default 60. The time interval
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> prevents repeated revalidation of bogus data.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> val-clean-additional: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Instruct the validator to remove data from the additional sec-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tion of secure messages that are not signed properly. Messages
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> that are insecure, bogus, indeterminate or unchecked are not af-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fected. Default is yes. Use this setting to protect the users
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> that rely on this validator for authentication from potentially
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> bad data in the additional section.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> val-log-level: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Have the validator print validation failures to the log. Re-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> gardless of the verbosity setting. Default is 0, off. At 1,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> for every user query that fails a line is printed to the logs.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> This way you can monitor what happens with validation. Use a
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> diagnosis tool, such as dig or drill, to find out why validation
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> is failing for these queries. At 2, not only the query that
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> failed is printed but also the reason why Unbound thought it was
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> wrong and which server sent the faulty data.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> val-permissive-mode: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Instruct the validator to mark bogus messages as indeterminate.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The security checks are performed, but if the result is bogus
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (failed security), the reply is not withheld from the client
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> with SERVFAIL as usual. The client receives the bogus data. For
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> messages that are found to be secure the AD bit is set in
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> replies. Also logging is performed as for full validation. The
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> default value is &amp;#34;no&amp;#34;.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ignore-cd-flag: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Instruct Unbound to ignore the CD flag from clients and refuse
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> to return bogus answers to them. Thus, the CD (Checking Dis-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> abled) flag does not disable checking any more. This is useful
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> if legacy (w2008) servers that set the CD flag but cannot vali-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> date DNSSEC themselves are the clients, and then Unbound pro-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> vides them with DNSSEC protection. The default value is &amp;#34;no&amp;#34;.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> disable-edns-do: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Disable the EDNS DO flag in upstream requests. It breaks DNSSEC
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> validation for Unbound&amp;#39;s clients. This results in the upstream
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> name servers to not include DNSSEC records in their replies and
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> could be helpful for devices that cannot handle DNSSEC informa-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tion. When the option is enabled, clients that set the DO flag
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> receive no EDNS record in the response to indicate the lack of
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> support to them. If this option is enabled but Unbound is al-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ready configured for DNSSEC validation (i.e., the validator mod-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ule is enabled; default) this option is implicitly turned off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> with a warning as to not break DNSSEC validation in Unbound.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Default is no.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> serve-expired: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If enabled, Unbound attempts to serve old responses from cache
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> with a TTL of serve-expired-reply-ttl in the response. By de-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fault the expired answer will be used after a resolution attempt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> errored out or is taking more than serve-expired-client-timeout
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> to resolve. Default is &amp;#34;no&amp;#34;.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> serve-expired-ttl: &amp;lt;seconds&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Limit serving of expired responses to configured seconds after
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> expiration. 0 disables the limit. This option only applies
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> when serve-expired is enabled. A suggested value per RFC 8767
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> is between 86400 (1 day) and 259200 (3 days). The default is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 86400.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> serve-expired-ttl-reset: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Set the TTL of expired records to the serve-expired-ttl value
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> after a failed attempt to retrieve the record from upstream.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> This makes sure that the expired records will be served as long
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> as there are queries for it. Default is &amp;#34;no&amp;#34;.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> serve-expired-reply-ttl: &amp;lt;seconds&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> TTL value to use when replying with expired data. If serve-ex-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> pired-client-timeout is also used then it is RECOMMENDED to use
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 30 as the value (RFC 8767). The default is 30.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> serve-expired-client-timeout: &amp;lt;msec&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Time in milliseconds before replying to the client with expired
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> data. This essentially enables the serve-stale behavior as
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> specified in RFC 8767 that first tries to resolve before immedi-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ately responding with expired data. Setting this to 0 will dis-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> able this behavior and instead serve the expired record immedi-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ately from the cache before attempting to refresh it via resolu-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tion. Default is 1800.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> serve-original-ttl: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If enabled, Unbound will always return the original TTL as re-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ceived from the upstream name server rather than the decrement-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ing TTL as stored in the cache. This feature may be useful if
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Unbound serves as a front-end to a hidden authoritative name
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> server. Enabling this feature does not impact cache expiry, it
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> only changes the TTL Unbound embeds in responses to queries.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Note that enabling this feature implicitly disables enforcement
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> of the configured minimum and maximum TTL, as it is assumed
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> users who enable this feature do not want Unbound to change the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> TTL obtained from an upstream server. Thus, the values set us-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ing cache-min-ttl and cache-max-ttl are ignored. Default is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;#34;no&amp;#34;.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> val-nsec3-keysize-iterations: &amp;lt;&amp;#34;list of values&amp;#34;&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> List of keysize and iteration count values, separated by spaces,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> surrounded by quotes. Default is &amp;#34;1024 150 2048 150 4096 150&amp;#34;.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> This determines the maximum allowed NSEC3 iteration count before
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> a message is simply marked insecure instead of performing the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> many hashing iterations. The list must be in ascending order and
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> have at least one entry. If you set it to &amp;#34;1024 65535&amp;#34; there is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> no restriction to NSEC3 iteration values. This table must be
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> kept short; a very long list could cause slower operation.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> zonemd-permissive-mode: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If enabled the ZONEMD verification failures are only logged and
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> do not cause the zone to be blocked and only return servfail.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Useful for testing out if it works, or if the operator only
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> wants to be notified of a problem without disrupting service.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Default is no.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> add-holddown: &amp;lt;seconds&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Instruct the auto-trust-anchor-file probe mechanism for RFC5011
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> autotrust updates to add new trust anchors only after they have
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> been visible for this time. Default is 30 days as per the RFC.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> del-holddown: &amp;lt;seconds&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Instruct the auto-trust-anchor-file probe mechanism for RFC5011
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> autotrust updates to remove revoked trust anchors after they
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> have been kept in the revoked list for this long. Default is 30
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> days as per the RFC.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> keep-missing: &amp;lt;seconds&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Instruct the auto-trust-anchor-file probe mechanism for RFC5011
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> autotrust updates to remove missing trust anchors after they
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> have been unseen for this long. This cleans up the state file
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> if the target zone does not perform trust anchor revocation, so
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> this makes the auto probe mechanism work with zones that perform
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> regular (non-5011) rollovers. The default is 366 days. The
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> value 0 does not remove missing anchors, as per the RFC.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> permit-small-holddown: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Debug option that allows the autotrust 5011 rollover timers to
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> assume very small values. Default is no.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> key-cache-size: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Number of bytes size of the key cache. Default is 4 megabytes.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> A plain number is in bytes, append &amp;#39;k&amp;#39;, &amp;#39;m&amp;#39; or &amp;#39;g&amp;#39; for kilo-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> bytes, megabytes or gigabytes (1024*1024 bytes in a megabyte).
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> key-cache-slabs: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Number of slabs in the key cache. Slabs reduce lock contention
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> by threads. Must be set to a power of 2. Setting (close) to the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> number of cpus is a reasonable guess.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> neg-cache-size: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Number of bytes size of the aggressive negative cache. Default
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> is 1 megabyte. A plain number is in bytes, append &amp;#39;k&amp;#39;, &amp;#39;m&amp;#39; or
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;#39;g&amp;#39; for kilobytes, megabytes or gigabytes (1024*1024 bytes in a
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> megabyte).
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> unblock-lan-zones: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Default is disabled. If enabled, then for private address
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> space, the reverse lookups are no longer filtered. This allows
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Unbound when running as dns service on a host where it provides
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> service for that host, to put out all of the queries for the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;#39;lan&amp;#39; upstream. When enabled, only localhost, 127.0.0.1 reverse
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> and ::1 reverse zones are configured with default local zones.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Disable the option when Unbound is running as a (DHCP-) DNS net-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> work resolver for a group of machines, where such lookups should
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> be filtered (RFC compliance), this also stops potential data
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> leakage about the local network to the upstream DNS servers.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> insecure-lan-zones: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Default is disabled. If enabled, then reverse lookups in pri-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> vate address space are not validated. This is usually required
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> whenever unblock-lan-zones is used.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-zone: &amp;lt;zone&amp;gt; &amp;lt;type&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Configure a local zone. The type determines the answer to give
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> if there is no match from local-data. The types are deny,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> refuse, static, transparent, redirect, nodefault, typetranspar-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ent, inform, inform_deny, inform_redirect, always_transparent,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> block_a, always_refuse, always_nxdomain, always_null, noview,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> and are explained below. After that the default settings are
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> listed. Use local-data: to enter data into the local zone. An-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> swers for local zones are authoritative DNS answers. By default
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the zones are class IN.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If you need more complicated authoritative data, with referrals,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> wildcards, CNAME/DNAME support, or DNSSEC authoritative service,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> setup a stub-zone for it as detailed in the stub zone section
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> below. A stub-zone can be used to have unbound send queries to
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> another server, an authoritative server, to fetch the informa-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tion. With a forward-zone, unbound sends queries to a server
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> that is a recursive server to fetch the information. With an
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> auth-zone a zone can be loaded from file and used, it can be
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> used like a local-zone for users downstream, or the auth-zone
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> information can be used to fetch information from when resolving
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> like it is an upstream server. The forward-zone and auth-zone
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> options are described in their sections below. If you want to
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> perform filtering of the information that the users can fetch,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the local-zone and local-data statements allow for this, but
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> also the rpz functionality can be used, described in the RPZ
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> section.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> deny Do not send an answer, drop the query. If there is a match
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> from local data, the query is answered.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> refuse
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Send an error message reply, with rcode REFUSED. If there is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> a match from local data, the query is answered.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> static
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If there is a match from local data, the query is answered.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Otherwise, the query is answered with nodata or nxdomain.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> For a negative answer a SOA is included in the answer if
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> present as local-data for the zone apex domain.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> transparent
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If there is a match from local data, the query is answered.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Otherwise if the query has a different name, the query is re-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> solved normally. If the query is for a name given in local-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> data but no such type of data is given in localdata, then a
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> noerror nodata answer is returned. If no local-zone is given
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-data causes a transparent zone to be created by de-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fault.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> typetransparent
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If there is a match from local data, the query is answered.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If the query is for a different name, or for the same name
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> but for a different type, the query is resolved normally.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> So, similar to transparent but types that are not listed in
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local data are resolved normally, so if an A record is in the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local data that does not cause a nodata reply for AAAA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> queries.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> redirect
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The query is answered from the local data for the zone name.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> There may be no local data beneath the zone name. This an-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> swers queries for the zone, and all subdomains of the zone
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> with the local data for the zone. It can be used to redirect
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> a domain to return a different address record to the end
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> user, with local-zone: &amp;#34;example.com.&amp;#34; redirect and lo-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cal-data: &amp;#34;example.com. A 127.0.0.1&amp;#34; queries for www.exam-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ple.com and www.foo.example.com are redirected, so that users
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> with web browsers cannot access sites with suffix exam-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ple.com.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> inform
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The query is answered normally, same as transparent. The
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> client IP address (@portnumber) is printed to the logfile.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The log message is: timestamp, unbound-pid, info: zonename
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> inform IP@port queryname type class. This option can be used
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> for normal resolution, but machines looking up infected names
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> are logged, eg. to run antivirus on them.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> inform_deny
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The query is dropped, like &amp;#39;deny&amp;#39;, and logged, like &amp;#39;inform&amp;#39;.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Ie. find infected machines without answering the queries.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> inform_redirect
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The query is redirected, like &amp;#39;redirect&amp;#39;, and logged, like
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;#39;inform&amp;#39;. Ie. answer queries with fixed data and also log
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the machines that ask.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> always_transparent
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Like transparent, but ignores local data and resolves nor-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mally.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> block_a
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Like transparent, but ignores local data and resolves nor-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mally all query types excluding A. For A queries it uncondi-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tionally returns NODATA. Useful in cases when there is a
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> need to explicitly force all apps to use IPv6 protocol and
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> avoid any queries to IPv4.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> always_refuse
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Like refuse, but ignores local data and refuses the query.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> always_nxdomain
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Like static, but ignores local data and returns nxdomain for
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the query.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> always_nodata
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Like static, but ignores local data and returns nodata for
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the query.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> always_deny
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Like deny, but ignores local data and drops the query.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> always_null
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Always returns 0.0.0.0 or ::0 for every name in the zone.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Like redirect with zero data for A and AAAA. Ignores local
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> data in the zone. Used for some block lists.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> noview
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Breaks out of that view and moves towards the global local
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> zones for answer to the query. If the view first is no,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> it&amp;#39;ll resolve normally. If view first is enabled, it&amp;#39;ll
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> break perform that step and check the global answers. For
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> when the view has view specific overrides but some zone has
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> to be answered from global local zone contents.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> nodefault
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Used to turn off default contents for AS112 zones. The other
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> types also turn off default contents for the zone. The &amp;#39;node-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fault&amp;#39; option has no other effect than turning off default
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> contents for the given zone. Use nodefault if you use ex-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> actly that zone, if you want to use a subzone, use transpar-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ent.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The default zones are localhost, reverse 127.0.0.1 and ::1, the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> home.arpa, the resolver.arpa, the service.arpa, the onion, test, in-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> valid and the AS112 zones. The AS112 zones are reverse DNS zones for
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> private use and reserved IP addresses for which the servers on the in-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ternet cannot provide correct answers. They are configured by default
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> to give nxdomain (no reverse information) answers. The defaults can be
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> turned off by specifying your own local-zone of that name, or using the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;#39;nodefault&amp;#39; type. Below is a list of the default zone contents.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> localhost
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The IP4 and IP6 localhost information is given. NS and SOA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> records are provided for completeness and to satisfy some DNS
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> update tools. Default content:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-zone: &amp;#34;localhost.&amp;#34; redirect
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-data: &amp;#34;localhost. 10800 IN NS localhost.&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-data: &amp;#34;localhost. 10800 IN
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> SOA localhost. nobody.invalid. 1 3600 1200 604800 10800&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-data: &amp;#34;localhost. 10800 IN A 127.0.0.1&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-data: &amp;#34;localhost. 10800 IN AAAA ::1&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> reverse IPv4 loopback
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Default content:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-zone: &amp;#34;127.in-addr.arpa.&amp;#34; static
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-data: &amp;#34;127.in-addr.arpa. 10800 IN NS localhost.&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-data: &amp;#34;127.in-addr.arpa. 10800 IN
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> SOA localhost. nobody.invalid. 1 3600 1200 604800 10800&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-data: &amp;#34;1.0.0.127.in-addr.arpa. 10800 IN
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> PTR localhost.&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> reverse IPv6 loopback
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Default content:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-zone: &amp;#34;1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa.&amp;#34; static
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-data: &amp;#34;1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa. 10800 IN
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> NS localhost.&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-data: &amp;#34;1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa. 10800 IN
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> SOA localhost. nobody.invalid. 1 3600 1200 604800 10800&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-data: &amp;#34;1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa. 10800 IN
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> PTR localhost.&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> home.arpa (RFC 8375)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Default content:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-zone: &amp;#34;home.arpa.&amp;#34; static
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-data: &amp;#34;home.arpa. 10800 IN NS localhost.&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-data: &amp;#34;home.arpa. 10800 IN
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> SOA localhost. nobody.invalid. 1 3600 1200 604800 10800&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> resolver.arpa (RFC 9462)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Default content:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-zone: &amp;#34;resolver.arpa.&amp;#34; static
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-data: &amp;#34;resolver.arpa. 10800 IN NS localhost.&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-data: &amp;#34;resolver.arpa. 10800 IN
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> SOA localhost. nobody.invalid. 1 3600 1200 604800 10800&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> service.arpa (draft-ietf-dnssd-srp-25)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Default content:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-zone: &amp;#34;service.arpa.&amp;#34; static
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-data: &amp;#34;service.arpa. 10800 IN NS localhost.&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-data: &amp;#34;service.arpa. 10800 IN
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> SOA localhost. nobody.invalid. 1 3600 1200 604800 10800&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> onion (RFC 7686)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Default content:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-zone: &amp;#34;onion.&amp;#34; static
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-data: &amp;#34;onion. 10800 IN NS localhost.&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-data: &amp;#34;onion. 10800 IN
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> SOA localhost. nobody.invalid. 1 3600 1200 604800 10800&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> test (RFC 6761)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Default content:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-zone: &amp;#34;test.&amp;#34; static
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-data: &amp;#34;test. 10800 IN NS localhost.&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-data: &amp;#34;test. 10800 IN
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> SOA localhost. nobody.invalid. 1 3600 1200 604800 10800&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> invalid (RFC 6761)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Default content:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-zone: &amp;#34;invalid.&amp;#34; static
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-data: &amp;#34;invalid. 10800 IN NS localhost.&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-data: &amp;#34;invalid. 10800 IN
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> SOA localhost. nobody.invalid. 1 3600 1200 604800 10800&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> reverse RFC1918 local use zones
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Reverse data for zones 10.in-addr.arpa, 16.172.in-addr.arpa
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> to 31.172.in-addr.arpa, 168.192.in-addr.arpa. The lo-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cal-zone: is set static and as local-data: SOA and NS records
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> are provided.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> reverse RFC3330 IP4 this, link-local, testnet and broadcast
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Reverse data for zones 0.in-addr.arpa, 254.169.in-addr.arpa,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 2.0.192.in-addr.arpa (TEST NET 1), 100.51.198.in-addr.arpa
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (TEST NET 2), 113.0.203.in-addr.arpa (TEST NET 3),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 255.255.255.255.in-addr.arpa. And from 64.100.in-addr.arpa
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> to 127.100.in-addr.arpa (Shared Address Space).
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> reverse RFC4291 IP6 unspecified
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Reverse data for zone
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> reverse RFC4193 IPv6 Locally Assigned Local Addresses
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Reverse data for zone D.F.ip6.arpa.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> reverse RFC4291 IPv6 Link Local Addresses
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Reverse data for zones 8.E.F.ip6.arpa to B.E.F.ip6.arpa.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> reverse IPv6 Example Prefix
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Reverse data for zone 8.B.D.0.1.0.0.2.ip6.arpa. This zone is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> used for tutorials and examples. You can remove the block on
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> this zone with:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-zone: 8.B.D.0.1.0.0.2.ip6.arpa. nodefault
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> You can also selectively unblock a part of the zone by making
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> that part transparent with a local-zone statement. This also
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> works with the other default zones.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-data: &amp;#34;&amp;lt;resource record string&amp;gt;&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Configure local data, which is served in reply to queries for it.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The query has to match exactly unless you configure the local-zone
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> as redirect. If not matched exactly, the local-zone type deter-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mines further processing. If local-data is configured that is not
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> a subdomain of a local-zone, a transparent local-zone is config-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ured. For record types such as TXT, use single quotes, as in lo-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cal-data: &amp;#39;example. TXT &amp;#34;text&amp;#34;&amp;#39;.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If you need more complicated authoritative data, with referrals,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> wildcards, CNAME/DNAME support, or DNSSEC authoritative service,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> setup a stub-zone for it as detailed in the stub zone section be-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> low.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-data-ptr: &amp;#34;IPaddr name&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Configure local data shorthand for a PTR record with the reversed
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> IPv4 or IPv6 address and the host name. For example &amp;#34;192.0.2.4
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> www.example.com&amp;#34;. TTL can be inserted like this: &amp;#34;2001:DB8::4
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 7200 www.example.com&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-zone-tag: &amp;lt;zone&amp;gt; &amp;lt;&amp;#34;list of tags&amp;#34;&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Assign tags to localzones. Tagged localzones will only be applied
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> when the used access-control element has a matching tag. Tags must
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> be defined in define-tags. Enclose list of tags in quotes (&amp;#34;&amp;#34;)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> and put spaces between tags. When there are multiple tags it
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> checks if the intersection of the list of tags for the query and
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-zone-tag is non-empty.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-zone-override: &amp;lt;zone&amp;gt; &amp;lt;IP netblock&amp;gt; &amp;lt;type&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Override the localzone type for queries from addresses matching
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> netblock. Use this localzone type, regardless the type configured
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> for the local-zone (both tagged and untagged) and regardless the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> type configured using access-control-tag-action.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> response-ip: &amp;lt;IP-netblock&amp;gt; &amp;lt;action&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> This requires use of the &amp;#34;respip&amp;#34; module.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If the IP address in an AAAA or A RR in the answer section of a
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> response matches the specified IP netblock, the specified action
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> will apply. &amp;lt;action&amp;gt; has generally the same semantics as that for
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> access-control-tag-action, but there are some exceptions.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Actions for response-ip are different from those for local-zone in
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> that in case of the former there is no point of such conditions as
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;#34;the query matches it but there is no local data&amp;#34;. Because of
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> this difference, the semantics of response-ip actions are modified
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> or simplified as follows: The static, refuse, transparent, type-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> transparent, and nodefault actions are invalid for response-ip.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Using any of these will cause the configuration to be rejected as
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> faulty. The deny action is non-conditional, i.e. it always results
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> in dropping the corresponding query. The resolution result before
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> applying the deny action is still cached and can be used for other
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> queries.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> response-ip-data: &amp;lt;IP-netblock&amp;gt; &amp;lt;&amp;#34;resource record string&amp;#34;&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> This requires use of the &amp;#34;respip&amp;#34; module.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> This specifies the action data for response-ip with action being
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> to redirect as specified by &amp;#34;resource record string&amp;#34;. &amp;#34;Resource
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> record string&amp;#34; is similar to that of access-control-tag-action,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> but it must be of either AAAA, A or CNAME types. If the IP-net-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> block is an IPv6/IPv4 prefix, the record must be AAAA/A respec-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tively, unless it is a CNAME (which can be used for both versions
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> of IP netblocks). If it is CNAME there must not be more than one
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> response-ip-data for the same IP-netblock. Also, CNAME and other
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> types of records must not coexist for the same IP-netblock, fol-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> lowing the normal rules for CNAME records. The textual domain
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> name for the CNAME does not have to be explicitly terminated with
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> a dot (&amp;#34;.&amp;#34;); the root name is assumed to be the origin for the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> name.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> response-ip-tag: &amp;lt;IP-netblock&amp;gt; &amp;lt;&amp;#34;list of tags&amp;#34;&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> This requires use of the &amp;#34;respip&amp;#34; module.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Assign tags to response IP-netblocks. If the IP address in an
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> AAAA or A RR in the answer section of a response matches the spec-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ified IP-netblock, the specified tags are assigned to the IP ad-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dress. Then, if an access-control-tag is defined for the client
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> and it includes one of the tags for the response IP, the corre-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> sponding access-control-tag-action will apply. Tag matching rule
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> is the same as that for access-control-tag and local-zones. Un-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> like local-zone-tag, response-ip-tag can be defined for an IP-net-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> block even if no response-ip is defined for that netblock. If
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> multiple response-ip-tag options are specified for the same IP-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> netblock in different statements, all but the first will be ig-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> nored. However, this will not be flagged as a configuration er-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ror, but the result is probably not what was intended.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Actions specified in an access-control-tag-action that has a
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> matching tag with response-ip-tag can be those that are &amp;#34;invalid&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> for response-ip listed above, since access-control-tag-actions can
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> be shared with local zones. For these actions, if they behave
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> differently depending on whether local data exists or not in case
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> of local zones, the behavior for response-ip-data will generally
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> result in NOERROR/NODATA instead of NXDOMAIN, since the response-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ip data are inherently type specific, and non-existence of data
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> does not indicate anything about the existence or non-existence of
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the qname itself. For example, if the matching tag action is sta-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tic but there is no data for the corresponding response-ip config-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> uration, then the result will be NOERROR/NODATA. The only case
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> where NXDOMAIN is returned is when an always_nxdomain action ap-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> plies.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ratelimit: &amp;lt;number or 0&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Enable ratelimiting of queries sent to nameserver for performing
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> recursion. If 0, the default, it is disabled. This option is ex-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> perimental at this time. The ratelimit is in queries per second
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> that are allowed. More queries are turned away with an error
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (servfail). This stops recursive floods, eg. random query names,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> but not spoofed reflection floods. Cached responses are not rate-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> limited by this setting. The zone of the query is determined by
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> examining the nameservers for it, the zone name is used to keep
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> track of the rate. For example, 1000 may be a suitable value to
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> stop the server from being overloaded with random names, and keeps
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Unbound from sending traffic to the nameservers for those zones.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Configured forwarders are excluded from ratelimiting.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ratelimit-size: &amp;lt;memory size&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Give the size of the data structure in which the current ongoing
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rates are kept track in. Default 4m. In bytes or use m(mega),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> k(kilo), g(giga). The ratelimit structure is small, so this data
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> structure likely does not need to be large.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ratelimit-slabs: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Give power of 2 number of slabs, this is used to reduce lock con-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tention in the ratelimit tracking data structure. Close to the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> number of cpus is a fairly good setting.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ratelimit-factor: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Set the amount of queries to rate limit when the limit is ex-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ceeded. If set to 0, all queries are dropped for domains where
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the limit is exceeded. If set to another value, 1 in that number
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> is allowed through to complete. Default is 10, allowing 1/10
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> traffic to flow normally. This can make ordinary queries complete
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (if repeatedly queried for), and enter the cache, whilst also mit-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> igating the traffic flow by the factor given.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ratelimit-backoff: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If enabled, the ratelimit is treated as a hard failure instead of
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the default maximum allowed constant rate. When the limit is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> reached, traffic is ratelimited and demand continues to be kept
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> track of for a 2 second rate window. No traffic is allowed, ex-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cept for ratelimit-factor, until demand decreases below the con-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> figured ratelimit for a 2 second rate window. Useful to set rate-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> limit to a suspicious rate to aggressively limit unusually high
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> traffic. Default is off.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ratelimit-for-domain: &amp;lt;domain&amp;gt; &amp;lt;number qps or 0&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Override the global ratelimit for an exact match domain name with
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the listed number. You can give this for any number of names.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> For example, for a top-level-domain you may want to have a higher
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> limit than other names. A value of 0 will disable ratelimiting
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> for that domain.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ratelimit-below-domain: &amp;lt;domain&amp;gt; &amp;lt;number qps or 0&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Override the global ratelimit for a domain name that ends in this
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> name. You can give this multiple times, it then describes differ-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ent settings in different parts of the namespace. The closest
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> matching suffix is used to determine the qps limit. The rate for
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the exact matching domain name is not changed, use rate-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> limit-for-domain to set that, you might want to use different set-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tings for a top-level-domain and subdomains. A value of 0 will
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> disable ratelimiting for domain names that end in this name.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ip-ratelimit: &amp;lt;number or 0&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Enable global ratelimiting of queries accepted per IP address.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> This option is experimental at this time. The ratelimit is in
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> queries per second that are allowed. More queries are completely
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dropped and will not receive a reply, SERVFAIL or otherwise. IP
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ratelimiting happens before looking in the cache. This may be use-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ful for mitigating amplification attacks. Clients with a valid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> DNS Cookie will bypass the ratelimit. If a ratelimit for such
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> clients is still needed, ip-ratelimit-cookie can be used instead.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Default is 0 (disabled).
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ip-ratelimit-cookie: &amp;lt;number or 0&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Enable global ratelimiting of queries accepted per IP address with
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> a valid DNS Cookie. This option is experimental at this time.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The ratelimit is in queries per second that are allowed. More
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> queries are completely dropped and will not receive a reply, SERV-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> FAIL or otherwise. IP ratelimiting happens before looking in the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cache. This option could be useful in combination with al-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> low_cookie in an attempt to mitigate other amplification attacks
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> than UDP reflections (e.g., attacks targeting Unbound itself)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> which are already handled with DNS Cookies. If used, the value is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> suggested to be higher than ip-ratelimit e.g., tenfold. Default
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> is 0 (disabled).
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ip-ratelimit-size: &amp;lt;memory size&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Give the size of the data structure in which the current ongoing
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rates are kept track in. Default 4m. In bytes or use m(mega),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> k(kilo), g(giga). The ip ratelimit structure is small, so this
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> data structure likely does not need to be large.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ip-ratelimit-slabs: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Give power of 2 number of slabs, this is used to reduce lock con-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tention in the ip ratelimit tracking data structure. Close to the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> number of cpus is a fairly good setting.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ip-ratelimit-factor: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Set the amount of queries to rate limit when the limit is ex-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ceeded. If set to 0, all queries are dropped for addresses where
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the limit is exceeded. If set to another value, 1 in that number
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> is allowed through to complete. Default is 10, allowing 1/10
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> traffic to flow normally. This can make ordinary queries complete
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (if repeatedly queried for), and enter the cache, whilst also mit-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> igating the traffic flow by the factor given.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ip-ratelimit-backoff: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If enabled, the ratelimit is treated as a hard failure instead of
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the default maximum allowed constant rate. When the limit is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> reached, traffic is ratelimited and demand continues to be kept
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> track of for a 2 second rate window. No traffic is allowed, ex-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cept for ip-ratelimit-factor, until demand decreases below the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> configured ratelimit for a 2 second rate window. Useful to set
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ip-ratelimit to a suspicious rate to aggressively limit unusually
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> high traffic. Default is off.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> outbound-msg-retry: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The number of retries, per upstream nameserver in a delegation,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> that Unbound will attempt in case a throwaway response is re-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ceived. No response (timeout) contributes to the retry counter.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If a forward/stub zone is used, this is the number of retries per
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> nameserver in the zone. Default is 5.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> max-sent-count: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Hard limit on the number of outgoing queries Unbound will make
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> while resolving a name, making sure large NS sets do not loop.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Results in SERVFAIL when reached. It resets on query restarts
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (e.g., CNAME) and referrals. Default is 32.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> max-query-restarts: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Hard limit on the number of times Unbound is allowed to restart a
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> query upon encountering a CNAME record. Results in SERVFAIL when
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> reached. Changing this value needs caution as it can allow long
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> CNAME chains to be accepted, where Unbound needs to verify (re-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> solve) each link individually. Default is 11.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> iter-scrub-ns: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Limit on the number of NS records allowed in an rrset of type NS,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> from the iterator scrubber. This protects the internals of the re-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> solver from overly large NS sets. Default is 20.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> iter-scrub-cname: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Limit on the number of CNAME, DNAME records in an answer, from the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> iterator scrubber. This protects the internals of the resolver
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> from overly long indirection chains. Clips off the remainder of
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the reply packet at that point. Default is 11.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> max-global-quota: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Limit on the number of upstream queries sent out for an incoming
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> query and its subqueries from recursion. It is not reset during
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the resolution. When it is exceeded the query is failed and the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> lookup process stops. Default is 200.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fast-server-permil: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Specify how many times out of 1000 to pick from the set of fastest
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> servers. 0 turns the feature off. A value of 900 would pick from
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the fastest servers 90 percent of the time, and would perform nor-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mal exploration of random servers for the remaining time. When
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> prefetch is enabled (or serve-expired), such prefetches are not
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> sped up, because there is no one waiting for it, and it presents a
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> good moment to perform server exploration. The fast-server-num op-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tion can be used to specify the size of the fastest servers set.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The default for fast-server-permil is 0.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fast-server-num: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Set the number of servers that should be used for fast server se-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> lection. Only use the fastest specified number of servers with the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fast-server-permil option, that turns this on or off. The default
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> is to use the fastest 3 servers.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> answer-cookie: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If enabled, Unbound will answer to requests containing DNS Cookies
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> as specified in RFC 7873 and RFC 9018. Default is no.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cookie-secret: &amp;lt;128 bit hex string&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Server&amp;#39;s secret for DNS Cookie generation. Useful to explicitly
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> set for servers in an anycast deployment that need to share the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> secret in order to verify each other&amp;#39;s Server Cookies. An example
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> hex string would be &amp;#34;000102030405060708090a0b0c0d0e0f&amp;#34;. Default
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> is a 128 bits random secret generated at startup time. This op-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tion is ignored if a cookie-secret-file is present. In that case
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the secrets from that file are used in DNS Cookie calculations.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cookie-secret-file: &amp;lt;filename&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> File from which the secrets are read used in DNS Cookie calcula-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tions. When this file exists, the secrets in this file are used
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> and the secret specified by the cookie-secret option is ignored.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Enable it by setting a filename, like &amp;#34;/usr/local/etc/un-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> bound_cookiesecrets.txt&amp;#34;. The content of this file must be manip-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ulated with the add_cookie_secret, drop_cookie_secret and acti-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> vate_cookie_secret commands to the unbound-control(8) tool. Please
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> see that manpage on how to perform a safe cookie secret rollover.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Default is &amp;#34;&amp;#34; (disabled).
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> edns-client-string: &amp;lt;IP netblock&amp;gt; &amp;lt;string&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Include an EDNS0 option containing configured ascii string in
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> queries with destination address matching the configured IP net-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> block. This configuration option can be used multiple times. The
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> most specific match will be used.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> edns-client-string-opcode: &amp;lt;opcode&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> EDNS0 option code for the edns-client-string option, from 0 to
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 1. A value from the `Reserved for Local/Experimental` range
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (65001-65534) should be used. Default is 65001.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ede: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If enabled, Unbound will respond with Extended DNS Error codes
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (RFC8914). These EDEs provide additional information with a re-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> sponse mainly for, but not limited to, DNS and DNSSEC errors.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> When the val-log-level option is also set to 2, responses with Ex-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tended DNS Errors concerning DNSSEC failures will also contain a
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> descriptive text message about the reason for the failure. De-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fault is &amp;#34;no&amp;#34;.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ede-serve-expired: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If enabled, Unbound will attach an Extended DNS Error (RFC8914)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Code 3 - Stale Answer as EDNS0 option to the expired response.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The ede option needs to be enabled as well for this to work. De-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fault is &amp;#34;no&amp;#34;.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dns-error-reporting: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If enabled, Unbound will send DNS Error Reports (RFC9567). The
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> name servers need to express support by attaching the Report-Chan-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> nel EDNS0 option on their replies specifying the reporting agent
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> for the zone. Any errors encountered during resolution that would
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> result in Unbound generating an Extended DNS Error (RFC8914) will
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> be reported to the zone&amp;#39;s reporting agent. The ede option does
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> not need to be enabled for this to work. It is advised that the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> qname-minimisation option is also enabled to increase privacy on
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the outgoing reports. Default is &amp;#34;no&amp;#34;.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Remote Control Options
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> In the remote-control: clause are the declarations for the remote con-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> trol facility. If this is enabled, the unbound-control(8) utility can
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> be used to send commands to the running Unbound server. The server
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> uses these clauses to setup TLSv1 security for the connection. The un-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> bound-control(8) utility also reads the remote-control section for op-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tions. To setup the correct self-signed certificates use the un-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> bound-control-setup(8) utility.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> control-enable: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The option is used to enable remote control, default is &amp;#34;no&amp;#34;. If
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> turned off, the server does not listen for control commands.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> control-interface: &amp;lt;ip address or interface name or path&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Give IPv4 or IPv6 addresses or local socket path to listen on for
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> control commands. If an interface name is used instead of an ip
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> address, the list of ip addresses on that interface are used. By
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> default localhost (127.0.0.1 and ::1) is listened to. Use 0.0.0.0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> and ::0 to listen to all interfaces. If you change this and per-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> missions have been dropped, you must restart the server for the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> change to take effect.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If you set it to an absolute path, a unix domain socket is used.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> This socket does not use the certificates and keys, so those files
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> need not be present. To restrict access, Unbound sets permissions
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> on the file to the user and group that is configured, the access
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> bits are set to allow the group members to access the control
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> socket file. Put users that need to access the socket in the that
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> group. To restrict access further, create a directory to put the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> control socket in and restrict access to that directory.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> control-port: &amp;lt;port number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The port number to listen on for IPv4 or IPv6 control interfaces,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> default is 8953. If you change this and permissions have been
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dropped, you must restart the server for the change to take ef-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fect.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> control-use-cert: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> For localhost control-interface you can disable the use of TLS by
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> setting this option to &amp;#34;no&amp;#34;, default is &amp;#34;yes&amp;#34;. For local sockets,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> TLS is disabled and the value of this option is ignored.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> server-key-file: &amp;lt;private key file&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Path to the server private key, by default unbound_server.key.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> This file is generated by the unbound-control-setup utility. This
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> file is used by the Unbound server, but not by unbound-control.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> server-cert-file: &amp;lt;certificate file.pem&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Path to the server self signed certificate, by default un-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> bound_server.pem. This file is generated by the unbound-con-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> trol-setup utility. This file is used by the Unbound server, and
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> also by unbound-control.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> control-key-file: &amp;lt;private key file&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Path to the control client private key, by default unbound_con-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> trol.key. This file is generated by the unbound-control-setup
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> utility. This file is used by unbound-control.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> control-cert-file: &amp;lt;certificate file.pem&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Path to the control client certificate, by default unbound_con-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> trol.pem. This certificate has to be signed with the server cer-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tificate. This file is generated by the unbound-control-setup
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> utility. This file is used by unbound-control.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Stub Zone Options
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> There may be multiple stub-zone: clauses. Each with a name: and zero or
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> more hostnames or IP addresses. For the stub zone this list of name-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> servers is used. Class IN is assumed. The servers should be authority
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> servers, not recursors; Unbound performs the recursive processing it-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> self for stub zones.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The stub zone can be used to configure authoritative data to be used by
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the resolver that cannot be accessed using the public internet servers.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> This is useful for company-local data or private zones. Setup an au-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> thoritative server on a different host (or different port). Enter a
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> config entry for Unbound with stub-addr: &amp;lt;ip address of host[@port]&amp;gt;.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The Unbound resolver can then access the data, without referring to the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> public internet for it.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> This setup allows DNSSEC signed zones to be served by that authorita-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tive server, in which case a trusted key entry with the public key can
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> be put in config, so that Unbound can validate the data and set the AD
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> bit on replies for the private zone (authoritative servers do not set
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the AD bit). This setup makes Unbound capable of answering queries for
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the private zone, and can even set the AD bit (&amp;#39;authentic&amp;#39;), but the AA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&amp;#39;authoritative&amp;#39;) bit is not set on these replies.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Consider adding server: statements for domain-insecure: and for lo-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cal-zone: name nodefault for the zone if it is a locally served zone.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The insecure clause stops DNSSEC from invalidating the zone. The local
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> zone nodefault (or transparent) clause makes the (reverse-) zone bypass
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Unbound&amp;#39;s filtering of RFC1918 zones.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> name: &amp;lt;domain name&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Name of the stub zone. This is the full domain name of the zone.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> stub-host: &amp;lt;domain name&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Name of stub zone nameserver. Is itself resolved before it is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> used. To use a nondefault port for DNS communication append &amp;#39;@&amp;#39;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> with the port number. If tls is enabled, then you can append a
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;#39;#&amp;#39; and a name, then it&amp;#39;ll check the tls authentication certifi-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cates with that name. If you combine the &amp;#39;@&amp;#39; and &amp;#39;#&amp;#39;, the &amp;#39;@&amp;#39;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> comes first. If only &amp;#39;#&amp;#39; is used the default port is the con-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> figured tls-port.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> stub-addr: &amp;lt;IP address&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> IP address of stub zone nameserver. Can be IP 4 or IP 6. To use
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> a nondefault port for DNS communication append &amp;#39;@&amp;#39; with the port
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> number. If tls is enabled, then you can append a &amp;#39;#&amp;#39; and a
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> name, then it&amp;#39;ll check the tls authentication certificates with
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> that name. If you combine the &amp;#39;@&amp;#39; and &amp;#39;#&amp;#39;, the &amp;#39;@&amp;#39; comes first.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If only &amp;#39;#&amp;#39; is used the default port is the configured tls-port.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> stub-prime: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> This option is by default no. If enabled it performs NS set
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> priming, which is similar to root hints, where it starts using
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the list of nameservers currently published by the zone. Thus,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> if the hint list is slightly outdated, the resolver picks up a
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> correct list online.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> stub-first: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If enabled, a query is attempted without the stub clause if it
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fails. The data could not be retrieved and would have caused
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> SERVFAIL because the servers are unreachable, instead it is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tried without this clause. The default is no.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> stub-tls-upstream: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Enabled or disable whether the queries to this stub use TLS for
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> transport. Default is no.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> stub-ssl-upstream: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Alternate syntax for stub-tls-upstream.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> stub-tcp-upstream: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If it is set to &amp;#34;yes&amp;#34; then upstream queries use TCP only for
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> transport regardless of global flag tcp-upstream. Default is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> no.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> stub-no-cache: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Default is no. If enabled, data inside the stub is not cached.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> This is useful when you want immediate changes to be visible.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Forward Zone Options
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> There may be multiple forward-zone: clauses. Each with a name: and zero
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> or more hostnames or IP addresses. For the forward zone this list of
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> nameservers is used to forward the queries to. The servers listed as
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> forward-host: and forward-addr: have to handle further recursion for
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the query. Thus, those servers are not authority servers, but are
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (just like Unbound is) recursive servers too; Unbound does not perform
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> recursion itself for the forward zone, it lets the remote server do it.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Class IN is assumed. CNAMEs are chased by Unbound itself, asking the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> remote server for every name in the indirection chain, to protect the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local cache from illegal indirect referenced items. A forward-zone en-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> try with name &amp;#34;.&amp;#34; and a forward-addr target will forward all queries to
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> that other server (unless it can answer from the cache).
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> name: &amp;lt;domain name&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Name of the forward zone. This is the full domain name of the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> zone.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> forward-host: &amp;lt;domain name&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Name of server to forward to. Is itself resolved before it is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> used. To use a nondefault port for DNS communication append &amp;#39;@&amp;#39;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> with the port number. If tls is enabled, then you can append a
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;#39;#&amp;#39; and a name, then it&amp;#39;ll check the tls authentication certifi-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cates with that name. If you combine the &amp;#39;@&amp;#39; and &amp;#39;#&amp;#39;, the &amp;#39;@&amp;#39;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> comes first. If only &amp;#39;#&amp;#39; is used the default port is the con-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> figured tls-port.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> forward-addr: &amp;lt;IP address&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> IP address of server to forward to. Can be IP 4 or IP 6. To use
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> a nondefault port for DNS communication append &amp;#39;@&amp;#39; with the port
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> number. If tls is enabled, then you can append a &amp;#39;#&amp;#39; and a
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> name, then it&amp;#39;ll check the tls authentication certificates with
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> that name. If you combine the &amp;#39;@&amp;#39; and &amp;#39;#&amp;#39;, the &amp;#39;@&amp;#39; comes first.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If only &amp;#39;#&amp;#39; is used the default port is the configured tls-port.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> At high verbosity it logs the TLS certificate, with TLS enabled.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If you leave out the &amp;#39;#&amp;#39; and auth name from the forward-addr,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> any name is accepted. The cert must also match a CA from the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tls-cert-bundle.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> forward-first: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If a forwarded query is met with a SERVFAIL error, and this op-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tion is enabled, Unbound will fall back to normal recursive res-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> olution for this query as if no query forwarding had been speci-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fied. The default is &amp;#34;no&amp;#34;.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> forward-tls-upstream: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Enabled or disable whether the queries to this forwarder use TLS
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> for transport. Default is no. If you enable this, also config-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ure a tls-cert-bundle or use tls-win-cert to load CA certs, oth-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> erwise the connections cannot be authenticated.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> forward-ssl-upstream: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Alternate syntax for forward-tls-upstream.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> forward-tcp-upstream: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If it is set to &amp;#34;yes&amp;#34; then upstream queries use TCP only for
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> transport regardless of global flag tcp-upstream. Default is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> no.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> forward-no-cache: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Default is no. If enabled, data inside the forward is not
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cached. This is useful when you want immediate changes to be
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> visible.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Authority Zone Options
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Authority zones are configured with auth-zone:, and each one must have
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> a name:. There can be multiple ones, by listing multiple auth-zone
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> clauses, each with a different name, pertaining to that part of the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> namespace. The authority zone with the name closest to the name looked
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> up is used. Authority zones can be processed on two distinct, non-ex-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> clusive, configurable stages.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> With for-downstream: yes (default), authority zones are processed after
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-zones and before cache. When used in this manner, Unbound re-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> sponds like an authority server with no further processing other than
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> returning an answer from the zone contents. A notable example, in this
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> case, is CNAME records which are returned verbatim to downstream
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> clients without further resolution.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> With for-upstream: yes (default), authority zones are processed after
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the cache lookup, just before going to the network to fetch information
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> for recursion. When used in this manner they provide a local copy of
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> an authority server that speeds up lookups for that data during resolv-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ing.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If both options are enabled (default), client queries for an authority
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> zone are answered authoritatively from Unbound, while internal queries
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> that require data from the authority zone consult the local zone data
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> instead of going to the network.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> An interesting configuration is for-downstream: no, for-upstream: yes
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> that allows for hyperlocal behavior where both client and internal
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> queries consult the local zone data while resolving. In this case, the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> aforementioned CNAME example will result in a thoroughly resolved an-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> swer.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Authority zones can be read from zonefile. And can be kept updated via
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> AXFR and IXFR. After update the zonefile is rewritten. The update
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mechanism uses the SOA timer values and performs SOA UDP queries to de-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tect zone changes.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If the update fetch fails, the timers in the SOA record are used to
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> time another fetch attempt. Until the SOA expiry timer is reached.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Then the zone is expired. When a zone is expired, queries are SERV-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> FAIL, and any new serial number is accepted from the primary (even if
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> older), and if fallback is enabled, the fallback activates to fetch
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> from the upstream instead of the SERVFAIL.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> name: &amp;lt;zone name&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Name of the authority zone.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> primary: &amp;lt;IP address or host name&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Where to download a copy of the zone from, with AXFR and IXFR.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Multiple primaries can be specified. They are all tried if one
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fails. To use a nondefault port for DNS communication append
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;#39;@&amp;#39; with the port number. You can append a &amp;#39;#&amp;#39; and a name, then
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> AXFR over TLS can be used and the tls authentication certifi-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cates will be checked with that name. If you combine the &amp;#39;@&amp;#39;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> and &amp;#39;#&amp;#39;, the &amp;#39;@&amp;#39; comes first. If you point it at another Un-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> bound instance, it would not work because that does not support
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> AXFR/IXFR for the zone, but if you used url: to download the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> zonefile as a text file from a webserver that would work. If
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> you specify the hostname, you cannot use the domain from the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> zonefile, because it may not have that when retrieving that
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> data, instead use a plain IP address to avoid a circular depen-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dency on retrieving that IP address.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> master: &amp;lt;IP address or host name&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Alternate syntax for primary.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> url: &amp;lt;url to zonefile&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Where to download a zonefile for the zone. With http or https.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> An example for the url is &amp;#34;http://www.example.com/exam-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ple.org.zone&amp;#34;. Multiple url statements can be given, they are
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tried in turn. If only urls are given the SOA refresh timer is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> used to wait for making new downloads. If also primaries are
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> listed, the primaries are first probed with UDP SOA queries to
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> see if the SOA serial number has changed, reducing the number of
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> downloads. If none of the urls work, the primaries are tried
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> with IXFR and AXFR. For https, the tls-cert-bundle and the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> hostname from the url are used to authenticate the connection.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If you specify a hostname in the URL, you cannot use the domain
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> from the zonefile, because it may not have that when retrieving
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> that data, instead use a plain IP address to avoid a circular
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dependency on retrieving that IP address. Avoid dependencies on
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> name lookups by using a notation like &amp;#34;http://192.0.2.1/unbound-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> primaries/example.com.zone&amp;#34;, with an explicit IP address.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> allow-notify: &amp;lt;IP address or host name or netblockIP/prefix&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> With allow-notify you can specify additional sources of noti-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fies. When notified, the server attempts to first probe and
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> then zone transfer. If the notify is from a primary, it first
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> attempts that primary. Otherwise other primaries are attempted.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If there are no primaries, but only urls, the file is downloaded
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> when notified. The primaries from primary: and url: statements
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> are allowed notify by default.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fallback-enabled: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Default no. If enabled, Unbound falls back to querying the in-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ternet as a resolver for this zone when lookups fail. For exam-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ple for DNSSEC validation failures.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> for-downstream: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Default yes. If enabled, Unbound serves authority responses to
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> downstream clients for this zone. This option makes Unbound be-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> have, for the queries with names in this zone, like one of the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> authority servers for that zone. Turn it off if you want Un-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> bound to provide recursion for the zone but have a local copy of
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> zone data. If for-downstream is no and for-upstream is yes,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> then Unbound will DNSSEC validate the contents of the zone be-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fore serving the zone contents to clients and store validation
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> results in the cache.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> for-upstream: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Default yes. If enabled, Unbound fetches data from this data
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> collection for answering recursion queries. Instead of sending
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> queries over the internet to the authority servers for this
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> zone, it&amp;#39;ll fetch the data directly from the zone data. Turn it
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> on when you want Unbound to provide recursion for downstream
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> clients, and use the zone data as a local copy to speed up
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> lookups.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> zonemd-check: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Enable this option to check ZONEMD records in the zone. Default
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> is disabled. The ZONEMD record is a checksum over the zone
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> data. This includes glue in the zone and data from the zone
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> file, and excludes comments from the zone file. When there is a
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> DNSSEC chain of trust, DNSSEC signatures are checked too.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> zonemd-reject-absence: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Enable this option to reject the absence of the ZONEMD record.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Without it, when zonemd is not there it is not checked. It is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> useful to enable for a nonDNSSEC signed zone where the operator
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> wants to require the verification of a ZONEMD, hence a missing
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ZONEMD is a failure. The action upon failure is controlled by
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the zonemd-permissive-mode option, for log only or also block
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the zone. The default is no.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Without the option absence of a ZONEMD is only a failure when
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the zone is DNSSEC signed, and we have a trust anchor, and the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> DNSSEC verification of the absence of the ZONEMD fails. With
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the option enabled, the absence of a ZONEMD is always a failure,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> also for nonDNSSEC signed zones.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> zonefile: &amp;lt;filename&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The filename where the zone is stored. If not given then no
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> zonefile is used. If the file does not exist or is empty, Un-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> bound will attempt to fetch zone data (eg. from the primary
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> servers).
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>View Options
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> There may be multiple view: clauses. Each with a name: and zero or more
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-zone and local-data elements. Views can also contain view-first,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> response-ip, response-ip-data and local-data-ptr elements. View can be
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mapped to requests by specifying the view name in an access-con-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> trol-view element. Options from matching views will override global op-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tions. Global options will be used if no matching view is found, or
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> when the matching view does not have the option specified.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> name: &amp;lt;view name&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Name of the view. Must be unique. This name is used in ac-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cess-control-view elements.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-zone: &amp;lt;zone&amp;gt; &amp;lt;type&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> View specific local-zone elements. Has the same types and behav-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> iour as the global local-zone elements. When there is at least
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> one local-zone specified and view-first is no, the default lo-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cal-zones will be added to this view. Defaults can be disabled
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> using the nodefault type. When view-first is yes or when a view
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> does not have a local-zone, the global local-zone will be used
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> including it&amp;#39;s default zones.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-data: &amp;#34;&amp;lt;resource record string&amp;gt;&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> View specific local-data elements. Has the same behaviour as the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> global local-data elements.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-data-ptr: &amp;#34;IPaddr name&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> View specific local-data-ptr elements. Has the same behaviour as
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the global local-data-ptr elements.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> view-first: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If enabled, it attempts to use the global local-zone and lo-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cal-data if there is no match in the view specific options. The
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> default is no.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Python Module Options
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The python: clause gives the settings for the python(1) script module.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> This module acts like the iterator and validator modules do, on queries
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> and answers. To enable the script module it has to be compiled into
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the daemon, and the word &amp;#34;python&amp;#34; has to be put in the module-config:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> option (usually first, or between the validator and iterator). Multiple
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> instances of the python module are supported by adding the word
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;#34;python&amp;#34; more than once.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If the chroot: option is enabled, you should make sure Python&amp;#39;s library
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> directory structure is bind mounted in the new root environment, see
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mount(8). Also the python-script: path should be specified as an ab-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> solute path relative to the new root, or as a relative path to the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> working directory.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> python-script: &amp;lt;python file&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The script file to load. Repeat this option for every python
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> module instance added to the module-config: option.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Dynamic Library Module Options
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The dynlib: clause gives the settings for the dynlib module. This mod-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ule is only a very small wrapper that allows dynamic modules to be
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> loaded on runtime instead of being compiled into the application. To
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> enable the dynlib module it has to be compiled into the daemon, and the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> word &amp;#34;dynlib&amp;#34; has to be put in the module-config: option. Multiple in-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> stances of dynamic libraries are supported by adding the word &amp;#34;dynlib&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> more than once.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The dynlib-file: path should be specified as an absolute path relative
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> to the new path set by chroot: option, or as a relative path to the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> working directory.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dynlib-file: &amp;lt;dynlib file&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The dynamic library file to load. Repeat this option for every
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dynlib module instance added to the module-config: option.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>DNS64 Module Options
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The dns64 module must be configured in the module-config: directive
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> e.g., &amp;#34;dns64 validator iterator&amp;#34; and be compiled into the daemon to be
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> enabled. These settings go in the server: section.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dns64-prefix: &amp;lt;IPv6 prefix&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> This sets the DNS64 prefix to use to synthesize AAAA records
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> with. It must be /96 or shorter. The default prefix is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 64:ff9b::/96.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dns64-synthall: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Debug option, default no. If enabled, synthesize all AAAA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> records despite the presence of actual AAAA records.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dns64-ignore-aaaa: &amp;lt;name&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> List domain for which the AAAA records are ignored and the A
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> record is used by dns64 processing instead. Can be entered mul-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tiple times, list a new domain for which it applies, one per
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> line. Applies also to names underneath the name given.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>NAT64 Operation
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> NAT64 operation allows using a NAT64 prefix for outbound requests to
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> IPv4-only servers. It is controlled by two options in the server: sec-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tion:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> do-nat64: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Use NAT64 to reach IPv4-only servers. Consider also enabling
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> prefer-ip6 to prefer native IPv6 connections to nameservers.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Default no.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> nat64-prefix: &amp;lt;IPv6 prefix&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Use a specific NAT64 prefix to reach IPv4-only servers. De-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> faults to using the prefix configured in dns64-prefix, which in
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> turn defaults to 64:ff9b::/96. The prefix length must be one of
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> /32, /40, /48, /56, /64 or /96.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>DNSCrypt Options
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The dnscrypt: clause gives the settings of the dnscrypt channel. While
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> those options are available, they are only meaningful if Unbound was
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> compiled with --enable-dnscrypt. Currently certificate and secret/pub-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> lic keys cannot be generated by Unbound. You can use dnscrypt-wrapper
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> to generate those: &amp;lt;https://github.com/cofyc/dnscrypt-wrapper/blob/mas-&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ter/README.md#usage
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnscrypt-enable: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Whether or not the dnscrypt config should be enabled. You may
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> define configuration but not activate it. The default is no.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnscrypt-port: &amp;lt;port number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> On which port should dnscrypt should be activated. Note that you
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> should have a matching interface option defined in the server
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> section for this port.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnscrypt-provider: &amp;lt;provider name&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The provider name to use to distribute certificates. This is of
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the form: 2.dnscrypt-cert.example.com.. The name MUST end with a
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dot.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnscrypt-secret-key: &amp;lt;path to secret key file&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Path to the time limited secret key file. This option may be
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> specified multiple times.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnscrypt-provider-cert: &amp;lt;path to cert file&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Path to the certificate related to the dnscrypt-secret-keys.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> This option may be specified multiple times.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnscrypt-provider-cert-rotated: &amp;lt;path to cert file&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Path to a certificate that we should be able to serve existing
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> connection from but do not want to advertise over
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnscrypt-provider&amp;#39;s TXT record certs distribution. A typical
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> use case is when rotating certificates, existing clients may
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> still use the client magic from the old cert in their queries
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> until they fetch and update the new cert. Likewise, it would al-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> low one to prime the new cert/key without distributing the new
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cert yet, this can be useful when using a network of servers us-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ing anycast and on which the configuration may not get updated
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> at the exact same time. By priming the cert, the servers can
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> handle both old and new certs traffic while distributing only
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> one. This option may be specified multiple times.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnscrypt-shared-secret-cache-size: &amp;lt;memory size&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Give the size of the data structure in which the shared secret
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> keys are kept in. Default 4m. In bytes or use m(mega),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> k(kilo), g(giga). The shared secret cache is used when a same
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> client is making multiple queries using the same public key. It
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> saves a substantial amount of CPU.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnscrypt-shared-secret-cache-slabs: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Give power of 2 number of slabs, this is used to reduce lock
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> contention in the dnscrypt shared secrets cache. Close to the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> number of cpus is a fairly good setting.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnscrypt-nonce-cache-size: &amp;lt;memory size&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Give the size of the data structure in which the client nonces
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> are kept in. Default 4m. In bytes or use m(mega), k(kilo),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> g(giga). The nonce cache is used to prevent dnscrypt message
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> replaying. Client nonce should be unique for any pair of client
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> pk/server sk.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnscrypt-nonce-cache-slabs: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Give power of 2 number of slabs, this is used to reduce lock
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> contention in the dnscrypt nonce cache. Close to the number of
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cpus is a fairly good setting.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>EDNS Client Subnet Module Options
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The ECS module must be configured in the module-config: directive e.g.,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;#34;subnetcache validator iterator&amp;#34; and be compiled into the daemon to be
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> enabled. These settings go in the server: section.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If the destination address is allowed in the configuration Unbound will
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> add the EDNS0 option to the query containing the relevant part of the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> client&amp;#39;s address. When an answer contains the ECS option the response
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> and the option are placed in a specialized cache. If the authority in-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dicated no support, the response is stored in the regular cache.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Additionally, when a client includes the option in its queries, Unbound
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> will forward the option when sending the query to addresses that are
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> explicitly allowed in the configuration using send-client-subnet. The
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> option will always be forwarded, regardless the allowed addresses, if
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> client-subnet-always-forward is set to yes. In this case the lookup in
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the regular cache is skipped.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The maximum size of the ECS cache is controlled by &amp;#39;msg-cache-size&amp;#39; in
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the configuration file. On top of that, for each query only 100 differ-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ent subnets are allowed to be stored for each address family. Exceeding
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> that number, older entries will be purged from cache.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Note that due to the nature of how EDNS Client Subnet works, by segre-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> gating the client IP space in order to try and have tailored responses
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> for prefixes of unknown sizes, resolution and cache response perfor-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mance are impacted as a result. Usage of the subnetcache module should
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> only be enabled in installations that require such functionality where
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the resolver and the clients belong to different networks. An example
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> of that is an open resolver installation.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> This module does not interact with the serve-expired* and prefetch: op-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tions.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> send-client-subnet: &amp;lt;IP address&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Send client source address to this authority. Append /num to in-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dicate a classless delegation netblock, for example like
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 10.2.3.4/24 or 2001::11/64. Can be given multiple times. Author-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ities not listed will not receive edns-subnet information, un-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> less domain in query is specified in client-subnet-zone.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> client-subnet-zone: &amp;lt;domain&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Send client source address in queries for this domain and its
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> subdomains. Can be given multiple times. Zones not listed will
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> not receive edns-subnet information, unless hosted by authority
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> specified in send-client-subnet.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> client-subnet-always-forward: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Specify whether the ECS address check (configured using
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> send-client-subnet) is applied for all queries, even if the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> triggering query contains an ECS record, or only for queries for
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> which the ECS record is generated using the querier address (and
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> therefore did not contain ECS data in the client query). If en-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> abled, the address check is skipped when the client query con-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tains an ECS record. And the lookup in the regular cache is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> skipped. Default is no.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> max-client-subnet-ipv6: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Specifies the maximum prefix length of the client source address
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> we are willing to expose to third parties for IPv6. Defaults to
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 56.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> max-client-subnet-ipv4: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Specifies the maximum prefix length of the client source address
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> we are willing to expose to third parties for IPv4. Defaults to
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 24.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> min-client-subnet-ipv6: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Specifies the minimum prefix length of the IPv6 source mask we
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> are willing to accept in queries. Shorter source masks result in
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> REFUSED answers. Source mask of 0 is always accepted. Default is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 0.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> min-client-subnet-ipv4: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Specifies the minimum prefix length of the IPv4 source mask we
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> are willing to accept in queries. Shorter source masks result in
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> REFUSED answers. Source mask of 0 is always accepted. Default is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 0.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> max-ecs-tree-size-ipv4: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Specifies the maximum number of subnets ECS answers kept in the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ECS radix tree. This number applies for each qname/qclass/qtype
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tuple. Defaults to 100.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> max-ecs-tree-size-ipv6: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Specifies the maximum number of subnets ECS answers kept in the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ECS radix tree. This number applies for each qname/qclass/qtype
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tuple. Defaults to 100.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Opportunistic IPsec Support Module Options
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The IPsec module must be configured in the module-config: directive
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> e.g., &amp;#34;ipsecmod validator iterator&amp;#34; and be compiled into Unbound by us-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ing --enable-ipsecmod to be enabled. These settings go in the server:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> section.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> When Unbound receives an A/AAAA query that is not in the cache and
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> finds a valid answer, it will withhold returning the answer and instead
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> will generate an IPSECKEY subquery for the same domain name. If an an-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> swer was found, Unbound will call an external hook passing the follow-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ing arguments:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> QNAME
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Domain name of the A/AAAA and IPSECKEY query. In string for-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mat.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> IPSECKEY TTL
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> TTL of the IPSECKEY RRset.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> A/AAAA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> String of space separated IP addresses present in the A/AAAA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> RRset. The IP addresses are in string format.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> IPSECKEY
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> String of space separated IPSECKEY RDATA present in the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> IPSECKEY RRset. The IPSECKEY RDATA are in DNS presentation
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> format.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The A/AAAA answer is then cached and returned to the client. If the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> external hook was called the TTL changes to ensure it doesn&amp;#39;t surpass
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ipsecmod-max-ttl.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The same procedure is also followed when prefetch: is used, but the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> A/AAAA answer is given to the client before the hook is called. ipsec-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mod-max-ttl ensures that the A/AAAA answer given from cache is still
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> relevant for opportunistic IPsec.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ipsecmod-enabled: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Specifies whether the IPsec module is enabled or not. The IPsec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> module still needs to be defined in the module-config: direc-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tive. This option facilitates turning on/off the module without
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> restarting/reloading Unbound. Defaults to yes.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ipsecmod-hook: &amp;lt;filename&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Specifies the external hook that Unbound will call with sys-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tem(3). The file can be specified as an absolute/relative path.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The file needs the proper permissions to be able to be executed
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> by the same user that runs Unbound. It must be present when the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> IPsec module is defined in the module-config: directive.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ipsecmod-strict: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If enabled Unbound requires the external hook to return a suc-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cess value of 0. Failing to do so Unbound will reply with SERV-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> FAIL. The A/AAAA answer will also not be cached. Defaults to
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> no.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ipsecmod-max-ttl: &amp;lt;seconds&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Time to live maximum for A/AAAA cached records after calling the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> external hook. Defaults to 3600.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ipsecmod-ignore-bogus: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Specifies the behaviour of Unbound when the IPSECKEY answer is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> bogus. If set to yes, the hook will be called and the A/AAAA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> answer will be returned to the client. If set to no, the hook
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> will not be called and the answer to the A/AAAA query will be
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> SERVFAIL. Mainly used for testing. Defaults to no.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ipsecmod-allow: &amp;lt;domain&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Allow the ipsecmod functionality for the domain so that the mod-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ule logic will be executed. Can be given multiple times, for
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> different domains. If the option is not specified, all domains
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> are treated as being allowed (default).
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ipsecmod-whitelist: &amp;lt;domain&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Alternate syntax for ipsecmod-allow.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Cache DB Module Options
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The Cache DB module must be configured in the module-config: directive
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> e.g., &amp;#34;validator cachedb iterator&amp;#34; and be compiled into the daemon with
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --enable-cachedb. If this module is enabled and configured, the speci-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fied backend database works as a second level cache: When Unbound can-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> not find an answer to a query in its built-in in-memory cache, it con-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> sults the specified backend. If it finds a valid answer in the back-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> end, Unbound uses it to respond to the query without performing itera-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tive DNS resolution. If Unbound cannot even find an answer in the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> backend, it resolves the query as usual, and stores the answer in the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> backend.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> This module interacts with the serve-expired-* options and will reply
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> with expired data if Unbound is configured for that.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If Unbound was built with --with-libhiredis on a system that has in-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> stalled the hiredis C client library of Redis, then the &amp;#34;redis&amp;#34; backend
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> can be used. This backend communicates with the specified Redis server
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> over a TCP connection to store and retrieve cache data. It can be used
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> as a persistent and/or shared cache backend. It should be noted that
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Unbound never removes data stored in the Redis server, even if some
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> data have expired in terms of DNS TTL or the Redis server has cached
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> too much data; if necessary the Redis server must be configured to
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> limit the cache size, preferably with some kind of least-recently-used
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> eviction policy. Additionally, the redis-expire-records option can be
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> used in order to set the relative DNS TTL of the message as timeout to
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the Redis records; keep in mind that some additional memory is used per
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> key and that the expire information is stored as absolute Unix time-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> stamps in Redis (computer time must be stable). This backend uses syn-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> chronous communication with the Redis server based on the assumption
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> that the communication is stable and sufficiently fast. The thread
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> waiting for a response from the Redis server cannot handle other DNS
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> queries. Although the backend has the ability to reconnect to the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> server when the connection is closed unexpectedly and there is a con-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> figurable timeout in case the server is overly slow or hangs up, these
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cases are assumed to be very rare. If connection close or timeout hap-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> pens too often, Unbound will be effectively unusable with this backend.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> It&amp;#39;s the administrator&amp;#39;s responsibility to make the assumption hold.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The cachedb: clause gives custom settings of the cache DB module.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> backend: &amp;lt;backend name&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Specify the backend database name. The default database is the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> in-memory backend named &amp;#34;testframe&amp;#34;, which, as the name sug-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> gests, is not of any practical use. Depending on the build-time
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> configuration, &amp;#34;redis&amp;#34; backend may also be used as described
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> above.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> secret-seed: &amp;lt;&amp;#34;secret string&amp;#34;&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Specify a seed to calculate a hash value from query information.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> This value will be used as the key of the corresponding answer
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> for the backend database and can be customized if the hash
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> should not be predictable operationally. If the backend data-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> base is shared by multiple Unbound instances, all instances must
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> use the same secret seed. This option defaults to &amp;#34;default&amp;#34;.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cachedb-no-store: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If the backend should be read from, but not written to. This
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> makes this instance not store dns messages in the backend. But
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> if data is available it is retrieved. The default is no.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cachedb-check-when-serve-expired: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If enabled, the cachedb is checked before an expired response is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> returned. When serve-expired is enabled, without serve-ex-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> pired-client-timeout, it then does not immediately respond with
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> an expired response from cache, but instead first checks the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cachedb for valid contents, and if so returns it. If the cachedb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> also has no valid contents, the serve expired response is sent.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If also serve-expired-client-timeout is enabled, the expired re-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> sponse is delayed until the timeout expires. Unless the lookup
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> succeeds within the timeout. The default is yes.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The following cachedb options are specific to the redis backend.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> redis-server-host: &amp;lt;server address or name&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The IP (either v6 or v4) address or domain name of the Redis
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> server. In general an IP address should be specified as other-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> wise Unbound will have to resolve the name of the server every
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> time it establishes a connection to the server. This option de-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> faults to &amp;#34;127.0.0.1&amp;#34;.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> redis-server-port: &amp;lt;port number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The TCP port number of the Redis server. This option defaults
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> to 6379.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> redis-server-path: &amp;lt;unix socket path&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The unix socket path to connect to the Redis server. Off by de-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fault, and it can be set to &amp;#34;&amp;#34; to turn this off. Unix sockets
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> may have better throughput than the IP address option.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> redis-server-password: &amp;#34;&amp;lt;password&amp;gt;&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The Redis AUTH password to use for the Redis server. Only rele-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> vant if Redis is configured for client password authorisation.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Off by default, and it can be set to &amp;#34;&amp;#34; to turn this off.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> redis-timeout: &amp;lt;msec&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The period until when Unbound waits for a response from the Re-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dis sever. If this timeout expires Unbound closes the connec-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tion, treats it as if the Redis server does not have the re-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> quested data, and will try to re-establish a new connection
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> later. This option defaults to 100 milliseconds.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> redis-command-timeout: &amp;lt;msec&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The timeout to use for Redis commands, in milliseconds. If 0,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> it uses the redis-timeout value. The default is 0.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> redis-connect-timeout: &amp;lt;msec&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The timeout to use for Redis connection set up, in milliseconds.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If 0, it uses the redis-timeout value. The default is 0.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> redis-expire-records: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If Redis record expiration is enabled. If yes, Unbound sets
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> timeout for Redis records so that Redis can evict keys that have
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> expired automatically. If Unbound is configured with serve-ex-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> pired and serve-expired-ttl is 0, this option is internally re-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> verted to &amp;#34;no&amp;#34;. Redis SETEX support is required for this option
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (Redis &amp;gt;= 2.0.0). This option defaults to no.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> redis-logical-db: &amp;lt;logical database index&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The logical database in Redis to use. These are databases in
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the same Redis instance sharing the same configuration and per-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> sisted in the same RDB/AOF file. If unsure about using this op-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tion, Redis documentation (https://redis.io/commands/select/)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> suggests not to use a single Redis instance for multiple unre-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> lated applications. The default database in Redis is 0 while
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> other logical databases need to be explicitly SELECT&amp;#39;ed upon
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> connecting. This option defaults to 0.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> redis-replica-server-host: &amp;lt;server address or name&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The IP (either v6 or v4) address or domain name of the Redis
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> replica server. In general an IP address should be specified as
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> otherwise Unbound will have to resolve the name of the server
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> every time it establishes a connection to the server. This
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> server is treated as a read-only replica server (https://re-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dis.io/docs/management/replication/#read-only-replica). If
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> specified, all Redis read commands will go to this replica
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> server, while the write commands will go to the redis-server-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> host. This option defaults to &amp;#34;&amp;#34; (disabled).
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> redis-replica-server-port: &amp;lt;port number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The TCP port number of the Redis replica server. This option
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> defaults to 6379.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> redis-replica-server-path: &amp;lt;unix socket path&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The unix socket path to connect to the Redis server. Off by de-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fault, and it can be set to &amp;#34;&amp;#34; to turn this off. Unix sockets
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> may have better throughput than the IP address option.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> redis-replica-server-password: &amp;#34;&amp;lt;password&amp;gt;&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The Redis AUTH password to use for the Redis replica server.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Only relevant if Redis is configured for client password autho-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> risation. Off by default, and it can be set to &amp;#34;&amp;#34; to turn this
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> off.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> redis-replica-timeout: &amp;lt;msec&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The period until when Unbound waits for a response from the Re-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dis replica sever. If this timeout expires Unbound closes the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> connection, treats it as if the Redis replica server does not
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> have the requested data, and will try to re-establish a new con-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> nection later. This option defaults to 100 milliseconds.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> redis-replica-command-timeout: &amp;lt;msec&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The timeout to use for Redis replica commands, in milliseconds.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If 0, it uses the redis-replica-timeout value. The default is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 0.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> redis-replica-connect-timeout: &amp;lt;msec&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The timeout to use for Redis replica connection set up, in mil-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> liseconds. If 0, it uses the redis-replica-timeout value. The
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> default is 0.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> redis-replica-logical-db: &amp;lt;logical database index&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Same as redis-logical-db but for the Redis replica server. This
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> option defaults to 0.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>DNSTAP Logging Options
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> DNSTAP support, when compiled in by using --enable-dnstap, is enabled
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> in the dnstap: section. This starts an extra thread (when compiled
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> with threading) that writes the log information to the destination. If
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Unbound is compiled without threading it does not spawn a thread, but
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> connects per-process to the destination.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnstap-enable: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If dnstap is enabled. Default no. If yes, it connects to the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnstap server and if any of the dnstap-log-..-messages options
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> is enabled it sends logs for those messages to the server.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnstap-bidirectional: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Use frame streams in bidirectional mode to transfer DNSTAP mes-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> sages. Default is yes.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnstap-socket-path: &amp;lt;file name&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Sets the unix socket file name for connecting to the server that
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> is listening on that socket. Default is &amp;#34;&amp;#34;.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnstap-ip: &amp;lt;IPaddress[@port]&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If &amp;#34;&amp;#34;, the unix socket is used, if set with an IP address (IPv4
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> or IPv6) that address is used to connect to the server.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnstap-tls: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Set this to use TLS to connect to the server specified in
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnstap-ip. The default is yes. If set to no, TCP is used to
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> connect to the server.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnstap-tls-server-name: &amp;lt;name of TLS authentication&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The TLS server name to authenticate the server with. Used when
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnstap-tls is enabled. If &amp;#34;&amp;#34; it is ignored, default &amp;#34;&amp;#34;.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnstap-tls-cert-bundle: &amp;lt;file name of cert bundle&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The pem file with certs to verify the TLS server certificate. If
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;#34;&amp;#34; the server default cert bundle is used, or the windows cert
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> bundle on windows. Default is &amp;#34;&amp;#34;.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnstap-tls-client-key-file: &amp;lt;file name&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The client key file for TLS client authentication. If &amp;#34;&amp;#34; client
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> authentication is not used. Default is &amp;#34;&amp;#34;.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnstap-tls-client-cert-file: &amp;lt;file name&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The client cert file for TLS client authentication. Default is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;#34;&amp;#34;.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnstap-send-identity: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If enabled, the server identity is included in the log messages.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Default is no.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnstap-send-version: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If enabled, the server version if included in the log messages.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Default is no.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnstap-identity: &amp;lt;string&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The identity to send with messages, if &amp;#34;&amp;#34; the hostname is used.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Default is &amp;#34;&amp;#34;.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnstap-version: &amp;lt;string&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The version to send with messages, if &amp;#34;&amp;#34; the package version is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> used. Default is &amp;#34;&amp;#34;.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnstap-sample-rate: &amp;lt;number&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The sample rate for log of messages, it logs only 1/N messages.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> With 0 it is disabled. Default is 0. This is useful in a high
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> volume environment, where log functionality would otherwise not
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> be reliable. For example 10 would spend only 1/10th time on log-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ging, and 100 would only spend a hundredth of the time on log-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ging.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnstap-log-resolver-query-messages: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Enable to log resolver query messages. Default is no. These
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> are messages from Unbound to upstream servers.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnstap-log-resolver-response-messages: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Enable to log resolver response messages. Default is no. These
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> are replies from upstream servers to Unbound.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnstap-log-client-query-messages: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Enable to log client query messages. Default is no. These are
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> client queries to Unbound.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnstap-log-client-response-messages: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Enable to log client response messages. Default is no. These
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> are responses from Unbound to clients.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnstap-log-forwarder-query-messages: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Enable to log forwarder query messages. Default is no.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dnstap-log-forwarder-response-messages: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Enable to log forwarder response messages. Default is no.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Response Policy Zone Options
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Response Policy Zones are configured with rpz:, and each one must have
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> a name:. There can be multiple ones, by listing multiple RPZ clauses,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> each with a different name. RPZ clauses are applied in order of config-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> uration and any match from an earlier RPZ zone will terminate the RPZ
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> lookup. Note that a PASSTHRU action is still considered a match. The
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> respip module needs to be added to the module-config, e.g.: module-con-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fig: &amp;#34;respip validator iterator&amp;#34;.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> QNAME, Response IP Address, nsdname, nsip and clientip triggers are
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> supported. Supported actions are: NXDOMAIN, NODATA, PASSTHRU, DROP,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Local Data, tcp-only and drop. RPZ QNAME triggers are applied after
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> local-zones and before auth-zones.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The RPZ zone is a regular DNS zone formatted with a SOA start record as
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> usual. The items in the zone are entries, that specify what to act on
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (the trigger) and what to do (the action). The trigger to act on is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> recorded in the name, the action to do is recorded as the resource
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> record. The names all end in the zone name, so you could type the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> trigger names without a trailing dot in the zonefile.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> An example RPZ record, that answers example.com with NXDOMAIN
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> example.com CNAME .
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The triggers are encoded in the name on the left
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> name query name
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> netblock.rpz-client-ip client IP address
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> netblock.rpz-ip response IP address in the answer
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> name.rpz-nsdname nameserver name
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> netblock.rpz-nsip nameserver IP address
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The netblock is written as &amp;lt;netblocklen&amp;gt;.&amp;lt;ip address in reverse&amp;gt;. For
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> IPv6 use &amp;#39;zz&amp;#39; for &amp;#39;::&amp;#39;. Specify individual addresses with scope length
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> of 32 or 128. For example, 24.10.100.51.198.rpz-ip is 198.51.100.10/24
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> and 32.10.zz.db8.2001.rpz-ip is 2001:db8:0:0:0:0:0:10/32.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The actions are specified with the record on the right
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> CNAME . nxdomain reply
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> CNAME *. nodata reply
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> CNAME rpz-passthru. do nothing, allow to continue
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> CNAME rpz-drop. the query is dropped
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> CNAME rpz-tcp-only. answer over TCP
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> A 192.0.2.1 answer with this IP address
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Other records like AAAA, TXT and other CNAMEs (not rpz-..) can also be
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> used to answer queries with that content.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The RPZ zones can be configured in the config file with these settings
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> in the rpz: block.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> name: &amp;lt;zone name&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Name of the authority zone.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> primary: &amp;lt;IP address or host name&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Where to download a copy of the zone from, with AXFR and IXFR.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Multiple primaries can be specified. They are all tried if one
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fails. To use a nondefault port for DNS communication append
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;#39;@&amp;#39; with the port number. You can append a &amp;#39;#&amp;#39; and a name, then
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> AXFR over TLS can be used and the tls authentication certifi-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cates will be checked with that name. If you combine the &amp;#39;@&amp;#39;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> and &amp;#39;#&amp;#39;, the &amp;#39;@&amp;#39; comes first. If you point it at another Un-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> bound instance, it would not work because that does not support
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> AXFR/IXFR for the zone, but if you used url: to download the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> zonefile as a text file from a webserver that would work. If
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> you specify the hostname, you cannot use the domain from the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> zonefile, because it may not have that when retrieving that
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> data, instead use a plain IP address to avoid a circular depen-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> dency on retrieving that IP address.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> master: &amp;lt;IP address or host name&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Alternate syntax for primary.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> url: &amp;lt;url to zonefile&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Where to download a zonefile for the zone. With http or https.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> An example for the url is &amp;#34;http://www.example.com/exam-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ple.org.zone&amp;#34;. Multiple url statements can be given, they are
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tried in turn. If only urls are given the SOA refresh timer is
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> used to wait for making new downloads. If also primaries are
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> listed, the primaries are first probed with UDP SOA queries to
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> see if the SOA serial number has changed, reducing the number of
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> downloads. If none of the urls work, the primaries are tried
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> with IXFR and AXFR. For https, the tls-cert-bundle and the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> hostname from the url are used to authenticate the connection.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> allow-notify: &amp;lt;IP address or host name or netblockIP/prefix&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> With allow-notify you can specify additional sources of noti-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> fies. When notified, the server attempts to first probe and
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> then zone transfer. If the notify is from a primary, it first
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> attempts that primary. Otherwise other primaries are attempted.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If there are no primaries, but only urls, the file is downloaded
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> when notified. The primaries from primary: and url: statements
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> are allowed notify by default.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> zonefile: &amp;lt;filename&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The filename where the zone is stored. If not given then no
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> zonefile is used. If the file does not exist or is empty, Un-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> bound will attempt to fetch zone data (eg. from the primary
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> servers).
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rpz-action-override: &amp;lt;action&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Always use this RPZ action for matching triggers from this zone.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Possible action are: nxdomain, nodata, passthru, drop, disabled
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> and cname.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rpz-cname-override: &amp;lt;domain&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> The CNAME target domain to use if the cname action is configured
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> for rpz-action-override.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rpz-log: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Log all applied RPZ actions for this RPZ zone. Default is no.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rpz-log-name: &amp;lt;name&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Specify a string to be part of the log line, for easy referenc-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ing.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rpz-signal-nxdomain-ra: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Signal when a query is blocked by the RPZ with NXDOMAIN with an
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> unset RA flag. This allows certain clients, like dnsmasq, to
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> infer that the domain is externally blocked. Default is no.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> for-downstream: &amp;lt;yes or no&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If enabled the zone is authoritatively answered for and queries
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> for the RPZ zone information are answered to downstream clients.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> This is useful for monitoring scripts, that can then access the
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> SOA information to check if the RPZ information is up to date.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Default is no.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tags: &amp;lt;list of tags&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Limit the policies from this RPZ clause to clients with a match-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ing tag. Tags need to be defined in define-tag and can be as-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> signed to client addresses using access-control-tag. Enclose
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> list of tags in quotes (&amp;#34;&amp;#34;) and put spaces between tags. If no
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tags are specified the policies from this clause will be applied
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> for all clients.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>MEMORY CONTROL EXAMPLE
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> In the example config settings below memory usage is reduced. Some ser-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> vice levels are lower, notable very large data and a high TCP load are
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> no longer supported. Very large data and high TCP loads are exceptional
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> for the DNS. DNSSEC validation is enabled, just add trust anchors. If
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> you do not have to worry about programs using more than 3 Mb of memory,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> the below example is not for you. Use the defaults to receive full ser-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> vice, which on BSD-32bit tops out at 30-40 Mb after heavy usage.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> # example settings that reduce memory usage
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> server:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> num-threads: 1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> outgoing-num-tcp: 1 # this limits TCP service, uses less buffers.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> incoming-num-tcp: 1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> outgoing-range: 60 # uses less memory, but less performance.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> msg-buffer-size: 8192 # note this limits service, &amp;#39;no huge stuff&amp;#39;.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> msg-cache-size: 100k
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> msg-cache-slabs: 1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rrset-cache-size: 100k
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rrset-cache-slabs: 1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> infra-cache-numhosts: 200
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> infra-cache-slabs: 1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> key-cache-size: 100k
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> key-cache-slabs: 1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> neg-cache-size: 10k
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> num-queries-per-thread: 30
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> target-fetch-policy: &amp;#34;2 1 0 0 0 0&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> harden-large-queries: &amp;#34;yes&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> harden-short-bufsize: &amp;#34;yes&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FILES
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> /usr/local/etc/unbound
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> default Unbound working directory.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> /usr/local/etc/unbound
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> default chroot(2) location.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> /usr/local/etc/unbound/unbound.conf
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Unbound configuration file.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> /usr/local/etc/unbound/unbound.pid
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> default Unbound pidfile with process ID of the running daemon.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> unbound.log
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Unbound log file. default is to log to syslog(3).
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>SEE ALSO
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> unbound(8), unbound-checkconf(8).
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>AUTHORS
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Unbound was written by NLnet Labs. Please see CREDITS file in the dis-
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tribution for further details.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>NLnet Labs Apr 24, 2025 unbound.conf(5)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Debian 编译安装 unbound</title><link>https://tnzzz.top/posts/%E6%95%99%E7%A8%8B/debian%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85unbound/</link><pubDate>Tue, 20 May 2025 22:17:40 +0800</pubDate><guid>https://tnzzz.top/posts/%E6%95%99%E7%A8%8B/debian%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85unbound/</guid><description>&lt;h3 id="unbound-简介">unbound 简介&lt;/h3>
&lt;p>Unbound是一款验证型、递归式、带缓存的DNS解析器，旨在实现快速与轻量化，并融合了基于开放标准的现代特性。&lt;/p>
&lt;p>为增强在线隐私保护，Unbound支持DNS-over-TLS和DNS-over-HTTPS，使客户端能够加密通信。此外，它还支持多种现代标准，这些标准不仅减少了与权威服务器交换的数据量，提升了隐私性，还增强了DNS的健壮性。其中最为关键的技术包括查询名称最小化、积极利用DNSSEC验证缓存，以及对权威区域的支持，后者可用于加载根区域副本。&lt;/p>
&lt;p>Unbound兼容所有Linux和BSD发行版，以及macOS，大多数平台均有现成安装包。它已被纳入所有主要BSD操作系统的基础系统，以及大多数Linux发行版的标准软件库中，安装与配置简便易行，仅需几行配置即可为单机或网络设置解析器。&lt;/p>
&lt;p>作为遵循BSD许可证的自由开源软件，Unbound的产品开发路线图首要关注用户的安全与隐私。同时，所有功能均需依托成熟的开放标准。我们持续为所有用户优化Unbound的功能，这意味着我们不会为付费客户定制构建或提供专属功能。我们的优先级由用户反馈，特别是拥有支持合同的用户，以及更广泛的互联网社区所引导。在可能的情况下，赞助功能将获得更高优先级，并会逐案评估。
&lt;a href="https://www.nlnetlabs.nl/projects/unbound/about/">Source&lt;/a>&lt;/p>
&lt;h3 id="安装必要的依赖">安装必要的依赖&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>sudo apt update
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt install -y build-essential libssl-dev bison flex libhiredis-dev libevent-dev libsystemd-dev pkg-config make dns-root-data
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="下载并编译安装-unbound">下载并编译安装 unbound&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>git clone https://github.com/NLnetLabs/unbound
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cd unbound
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>./configure --prefix&lt;span style="color:#f92672">=&lt;/span>/usr &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --sysconfdir&lt;span style="color:#f92672">=&lt;/span>/etc &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --localstatedir&lt;span style="color:#f92672">=&lt;/span>/var &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --runstatedir&lt;span style="color:#f92672">=&lt;/span>/run &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --with-username&lt;span style="color:#f92672">=&lt;/span>unbound &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --with-ssl &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --with-libevent &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --enable-systemd &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --enable-subnet &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --enable-tfo-client &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --enable-tfo-server &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --enable-cachedb &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --with-libhiredis &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --disable-rpath &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --with-pidfile&lt;span style="color:#f92672">=&lt;/span>/run/unbound/unbound.pid &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --with-rootkey-file&lt;span style="color:#f92672">=&lt;/span>/var/lib/unbound/root.key &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --with-libnghttp2 &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --with-libsodium &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --with-pthreads &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --with-chroot-dir&lt;span style="color:#f92672">=&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>make &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> make install
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="说明">说明&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-plaintext" data-lang="plaintext">&lt;span style="display:flex;">&lt;span>`configure&amp;#39; 配置 unbound 1.23.1 以适应多种类型的系统。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>用法: ./configure [选项]... [变量=值]...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>要分配环境变量 (例如 CC, CFLAGS...), 请将它们指定为
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>变量=值。有关一些有用变量的描述，请参见下文。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>选项的默认值在中括号内指定。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>配置:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -h, --help 显示此帮助信息并退出
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --help=short 显示此软件包特有的选项
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --help=recursive 显示所有包含的软件包的简短帮助信息
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -V, --version 显示版本信息并退出
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -q, --quiet, --silent 不打印 `checking ...&amp;#39; 消息
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --cache-file=FILE 将测试结果缓存在 FILE 中 [禁用]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -C, --config-cache `--cache-file=config.cache&amp;#39; 的别名
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> -n, --no-create 不创建输出文件
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --srcdir=DIR 在 DIR 中查找源代码 [配置目录或 `..&amp;#39;]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>安装目录:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --prefix=PREFIX 将与体系结构无关的文件安装在 PREFIX 中
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [/usr/local]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --exec-prefix=EPREFIX 将与体系结构相关的文件安装在 EPREFIX 中
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [PREFIX]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>默认情况下, `make install&amp;#39; 会将所有文件安装在 `/usr/local/bin&amp;#39;, `/usr/local/lib&amp;#39; 等目录中。您可以使用 `--prefix` 指定一个不同于 `/usr/local&amp;#39; 的安装前缀, 例如 `--prefix=$HOME&amp;#39;。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>为了更好地控制，请使用以下选项。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>微调安装目录:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --bindir=DIR 用户可执行文件 [EPREFIX/bin]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --sbindir=DIR 系统管理员可执行文件 [EPREFIX/sbin]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --libexecdir=DIR 程序可执行文件 [EPREFIX/libexec]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --sysconfdir=DIR 只读的单机数据 [PREFIX/etc]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --sharedstatedir=DIR 可修改的与体系结构无关的数据 [PREFIX/com]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --localstatedir=DIR 可修改的单机数据 [PREFIX/var]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --runstatedir=DIR 可修改的每进程数据 [LOCALSTATEDIR/run]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --libdir=DIR 目标代码库 [EPREFIX/lib]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --includedir=DIR C 头文件 [PREFIX/include]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --oldincludedir=DIR 非 gcc 的 C 头文件 [/usr/include]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --datarootdir=DIR 只读的与体系结构无关的数据根目录 [PREFIX/share]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --datadir=DIR 只读的与体系结构无关的数据 [DATAROOTDIR]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --infodir=DIR info 文档 [DATAROOTDIR/info]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --localedir=DIR 区域设置相关的数据 [DATAROOTDIR/locale]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --mandir=DIR man 文档 [DATAROOTDIR/man]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --docdir=DIR 文档根目录 [DATAROOTDIR/doc/unbound]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --htmldir=DIR html 文档 [DOCDIR]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --dvidir=DIR dvi 文档 [DOCDIR]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --pdfdir=DIR pdf 文档 [DOCDIR]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --psdir=DIR ps 文档 [DOCDIR]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>系统类型:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --build=BUILD 为在 BUILD 上构建进行配置 [猜测值]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --host=HOST 交叉编译以构建在 HOST 上运行的程序 [BUILD]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>可选特性:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --disable-option-checking 忽略无法识别的 --enable/--with 选项
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --disable-FEATURE 不包含 FEATURE (等同于 --enable-FEATURE=no)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --enable-FEATURE[=ARG] 包含 FEATURE [ARG=yes]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --enable-checking 启用警告、断言、makefile 依赖关系
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --enable-debug 等同于 enable-checking
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --disable-flto 禁用链接时优化 (gcc 特定选项)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --enable-pie 启用位置无关可执行文件 (例如，为了充分
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 利用 ASLR，会有少量性能损失)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --enable-relro-now 在加载时启用完全重定位绑定 (RELRO
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> NOW, 以保护 GOT 和 .dtor 区域)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --enable-shared[=PKGS] 构建共享库 [默认=yes]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --enable-static[=PKGS] 构建静态库 [默认=yes]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --enable-fast-install[=PKGS]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 为快速安装进行优化 [默认=yes]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --disable-libtool-lock 避免锁定 (可能会破坏并行构建)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --disable-rpath 禁用硬编码的 rpath (默认=启用)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --disable-largefile 忽略对大文件的支持
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --enable-systemd 编译时支持 systemd (需要 libsystemd,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> pkg-config)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --enable-alloc-checks 启用内存分配统计信息，用于调试
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --enable-alloc-lite 启用轻量级分配断言，用于调试
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --enable-alloc-nonregional 启用非区域分配，速度较慢但会将区域分配暴露给其他内存净化器，用于调试
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --disable-swig-version-check 禁用 swig 版本检查，以使用较旧的 swig 构建 python 模块即使这样做不可靠
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --disable-sha1 禁用 SHA1 RRSIG 支持，不会禁用 nsec3 支持
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --disable-sha2 禁用 SHA256 和 SHA512 RRSIG 支持
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --enable-subnet 启用客户端子网
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --disable-gost 禁用 GOST 支持
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --disable-ecdsa 禁用 ECDSA 支持
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --disable-dsa 禁用 DSA 支持
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --disable-ed25519 禁用 ED25519 支持
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --disable-ed448 禁用 ED448 支持
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --enable-event-api 启用 (实验性的) 可插拔事件基础
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> libunbound API，安装到 unbound-event.h
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --enable-tfo-client 为客户端模式启用 TCP Fast Open
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --enable-tfo-server 为服务器模式启用 TCP Fast Open
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --enable-static-exe 启用以针对未安装的 (事件) 库静态编译
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 可执行文件，用于调试
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --enable-fully-static 启用以完全静态编译
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --enable-lock-checks 启用以检查锁定和解锁调用，用于调试
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --enable-allsymbols 从 libunbound 导出所有符号并将二进制文件链接到它，安装尺寸更小但 libunbound 导出表会被内部符号污染
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --enable-dnstap 启用 dnstap 支持 (需要 protobuf-c)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --enable-dnscrypt 启用 dnscrypt 支持 (需要 libsodium)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --enable-cachedb 启用 cachedb 模块，可以使用外部缓存存储
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --enable-ipsecmod 启用 ipsecmod 模块，以促进机会性 IPsec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --enable-ipset 启用 ipset 模块
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --disable-explicit-port-randomisation 禁用显式源端口随机化，并依赖 内核提供随机源端口
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --enable-linux-ip-local-port-range 定义此项以启用 /proc/sys/net/ipv4/ip_local_port_range 作为默认传出端口范围。这仅适用于 Linux 上的 libunbound 并且不影响 unbound 解析守护进程本身。这可能会严重限制可用的传出端口数量，从而降低随机性。仅当目标系统限制 (例如某些启用 SELinux 的发行版) 使用非临时端口时才定义此项。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>可选软件包:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --with-PACKAGE[=ARG] 使用 PACKAGE [ARG=yes]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --without-PACKAGE 不使用 PACKAGE (等同于 --with-PACKAGE=no)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --with-conf-file=path Unbound 配置文件的路径名
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --with-run-dir=path 设置 chdir 到的默认目录 (默认为 cfg 文件所在的目录)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --with-chroot-dir=path 设置 chroot 到的默认目录 (默认为与 run-dir 相同)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --with-share-dir=path 设置共享数据的默认目录 (默认为 share/unbound)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --with-pidfile=filename 设置 unbound pid 文件的默认路径名 (默认 run-dir/unbound.pid)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --with-rootkey-file=filename 设置根密钥文件的默认路径名 (默认 run-dir/root.key)。此文件会被读取和写入。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --with-rootcert-file=filename 设置根更新证书文件的默认路径名(默认 run-dir/icannbundle.pem)。如果您对内置证书满意，则此文件不必存在。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --with-username=user 设置 unbound 更改到的默认用户 (默认用户是 unbound)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --with-pic[=PKGS] 尝试仅使用 PIC/非 PIC 对象 [默认=两者都使用]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --with-aix-soname=aix|svr4|both 在 AIX 上提供的共享库版本控制(又名 &amp;#34;SONAME&amp;#34;)变体, [默认=aix]。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --with-gnu-ld 假设 C 编译器使用 GNU ld [默认=no]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --with-sysroot[=DIR] 在 DIR 中搜索依赖库 (如果未指定，则为编译器的 sysroot)。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --with-pthreads 使用 pthreads 库，或使用 --without-pthreads禁用线程支持。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --with-solaris-threads 使用 solaris 原生线程库。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --with-syslog-facility=LOCAL0 - LOCAL7 设置 SYSLOG_FACILITY, 默认 DAEMON
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --with-dynlibmodule 构建动态库模块，或使用 --without-dynlibmodule 禁用它。(默认=no)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --with-pyunbound 构建 PyUnbound，或使用 --without-pyunbound 跳过它。 (默认=no)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --with-pythonmodule 构建 Python 模块，或使用 --without-pythonmodule 禁用脚本引擎。(默认=no)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --with-nss=path 使用 libnss 代替 openssl，安装在 path。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --with-nettle=path 使用 libnettle 作为加密库，安装在 path。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --with-ssl=pathname 启用 SSL (将检查 /usr/local/ssl /usr/lib/ssl /usr/ssl /usr/pkg /usr/local /opt/local /usr/sfw /usr 或指定类似 /usr/include/openssl11)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --with-libbsd 使用可移植的 libbsd 函数
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --with-deprecate-rsa-1024 弃用 RSA 1024 位长度，使其成为不受支持的密钥，用于 OpenSSL FIPS 拒绝 1024 位验证的情况
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --with-libevent=pathname 使用 libevent (将检查 /usr/local /opt/local /usr/lib /usr/pkg /usr/sfw /usr 或您可以指定一个显式路径)。速度较慢，但允许使用大的传出端口范围。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --with-libexpat=path 为 libexpat 指定显式路径。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --with-libhiredis=path 为 libhiredis 指定显式路径。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --with-libnghttp2=path 为 libnghttp2 指定显式路径。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --with-libngtcp2=path 为 libngtcp2 指定显式路径，用于 QUIC。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --with-dnstap-socket-path=pathname 设置默认 dnstap 套接字路径
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --with-protobuf-c=path protobuf-c 的安装路径，用于 dnstap
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --with-libsodium=path libsodium 的安装路径，用于 dnscrypt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --with-libmnl=path 为 libmnl 指定显式路径。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> --with-libunbound-only 不构建守护进程和工具程序
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>一些有影响的环境变量:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> CC C 编译器命令
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> CFLAGS C 编译器标志
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> LDFLAGS 链接器标志, 例如 -L&amp;lt;lib dir&amp;gt; 如果您的库在非标准目录 &amp;lt;lib dir&amp;gt; 中
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> LIBS 传递给链接器的库, 例如 -l&amp;lt;library&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> CPPFLAGS (Objective) C/C++ 预处理器标志, 例如 -I&amp;lt;include dir&amp;gt; 如果您的头文件在非标准目录 &amp;lt;include dir&amp;gt; 中
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> YACC 要使用的 `Yet Another Compiler Compiler&amp;#39; 实现。默认为找到的第一个程序: `bison -y&amp;#39;, `byacc&amp;#39;, `yacc&amp;#39;。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> YFLAGS 默认传递给 $YACC 的参数列表。此脚本将 YFLAGS 默认为空字符串，以避免某些 make 应用程序给出的默认值 `-d&amp;#39;。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> LT_SYS_LIBRARY_PATH 用户定义的运行时库搜索路径。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> PKG_CONFIG pkg-config 工具的路径
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> PKG_CONFIG_PATH 添加到 pkg-config 搜索路径的目录
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> PKG_CONFIG_LIBDIR 覆盖 pkg-config 内置搜索路径的路径
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> CPP C 预处理器
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> SYSTEMD_CFLAGS SYSTEMD 的 C 编译器标志, 覆盖 pkg-config
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> SYSTEMD_LIBS SYSTEMD 的链接器标志, 覆盖 pkg-config
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> SYSTEMD_DAEMON_CFLAGS SYSTEMD_DAEMON 的 C 编译器标志, 覆盖 pkg-config
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> SYSTEMD_DAEMON_LIBS SYSTEMD_DAEMON 的链接器标志, 覆盖 pkg-config
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> PYTHON_VERSION 要使用的已安装 Python 版本，例如 &amp;#39;2.3&amp;#39;。此字符串将附加到 Python 解释器的规范名称。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> SOURCE_DATE_EPOCH 如果设置了此变量，则使用该变量的值而不是当前时间作为构建时间戳。格式为 unix时间戳。这可以实现可重现的构建输出。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> PROTOBUFC_CFLAGS PROTOBUFC 的 C 编译器标志, 覆盖 pkg-config
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> PROTOBUFC_LIBS PROTOBUFC 的链接器标志, 覆盖 pkg-config
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>使用这些变量来覆盖 `configure&amp;#39; 所做的选择，或帮助
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>它找到具有非标准名称/位置的库和程序。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>将错误报告给 &amp;lt;unbound-bugs@nlnetlabs.nl 或 https://github.com/NLnetLabs/unbound/issues&amp;gt;。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="创建-unbound-用户和组并配置">创建 unbound 用户和组并配置&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>groupadd --system unbound
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>useradd --no-create-home --system --shell /usr/sbin/nologin unbound
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mkdir -p /var/lib/unbound
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cp /usr/share/dns/root.key /var/lib/unbound/root.key
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>chown -R unbound:unbound /var/lib/unbound
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="创建-unbound-的-systemd-服务文件">创建 unbound 的 systemd 服务文件&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>cat &lt;span style="color:#e6db74">&amp;lt;&amp;lt;EOF &amp;gt; /etc/systemd/system/unbound.service
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">[Unit]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">Description=Unbound DNS Resolver (Experimental Build)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">Documentation=man:unbound(8) man:unbound.conf(5) https://www.nlnetlabs.nl/projects/unbound/documentation.html
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">Wants=network-online.target
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">After=network-online.target
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># 如果您的 auto-trust-anchor-file 或 cachedb 路径位于 /var/lib/unbound，
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># 确保 /var 在此服务启动前已挂载。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">RequiresMountsFor=/var/lib/unbound /run
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">[Service]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># === 基本配置 ===
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">Type=notify
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># Unbound 在 &amp;#39;--enable-systemd&amp;#39; 编译时支持 notify 类型，它会在服务完全准备好后通知 systemd。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># 指定运行 Unbound 的用户和组。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># 您在 ./configure 时使用了 --with-username=unbound。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># 您需要确保 &amp;#39;unbound&amp;#39; 用户和组在系统上存在。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># 例如:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># sudo groupadd --system unbound
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># sudo useradd --system -g unbound -d /var/lib/unbound -s /bin/false -c &amp;#34;Unbound DNS Resolver&amp;#34; unbound
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">User=unbound
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">Group=unbound
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># 预启动检查配置文件
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">ExecStartPre=/usr/sbin/unbound-checkconf /etc/unbound/unbound.conf
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># 启动命令
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># -d: 不进行后台守护进程化 (systemd 处理)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># -p: 创建 PID 文件 (与 --with-pidfile 编译选项匹配)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># -c: 指定配置文件路径
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">ExecStart=/usr/sbin/unbound -d -p -c /etc/unbound/unbound.conf
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># 重载配置 (需要 unbound.conf 中启用 remote-control)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">ExecReload=/usr/sbin/unbound-control reload
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># 重启策略
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">Restart=on-failure
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">RestartSec=5s
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># PID 文件路径 (与 --with-pidfile 编译选项匹配)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># RuntimeDirectory 会自动创建 /run/unbound 并设置权限给指定用户
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">PIDFile=/run/unbound/unbound.pid
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># === 资源和权限管理 ===
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># 运行时目录，systemd 会创建 /run/unbound 并设置所有权为 User 和 Group 指定的用户/组
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">RuntimeDirectory=unbound
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">RuntimeDirectoryMode=0750
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># 能力绑定
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># CAP_NET_BIND_SERVICE 允许 &amp;#39;unbound&amp;#39; 用户绑定到特权端口 (如53)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">AmbientCapabilities=CAP_NET_BIND_SERVICE
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">CapabilityBoundingSet=CAP_NET_BIND_SERVICE CAP_SETGID CAP_SETUID
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># 如果在 unbound.conf 中启用了 chroot，并且 Unbound 在降权为 &amp;#39;unbound&amp;#39; 用户后才执行 chroot,
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># 则可能还需要 CAP_SYS_CHROOT。但通常 chroot 在降权前由root完成，或者Unbound启动时即为&amp;#39;unbound&amp;#39;用户，则无法chroot到任意目录。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># 您的 --with-username=unbound 意味着Unbound会自行处理权限。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># --- 安全强化选项 ---
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">#NoNewPrivileges=yes
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">#ProtectSystem=no
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># 如果 ProtectSystem=strict 导致 Unbound 无法写入其管理的 root.key 或 cachedb (通常在 /var/lib/unbound/)：
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># 您需要添加 ReadWritePaths 指令。例如：
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># ReadWritePaths=/var/lib/unbound
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># 如果您在 unbound.conf 中使用了 chroot: &amp;#34;/etc/unbound&amp;#34; 并且需要在其中写入 (如 root.key):
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># ReadWritePaths=/etc/unbound
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">#ProtectHome=no
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">#PrivateTmp=no
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">#PrivateDevices=yes
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># MemoryDenyWriteExecute=yes # 如果系统和Unbound版本支持，可增强安全性
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">[Install]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">WantedBy=multi-user.target
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="创建-unbound-的配置文件">创建 unbound 的配置文件&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>cat &lt;span style="color:#e6db74">&amp;lt;&amp;lt;EOF &amp;gt; /etc/unbound/unbound.conf
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># Unbound configuration file
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">#
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># See unbound.conf(5) man page for more information.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">#
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># 注意: 路径 (例如 logfile, root-hints, auto-trust-anchor-file)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># 可能需要根据您的操作系统和Unbound安装方式进行调整。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># 确保Unbound进程对指定的日志文件和自动信任锚点文件具有写入权限（或对其目录）。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">server:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # --- 基本服务器设置 ---
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> verbosity: 0 # 日志详细级别 (0=仅错误, 1=操作信息, 2=详细操作, ... 5=非常详细)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> #logfile: &amp;#34;/var/log/unbound/unbound.log&amp;#34; # 日志文件路径。如果注释掉或为空，则可能记录到syslog。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # 例如: FreeBSD: /var/unbound/unbound.log, OpenBSD: Unbound chroots and logs via syslog
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # Linux (from package): often /var/log/unbound.log or uses systemd journal
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> use-syslog: no # 如果指定了 logfile，设为 no 则仅记录到文件。设为 yes 则也发送到 syslog。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> module-config: &amp;#34;validator cachedb iterator&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> interface: 0.0.0.0 # 监听所有 IPv4 地址
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> interface: ::0 # 监听所有 IPv6 地址 (如果您的系统支持IPv6)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> port: 54 # 监听的端口 (DNS标准端口)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> do-ip4: yes # 允许 IPv4
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> do-ip6: yes # 允许 IPv6 (如果网络支持)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> do-udp: yes # 允许 UDP
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> do-tcp: yes # 允许 TCP
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # --- 访问控制 ---
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # 定义哪些客户端IP地址或子网可以查询此服务器。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # 强烈建议配置此项以防止滥用。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> access-control: 127.0.0.0/8 allow # 允许本地回环地址 (IPv4)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> access-control: ::1/128 allow # 允许本地回环地址 (IPv6)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # 示例：允许常见的私有网络范围。根据您的网络调整或添加。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> access-control: 192.168.0.0/16 allow
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> access-control: 10.0.0.0/8 allow
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> access-control: 172.16.0.0/12 allow
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # access-control: ::ffff:127.0.0.1/128 allow # IPv4-mapped IPv6 localhost
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # --- 性能和缓存设置 ---
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> msg-cache-size: 10m # DNS消息缓存大小 (查询和应答)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> rrset-cache-size: 20m # RRset缓存大小 (DNS资源记录)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # 缓存相关的 slab 数量，通常可以设为接近 num-threads 的值或者2的幂次方。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> msg-cache-slabs: 4
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> rrset-cache-slabs: 4
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> num-threads: 2 # 创建的线程数。理想情况下，设置为CPU核心数。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # 对于较小的部署，1或2通常足够。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # 增加传出查询可用的端口范围，有助于防止某些类型的攻击。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> outgoing-range: 1024
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # 每个线程可以并发处理的查询数上限。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> num-queries-per-thread: 2048
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # --- 过期缓存与预取功能 (Requested &amp;#34;过期缓存功能&amp;#34;) ---
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> prefetch: yes # 在缓存条目过期前主动获取更新，保持常用条目新鲜。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> prefetch-key: yes # 在验证DS记录时，提前获取DNSKEY记录，加速后续DNSSEC验证。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> serve-expired: yes # 在尝试获取新记录的同时，从缓存中提供已过期的记录。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # 这可以提高当上游权威服务器缓慢或无响应时的可用性。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> serve-expired-ttl: 3600 # (1小时) 提供已过期记录时，该记录的TTL值。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> serve-expired-reply-ttl: 30 # (30秒) 当提供过期数据时，客户端应该缓存这条过期数据的TTL。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> serve-expired-client-timeout: 1000 # (1秒) 在提供过期数据之前，等待新答案的最长时间（毫秒）。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # --- 安全设置 ---
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> harden-glue: yes # 强化对胶水记录的验证。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> harden-dnssec-stripped: yes # 防止DNSSEC剥离攻击。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> harden-algo-downgrade: yes # 防止算法降级攻击。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> use-caps-for-id: yes # 在查询ID中使用随机大小写混合（0x20技巧）来增加欺骗难度。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> edns-buffer-size: 1232 # EDNS0 UDP包的建议大小，以减少IP分片。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> hide-identity: yes # 拒绝回应 id.server 和 hostname.bind 的查询。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> hide-version: yes # 拒绝回应 version.server 和 version.bind 的查询。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # 定义私有地址范围，Unbound会从DNS响应中剥离这些地址，以防止DNS重绑定攻击。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> private-address: 10.0.0.0/8
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> private-address: 172.16.0.0/12
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> private-address: 192.168.0.0/16
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> private-address: 169.254.0.0/16
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> private-address: fd00::/8
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> private-address: fe80::/10
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # private-domain: &amp;#34;example.com&amp;#34; # 如果您有不想被外部解析的内部域名，可以在这里声明。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # 不查询回环地址上的公共域名，防止潜在的循环或安全问题。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> do-not-query-localhost: yes
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # --- DNSSEC 验证 ---
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # 自动管理和更新根信任锚点。Unbound需要对该文件的目录有写权限，或者您可以手动管理此文件。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # 路径可能为: /var/lib/unbound/root.key (Debian/Ubuntu), /usr/local/etc/unbound/root.key (FreeBSD ports),
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # /etc/unbound/root.key (generic from source), /opt/homebrew/etc/unbound/root.key (macOS Homebrew)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> auto-trust-anchor-file: &amp;#34;/var/lib/unbound/root.key&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> val-log-level: 1 # DNSSEC验证失败时的日志级别 (1=基本信息, 2=详细信息)。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # --- 根提示文件 (Root Hints) ---
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # 如果Unbound作为递归解析器直接从根服务器开始解析 (而不是转发模式)，则需要此文件。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # 确保此文件存在并且保持最新。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # 路径可能为: /usr/share/dns/root.hints (common on Linux), /etc/unbound/root.hints,
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # /usr/local/etc/unbound/root.hints
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> root-hints: &amp;#34;/usr/share/dns/root.hints&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # --- 转发模式 (可选) ---
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # 如果您希望Unbound将所有查询转发到其他上游DNS服务器，而不是自己从根进行递归解析，
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # 请取消注释并配置以下部分。如果启用了转发，则上面的 root-hints 通常不再需要。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # forward-zone:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # name: &amp;#34;.&amp;#34; # 转发所有查询
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # # 常用的公共DNS服务器示例:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # forward-addr: 8.8.8.8@53 # Google
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # forward-addr: 8.8.4.4@53 # Google
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # forward-addr: 1.1.1.1@53 # Cloudflare
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # forward-addr: 1.0.0.1@53 # Cloudflare
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # # 如果您的上游服务器支持DNS-over-TLS (DoT):
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # # forward-tls-upstream: yes
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # # forward-addr: 1.1.1.1@853#cloudflare-dns.com # DoT示例，主机名用于证书验证
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># --- 远程控制 (可选) ---
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># 允许使用 unbound-control 工具管理Unbound服务。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># 如果启用，请确保使用 unbound-control-setup 生成密钥和证书文件。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># remote-control:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># control-enable: yes
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># control-interface: 127.0.0.1 # 监听远程控制连接的IP地址
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># control-port: 8953 # 监听远程控制连接的端口
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># # 以下文件路径也需要根据您的安装进行调整
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># server-key-file: &amp;#34;/etc/unbound/unbound_server.key&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># server-cert-file: &amp;#34;/etc/unbound/unbound_server.pem&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># control-key-file: &amp;#34;/etc/unbound/unbound_control.key&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># control-cert-file: &amp;#34;/etc/unbound/unbound_control.pem&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"># cachedb:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # backend: &amp;#34;redis&amp;#34; # 指定后端为 redis (这通常也适用于Valkey)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # --- Redis/Valkey 服务器连接参数 ---
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # redis-server-host: 192.168.2.11
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # redis-server-port: 6379
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> #redis-server-path: &amp;#34;/run/valkey/valkey-server.sock&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # redis-server-password: &amp;#34;your_valkey_password&amp;#34; # 如果Valkey设置了密码
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # redis-database: 0 # 可选，Valkey/Redis数据库编号 (默认为0)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # --- 可选的 Redis/Valkey 相关超时设置 (如果后端驱动支持) ---
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # redis-timeout: 100 # 连接和操作超时 (毫秒)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # --- 缓存数据密钥前缀 (可选) ---
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # redis-key-prefix: &amp;#34;unbound_cache:&amp;#34; # 避免与其他应用在同一Valkey实例中的键冲突
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # --- 其他 cachedb 通用设置 (可能适用) ---
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # cachedb-no-store: no # 是否存储否定缓存条目 (默认为no，即存储)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="启动-unbound-服务">启动 unbound 服务&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>sudo systemctl daemon-reload
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo systemctl enable unbound
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo systemctl start unbound
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="检查-unbound-服务状态">检查 unbound 服务状态&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>sudo systemctl status unbound
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>ffmpeg 将视频转码至 h265 编码</title><link>https://tnzzz.top/posts/%E6%95%99%E7%A8%8B/ffmpeg-%E5%B0%86%E8%A7%86%E9%A2%91%E8%BD%AC%E7%A0%81%E8%87%B3-h265-%E7%BC%96%E7%A0%81/</link><pubDate>Tue, 20 May 2025 22:17:40 +0800</pubDate><guid>https://tnzzz.top/posts/%E6%95%99%E7%A8%8B/ffmpeg-%E5%B0%86%E8%A7%86%E9%A2%91%E8%BD%AC%E7%A0%81%E8%87%B3-h265-%E7%BC%96%E7%A0%81/</guid><description>&lt;h3 id="ffmpeg-简介">ffmpeg 简介&lt;/h3>
&lt;p>FFmpeg是一个开源的音视频处理工具，支持录制、转换数字音频、视频，并能将其转化为流。它包含了一个完整的解决方案，能够处理几乎所有的音视频格式。&lt;/p>
&lt;p>FFmpeg的核心是libavcodec库，它提供了多种音视频编解码器，支持从简单的音频转码到复杂的视频处理任务。FFmpeg还提供了丰富的命令行工具，用户可以通过命令行轻松实现音视频的转换、剪辑、合并等操作。&lt;/p>
&lt;p>FFmpeg的跨平台特性使其能够在Linux、Windows和macOS等多种操作系统上运行。它的强大功能和灵活性使其成为音视频处理领域的事实标准。&lt;/p>
&lt;p>&lt;a href="https://ffmpeg.org/">Source&lt;/a>&lt;/p>
&lt;h3 id="必要条件">必要条件&lt;/h3>
&lt;ul>
&lt;li>安装FFmpeg：确保你的系统上已经安装了FFmpeg。&lt;/li>
&lt;/ul>
&lt;h3 id="转码命令">转码命令&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Intel QuickSync (hevc_qsv)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 参数:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># -global_quality: 1–51（类似 CRF，数值越大质量越低，文件越小，默认23）&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># -preset: ultrafast | fast | medium | slow | slower | veryslow（速度↑/压缩率↓，默认medium）&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ffmpeg -y -i input.mp4 &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -c:v hevc_qsv -global_quality &lt;span style="color:#ae81ff">23&lt;/span> -preset medium &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -c:a copy -c:s copy &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> output_h265_intel.mp4
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># AMD AMF (hevc_amf)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 参数:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># -qp: 0–51（质量参数，数值越大压缩越强，默认23）&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># -quality: speed | balanced | quality（speed=最快最低质；balanced=中；quality=最高质，默认balanced）&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ffmpeg -y -i input.mp4 &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -c:v hevc_amf -rc cqp -qp &lt;span style="color:#ae81ff">23&lt;/span> -quality balanced &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -c:a copy -c:s copy &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> output_h265_amd.mp4
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># NVIDIA NVENC (hevc_nvenc)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 参数:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># -cq: 0–51（质量参数，数值越大质量越低，文件越小，默认23）&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># -preset: ultrafast | fast | medium | slow | slower | veryslow（同x265预设，默认medium）&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ffmpeg -y -i input.mp4 &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -c:v hevc_nvenc -cq &lt;span style="color:#ae81ff">23&lt;/span> -preset medium &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -c:a copy -c:s copy &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> output_h265_nvidia.mp4
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 软件 x265 (libx265)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 参数:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># -crf: 0–51（数值越大压缩越强，默认23）&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># -preset: ultrafast | fast | medium | slow | slower | veryslow（速度↑/压缩率↓，默认medium）&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ffmpeg -y -i input.mp4 &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -c:v libx265 -crf &lt;span style="color:#ae81ff">23&lt;/span> -preset medium &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -c:a copy -c:s copy &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> output_h265_x265.mp4
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="python-脚本">Python 脚本&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#!/usr/bin/env python3&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># -*- coding: utf-8 -*-&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">将视频文件转码为H.265编码。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">用法: python convert_to_h265.py &amp;lt;视频文件路径&amp;gt; [--intel] [--amd] [--nvidia]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">使用 --intel 参数启用 Intel QuickSync 硬件加速
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">使用 --amd 参数启用 AMD AMF 硬件加速
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">使用 --nvidia 参数启用 NVIDIA NVENC 硬件加速
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> argparse
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> os
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> subprocess
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> sys
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">convert_to_h265&lt;/span>(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> input_file,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> use_intel&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">False&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> use_amd&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">False&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> use_nvidia&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">False&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> crf&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">23&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> preset&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;medium&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> bitrate&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">None&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> 使用ffmpeg将视频转码为H.265格式
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> 参数:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> input_file: 输入视频文件路径
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> use_intel: 是否使用Intel QuickSync硬件加速
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> use_amd: 是否使用AMD AMF硬件加速
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> use_nvidia: 是否使用NVIDIA NVENC硬件加速
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># 检查文件是否存在&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#f92672">not&lt;/span> os&lt;span style="color:#f92672">.&lt;/span>path&lt;span style="color:#f92672">.&lt;/span>isfile(input_file):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(&lt;span style="color:#e6db74">f&lt;/span>&lt;span style="color:#e6db74">&amp;#34;错误: 文件不存在 - &lt;/span>&lt;span style="color:#e6db74">{&lt;/span>input_file&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#66d9ef">False&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># 构建输出文件路径&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> file_dir &lt;span style="color:#f92672">=&lt;/span> os&lt;span style="color:#f92672">.&lt;/span>path&lt;span style="color:#f92672">.&lt;/span>dirname(input_file)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> file_name, file_ext &lt;span style="color:#f92672">=&lt;/span> os&lt;span style="color:#f92672">.&lt;/span>path&lt;span style="color:#f92672">.&lt;/span>splitext(os&lt;span style="color:#f92672">.&lt;/span>path&lt;span style="color:#f92672">.&lt;/span>basename(input_file))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> output_file &lt;span style="color:#f92672">=&lt;/span> os&lt;span style="color:#f92672">.&lt;/span>path&lt;span style="color:#f92672">.&lt;/span>join(file_dir, &lt;span style="color:#e6db74">f&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#e6db74">{&lt;/span>file_name&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">_h265&lt;/span>&lt;span style="color:#e6db74">{&lt;/span>file_ext&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># 将 Windows 路径反斜杠改为正斜杠，避免 \0 被误识别&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> input_file &lt;span style="color:#f92672">=&lt;/span> input_file&lt;span style="color:#f92672">.&lt;/span>replace(&lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\\&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;/&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> output_file &lt;span style="color:#f92672">=&lt;/span> output_file&lt;span style="color:#f92672">.&lt;/span>replace(&lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\\&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;/&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># 构建 ffmpeg 命令&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ffmpeg_cmd &lt;span style="color:#f92672">=&lt;/span> [
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;ffmpeg&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;-y&amp;#34;&lt;/span>, &lt;span style="color:#75715e"># 如果目标已存在则强制覆盖&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;-i&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> input_file,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># 硬件／软件编码选择&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> use_intel:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ffmpeg_cmd&lt;span style="color:#f92672">.&lt;/span>extend(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;-c:v&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;hevc_qsv&amp;#34;&lt;/span>, &lt;span style="color:#75715e"># Intel QuickSync HEVC/H.265编码器&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;-global_quality&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> str(crf), &lt;span style="color:#75715e"># QSV 对应的质量参数&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;-preset&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> preset,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">elif&lt;/span> use_amd:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># 将 --preset 映射到 AMF 的 quality 参数&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> amf_quality &lt;span style="color:#f92672">=&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;ultrafast&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;speed&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;fast&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;speed&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;medium&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;balanced&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;slow&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;quality&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;slower&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;quality&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;veryslow&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;quality&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }&lt;span style="color:#f92672">.&lt;/span>get(preset, &lt;span style="color:#e6db74">&amp;#34;balanced&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ffmpeg_cmd&lt;span style="color:#f92672">.&lt;/span>extend(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;-c:v&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;hevc_amf&amp;#34;&lt;/span>, &lt;span style="color:#75715e"># AMD HEVC/H.265编码器&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;-rc&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;cqp&amp;#34;&lt;/span>, &lt;span style="color:#75715e"># AMF 使用 CQP 模式&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;-qp&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> str(crf), &lt;span style="color:#75715e"># AMF 的质量参数&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;-quality&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> amf_quality, &lt;span style="color:#75715e"># AMF 支持的 quality 选项&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">elif&lt;/span> use_nvidia:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ffmpeg_cmd&lt;span style="color:#f92672">.&lt;/span>extend(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;-c:v&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;hevc_nvenc&amp;#34;&lt;/span>, &lt;span style="color:#75715e"># NVIDIA NVENC H.265编码器&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;-cq&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> str(crf), &lt;span style="color:#75715e"># NVENC 的质量参数&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;-preset&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> preset,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">else&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># 软件 x265 编码&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ffmpeg_cmd&lt;span style="color:#f92672">.&lt;/span>extend(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;-c:v&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;libx265&amp;#34;&lt;/span>, &lt;span style="color:#75715e"># 软件x265编码器&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;-crf&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> str(crf),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;-preset&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> preset,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># 如果指定了固定码率，则覆盖质量参数&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> bitrate:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ffmpeg_cmd&lt;span style="color:#f92672">.&lt;/span>extend([&lt;span style="color:#e6db74">&amp;#34;-b:v&amp;#34;&lt;/span>, bitrate])
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># 添加通用的编码参数&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ffmpeg_cmd&lt;span style="color:#f92672">.&lt;/span>extend(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;-c:a&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;copy&amp;#34;&lt;/span>, &lt;span style="color:#75715e"># 复制音频流&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;-c:s&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;copy&amp;#34;&lt;/span>, &lt;span style="color:#75715e"># 复制字幕流 (如果有)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> output_file,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(&lt;span style="color:#e6db74">f&lt;/span>&lt;span style="color:#e6db74">&amp;#34;正在转码: &lt;/span>&lt;span style="color:#e6db74">{&lt;/span>input_file&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(&lt;span style="color:#e6db74">f&lt;/span>&lt;span style="color:#e6db74">&amp;#34;输出文件: &lt;/span>&lt;span style="color:#e6db74">{&lt;/span>output_file&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(&lt;span style="color:#e6db74">&amp;#34;转码中，请稍候...&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">try&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># 执行ffmpeg命令&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> process &lt;span style="color:#f92672">=&lt;/span> subprocess&lt;span style="color:#f92672">.&lt;/span>Popen(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ffmpeg_cmd,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> stdout&lt;span style="color:#f92672">=&lt;/span>subprocess&lt;span style="color:#f92672">.&lt;/span>PIPE,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> stderr&lt;span style="color:#f92672">=&lt;/span>subprocess&lt;span style="color:#f92672">.&lt;/span>STDOUT,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> universal_newlines&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">True&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># 安全地处理并显示进度信息&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> process&lt;span style="color:#f92672">.&lt;/span>stdout: &lt;span style="color:#75715e"># 确保stdout不是None&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> line &lt;span style="color:#f92672">in&lt;/span> process&lt;span style="color:#f92672">.&lt;/span>stdout:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># 仅显示包含关键字的行以减少输出量&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#e6db74">&amp;#34;frame=&amp;#34;&lt;/span> &lt;span style="color:#f92672">in&lt;/span> line &lt;span style="color:#f92672">or&lt;/span> &lt;span style="color:#e6db74">&amp;#34;speed=&amp;#34;&lt;/span> &lt;span style="color:#f92672">in&lt;/span> line &lt;span style="color:#f92672">or&lt;/span> &lt;span style="color:#e6db74">&amp;#34;error&amp;#34;&lt;/span> &lt;span style="color:#f92672">in&lt;/span> line&lt;span style="color:#f92672">.&lt;/span>lower():
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(&lt;span style="color:#e6db74">f&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\r&lt;/span>&lt;span style="color:#e6db74">{&lt;/span>line&lt;span style="color:#f92672">.&lt;/span>strip()&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>, end&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">else&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># 如果无法获取输出流，提供一个替代方案&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(&lt;span style="color:#e6db74">&amp;#34;正在处理中，请等待...&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># 等待进程完成&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> return_code &lt;span style="color:#f92672">=&lt;/span> process&lt;span style="color:#f92672">.&lt;/span>wait()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> return_code &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(&lt;span style="color:#e6db74">f&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\n\n&lt;/span>&lt;span style="color:#e6db74">转码完成！输出文件: &lt;/span>&lt;span style="color:#e6db74">{&lt;/span>output_file&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(&lt;span style="color:#e6db74">f&lt;/span>&lt;span style="color:#e6db74">&amp;#34;原始文件大小: &lt;/span>&lt;span style="color:#e6db74">{&lt;/span>os&lt;span style="color:#f92672">.&lt;/span>path&lt;span style="color:#f92672">.&lt;/span>getsize(input_file) &lt;span style="color:#f92672">/&lt;/span> (&lt;span style="color:#ae81ff">1024&lt;/span>&lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#ae81ff">1024&lt;/span>)&lt;span style="color:#e6db74">:&lt;/span>&lt;span style="color:#e6db74">.2f&lt;/span>&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74"> MB&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">f&lt;/span>&lt;span style="color:#e6db74">&amp;#34;转码后文件大小: &lt;/span>&lt;span style="color:#e6db74">{&lt;/span>os&lt;span style="color:#f92672">.&lt;/span>path&lt;span style="color:#f92672">.&lt;/span>getsize(output_file) &lt;span style="color:#f92672">/&lt;/span> (&lt;span style="color:#ae81ff">1024&lt;/span>&lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#ae81ff">1024&lt;/span>)&lt;span style="color:#e6db74">:&lt;/span>&lt;span style="color:#e6db74">.2f&lt;/span>&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74"> MB&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#66d9ef">True&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">else&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(&lt;span style="color:#e6db74">f&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#ae81ff">\n&lt;/span>&lt;span style="color:#e6db74">转码失败，ffmpeg返回错误代码: &lt;/span>&lt;span style="color:#e6db74">{&lt;/span>return_code&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#66d9ef">False&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">except&lt;/span> &lt;span style="color:#a6e22e">FileNotFoundError&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(&lt;span style="color:#e6db74">&amp;#34;错误: 找不到ffmpeg。请确保ffmpeg已安装并添加到系统PATH中。&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#66d9ef">False&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">except&lt;/span> &lt;span style="color:#a6e22e">Exception&lt;/span> &lt;span style="color:#66d9ef">as&lt;/span> e:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(&lt;span style="color:#e6db74">f&lt;/span>&lt;span style="color:#e6db74">&amp;#34;发生错误: &lt;/span>&lt;span style="color:#e6db74">{&lt;/span>str(e)&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#66d9ef">False&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> __name__ &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#e6db74">&amp;#34;__main__&amp;#34;&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> parser &lt;span style="color:#f92672">=&lt;/span> argparse&lt;span style="color:#f92672">.&lt;/span>ArgumentParser(description&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;将视频转码为H.265格式&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> parser&lt;span style="color:#f92672">.&lt;/span>add_argument(&lt;span style="color:#e6db74">&amp;#34;input_file&amp;#34;&lt;/span>, help&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;输入视频文件路径&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> parser&lt;span style="color:#f92672">.&lt;/span>add_argument(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;--intel&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> action&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;store_true&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> help&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;使用 Intel QuickSync硬件加速&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> parser&lt;span style="color:#f92672">.&lt;/span>add_argument(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;--amd&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> action&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;store_true&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> help&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;使用 AMD GPU 硬件加速&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> parser&lt;span style="color:#f92672">.&lt;/span>add_argument(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;--nvidia&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> action&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;store_true&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> help&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;使用 NVIDIA NVENC 硬件加速&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># 新增质量/码率可调参数&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> parser&lt;span style="color:#f92672">.&lt;/span>add_argument(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;--crf&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> type&lt;span style="color:#f92672">=&lt;/span>int,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> default&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">23&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> help&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;质量参数（CRF或等效值，数值越大文件越小）&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> parser&lt;span style="color:#f92672">.&lt;/span>add_argument(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;--preset&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> default&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;medium&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> choices&lt;span style="color:#f92672">=&lt;/span>[
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;ultrafast&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;fast&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;medium&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;slow&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;slower&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;veryslow&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> help&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;编码preset&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> parser&lt;span style="color:#f92672">.&lt;/span>add_argument(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;--bitrate&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> help&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;目标码率，如2000k，优先于CRF/质量参数&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> args &lt;span style="color:#f92672">=&lt;/span> parser&lt;span style="color:#f92672">.&lt;/span>parse_args()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> sum(bool(x) &lt;span style="color:#66d9ef">for&lt;/span> x &lt;span style="color:#f92672">in&lt;/span> (args&lt;span style="color:#f92672">.&lt;/span>intel, args&lt;span style="color:#f92672">.&lt;/span>amd, args&lt;span style="color:#f92672">.&lt;/span>nvidia)) &lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(&lt;span style="color:#e6db74">&amp;#34;错误: 只能指定一个硬件加速选项&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> sys&lt;span style="color:#f92672">.&lt;/span>exit(&lt;span style="color:#ae81ff">1&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> convert_to_h265(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> args&lt;span style="color:#f92672">.&lt;/span>input_file,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> use_intel&lt;span style="color:#f92672">=&lt;/span>args&lt;span style="color:#f92672">.&lt;/span>intel,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> use_amd&lt;span style="color:#f92672">=&lt;/span>args&lt;span style="color:#f92672">.&lt;/span>amd,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> use_nvidia&lt;span style="color:#f92672">=&lt;/span>args&lt;span style="color:#f92672">.&lt;/span>nvidia,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> crf&lt;span style="color:#f92672">=&lt;/span>args&lt;span style="color:#f92672">.&lt;/span>crf,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> preset&lt;span style="color:#f92672">=&lt;/span>args&lt;span style="color:#f92672">.&lt;/span>preset,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> bitrate&lt;span style="color:#f92672">=&lt;/span>args&lt;span style="color:#f92672">.&lt;/span>bitrate,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> )
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>reqwest请求被cloudflare拦截</title><link>https://tnzzz.top/posts/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/reqwest%E8%AF%B7%E6%B1%82%E8%A2%ABcloudflare%E6%8B%A6%E6%88%AA/</link><pubDate>Sat, 26 Apr 2025 13:15:40 +0800</pubDate><guid>https://tnzzz.top/posts/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/reqwest%E8%AF%B7%E6%B1%82%E8%A2%ABcloudflare%E6%8B%A6%E6%88%AA/</guid><description>&lt;h3 id="问题描述">问题描述&lt;/h3>
&lt;p>在使用 reqwest 请求时，即使是最简的请求也会出发 cloudflare 的拦截，导致请求失败。例如以下代码：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">let&lt;/span> res &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">match&lt;/span> self
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> .client
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> .get(&lt;span style="color:#e6db74">&amp;#34;https://api.bgm.tv/v0/subjects/12&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> .send()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> .&lt;span style="color:#66d9ef">await&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Ok(res) &lt;span style="color:#f92672">=&amp;gt;&lt;/span> res,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Err(e) &lt;span style="color:#f92672">=&amp;gt;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> Err(e.to_string());
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>};
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="临时解决方法">临时解决方法&lt;/h3>
&lt;p>添加 native-tls-alpn feature&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-toml" data-lang="toml">&lt;span style="display:flex;">&lt;span>[&lt;span style="color:#a6e22e">dependencies&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">reqwest&lt;/span> = { &lt;span style="color:#a6e22e">version&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;0.11&amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">features&lt;/span> = [&lt;span style="color:#e6db74">&amp;#34;native-tls-alpn&amp;#34;&lt;/span>] }
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="参考链接">参考链接&lt;/h3>
&lt;p>&lt;a href="https://github.com/seanmonstar/reqwest/discussions/2227">Request made with reqwest blocked by Cloudflare&amp;rsquo;s protection but succeeds with curl&lt;/a>&lt;/p></description></item><item><title>CPU 线程数只有实际的一半解决方法</title><link>https://tnzzz.top/posts/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/cpu-%E7%BA%BF%E7%A8%8B%E6%95%B0%E5%8F%AA%E6%9C%89%E5%AE%9E%E9%99%85%E7%9A%84%E4%B8%80%E5%8D%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/</link><pubDate>Wed, 09 Apr 2025 13:01:40 +0800</pubDate><guid>https://tnzzz.top/posts/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/cpu-%E7%BA%BF%E7%A8%8B%E6%95%B0%E5%8F%AA%E6%9C%89%E5%AE%9E%E9%99%85%E7%9A%84%E4%B8%80%E5%8D%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/</guid><description>&lt;h3 id="问题描述">问题描述&lt;/h3>
&lt;p>Windows 任务管理器中显示 CPU 线程数只有实际的一半
如下图，实际 CPU 线程数为 16，但任务管理器中显示的线程数为 8。
&lt;img alt="Windows 任务管理器" loading="lazy" src="https://tnzzz.top/posts/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/cpu-%E7%BA%BF%E7%A8%8B%E6%95%B0%E5%8F%AA%E6%9C%89%E5%AE%9E%E9%99%85%E7%9A%84%E4%B8%80%E5%8D%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/img/image.png">&lt;/p>
&lt;h3 id="问题原因">问题原因&lt;/h3>
&lt;p>在 CPU 管理工具，例如 Ryzen Master 中，开启了同步多线程 (SMT) 功能，导致 Windows 任务管理器中显示的线程数只有实际的一半。
&lt;img alt="Ryzen Master" loading="lazy" src="https://tnzzz.top/posts/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/cpu-%E7%BA%BF%E7%A8%8B%E6%95%B0%E5%8F%AA%E6%9C%89%E5%AE%9E%E9%99%85%E7%9A%84%E4%B8%80%E5%8D%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/img/image-1.png">&lt;/p>
&lt;h3 id="解决方法">解决方法&lt;/h3>
&lt;p>关闭 CPU 管理工具中的同步多线程 (SMT) 功能，重启计算机后，Windows 任务管理器中显示的线程数应该恢复正常。&lt;/p>
&lt;p>&lt;strong>你需要关闭 SMT 吗？&lt;/strong>
这应该是一个经常被讨论的问题了，我个人的建议是，对于一般消费者，除非你追求极致的单核表现，不然没必要关闭 SMT，多数时候打开 SMT 并不会带来负面的影响。&lt;/p>
&lt;p>现代的操作系统在调度上都考虑到了 SMT 的特性，比如你有 8 个核心 16 线程，那么在多任务要求不是很大的情况下，操作系统会尽量避免让一个核心同时执行两个线程。那么那些单核倒退、资源冲突的情况就基本不会发生了。而当多任务要求很高的时候，操作系统让一个核心跑多个线程，这时候虽然可能会发生冲突导致效率反向降低，但是更多的时候是增加效率，所以从期望上来说，是没必要的。&lt;/p>
&lt;p>如果追求极致性能且自己确切不需要那么多多线程性能，自然可以关掉。反正也用不到那么多线程，享受不到 SMT 的好处，还不如索性关了，杜绝一切可能的开销，也更容易超频了。所以其实核心越多的，越适合关闭 SMT，至于还在用 4 核心之类的就别关了。&lt;/p>
&lt;h3 id="参考链接">参考链接&lt;/h3>
&lt;p>&lt;a href="https://zh.wikipedia.org/wiki/%E5%90%8C%E6%97%B6%E5%A4%9A%E7%BA%BF%E7%A8%8B">Wikipedia 同步多线程&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://www.zhihu.com/tardis/zm/art/352676442?source_id=1003">知乎 说一说超线程/同步多线程（HT/SMT）技术那些事儿&lt;/a>&lt;/p></description></item><item><title>curl 命令行参数注解</title><link>https://tnzzz.top/posts/%E6%96%87%E6%A1%A3/curl%E5%91%BD%E4%BB%A4%E6%B3%A8%E8%A7%A3/</link><pubDate>Tue, 08 Apr 2025 23:19:40 +0800</pubDate><guid>https://tnzzz.top/posts/%E6%96%87%E6%A1%A3/curl%E5%91%BD%E4%BB%A4%E6%B3%A8%E8%A7%A3/</guid><description>&lt;h2 id="使用方法-curl-选项-url">使用方法: &lt;code>curl [选项...] &amp;lt;url&amp;gt;&lt;/code>&lt;/h2>
&lt;h3 id="常用参数">常用参数&lt;/h3>
&lt;h4 id="基本操作">基本操作&lt;/h4>
&lt;ul>
&lt;li>&lt;code>-X, --request &amp;lt;method&amp;gt;&lt;/code>: 指定请求方法（如 GET、POST、PUT、DELETE 等）。&lt;/li>
&lt;li>&lt;code>-d, --data &amp;lt;data&amp;gt;&lt;/code>: 发送 HTTP POST 数据。&lt;/li>
&lt;li>&lt;code>-G, --get&lt;/code>: 将 POST 数据放入 URL 并使用 GET 方法。&lt;/li>
&lt;li>&lt;code>-I, --head&lt;/code>: 仅显示文档信息（HTTP 头部）。&lt;/li>
&lt;li>&lt;code>-L, --location&lt;/code>: 自动跟随重定向。&lt;/li>
&lt;li>&lt;code>-o, --output &amp;lt;file&amp;gt;&lt;/code>: 将输出写入文件。&lt;/li>
&lt;li>&lt;code>-u, --user &amp;lt;user:password&amp;gt;&lt;/code>: 指定用户名和密码。&lt;/li>
&lt;li>&lt;code>-H, --header &amp;lt;header&amp;gt;&lt;/code>: 添加自定义 HTTP 头部。&lt;/li>
&lt;li>&lt;code>-v, --verbose&lt;/code>: 显示详细的操作过程。&lt;/li>
&lt;li>&lt;code>-s, --silent&lt;/code>: 静默模式，不显示任何进度信息。&lt;/li>
&lt;li>&lt;code>-w, --write-out &amp;lt;format&amp;gt;&lt;/code>: 操作完成后输出指定格式的信息。&lt;/li>
&lt;li>&lt;code>-O, --remote-name&lt;/code>: 将输出写入与远程文件同名的文件。&lt;/li>
&lt;/ul>
&lt;h4 id="文件传输">文件传输&lt;/h4>
&lt;ul>
&lt;li>&lt;code>-T, --upload-file &amp;lt;file&amp;gt;&lt;/code>: 上传文件到目标服务器。&lt;/li>
&lt;li>&lt;code>-C, --continue-at &amp;lt;offset&amp;gt;&lt;/code>: 从指定偏移量开始续传。&lt;/li>
&lt;li>&lt;code>-F, --form &amp;lt;name=content&amp;gt;&lt;/code>: 发送 multipart MIME 数据。&lt;/li>
&lt;li>&lt;code>--limit-rate &amp;lt;speed&amp;gt;&lt;/code>: 限制传输速率。&lt;/li>
&lt;li>&lt;code>--max-time &amp;lt;seconds&amp;gt;&lt;/code>: 设置最大传输时间。&lt;/li>
&lt;li>&lt;code>--retry &amp;lt;num&amp;gt;&lt;/code>: 在发生临时错误时重试请求。&lt;/li>
&lt;li>&lt;code>--range &amp;lt;range&amp;gt;&lt;/code>: 获取指定字节范围的内容。&lt;/li>
&lt;/ul>
&lt;h4 id="网络选项">网络选项&lt;/h4>
&lt;ul>
&lt;li>&lt;code>-4, --ipv4&lt;/code>: 强制解析为 IPv4 地址。&lt;/li>
&lt;li>&lt;code>-6, --ipv6&lt;/code>: 强制解析为 IPv6 地址。&lt;/li>
&lt;li>&lt;code>--dns-servers &amp;lt;addresses&amp;gt;&lt;/code>: 指定 DNS 服务器。&lt;/li>
&lt;li>&lt;code>--interface &amp;lt;name&amp;gt;&lt;/code>: 使用指定的网络接口进行请求。&lt;/li>
&lt;li>&lt;code>--socks5 &amp;lt;host[:port]&amp;gt;&lt;/code>: 使用 SOCKS5 代理。&lt;/li>
&lt;/ul>
&lt;h4 id="调试和日志">调试和日志&lt;/h4>
&lt;ul>
&lt;li>&lt;code>--trace &amp;lt;file&amp;gt;&lt;/code>: 将调试信息写入文件。&lt;/li>
&lt;li>&lt;code>--trace-time&lt;/code>: 在调试输出中添加时间戳。&lt;/li>
&lt;li>&lt;code>--stderr &amp;lt;file&amp;gt;&lt;/code>: 将错误输出定向到文件。&lt;/li>
&lt;li>&lt;code>-D, --dump-header &amp;lt;filename&amp;gt;&lt;/code>: 将响应头保存到文件。&lt;/li>
&lt;/ul>
&lt;h4 id="输出格式和显示">输出格式和显示&lt;/h4>
&lt;ul>
&lt;li>&lt;code>--progress-bar&lt;/code>: 显示传输进度条。&lt;/li>
&lt;li>&lt;code>--remote-name&lt;/code>: 将输出写入文件，并使用服务器返回的文件名。&lt;/li>
&lt;li>&lt;code>--remote-time&lt;/code>: 设置本地文件的时间戳为远程文件的时间。&lt;/li>
&lt;li>&lt;code>--styled-output&lt;/code>: 启用彩色输出。&lt;/li>
&lt;/ul>
&lt;h3 id="全部选项">全部选项&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>&lt;code>--abstract-unix-socket &amp;lt;path&amp;gt;&lt;/code>&lt;br>
通过抽象 Unix 域套接字连接&lt;/p></description></item><item><title>Rio气泡鸡尾酒清爽阳光玫瑰葡萄伏特加风味 评测</title><link>https://tnzzz.top/posts/%E9%A5%AE%E6%96%99%E8%AF%84%E6%B5%8B/rio/%E6%B0%94%E6%B3%A1%E9%B8%A1%E5%B0%BE%E9%85%92/%E6%B8%85%E7%88%BD%E9%98%B3%E5%85%89%E7%8E%AB%E7%91%B0%E8%91%A1%E8%90%84%E4%BC%8F%E7%89%B9%E5%8A%A0%E9%A3%8E%E5%91%B3/</link><pubDate>Tue, 08 Apr 2025 23:19:40 +0800</pubDate><guid>https://tnzzz.top/posts/%E9%A5%AE%E6%96%99%E8%AF%84%E6%B5%8B/rio/%E6%B0%94%E6%B3%A1%E9%B8%A1%E5%B0%BE%E9%85%92/%E6%B8%85%E7%88%BD%E9%98%B3%E5%85%89%E7%8E%AB%E7%91%B0%E8%91%A1%E8%90%84%E4%BC%8F%E7%89%B9%E5%8A%A0%E9%A3%8E%E5%91%B3/</guid><description>&lt;h3 id="价格">价格&lt;/h3>
&lt;p>￥ 4.9/瓶&lt;/p>
&lt;h3 id="购买渠道">购买渠道&lt;/h3>
&lt;p>线下&lt;/p>
&lt;h3 id="个人评分">个人评分&lt;/h3>
&lt;p>7/10&lt;/p>
&lt;p>&lt;img alt="alt text" loading="lazy" src="https://tnzzz.top/posts/%E9%A5%AE%E6%96%99%E8%AF%84%E6%B5%8B/rio/%E6%B0%94%E6%B3%A1%E9%B8%A1%E5%B0%BE%E9%85%92/%E6%B8%85%E7%88%BD%E9%98%B3%E5%85%89%E7%8E%AB%E7%91%B0%E8%91%A1%E8%90%84%E4%BC%8F%E7%89%B9%E5%8A%A0%E9%A3%8E%E5%91%B3/img/IMG_20250116_144953.jpg">
&lt;img alt="alt text" loading="lazy" src="https://tnzzz.top/posts/%E9%A5%AE%E6%96%99%E8%AF%84%E6%B5%8B/rio/%E6%B0%94%E6%B3%A1%E9%B8%A1%E5%B0%BE%E9%85%92/%E6%B8%85%E7%88%BD%E9%98%B3%E5%85%89%E7%8E%AB%E7%91%B0%E8%91%A1%E8%90%84%E4%BC%8F%E7%89%B9%E5%8A%A0%E9%A3%8E%E5%91%B3/img/IMG_20250116_145002.jpg">
&lt;img alt="alt text" loading="lazy" src="https://tnzzz.top/posts/%E9%A5%AE%E6%96%99%E8%AF%84%E6%B5%8B/rio/%E6%B0%94%E6%B3%A1%E9%B8%A1%E5%B0%BE%E9%85%92/%E6%B8%85%E7%88%BD%E9%98%B3%E5%85%89%E7%8E%AB%E7%91%B0%E8%91%A1%E8%90%84%E4%BC%8F%E7%89%B9%E5%8A%A0%E9%A3%8E%E5%91%B3/img/IMG_20250116_145120.jpg">&lt;/p></description></item><item><title>Windows更换CPU后PIN无法修改或无法删除问题解决方法</title><link>https://tnzzz.top/posts/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/windows%E6%9B%B4%E6%8D%A2cpu%E5%90%8Epin%E6%97%A0%E6%B3%95%E4%BF%AE%E6%94%B9%E6%88%96%E6%97%A0%E6%B3%95%E5%88%A0%E9%99%A4%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/</link><pubDate>Tue, 08 Apr 2025 23:19:40 +0800</pubDate><guid>https://tnzzz.top/posts/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/windows%E6%9B%B4%E6%8D%A2cpu%E5%90%8Epin%E6%97%A0%E6%B3%95%E4%BF%AE%E6%94%B9%E6%88%96%E6%97%A0%E6%B3%95%E5%88%A0%E9%99%A4%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/</guid><description>&lt;h3 id="问题描述">问题描述&lt;/h3>
&lt;p>更换 CPU 后，Windows 系统提示无法使用 PIN 登录，但 PIN 可以正常修改，但修改后锁屏界面仍然无法使用 PIN 登录
并且在设置中删除 PIN 选项变为灰色。&lt;/p>
&lt;h3 id="参考链接">参考链接&lt;/h3>
&lt;p>&lt;a href="https://learn.microsoft.com/en-us/answers/questions/1466604/how-do-i-remove-pin-(windows-hello)-option-if-it-i">How do I remove PIN (Windows Hello) option if it is greyed out?&lt;/a>
&lt;img alt="NoAlt" loading="lazy" src="https://tnzzz.top/posts/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/windows%E6%9B%B4%E6%8D%A2cpu%E5%90%8Epin%E6%97%A0%E6%B3%95%E4%BF%AE%E6%94%B9%E6%88%96%E6%97%A0%E6%B3%95%E5%88%A0%E9%99%A4%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/img/image.png">&lt;/p>
&lt;h3 id="解决方法">解决方法&lt;/h3>
&lt;ol>
&lt;li>
&lt;p>启动 cmd，输入以下命令：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>certutil.exe -DeleteHelloContainer
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>注销重新登录，PIN 选项现在应该被正常删除了。&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="总结">总结&lt;/h3>
&lt;p>中文互联网确实被狗屎 CSDN、知乎等网站污染了，搜索同样的关键字，结果一整页都是重复的方法，下次遇到问题还是得先用英文搜索。CSDN、百度这种垃圾公司什么时候死？&lt;/p></description></item><item><title>农夫山泉东方树叶青柑普洱 评测</title><link>https://tnzzz.top/posts/%E9%A5%AE%E6%96%99%E8%AF%84%E6%B5%8B/%E5%86%9C%E5%A4%AB%E5%B1%B1%E6%B3%89/%E4%B8%9C%E6%96%B9%E6%A0%91%E5%8F%B6/%E9%9D%92%E6%9F%91%E6%99%AE%E6%B4%B1/</link><pubDate>Tue, 08 Apr 2025 23:19:40 +0800</pubDate><guid>https://tnzzz.top/posts/%E9%A5%AE%E6%96%99%E8%AF%84%E6%B5%8B/%E5%86%9C%E5%A4%AB%E5%B1%B1%E6%B3%89/%E4%B8%9C%E6%96%B9%E6%A0%91%E5%8F%B6/%E9%9D%92%E6%9F%91%E6%99%AE%E6%B4%B1/</guid><description>&lt;h3 id="价格">价格&lt;/h3>
&lt;p>低于￥ 5.0/瓶，具体价格忘记了&lt;/p>
&lt;h3 id="购买渠道">购买渠道&lt;/h3>
&lt;p>线下赵一鸣&lt;/p>
&lt;h3 id="个人评分">个人评分&lt;/h3>
&lt;p>8/10&lt;/p>
&lt;p>&lt;img alt="alt text" loading="lazy" src="https://tnzzz.top/posts/%E9%A5%AE%E6%96%99%E8%AF%84%E6%B5%8B/%E5%86%9C%E5%A4%AB%E5%B1%B1%E6%B3%89/%E4%B8%9C%E6%96%B9%E6%A0%91%E5%8F%B6/%E9%9D%92%E6%9F%91%E6%99%AE%E6%B4%B1/img/IMG_20250115_112843.jpg">
&lt;img alt="alt text" loading="lazy" src="https://tnzzz.top/posts/%E9%A5%AE%E6%96%99%E8%AF%84%E6%B5%8B/%E5%86%9C%E5%A4%AB%E5%B1%B1%E6%B3%89/%E4%B8%9C%E6%96%B9%E6%A0%91%E5%8F%B6/%E9%9D%92%E6%9F%91%E6%99%AE%E6%B4%B1/img/IMG_20250115_112850.jpg">&lt;/p></description></item><item><title>西域春奶啤无醇白桃味 评测</title><link>https://tnzzz.top/posts/%E9%A5%AE%E6%96%99%E8%AF%84%E6%B5%8B/%E8%A5%BF%E5%9F%9F%E6%98%A5/%E5%A5%B6%E5%95%A4/%E6%97%A0%E9%86%87%E7%99%BD%E6%A1%83%E5%91%B3/</link><pubDate>Tue, 08 Apr 2025 23:19:40 +0800</pubDate><guid>https://tnzzz.top/posts/%E9%A5%AE%E6%96%99%E8%AF%84%E6%B5%8B/%E8%A5%BF%E5%9F%9F%E6%98%A5/%E5%A5%B6%E5%95%A4/%E6%97%A0%E9%86%87%E7%99%BD%E6%A1%83%E5%91%B3/</guid><description>&lt;h3 id="价格">价格&lt;/h3>
&lt;p>￥ 2.8/瓶&lt;/p>
&lt;h3 id="购买渠道">购买渠道&lt;/h3>
&lt;p>线下赵一鸣&lt;/p>
&lt;h3 id="总结">总结&lt;/h3>
&lt;p>闻起来还行，喝起来味道很奇怪，完美结合的啤酒难闻的味道与牛奶的腥味，不理解白桃味体现在哪里，而且居然卖 2.8 元一瓶，鉴定为 &lt;strong>狗都不喝&lt;/strong>&lt;/p>
&lt;h3 id="个人评分">个人评分&lt;/h3>
&lt;p>1/10&lt;/p>
&lt;p>&lt;img alt="alt text" loading="lazy" src="https://tnzzz.top/posts/%E9%A5%AE%E6%96%99%E8%AF%84%E6%B5%8B/%E8%A5%BF%E5%9F%9F%E6%98%A5/%E5%A5%B6%E5%95%A4/%E6%97%A0%E9%86%87%E7%99%BD%E6%A1%83%E5%91%B3/img/IMG_20250114_195954.jpg">
&lt;img alt="alt text" loading="lazy" src="https://tnzzz.top/posts/%E9%A5%AE%E6%96%99%E8%AF%84%E6%B5%8B/%E8%A5%BF%E5%9F%9F%E6%98%A5/%E5%A5%B6%E5%95%A4/%E6%97%A0%E9%86%87%E7%99%BD%E6%A1%83%E5%91%B3/img/IMG_20250114_200011.jpg">&lt;/p></description></item><item><title>Hello World!</title><link>https://tnzzz.top/posts/helloworld/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://tnzzz.top/posts/helloworld/</guid><description>&lt;p>&lt;img alt="Yuri" loading="lazy" src="https://api.tnzzz.top/yuri/random.jpg">&lt;/p></description></item></channel></rss>