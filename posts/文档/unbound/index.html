<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>unbound 配置文件中文文档 | 明天吃什么？</title><meta name=keywords content="unbound,unbound.conf"><meta name=description content='unbound.conf(5)                 unbound 1.23.0                 unbound.conf(5)

NAME
    unbound.conf - Unbound 配置文件.

SYNOPSIS
    unbound.conf

DESCRIPTION
    unbound.conf 用于配置 unbound(8)。文件格式包含属性和值。某些属性内部包含其他属性。表示法为：attribute: value。

    注释以 # 开头，并持续到行尾。空行和行首的空白将被忽略。

    可以使用 unbound-checkconf(8) 工具在使用前检查 unbound.conf。



EXAMPLE
    下面显示了一个示例配置文件。将其复制到 /etc/unbound/unbound.conf 并使用以下命令启动服务器：

        $ unbound -c /etc/unbound/unbound.conf

    大多数设置都是默认值。使用以下命令停止服务器：

        $ kill `cat /etc/unbound/unbound.pid`

    下面是一个最小的配置文件。源代码发行版包含一个带有所有选项的 extensive example.conf 文件。

    # unbound.conf(5) unbound(8) 的配置文件。
    server:
        directory: "/etc/unbound"
        username: unbound
        # 确保 unbound 可以从 chroot 内部访问熵。
        # 例如在 Linux 上使用这些命令（在 BSD 上，使用 devfs(8)）：
        #      mount --bind -n /dev/urandom /etc/unbound/dev/urandom
        # 并且 mount --bind -n /dev/log /etc/unbound/dev/log
        chroot: "/etc/unbound"
        # logfile: "/etc/unbound/unbound.log"  #取消注释以使用日志文件。
        pidfile: "/etc/unbound/unbound.pid"
        # verbosity: 1      # 取消注释并增加以获取更多日志记录。
        # 监听所有接口，应答来自本地子网的查询。
        interface: 0.0.0.0
        interface: ::0
        access-control: 10.0.0.0/8 allow
        access-control: 2001:DB8::/64 allow

FILE FORMAT
    关键字之间必须有空格。属性关键字以冒号“:”结尾。
    属性后面跟着一个值，或者包含它的属性（在这种情况下它被称为一个子句）。
    子句可以在整个文件（或包含的文件）中重复，以将属性分组到同一个子句下。

    可以使用 include: 指令包含文件。
    它可以出现在任何地方，接受单个文件名作为参数。
    处理将继续，就好像被包含文件中的文本被复制到配置文件的那个位置一样。
    如果同时使用 chroot，则使用被包含文件的完整路径名有效；
    如果守护进程启动的目录等于其 chroot/工作目录，或者在 include 语句之前用 directory: dir 指定了工作目录，
    则被包含文件的相对路径名也有效。
    可以使用通配符包含多个文件，请参阅 glob(7)。

    对于更结构化的包含选项，可以使用 include-toplevel: 指令。
    这将关闭当前活动的任何子句（如果有），并强制在被包含的文件中以及此指令之后使用子句。

Server Options
    这些选项属于服务器配置中的`server:`部分。

    verbosity: <number>
            详细程度等级，0级表示无详细信息，仅显示错误。
            1级提供操作信息。
            2级则包含详细的操作信息，每条查询都有简短说明。
            3级深入到查询层面，逐条输出查询信息。
            4级揭示算法层面的信息。
            5级记录缓存未命中时的客户端标识。
            默认级别为1。详细程度也可通过命令行提升，详见unbound(8)手册。

    statistics-interval: <seconds>
            打印统计信息到日志的间隔秒数，针对每个线程。
            设置为0或""以禁用此功能，默认情况下是禁用的。
            直方图统计信息仅在统计间隔期间有回复发送时才会打印，
            而请求列表统计信息则会在每个间隔打印（但可能为0）。
            这是因为中位数计算需要存在数据。

    statistics-cumulative: <yes or no>
            若启用此选项，统计信息将自Unbound启动起累计，
            且在记录统计后不清除统计计数器。默认设置为`no`。

    extended-statistics: <yes or no>
            若启用，将从unbound-control(8)打印扩展统计信息。
            默认设置为`no`，因为跟踪更多统计信息需要时间。
            计数器在unbound-control(8)中列出。

    statistics-inhibit-zero: <yes or no>
            若启用，值为0的选定扩展统计信息将被抑制
            不会在unbound-control(8)中打印。这些包括
            查询类型、查询类、查询操作码、回答rcodes（除了
            NOERROR、FORMERR、SERVFAIL、NXDOMAIN、NOTIMPL、REFUSED）和RPZ
            操作。默认设置为`yes`。

    num-threads: <number>
            创建用于服务客户端的线程数量。若无需多线程，请设置为1。

    port: <port number>
            服务器响应查询的端口号，默认为53。

    interface: <ip address or interface name [@port]>
            用于连接网络的接口。此接口用于监听来自客户端的查询，
            并从中向客户端提供响应。可多次指定以在多个接口上工作。
            若未指定，则默认监听本地主机。若使用接口名称而非IP地址，
            则采用该接口上的所有IP地址列表。在重新加载（kill -HUP）时，
            接口不会变更，仅重启时生效。可通过@端口号（接口与端口号间无空格）指定端口，
            未指定时则使用默认端口（来自port设置）。

    ip-address: <ip address or interface name [@port]>
            与 interface 相同：（以便于与nsd.conf兼容）。

    interface-automatic: <yes or no>
            监听所有（当前及未来）接口上的所有地址，
            检测UDP查询的源接口并将其复制到回复中。
            这与ip-transparent非常相似，但此选项服务于所有接口，
            而使用ip-transparent时，您可以选择Unbound在哪些（未来）接口上提供服务。
            此功能尚处于实验阶段，需要您的操作系统支持特定的套接字选项。
            默认值为`no`。

    interface-automatic-ports: <string>
            列出interface-automatic监听的端口号。
            若为空，则默认监听默认端口。
            端口号在字符串中以空格分隔，默认值为""。

            此设置可用于让interface-automatic处理接口，
            并通过在列表中包含正常端口号来监听该端口，
            同时也可通过将HTTPS或DNS over TLS的端口号加入列表，实现对它们的监听。

    outgoing-interface: <ip address or ip6 netblock>
            用于连接网络的接口。
            此接口用于向权威服务器发送查询并接收其回复。
            可多次指定以在多个接口上工作。
            若未指定，则默认使用所有接口。
            您可以在`interface:`和`outgoing-interface:`行中指定相同的接口，
            这些接口将同时用于两种目的。
            为防止欺骗，出站查询会通过随机选择的出站接口发送。

            若指定的是IPv6网段而非单个IPv6地址，
            则外发的UDP查询将采用从该网段中随机选取的源地址，以应对欺骗攻击。
            此功能要求该IPv6网段需路由至运行Unbound的主机，
            并且操作系统需支持非特权非本地绑定（目前仅Linux支持）。
            可通过多个`outgoing-interface:`选项指定多个网段，
            但切勿同时指定单个IPv6地址与IPv6网段，否则随机化机制将失效。
            建议结合`prefer-ip6: yes`使用，以提高选择IPv6域名服务器进行查询的可能性。
            在Linux系统上，需执行以下两条命令，
            以便利用`freebind`套接字选项接收指定IPv6网段的流量：
            `ip -6 addr add 你的网段/64 dev lo && ip -6 route add local 你的网段/64 dev lo`。

    outgoing-range: <number>
            要打开的端口数量。
            每个线程可打开的文件描述符数量至少为1，默认值取决于编译选项。
            较大的数值需要操作系统提供额外资源。
            为了获得最佳性能，建议设置一个非常大的值，并利用libevent来实现这一目标。

    outgoing-port-permit: <port number or range>
            允许 Unbound 打开此端口或端口范围，用于发送查询。
            允许更多的出站端口能增强抵御欺骗攻击的能力。
            请确保这些端口不被其他守护进程占用。
            默认情况下，仅使用 IANA 未分配的 1024 以上端口。
            请提供一个端口号或“低-高”形式的范围，中间不要有空格。

            `outgoing-port-permit` 和 `outgoing-port-avoid` 语句按照配置文件的顺序逐行处理，
            将允许的端口加入并从允许的端口集合中减去避免的端口。
            处理开始时，允许的端口集合包含非 IANA 分配的、高于 1024 的端口。

    outgoing-port-avoid: <port number or range>
            不允许Unbound打开此端口或端口范围用于发送查询。
            使用此选项可确保Unbound不会占用其他守护进程所需的端口。
            该端口在所有出站接口上均被避开，包括IPv4和IPv6。
            默认情况下，仅使用IANA未分配的1024以上端口。
            请提供一个端口号或“低-高”形式的范围，中间不要有空格。

    outgoing-num-tcp: <number>
            为每个线程分配的外发TCP缓冲区数量。
            默认值为10。
            若设置为0，或当do-tcp为“否”时，将不会向权威服务器发送TCP查询。
            对于较大规模的部署，建议适当增加此值。

    incoming-num-tcp: <number>
            为每个线程分配的入站TCP缓冲区数量。
            默认值为10。若设置为0，或当do-tcp为“否”时，将不会接受来自客户端的TCP查询。
            对于较大规模的部署，建议适当增加此值。

    edns-buffer-size: <number>
            作为EDNS重组缓冲区大小通告的字节数。
            此值用于通过UDP向对等方发送的数据报中。
            实际缓冲区大小由msg-buffer-size决定（适用于TCP和UDP）。
            请勿设置高于该值。默认值为1232，这是2020年DNS标志日的推荐值。
            设置为512可以规避最严格的路径MTU问题，但被视为极端做法，
            因为由此产生的TCP回退量过大（可能也适用于此解析器，建议调整出站TCP数量）。

    max-udp-size: <number>
            最大UDP响应大小（不适用于TCP响应）。
            65536表示禁用UDP响应大小上限，始终采用客户端的选择。
            建议值范围为512至4096。
            默认值为1232，该默认值与edns-buffer-size的默认设置相同。

    stream-wait-size: <number>
            用于等待流缓冲区的最大字节数。默认值为4兆字节。
            纯数字表示字节，可附加&#39;k&#39;、&#39;m&#39;或&#39;g&#39;分别表示千字节、兆字节或吉字节（1兆字节为1024*1024字节）。
            由于TCP和TLS流会排队多个结果，这些缓冲区占用的内存总量不会超过此数值，否则将丢弃响应。
            此设置用于管理服务器在高负载下的总内存使用量，同时每个连接上可排队的请求数量也受到限制，
            额外的请求将在TCP缓冲区中等待。

    msg-buffer-size: <number>
            消息缓冲区的字节大小，默认设置为65552字节，
            足以容纳64Kb的数据包，这是DNS消息的最大尺寸。
            任何超过此大小的消息都无法发送或接收。
            为了节省内存，可以减小此值，但某些对DNS数据的请求，
            如针对大型资源记录的查询，可能会导致向客户端返回SERVFAIL（服务失败）响应。

    msg-cache-size: <number>
            消息缓存的大小字节数，默认值为4兆字节。
            纯数字表示字节数，可附加&#39;k&#39;、&#39;m&#39;或&#39;g&#39;分别表示千字节、兆字节或吉字节（1兆字节等于1024*1024字节）。

    msg-cache-slabs: <number>
            消息缓存中的分片数量。分片通过减少线程间的锁争用来提升性能。
            必须设置为2的幂次方。将其设置为接近CPU核心数的值是一个合理的估计。

    num-queries-per-thread: <number>
            每个线程同时处理的查询数量。若需服务的查询超出此限，
            且无法通过竞争超时机制（参见jostle-timeout）移除已有查询，则新查询将被丢弃。
            此举促使客户端在超时后重新发送请求，为服务器留出时间处理现有查询。
            默认值依据编译选项而定，通常为512或1024。

    jostle-timeout: <msec>
            当服务器非常繁忙时使用的超时设置。该值通常设定为能确保一次往返权威服务器的时长。
            若查询请求过多，则允许50%的查询完成执行，而另外50%若已超出其允许时间，则会被新到达的查询替换。
            此机制旨在防止因慢查询或高查询率导致的服务拒绝。
            默认值为200毫秒。
            其效果是，对于耗时较长的查询，其每秒查询率（qps）大约为（每线程查询数/2）除以（此类长查询的平均时间）。
            而对于短查询，其qps可达到（每线程查询数/2）除以（以整秒计的jostletimeout），
            默认情况下约为（1024/2）* 5 = 2560 qps每线程。

    delay-close: <msec>
            在UDP端口因超时被关闭前，额外延迟时间以毫秒计。
            默认值为0，即不启用此功能。
            此设置旨在防止来自上游（递归）服务器的延迟响应数据包撞击已关闭的端口，
            从而触发各种关闭端口的计数器，例如1500毫秒。
            当发生超时时，系统需要额外的套接字来检查数据包的ID和远程IP，
            不符合条件的数据包将被计入无效数据包计数器。

    udp-connect: <yes or no>
            为UDP套接字执行连接操作，以减轻ICMP侧信道泄露风险。默认设置为`yes`。

    unknown-server-time-limit: <msec>
            等待未知服务器响应的毫秒时间。
            若您处于较慢的卫星链路环境下，可适当增加此值，例如设为1128毫秒。
            这样能避免因超时导致每次初始查询都需要重新发起。默认值为376毫秒。

    discard-timeout: <msec>
            递归请求被丢弃的等待时间，以毫秒计。
            此举旨在防止大量回复堆积。
            这些请求不会收到回复，工作项将继续递归。
            如果启用了服务过期客户端超时，建议此值稍大一些。
            建议值为1900毫秒。值为0则禁用此功能。默认值为1900毫秒。

    wait-limit: <number>
            每个IP地址可等待递归回复的数量。
            这为每个IP地址设置了等待递归回复的速率限制，防止大量查询积压等待返回至单一目的地。
            若值为0，则禁用等待限制。默认值为1000。

    wait-limit-cookie: <number>
            对于发送带有有效DNS Cookie查询的IP地址，可等待递归处理的回复数量。
            由于Cookie验证了客户端地址，此限制可适当提高，默认值为10000。

    wait-limit-netblock: <netblock> <number>
            网段等待限制。若未指定，则采用默认的等待限制值。
            系统会根据最具体的网段来确定限制，这对于为特定组、个人或服务器覆盖默认设置非常有用。
            值为-1时，表示该网段无等待限制。
            默认情况下，回环地址的等待限制网段为-1，即不受限，因为它与网络其他部分隔离，防止伪造数据包。
            回环地址127.0.0.0/8和::1/128默认设置为-1。

    wait-limit-cookie-netblock: <netblock> <number>
            当查询带有DNS cookie时，针对网段的等待限制。
            若未指定，则采用wait-limit-cookie的值。值为-1时，该网段无等待限制。
            默认情况下，回环地址127.0.0.0/8和::1/128的等待限制设置为-1。

    so-rcvbuf: <number>
            如果非零，则设置SO_RCVBUF套接字选项，以在UDP端口53的入站查询上获取更多缓冲区空间。
            这样，在繁忙服务器上的短暂流量高峰不会导致丢包（参见netstat -su中的计数器）。
            默认值为0（使用系统值）。否则，指定请求的字节数，在繁忙服务器上可尝试“4m”。
            操作系统会设定一个上限，
            在Linux上，Unbound需要root权限才能突破此限制，或者管理员可以使用sysctl net.core.rmem_max进行调整。
            在BSD系统中，需修改/etc/sysctl.conf中的kern.ipc.maxsockbuf。
            在OpenBSD上，需更改头文件并重新编译内核。
            在Solaris上，使用ndd -set /dev/udp udp_max_buf 8388608进行设置。

    so-sndbuf: <number>
            若非0，则设置SO_SNDBUF套接字选项，以在UDP端口53的对外查询中获取更多缓冲区空间。
            这对于非常繁忙的服务器而言，能有效应对应答流量的突发高峰，
            否则可能会记录“发送：资源暂时不可用”的错误，且通过netstat -su也能观察到缓冲区溢出的情况。
            默认值为0（使用系统设定值）。指定请求的字节数，在极其繁忙的服务器上可尝试“4m”。
            操作系统会设定一个上限，
            在Linux上，Unbound需要root权限才能突破此限制，或者管理员可以使用sysctl net.core.wmem_max进行调整。
            在BSD和Solaris系统中，更改方式与so-rcvbuf类似。

    so-reuseport: <yes or no>
            若选择`yes`，则为每个线程开启专用的监听套接字以接收查询，
            并尝试在每个套接字上设置SO_REUSEPORT选项。
            此举可能更均匀地分配查询至各线程。
            默认设置为`yes`。
            在Linux系统中，此功能支持内核版本>=3.9。
            其他系统如FreeBSD、OSX也可能适用。您可在任何平台及内核上启用此功能，
            系统将尝试打开端口并在编译时若该选项可用则传递之；
            若成功则使用，失败则静默继续（除非详细级别为3），不采用该选项。
            在极高负载情况下，关闭此选项可能更利于查询的均匀分配，此现象在Linux系统（4.4.x版本）中有报告。

    ip-transparent: <yes or no>
            如果是，则在Unbound监听入站流量的套接字上使用IP_TRANSPARENT套接字选项。
            默认情况下为`no`。此选项允许您绑定到非本地接口，
            例如，对于将来会存在但目前不存在的IP地址，配合主机故障转移配置使用。
            这与interface-automatic非常相似，但后者服务于所有接口，
            而通过此选项，您可以选择Unbound将在哪些（未来）接口上提供服务。
            在某些系统上，此选项需要Unbound以root权限启动。
            在FreeBSD系统上，该选项使用IP_BINDANY，在OpenBSD系统上则使用SO_BINDANY。

    ip-freebind: <yes or no>
            如果是，则在监听未绑定地址的套接字上使用IP_FREEBIND选项。
            默认情况下为`no`。此选项允许您绑定到非本地或不存在的IP地址，例如当网络接口或IP地址不可用时。
            该选项仅存在于Linux系统中，同时也可使用类似的ip-transparent选项。

    ip-dscp: <number>
            传出IP数据包头中区分服务字段（DS）内的区分服务代码点（DSCP）值。
            该字段取代了过时的IPv4服务类型字段及IPv6流量类别字段。

    rrset-cache-size: <number>
            RRset缓存的大小以字节数计，默认值为4兆字节。
            纯数字表示字节，可附加&#39;k&#39;、&#39;m&#39;或&#39;g&#39;分别表示千字节、兆字节或吉字节（1兆字节等于1024*1024字节）。

    rrset-cache-slabs: <number>
            RRset缓存中的slab数量。slab通过减少线程间的锁争用来提升性能。必须设置为2的幂次方。

    cache-max-ttl: <seconds>
            RRsets和消息在缓存中的最大生存时间（TTL），默认值为86400秒（1天）。
            当TTL到期时，缓存项即视为过期。
            可通过设置更低的TTL值，强制解析器频繁查询数据，而不依赖（过大的）TTL值。
            下游客户端同样会看到这一较低的TTL设置。

    cache-min-ttl: <seconds>
            RRsets和消息在缓存中的最小生存时间。默认值为0。
            若启用最小值，数据将被缓存超过域名所有者预期的时间，从而减少查询次数以查找数据。
            设置为零确保缓存中的数据符合域名所有者的意图，
            而较高的值，尤其是超过一小时左右，可能导致缓存数据与实际数据不再匹配，从而引发问题。

    cache-max-negative-ttl: <seconds>
            负响应的生存时间上限，这些响应在授权部分包含一个时间受限的SOA记录。
            默认值为3600秒。此设置适用于nxdomain（域名不存在）和nodata（无数据）类型的应答。

    cache-min-negative-ttl: <seconds>
            负面响应的最小生存时间，这些响应在权威部分包含一个有时间限制的SOA记录。
            默认值为0（禁用）。如果此功能被禁用且配置了cache-min-ttl，则后者将生效。
            在这种情况下，您可以将其设置为1以遵循上游的TTL。
            此设置适用于nxdomain和nodata类型的应答。

    infra-host-ttl: <seconds>
            主机缓存中条目的生存时间。该缓存包含往返时间、故障状态及EDNS支持信息。默认值为900。

    infra-cache-slabs: <number>
            基础设施缓存中的slab数量。slab通过减少线程间的锁争用来提升性能，必须设置为2的幂次方。

    infra-cache-numhosts: <number>
            缓存信息的主机数量，默认值为10000。

    infra-cache-min-rtt: <msec>
            基础设施缓存中动态重传超时计算的下限值，默认设置为50毫秒。
            若使用需更长时间进行递归名称解析的转发器，请适当增加此值。

    infra-cache-max-rtt: <msec>
            基础设施缓存中动态重传超时计算的上限值，默认设置为2分钟。

    infra-keep-probing: <yes or no>
            若启用此功能，服务器将持续对已宕机的主机进行探测，采用一次一探的模式。
            默认设置为`no`。
            对于已宕机的主机，例如在单次探测期间未响应者，将被标记为宕机状态，
            并可能需要等待 infra-host-ttl 时间后才会再次被探测。

    define-tag: <"list of tags">
            定义可与本地区域（local-zone）和访问控制（access-control）一同使用的标签。
            将列表用引号（""）括起，并在标签之间留出空格。

    do-ip4: <yes or no>
            启用或禁用是否响应或发起ip4查询。默认设置为`yes`。

    do-ip6: <yes or no>
            启用或禁用是否响应或发起IPv6查询。默认设置为`yes`。
            若禁用，则不会在IPv6上响应查询，也不会通过IPv6向互联网域名服务器发送查询。
            此选项可用于关闭IPv6传输以发送DNS流量，但不会影响DNS流量的内容，其中可能包含IPv4和IPv6地址。

    prefer-ip4: <yes or no>
            若启用此选项，将优先使用IPv4传输向互联网域名服务器发送DNS查询。
            默认设置为`no`。
            当服务器所在的IPv6网段（整个/64）并非由单一运营商所有，
            且该网段/64的信誉存在问题时，此选项尤为有用，
            此时使用IPv4可利用上游服务器已有的IPv4过滤机制。

    prefer-ip6: <yes or no>
            若启用，将优先使用IPv6传输向互联网域名服务器发送DNS查询。默认设置为否。

    do-udp: <yes or no>
            启用或禁用是否响应或发起UDP查询。默认设置为`yes`。

    do-tcp: <yes or no>
            启用或禁用TCP查询的应答与发起，默认设置为`yes`。

    tcp-mss: <number>
            服务器响应查询时，TCP套接字的最大段大小（MSS）。
            设置低于以太网常见MSS的值（例如1220）可解决路径MTU问题。
            需注意，并非所有平台都支持通过套接字选项设置MSS（TCP_MAXSEG）。
            默认情况下，MSS由接口MTU及服务器与客户端之间的协商决定，采用系统默认值。

    outgoing-tcp-mss: <number>
            TCP套接字用于发出查询（从Unbound到其他服务器）的最大段大小（MSS）。
            设置低于以太网常见MSS的值（例如1220）可解决路径MTU问题。
            需要注意的是，并非所有平台都支持通过套接字选项设置MSS（TCP_MAXSEG）。
            默认情况下，MSS由接口MTU及Unbound与其他服务器之间的协商决定，采用系统默认值。

    tcp-idle-timeout: <msec>
            Unbound在TCP连接上等待查询的时长，若超时则关闭连接。
            此选项默认值为30000毫秒。
            当空闲的入站TCP缓冲区数量低于配置总数的50%时，该选项值会逐步降低：
            首先降至配置值的1%，若空闲缓冲区进一步低于总数的35%，则降至配置值的0.2%，
            最终若空闲缓冲区低于总数的20%，则降至0。
            无论采用何种选项值，最小超时时间均保持为200毫秒。
            若启用了edns-tcp-keepalive，此设置将被edns-tcp-keepalive-timeout覆盖。

    tcp-reuse-timeout: <msec>
            Unbound 期间将保持与权威服务器的 TCP 持久连接开启。此选项默认值为 60000 毫秒。

    max-reuse-tcp-queries: <number>
            在持久TCP连接上可发送的最大查询数量，此选项默认设置为200次查询。

    tcp-auth-query-timeout: <number>
            TCP查询认证服务器的超时时间，以毫秒为单位。此选项默认值为3000毫秒。

    edns-tcp-keepalive: <yes or no>
            启用或禁用EDNS TCP保持连接功能。默认设置为`no`。

    edns-tcp-keepalive-timeout: <msec>
            当启用edns-tcp-keepalive时，此设置将覆盖tcp-idle-timeout。
            若客户端支持EDNS TCP保持连接选项，Unbound会向客户端发送超时值，
            以促使客户端在服务器超时前关闭连接。
            此选项默认值为120000毫秒。

    sock-queue-timeout: <sec>
            在套接字缓冲区中等待过久的UDP查询可被丢弃。
            默认值为0，即禁用此功能。
            时间以秒为单位设置，3秒可能是一个合适的值，用于忽略那些客户端可能已不再需要回复的旧查询。
            这种情况可能发生在主机暂时无法处理查询时，例如Unbound未运行，之后又重新启用。
            该功能利用了时间戳套接字选项。

    tcp-upstream: <yes or no>
            启用或禁用上游查询是否仅使用TCP进行传输。
            默认设置为`no`。在隧道场景中非常有用。
            如果设置为否，您可以通过分别使用forward-tcp-upstream或stub-tcp-upstream，
            仅为选定的转发区域或存根区域指定TCP传输。

    udp-upstream-without-downstream: <yes or no>
            即使do-udp设置为否，也启用UDP上行。
            默认情况下为否，此设置不会改变任何现有配置。
            对于TLS服务提供商而言，若希望禁止UDP下行但需通过UDP获取上行数据，此功能尤为实用。

    tls-upstream: <yes or no>
            启用或禁用上游查询是否仅使用TLS进行传输。
            默认值为`no`。在隧道场景中非常有用。
            TLS包含以TCP线格式传输的纯DNS数据。
            另一台服务器必须支持此功能（参见tls-service-key）。
            如果启用此选项，还需配置tls-cert-bundle或使用tls-win-cert、tls-system-cert加载CA证书，
            否则连接无法进行身份验证。
            此选项为所有上游查询启用TLS，但如果不设置此选项，
            可以通过forward-tls-upstream为特定转发区域单独配置TLS，
            同样适用于stub-tls-upstream。如果启用了tls-upstream选项，
            则对所有转发和存根区域生效，此时forward-tls-upstream和stub-tls-upstream选项将被忽略，
            视为已设置为`yes`。

    ssl-upstream: <yes or no>
            tls-upstream 的替代语法。若配置文件中两者均存在，则以最后一项为准。

    tls-service-key: <file>
            若启用此功能，服务器将在通过tls-port或https-port隐式或显式标记的TCP端口上
            提供DNS-over-TLS或DNS-over-HTTPS服务。
            配置文件必须包含TLS会话的私钥，公钥证书则位于tls-service-pem文件中，且若指定了tls-service-key，
            也必须同时指定。
            默认值为空，即关闭状态。
            启用或禁用此服务需重启服务器（仅重载配置不够），因为密钥读取需在持有root权限及chroot（如有）之前进行。
            通过tls-port:和https-port:隐式或显式启用的端口不提供常规的DNS TCP服务。
            Unbound需编译时包含libnghttp2以支持DNS-over-HTTPS。

    ssl-service-key: <file>
            tls-service-key 的替代语法。

    tls-service-pem: <file>
            用于TLS服务的公钥证书pem文件。默认值为""，表示关闭。

    ssl-service-pem: <file>
            tls-service-pem 的替代语法。

    tls-port: <number>
            提供TCP TLS服务的端口号，默认为853，只有配置了该端口号作为@number的接口才能获得TLS服务。

    ssl-port: <number>
            tls端口的替代语法。

    tls-cert-bundle: <file>
            若为空或""，则不使用任何文件。
            请将其设置为证书包文件，例如"/etc/pki/tls/certs/ca-bundle.crt"。
            这些证书用于验证与外部对等方建立的连接，如认证区域URL及DNS over TLS连接。
            该文件在启动时、权限降级和chroot之前被读取。

    ssl-cert-bundle: <file>
            tls-cert-bundle 的替代语法。

    tls-win-cert: <yes or no>
            将系统证书添加到认证所需的证书包中。
            若无证书包，则仅使用这些证书。
            默认情况下不启用此功能。
            在Windows系统上，此选项会使用证书存储中的证书。
            在其他系统上，请使用`tls-cert-bundle`选项来启用系统证书。

    tls-system-cert: <yes or no>
            此设置与tls-win-cert设置相同，只是名称不同，因为它并非专为Windows设计。

    tls-additional-port: <portnr>
            将端口号列为tls-additional-port，并在定义接口时（例如使用@port后缀），
            作为此端口号，它们将提供DNS over TLS服务。
            可列出多个，每个端口号单独一行声明。

    tls-session-ticket-keys: <file>
            若非空，则列出包含80字节随机内容的文件，
            这些文件用于为使用Unbound服务器的客户端执行TLS会话恢复。
            这些文件内含有TLS会话票据的密钥。
            首个密钥用于加密和解密TLS会话票据，其余密钥仅用于解密。
            通过生成新的首个文件，并在其后暂时保留旧文件以允许解密，可以实现密钥的轮换。
            待客户端不再使用旧密钥后，即可移除旧密钥。
            创建此类文件的一种方法是使用命令`dd if=/dev/random bs=1 count=80 of=ticket.dat`。
            若需创建第二个密钥，其前16字节应与旧密钥不同，这部分用于标识密钥。
            随后是32字节的随机数据作为AES密钥，再接着32字节的随机数据作为HMAC密钥。

    tls-ciphers: <string with cipher list>
            设置服务TLS时允许的加密套件列表。使用""表示默认值，且此为默认设置。

    tls-ciphersuites: <string with ciphersuites list>
            设置服务TLS时允许的加密套件列表，适用于较新的TLS 1.3连接。
            使用""表示采用默认值，这也是默认设置。

    pad-responses: <yes or no>
            若启用此功能，包含EDNS填充选项的TLS服务查询将导致响应被填充至最接近pad-responses-block-size指定大小的倍数。默认设置为`yes`。

    pad-responses-block-size: <number>
            用于填充通过TLS服务的响应的块大小。仅对填充查询的响应进行填充。默认值为468。

    pad-queries: <yes or no>
            若启用此功能，所有通过TLS上游发送的查询将被填充至最接近pad-queries-block-size指定大小的倍数。
            默认设置为`yes`。

    pad-queries-block-size: <number>
            用于填充通过TLS上游发送的查询的块大小，默认值为128。

    tls-use-sni: <yes or no>
            启用或禁用在TLS连接上发送SNI扩展。默认值为`yes`。更改此值需重新加载配置。

    https-port: <number>
            提供DNS-over-HTTPS服务的端口号，默认443，只有配置了该端口号作为@number的接口才能获得HTTPS服务。

    http-endpoint: <endpoint string>
            提供DNS-over-HTTPS服务的HTTP端点，默认为"/dns-query"。

    http-max-streams: <number of streams>
            用于DNS-over-HTTPS连接的HTTP/2 SETTINGS帧中SETTINGS_MAX_CONCURRENT_STREAMS参数的数值，默认设置为100。

    http-query-buffer-size: <size in bytes>
            所有HTTP/2查询缓冲区合并使用的最大字节数。
            这些缓冲区包含等待请求流完成的（部分）DNS查询。
            对于超出此限制的流，将发送RST_STREAM帧。
            默认值为4兆字节。纯数字表示字节，可附加&#39;k&#39;、&#39;m&#39;或&#39;g&#39;分别表示千字节、兆字节或吉字节（1兆字节等于1024*1024字节）。

    http-response-buffer-size: <size in bytes>
            所有HTTP/2响应缓冲区合并使用的最大字节数。
            这些缓冲区包含等待写回客户端的DNS响应。
            对于超出此限制的流，将发送RST_STREAM帧。默认值为4兆字节。
            纯数字表示字节，可附加&#39;k&#39;、&#39;m&#39;或&#39;g&#39;分别表示千字节、兆字节或吉字节（1兆字节等于1024*1024字节）。

    http-nodelay: <yes or no>
            在用于提供DNS-over-HTTPS服务的套接字上设置TCP_NODELAY选项。若该选项不可用，则忽略。默认值为`yes`。

    http-notls-downstream: <yes or no>
            禁用下游DNS-over-HTTP连接的TLS使用。适用于本地后端服务器。默认设置为`no`。

    proxy-protocol-port: <portnr>
            将端口号列为代理协议端口（proxy-protocol-port），
            并在定义接口时，如使用@port后缀，指定为此端口号，
            这些接口将支持并预期接收PROXYv2协议。
            在此情况下，代理地址仅用于网络通信及初始的访问控制列表（ACL，检查代理本身是否被配置拒绝）。
            随后，被代理的地址（如有）将作为真实客户端地址，
            并在日志记录、ACL、DNSTAP、RPZ及IP限速等适用场景中使用。
            PROXYv2协议支持UDP和TCP/TLS监听接口，但在DoH、DoQ或DNSCrypt监听接口上不支持PROXYv2。
            可列出多个端口，每个端口单独一行声明。

    quic-port: <number>
            The  port  number on which to provide DNS-over-QUIC service, de-
            fault 853, only interfaces configured with that port  number  as
            @number  get  the QUIC service.  The interface uses QUIC for the
            UDP traffic on that port number.

    quic-size: <size in bytes>
            Maximum number of bytes for all QUIC buffers and data  combined.
            Default  is 8 megabytes. A plain number is in bytes, append &#39;k&#39;,
            &#39;m&#39; or &#39;g&#39; for  kilobytes,  megabytes  or  gigabytes  (1024*1024
            bytes in a megabyte). New connections receive connection refused
            when the limit is exceeded. New streams are reset when the limit
            is exceeded.

    use-systemd: <yes or no>
            Enable or disable systemd socket activation.  Default is no.

    do-daemonize: <yes or no>
            Enable  or  disable  whether  the  Unbound server forks into the
            background as a daemon.  Set the value to no when  Unbound  runs
            as systemd service.  Default is yes.

    tcp-connection-limit: <IP netblock> <limit>
            Allow  up  to  limit simultaneous TCP connections from the given
            netblock.  When at the limit, further connections  are  accepted
            but  closed  immediately.   This  option is experimental at this
            time.

    access-control: <IP netblock> <action>
            Specify treatment of incoming queries from their originating  IP
            address.   Queries  can be allowed to have access to this server
            that gives DNS answers, or refused, with other actions possible.
            The IP address range can be specified as a netblock, it is  pos-
            sible  to  give  the statement several times in order to specify
            the treatment of different netblocks.

            The netblock is given as an IP4 or IP6 address  with  /size  ap-
            pended  for  a  classless network block. The action can be deny,
            refuse,   allow,   allow_setrd,    allow_snoop,    allow_cookie,
            deny_non_local  or refuse_non_local.  The most specific netblock
            match is used, if none match refuse is used.  The order  of  the
            access-control statements therefore does not matter.

            The deny action stops queries from hosts from that netblock.

            The  refuse  action stops queries too, but sends a DNS rcode RE-
            FUSED error message back.

            The allow action gives access to clients from that netblock.  It
            gives only access for recursion clients (which  is  what  almost
            all clients need).  Nonrecursive queries are refused.

            The  allow  action does allow nonrecursive queries to access the
            local-data that is configured.  The reason is that this does not
            involve the Unbound server recursive lookup algorithm, and  sta-
            tic  data  is  served in the reply.  This supports normal opera-
            tions where nonrecursive queries are made for the  authoritative
            data.   For  nonrecursive  queries  any replies from the dynamic
            cache are refused.

            The allow_setrd action ignores the recursion  desired  (RD)  bit
            and  treats all requests as if the recursion desired bit is set.
            Note that this behavior violates RFC 1034 which  states  that  a
            name  server should never perform recursive service unless asked
            via the RD bit since this interferes with  trouble  shooting  of
            name  servers  and their databases. This prohibited behavior may
            be useful if another DNS server must forward requests  for  spe-
            cific zones to a resolver DNS server, but only supports stub do-
            mains  and  sends queries to the resolver DNS server with the RD
            bit cleared.

            The allow_snoop action gives nonrecursive access too.  This give
            both recursive and non recursive access.  The  name  allow_snoop
            refers  to  cache  snooping,  a  technique  to  use nonrecursive
            queries to examine the  cache  contents  (for  malicious  acts).
            However,  nonrecursive  queries can also be a valuable debugging
            tool (when you want to examine the cache contents). In that case
            use allow_snoop for your administration host.

            The allow_cookie action allows access only to UDP  queries  that
            contain  a  valid  DNS  Cookie  as specified in RFC 7873 and RFC
            9018, when the answer-cookie option  is  enabled.   UDP  queries
            containing  only a DNS Client Cookie and no Server Cookie, or an
            invalid DNS Cookie, will receive a BADCOOKIE response  including
            a  newly  generated  DNS  Cookie, allowing clients to retry with
            that DNS Cookie.  The allow_cookie action will also  accept  re-
            quests  over  stateful transports, regardless of the presence of
            an DNS Cookie and regardless of the answer-cookie setting.   UDP
            queries  without a DNS Cookie receive REFUSED responses with the
            TC flag set, that  may  trigger  fall  back  to  TCP  for  those
            clients.

            By  default only localhost (the 127.0.0.0/8 IP netblock, not the
            loopback interface) is implicitly allowed, the rest is  refused.
            The  default  is refused, because that is protocol-friendly. The
            DNS protocol is not designed to handle dropped  packets  due  to
            policy,  and dropping may result in (possibly excessive) retried
            queries.

            The deny_non_local and refuse_non_local settings are  for  hosts
            that are only allowed to query for the authoritative local-data,
            they  are  not  allowed full recursion but only the static data.
            With deny_non_local, messages that are disallowed  are  dropped,
            with refuse_non_local they receive error code REFUSED.

    access-control-tag: <IP netblock> <"list of tags">
            Assign  tags  to access-control elements. Clients using this ac-
            cess control element use localzones that are tagged with one  of
            these  tags.  Tags must be defined in define-tags.  Enclose list
            of tags in quotes ("") and  put  spaces  between  tags.  If  ac-
            cess-control-tag is configured for a netblock that does not have
            an  access-control,  an access-control element with action allow
            is configured for this netblock.

    access-control-tag-action: <IP netblock> <tag> <action>
            Set action for particular tag for given access control  element.
            If  you have multiple tag values, the tag used to lookup the ac-
            tion is the first tag match between access-control-tag  and  lo-
            cal-zone-tag  where  "first" comes from the order of the define-
            tag values.

    access-control-tag-data: <IP netblock> <tag> <"resource record string">
            Set redirect data for particular tag for  given  access  control
            element.

    access-control-view: <IP netblock> <view name>
            Set view for given access control element.

    interface-action: <ip address or interface name [@port]> <action>
            Similar to access-control: but for interfaces.

            The  action  is  the  same as the ones defined under access-con-
            trol:.  Interfaces are refused by default.  By default only  lo-
            calhost  (the  127.0.0.0/8  IP netblock, not the loopback inter-
            face) is implicitly allowed through the default  access-control:
            behavior.   This  also  means that any attempt to use the inter-
            face-*: options for the loopback interface will not work as they
            will be overridden  by  the  implicit  default  "access-control:
            127.0.0.0/8 allow" option.

            Note  that  the interface needs to be already specified with in-
            terface: and that any access-control*: setting overrides all in-
            terface-*: settings for targeted clients.

    interface-tag: <ip address or interface name [@port]> <"list of tags">
            Similar to access-control-tag: but for interfaces.

            Note that the interface needs to be already specified  with  in-
            terface: and that any access-control*: setting overrides all in-
            terface-*: settings for targeted clients.

    interface-tag-action: <ip address or interface name [@port]> <tag> <ac-
    tion>
            Similar to access-control-tag-action: but for interfaces.

            Note  that  the interface needs to be already specified with in-
            terface: and that any access-control*: setting overrides all in-
            terface-*: settings for targeted clients.

    interface-tag-data: <ip address or interface name [@port]> <tag> <"re-
    source record string">
            Similar to access-control-tag-data: but for interfaces.

            Note that the interface needs to be already specified  with  in-
            terface: and that any access-control*: setting overrides all in-
            terface-*: settings for targeted clients.

    interface-view: <ip address or interface name [@port]> <view name>
            Similar to access-control-view: but for interfaces.

            Note  that  the interface needs to be already specified with in-
            terface: and that any access-control*: setting overrides all in-
            terface-*: settings for targeted clients.

    chroot: <directory>
            If chroot is enabled, you should pass the configfile  (from  the
            commandline)  as  a  full path from the original root. After the
            chroot has been performed the now defunct portion of the  config
            file path is removed to be able to reread the config after a re-
            load.

            All  other  file paths (working dir, logfile, roothints, and key
            files) can be specified in several ways:  as  an  absolute  path
            relative  to the new root, as a relative path to the working di-
            rectory, or as an absolute path relative to the  original  root.
            In  the last case the path is adjusted to remove the unused por-
            tion.

            The pidfile can be either a relative path to the working  direc-
            tory,  or  an absolute path relative to the original root. It is
            written just prior to chroot and dropping permissions. This  al-
            lows the pidfile to be /var/run/unbound.pid and the chroot to be
            /var/unbound,  for example. Note that Unbound is not able to re-
            move the pidfile after termination when it is located outside of
            the chroot directory.

            Additionally, Unbound may need to access /dev/urandom  (for  en-
            tropy) from inside the chroot.

            If  given a chroot is done to the given directory. The chroot is
            by default set to "/usr/local/etc/unbound". If you  give  ""  no
            chroot is performed.

    username: <name>
            If  given,  after  binding  the  port  the  user  privileges are
            dropped. Default is "unbound". If you give username: "" no  user
            change is performed.

            If  this  user  is  not capable of binding the port, reloads (by
            signal HUP) will still retain the opened ports.  If  you  change
            the port number in the config file, and that new port number re-
            quires privileges, then a reload will fail; a restart is needed.

    directory: <directory>
            Sets the working directory for the program. Default is "/usr/lo-
            cal/etc/unbound".  On Windows the string "%EXECUTABLE%" tries to
            change  to  the  directory  that unbound.exe resides in.  If you
            give a server: directory: dir before  include:  file  statements
            then those includes can be relative to the working directory.

    logfile: <filename>
            If  ""  is given, logging goes to stderr, or nowhere once daemo-
            nized.  The logfile is appended to, in the following format:
            [seconds since 1970] unbound[pid:tid]: type: message.
            If this option is given, the use-syslog  is  option  is  set  to
            "no".  The logfile is reopened (for append) when the config file
            is reread, on SIGHUP.

    use-syslog: <yes or no>
            Sets  Unbound  to  send  log messages to the syslogd, using sys-
            log(3).  The log facility LOG_DAEMON is used, with identity "un-
            bound".  The logfile setting is overridden  when  use-syslog  is
            turned on.  The default is to log to syslog.

    log-identity: <string>
            If  "" is given (default), then the name of the executable, usu-
            ally "unbound" is used to report to the log.  Enter a string  to
            override  it with that, which is useful on systems that run more
            than one instance of Unbound, with different configurations,  so
            that the logs can be easily distinguished against.

    log-time-ascii: <yes or no>
            Sets  logfile  lines to use a timestamp in UTC ascii. Default is
            no, which prints the seconds since 1970 in brackets.  No  effect
            if  using  syslog,  in  that  case  syslog formats the timestamp
            printed into the log files.

    log-time-iso: <yes or no>
            Log time in ISO8601 format, if log-time-ascii: yes is also  set.
            Default is no.

    log-queries: <yes or no>
            Prints one line per query to the log, with the log timestamp and
            IP  address, name, type and class.  Default is no.  Note that it
            takes time to print these lines which makes the server (signifi-
            cantly) slower.  Odd  (nonprintable)  characters  in  names  are
            printed as &#39;?&#39;.

    log-replies: <yes or no>
            Prints one line per reply to the log, with the log timestamp and
            IP  address,  name,  type,  class, return code, time to resolve,
            from cache and response size.  Default  is  no.   Note  that  it
            takes time to print these lines which makes the server (signifi-
            cantly)  slower.   Odd  (nonprintable)  characters  in names are
            printed as &#39;?&#39;.

    log-tag-queryreply: <yes or no>
            Prints  the  word  &#39;query&#39;  and  &#39;reply&#39;  with  log-queries  and
            log-replies.   This makes filtering logs easier.  The default is
            off (for backwards compatibility).

    log-destaddr: <yes or no>
            Prints the destination address, port and type in the log-replies
            output.  This disambiguates what type of  traffic,  eg.  udp  or
            tcp, and to what local port the traffic was sent to.

    log-local-actions: <yes or no>
            Print log lines to inform about local zone actions.  These lines
            are  like  the  local-zone  type inform prints out, but they are
            also printed for the other types of local zones.

    log-servfail: <yes or no>
            Print log lines that say why queries return SERVFAIL to clients.
            This is separate from the verbosity debug  logs,  much  smaller,
            and printed at the error level, not the info level of debug info
            from verbosity.

    pidfile: <filename>
            The  process  id  is  written  to the file. Default is "/usr/lo-
            cal/etc/unbound/unbound.pid".  So,
            kill -HUP `cat /usr/local/etc/unbound/unbound.pid`
            triggers a reload,
            kill -TERM `cat /usr/local/etc/unbound/unbound.pid`
            gracefully terminates.

    root-hints: <filename>
            Read the root hints from this file. Default  is  nothing,  using
            builtin  hints for the IN class. The file has the format of zone
            files, with root nameserver names and addresses  only.  The  de-
            fault  may become outdated, when servers change, therefore it is
            good practice to use a root-hints file.

    hide-identity: <yes or no>
            If enabled id.server and hostname.bind queries are refused.

    identity: <string>
            Set the identity to report. If set to "", the default, then  the
            hostname of the server is returned.

    hide-version: <yes or no>
            If enabled version.server and version.bind queries are refused.

    version: <string>
            Set  the  version to report. If set to "", the default, then the
            package version is returned.

    hide-http-user-agent: <yes or no>
            If enabled the HTTP header User-Agent is not set. Use with  cau-
            tion  as  some webserver configurations may reject HTTP requests
            lacking this header.  If needed, it is better to explicitly  set
            the http-user-agent below.

    http-user-agent: <string>
            Set  the  HTTP  User-Agent header for outgoing HTTP requests. If
            set to "", the default, then the package name  and  version  are
            used.

    nsid: <string>
            Add  the  specified  nsid to the EDNS section of the answer when
            queried with an NSID EDNS enabled packet.  As a sequence of  hex
            characters or with ascii_ prefix and then an ascii string.

    hide-trustanchor: <yes or no>
            If enabled trustanchor.unbound queries are refused.

    target-fetch-policy: <"list of numbers">
            Set  the  target fetch policy used by Unbound to determine if it
            should fetch nameserver target addresses opportunistically.  The
            policy is described per dependency depth.

            The  number  of  values  determines the maximum dependency depth
            that Unbound will pursue in answering a query.  A  value  of  -1
            means to fetch all targets opportunistically for that dependency
            depth.  A  value  of 0 means to fetch on demand only. A positive
            value fetches that many targets opportunistically.

            Enclose the list between quotes ("") and put spaces between num-
            bers.  The default is "3 2 1 0 0". Setting all zeroes, "0 0 0  0
            0"  gives  behaviour closer to that of BIND 9, while setting "-1
            -1 -1 -1 -1" gives behaviour rumoured to be closer  to  that  of
            BIND 8.

    harden-short-bufsize: <yes or no>
            Very  small  EDNS buffer sizes from queries are ignored. Default
            is yes, as described in the standard.

    harden-large-queries: <yes or no>
            Very large queries are ignored. Default is no, since it is legal
            protocol wise to send these, and could be necessary  for  opera-
            tion if TSIG or EDNS payload is very large.

    harden-glue: <yes or no>
            Will  trust glue only if it is within the servers authority. De-
            fault is yes.

    harden-unverified-glue: <yes or no>
            Will trust only in-zone glue. Will try to  resolve  all  out  of
            zone  (<unverfied>)  glue. Will fallback to the original glue if
            unable to resolve.  Default is no.

    harden-dnssec-stripped: <yes or no>
            Require DNSSEC data for trust-anchored zones, if  such  data  is
            absent,  the  zone  becomes  bogus. If turned off, and no DNSSEC
            data is received (or the DNSKEY data fails  to  validate),  then
            the  zone  is made insecure, this behaves like there is no trust
            anchor. You could turn this off if you are sometimes  behind  an
            intrusive  firewall (of some sort) that removes DNSSEC data from
            packets, or a zone changes from  signed  to  unsigned  to  badly
            signed  often. If turned off you run the risk of a downgrade at-
            tack that disables security for a zone. Default is yes.

    harden-below-nxdomain: <yes or no>
            From RFC 8020 (with title "NXDOMAIN: There Really Is Nothing Un-
            derneath"), returns nxdomain to queries for a name below another
            name that is already known to be nxdomain.  DNSSEC mandates  no-
            error  for empty nonterminals, hence this is possible.  Very old
            software might return nxdomain for empty nonterminals (that usu-
            ally happen for reverse IP address lookups), and thus may be in-
            compatible with this.  To try to avoid this  only  DNSSEC-secure
            nxdomains  are  used,  because  the  old  software does not have
            DNSSEC.  Default is yes.  The  nxdomain  must  be  secure,  this
            means nsec3 with optout is insufficient.

    harden-referral-path: <yes or no>
            Harden  the  referral  path by performing additional queries for
            infrastructure data.  Validates the replies if trust anchors are
            configured and the zones are signed.  This enforces DNSSEC vali-
            dation on nameserver NS sets and the nameserver  addresses  that
            are encountered on the referral path to the answer.  Default no,
            because  it  burdens  the  authority  servers, and it is not RFC
            standard, and could lead to performance problems because of  the
            extra  query  load  that is generated.  Experimental option.  If
            you enable it  consider  adding  more  numbers  after  the  tar-
            get-fetch-policy to increase the max depth that is checked to.

    harden-algo-downgrade: <yes or no>
            Harden  against algorithm downgrade when multiple algorithms are
            advertised in the DS record.  This works by first choosing  only
            the strongest DS digest type as per RFC 4509 (Unbound treats the
            highest  algorithm  as  the strongest) and then expecting signa-
            tures from all the advertised signing algorithms from the chosen
            DS(es) to be present.  If no, allows any one supported algorithm
            to validate the zone, even if other  advertised  algorithms  are
            broken.   Default  is  no.   RFC 6840 mandates that zone signers
            must produce zones signed with all  advertised  algorithms,  but
            sometimes  they  do  not.  RFC 6840 also clarifies that this re-
            quirement is not for validators and validators should accept any
            single valid path.  It should thus be explicitly noted that this
            option violates RFC 6840 for DNSSEC validation and  should  only
            be  used  to  perform  a  signature completeness test to support
            troubleshooting.  Using this option may break DNSSEC  resolution
            with  non-RFC6840-conforming signers and/or in multi-signer con-
            figurations that don&#39;t send all the advertised signatures.

    harden-unknown-additional: <yes or no>
            Harden against unknown records in the authority section and  ad-
            ditional  section. Default is no. If no, such records are copied
            from the upstream and presented to the client together with  the
            answer.  If  yes,  it  could hamper future protocol developments
            that want to add records.

    use-caps-for-id: <yes or no>
            Use 0x20-encoded random bits in the  query  to  foil  spoof  at-
            tempts.   This  perturbs  the  lowercase  and uppercase of query
            names sent to authority servers and checks if  the  reply  still
            has  the  correct casing.  Disabled by default.  This feature is
            an experimental implementation of draft dns-0x20.

    caps-exempt: <domain>
            Exempt the domain so that it does not receive  caps-for-id  per-
            turbed  queries.   For domains that do not support 0x20 and also
            fail with fallback because they keep sending different  answers,
            like some load balancers.  Can be given multiple times, for dif-
            ferent domains.

    caps-whitelist: <domain>
            Alternate syntax for caps-exempt.

    qname-minimisation: <yes or no>
            Send  minimum  amount  of information to upstream servers to en-
            hance privacy.  Only send minimum required labels of  the  QNAME
            and  set  QTYPE  to  A when possible. Best effort approach; full
            QNAME and original QTYPE will be sent when upstream replies with
            a RCODE other than NOERROR, except when receiving NXDOMAIN  from
            a DNSSEC signed zone. Default is yes.

    qname-minimisation-strict: <yes or no>
            QNAME  minimisation  in strict mode. Do not fall-back to sending
            full QNAME to potentially broken nameservers. A lot  of  domains
            will  not be resolvable when this option in enabled. Only use if
            you know what you are doing.  This option only has  effect  when
            qname-minimisation is enabled. Default is no.

    aggressive-nsec: <yes or no>
            Aggressive  NSEC  uses the DNSSEC NSEC chain to synthesize NXDO-
            MAIN and other denials, using information  from  previous  NXDO-
            MAINs  answers.   Default  is yes.  It helps to reduce the query
            rate towards targets that  get  a  very  high  nonexistent  name
            lookup rate.

    private-address: <IP address or subnet>
            Give  IPv4 of IPv6 addresses or classless subnets. These are ad-
            dresses on your private network, and are not allowed to  be  re-
            turned  for  public  internet names.  Any occurrence of such ad-
            dresses are removed from DNS answers. Additionally,  the  DNSSEC
            validator  may  mark  the  answers  bogus. This protects against
            so-called DNS Rebinding, where a user browser is turned  into  a
            network  proxy,  allowing  remote  access through the browser to
            other parts of your private network.  Some names can be  allowed
            to contain your private addresses, by default all the local-data
            that  you  configured  is  allowed to, and you can specify addi-
            tional names using private-domain.  No private addresses are en-
            abled by default.  We consider to enable this  for  the  RFC1918
            private  IP  address  space  by  default in later releases. That
            would enable  private  addresses  for  10.0.0.0/8  172.16.0.0/12
            192.168.0.0/16  169.254.0.0/16 fd00::/8 and fe80::/10, since the
            RFC standards say these addresses should not be visible  on  the
            public internet.  Turning on 127.0.0.0/8 would hinder many spam-
            blocklists   as  they  use  that.   Adding  ::ffff:0:0/96  stops
            IPv4-mapped IPv6 addresses from bypassing the filter.

    private-domain: <domain name>
            Allow this domain, and all its subdomains to contain private ad-
            dresses.  Give multiple times to allow multiple domain names  to
            contain private addresses. Default is none.

    unwanted-reply-threshold: <number>
            If  set,  a total number of unwanted replies is kept track of in
            every thread.  When it reaches the threshold, a defensive action
            is taken and a warning is printed to the log.  The defensive ac-
            tion is to clear the rrset and message caches, hopefully  flush-
            ing  away  any poison.  A value of 10 million is suggested.  De-
            fault is 0 (turned off).

    do-not-query-address: <IP address>
            Do not query the given IP address. Can be  IP4  or  IP6.  Append
            /num  to  indicate  a classless delegation netblock, for example
            like 10.2.3.4/24 or 2001::11/64.

    do-not-query-localhost: <yes or no>
            If yes, localhost is added to the do-not-query-address  entries,
            both  IP6  ::1 and IP4 127.0.0.1/8. If no, then localhost can be
            used to send queries to. Default is yes.

    prefetch: <yes or no>
            If yes, cache hits on message cache elements that are  on  their
            last  10  percent  of their TTL value trigger a prefetch to keep
            the cache up to date.  Default is no.  Turning it on gives about
            10 percent more traffic and load on  the  machine,  but  popular
            items do not expire from the cache.

    prefetch-key: <yes or no>
            If  yes,  fetch  the  DNSKEYs earlier in the validation process,
            when a DS record is encountered.  This lowers the latency of re-
            quests.  It does use a little more CPU.  Also if  the  cache  is
            set to 0, it is no use. Default is no.

    deny-any: <yes or no>
            If  yes,  deny  queries of type ANY with an empty response.  De-
            fault is no.  If disabled, Unbound responds with a short list of
            resource records if some can be found in the cache and makes the
            upstream type ANY query if there are none.

    rrset-roundrobin: <yes or no>
            If yes, Unbound rotates RRSet order in response (the random num-
            ber is taken from the query ID, for speed  and  thread  safety).
            Default is yes.

    minimal-responses: <yes or no>
            If  yes,  Unbound  does not insert authority/additional sections
            into response messages when those  sections  are  not  required.
            This  reduces  response  size  significantly,  and may avoid TCP
            fallback for some responses which may cause  a  slight  speedup.
            The  default  is  yes, even though the DNS protocol RFCs mandate
            these sections, and the additional content could save roundtrips
            for clients that use the additional content.  However these sec-
            tions are hardly used by clients.  Enabling prefetch can benefit
            clients that need the additional content by trying to keep  that
            content fresh in the cache.

    disable-dnssec-lame-check: <yes or no>
            If  true,  disables  the  DNSSEC lameness check in the iterator.
            This check sees if RRSIGs are present in the answer, when dnssec
            is expected, and retries another authority if RRSIGs  are  unex-
            pectedly  missing.   The  validator  will  insist  in RRSIGs for
            DNSSEC signed domains regardless of this setting, if a trust an-
            chor is loaded.

    module-config: <"module names">
            Module configuration,  a  list  of  module  names  separated  by
            spaces, surround the string with quotes (""). The modules can be
            respip,  validator,  or iterator (and possibly more, see below).
            Setting this to just "iterator" will result in a  non-validating
            server.   Setting  this  to  "validator  iterator"  will turn on
            DNSSEC validation.  The ordering of the modules is  significant,
            the  order  decides  the order of processing.  You must also set
            trust-anchors for validation to be useful.  Adding respip to the
            front will cause RPZ processing to be done on all queries.   The
            default is "validator iterator".

            Most  modules  that  need to be listed here have to be listed at
            the beginning of the line.  The subnetcachedb module has  to  be
            listed  just  before  the  iterator.   The  python module can be
            listed in different places, it then processes the output of  the
            module it is just before. The dynlib module can be listed pretty
            much  anywhere,  it  is only a very thin wrapper that allows dy-
            namic libraries to run in its place.

    trust-anchor-file: <filename>
            File with trusted keys for validation. Both DS  and  DNSKEY  en-
            tries  can  appear  in  the  file. The format of the file is the
            standard DNS Zone file format.  Default is "", or no  trust  an-
            chor file.

    auto-trust-anchor-file: <filename>
            File  with  trust  anchor  for  one  zone, which is tracked with
            RFC5011 probes.  The probes are run  several  times  per  month,
            thus  the  machine  must be online frequently.  The initial file
            can be one with contents as described in trust-anchor-file.  The
            file is written to when the anchor is updated,  so  the  Unbound
            user  must have write permission.  Write permission to the file,
            but also to the directory it is in (to create a temporary  file,
            which is necessary to deal with filesystem full events), it must
            also be inside the chroot (if that is used).

    trust-anchor: <"Resource Record">
            A  DS or DNSKEY RR for a key to use for validation. Multiple en-
            tries can be given to specify multiple trusted keys, in addition
            to the trust-anchor-files.  The resource record  is  entered  in
            the same format as &#39;dig&#39; or &#39;drill&#39; prints them, the same format
            as  in the zone file. Has to be on a single line, with "" around
            it. A TTL can be specified for ease of cut and paste, but is ig-
            nored.  A class can be specified, but class IN is default.

    trusted-keys-file: <filename>
            File with trusted keys for validation.  Specify  more  than  one
            file  with  several  entries, one file per entry. Like trust-an-
            chor-file but has a different  file  format.  Format  is  BIND-9
            style  format, the trusted-keys { name flag proto algo "key"; };
            clauses are read.  It is possible to  use  wildcards  with  this
            statement, the wildcard is expanded on start and on reload.

    trust-anchor-signaling: <yes or no>
            Send  RFC8145  key tag query after trust anchor priming. Default
            is yes.

    root-key-sentinel: <yes or no>
            Root key trust anchor sentinel. Default is yes.

    domain-insecure: <domain name>
            Sets domain name to be insecure, DNSSEC chain of  trust  is  ig-
            nored  towards the domain name.  So a trust anchor above the do-
            main name can not make the domain secure with a DS record,  such
            a  DS  record  is  then ignored.  Can be given multiple times to
            specify multiple domains that are treated as  if  unsigned.   If
            you  set trust anchors for the domain they override this setting
            (and the domain is secured).

            This can be useful if you want to make sure a trust  anchor  for
            external  lookups does not affect an (unsigned) internal domain.
            A DS record externally can create validation failures  for  that
            internal domain.

    val-override-date: <rrsig-style date spec>
            Default  is "" or "0", which disables this debugging feature. If
            enabled by giving a RRSIG style date, that date is used for ver-
            ifying RRSIG inception and expiration dates, instead of the cur-
            rent date. Do not set this unless you  are  debugging  signature
            inception  and  expiration.  The value -1 ignores the date alto-
            gether, useful for some special applications.

    val-sig-skew-min: <seconds>
            Minimum number of seconds of clock skew to  apply  to  validated
            signatures.   A  value of 10% of the signature lifetime (expira-
            tion - inception) is used, capped by this setting.   Default  is
            3600  (1  hour)  which  allows for daylight savings differences.
            Lower this value for more strict checking of short lived  signa-
            tures.

    val-sig-skew-max: <seconds>
            Maximum  number  of  seconds of clock skew to apply to validated
            signatures.  A value of 10% of the signature  lifetime  (expira-
            tion  -  inception) is used, capped by this setting.  Default is
            86400 (24 hours) which allows for timezone setting  problems  in
            stable  domains.  Setting both min and max very low disables the
            clock skew allowances.  Setting both min and max very high makes
            the validator check the signature timestamps less strictly.

    val-max-restart: <number>
            The maximum number the validator should restart validation  with
            another authority in case of failed validation. Default is 5.

    val-bogus-ttl: <number>
            The  time  to  live for bogus data. This is data that has failed
            validation; due to invalid signatures or other checks.  The  TTL
            from  that  data  cannot  be trusted, and this value is used in-
            stead. The value is in seconds, default 60.  The  time  interval
            prevents repeated revalidation of bogus data.

    val-clean-additional: <yes or no>
            Instruct  the  validator to remove data from the additional sec-
            tion of secure messages that are not signed  properly.  Messages
            that are insecure, bogus, indeterminate or unchecked are not af-
            fected.  Default  is  yes. Use this setting to protect the users
            that rely on this validator for authentication from  potentially
            bad data in the additional section.

    val-log-level: <number>
            Have  the  validator  print validation failures to the log.  Re-
            gardless of the verbosity setting.  Default is 0,  off.   At  1,
            for  every  user query that fails a line is printed to the logs.
            This way you can monitor what happens with  validation.   Use  a
            diagnosis tool, such as dig or drill, to find out why validation
            is  failing  for  these  queries.  At 2, not only the query that
            failed is printed but also the reason why Unbound thought it was
            wrong and which server sent the faulty data.

    val-permissive-mode: <yes or no>
            Instruct the validator to mark bogus messages as  indeterminate.
            The  security  checks  are performed, but if the result is bogus
            (failed security), the reply is not  withheld  from  the  client
            with  SERVFAIL as usual. The client receives the bogus data. For
            messages that are found to be  secure  the  AD  bit  is  set  in
            replies.  Also logging is performed as for full validation.  The
            default value is "no".

    ignore-cd-flag: <yes or no>
            Instruct Unbound to ignore the CD flag from clients  and  refuse
            to  return  bogus  answers to them.  Thus, the CD (Checking Dis-
            abled) flag does not disable checking any more.  This is  useful
            if  legacy (w2008) servers that set the CD flag but cannot vali-
            date DNSSEC themselves are the clients, and  then  Unbound  pro-
            vides them with DNSSEC protection.  The default value is "no".

    disable-edns-do: <yes or no>
            Disable the EDNS DO flag in upstream requests.  It breaks DNSSEC
            validation  for Unbound&#39;s clients.  This results in the upstream
            name servers to not include DNSSEC records in their replies  and
            could  be helpful for devices that cannot handle DNSSEC informa-
            tion.  When the option is enabled, clients that set the DO  flag
            receive  no  EDNS record in the response to indicate the lack of
            support to them.  If this option is enabled but Unbound  is  al-
            ready configured for DNSSEC validation (i.e., the validator mod-
            ule  is  enabled;  default) this option is implicitly turned off
            with a warning as to not break  DNSSEC  validation  in  Unbound.
            Default is no.

    serve-expired: <yes or no>
            If  enabled,  Unbound attempts to serve old responses from cache
            with a TTL of serve-expired-reply-ttl in the response.   By  de-
            fault the expired answer will be used after a resolution attempt
            errored  out or is taking more than serve-expired-client-timeout
            to resolve.  Default is "no".

    serve-expired-ttl: <seconds>
            Limit serving of expired responses to configured  seconds  after
            expiration.   0  disables  the  limit.  This option only applies
            when serve-expired is enabled.  A suggested value per  RFC  8767
            is  between  86400  (1 day) and 259200 (3 days).  The default is
            86400.

    serve-expired-ttl-reset: <yes or no>
            Set the TTL of expired records to  the  serve-expired-ttl  value
            after  a  failed  attempt  to retrieve the record from upstream.
            This makes sure that the expired records will be served as  long
            as there are queries for it.  Default is "no".

    serve-expired-reply-ttl: <seconds>
            TTL  value to use when replying with expired data.  If serve-ex-
            pired-client-timeout is also used then it is RECOMMENDED to  use
            30 as the value (RFC 8767).  The default is 30.

    serve-expired-client-timeout: <msec>
            Time  in milliseconds before replying to the client with expired
            data.  This essentially  enables  the  serve-stale  behavior  as
            specified in RFC 8767 that first tries to resolve before immedi-
            ately responding with expired data.  Setting this to 0 will dis-
            able  this behavior and instead serve the expired record immedi-
            ately from the cache before attempting to refresh it via resolu-
            tion.  Default is 1800.

    serve-original-ttl: <yes or no>
            If enabled, Unbound will always return the original TTL  as  re-
            ceived  from the upstream name server rather than the decrement-
            ing TTL as stored in the cache.  This feature may be  useful  if
            Unbound  serves  as  a  front-end to a hidden authoritative name
            server. Enabling this feature does not impact cache  expiry,  it
            only  changes  the  TTL  Unbound embeds in responses to queries.
            Note that enabling this feature implicitly disables  enforcement
            of  the  configured  minimum  and  maximum TTL, as it is assumed
            users who enable this feature do not want Unbound to change  the
            TTL  obtained from an upstream server.  Thus, the values set us-
            ing cache-min-ttl and cache-max-ttl  are  ignored.   Default  is
            "no".

    val-nsec3-keysize-iterations: <"list of values">
            List of keysize and iteration count values, separated by spaces,
            surrounded  by  quotes. Default is "1024 150 2048 150 4096 150".
            This determines the maximum allowed NSEC3 iteration count before
            a message is simply marked insecure instead  of  performing  the
            many hashing iterations. The list must be in ascending order and
            have  at least one entry. If you set it to "1024 65535" there is
            no restriction to NSEC3 iteration values.  This  table  must  be
            kept short; a very long list could cause slower operation.

    zonemd-permissive-mode: <yes or no>
            If  enabled the ZONEMD verification failures are only logged and
            do not cause the zone to be blocked and  only  return  servfail.
            Useful  for  testing  out  if  it works, or if the operator only
            wants to be notified of a problem  without  disrupting  service.
            Default is no.

    add-holddown: <seconds>
            Instruct  the auto-trust-anchor-file probe mechanism for RFC5011
            autotrust updates to add new trust anchors only after they  have
            been visible for this time.  Default is 30 days as per the RFC.

    del-holddown: <seconds>
            Instruct  the auto-trust-anchor-file probe mechanism for RFC5011
            autotrust updates to remove revoked  trust  anchors  after  they
            have been kept in the revoked list for this long.  Default is 30
            days as per the RFC.

    keep-missing: <seconds>
            Instruct  the auto-trust-anchor-file probe mechanism for RFC5011
            autotrust updates to remove missing  trust  anchors  after  they
            have  been  unseen for this long.  This cleans up the state file
            if the target zone does not perform trust anchor revocation,  so
            this makes the auto probe mechanism work with zones that perform
            regular  (non-5011)  rollovers.   The  default is 366 days.  The
            value 0 does not remove missing anchors, as per the RFC.

    permit-small-holddown: <yes or no>
            Debug option that allows the autotrust 5011 rollover  timers  to
            assume very small values.  Default is no.

    key-cache-size: <number>
            Number  of  bytes size of the key cache. Default is 4 megabytes.
            A plain number is in bytes, append &#39;k&#39;, &#39;m&#39;  or  &#39;g&#39;  for  kilo-
            bytes, megabytes or gigabytes (1024*1024 bytes in a megabyte).

    key-cache-slabs: <number>
            Number  of  slabs in the key cache. Slabs reduce lock contention
            by threads.  Must be set to a power of 2. Setting (close) to the
            number of cpus is a reasonable guess.

    neg-cache-size: <number>
            Number of bytes size of the aggressive negative  cache.  Default
            is  1  megabyte.  A plain number is in bytes, append &#39;k&#39;, &#39;m&#39; or
            &#39;g&#39; for kilobytes, megabytes or gigabytes (1024*1024 bytes in  a
            megabyte).

    unblock-lan-zones: <yes or no>
            Default  is  disabled.   If  enabled,  then  for private address
            space, the reverse lookups are no longer filtered.  This  allows
            Unbound  when running as dns service on a host where it provides
            service for that host, to put out all of  the  queries  for  the
            &#39;lan&#39; upstream.  When enabled, only localhost, 127.0.0.1 reverse
            and  ::1  reverse zones are configured with default local zones.
            Disable the option when Unbound is running as a (DHCP-) DNS net-
            work resolver for a group of machines, where such lookups should
            be filtered (RFC compliance), this  also  stops  potential  data
            leakage about the local network to the upstream DNS servers.

    insecure-lan-zones: <yes or no>
            Default  is  disabled.  If enabled, then reverse lookups in pri-
            vate address space are not validated.  This is usually  required
            whenever unblock-lan-zones is used.

    local-zone: <zone> <type>
            Configure  a  local zone. The type determines the answer to give
            if there is no  match  from  local-data.  The  types  are  deny,
            refuse,  static, transparent, redirect, nodefault, typetranspar-
            ent, inform, inform_deny,  inform_redirect,  always_transparent,
            block_a,  always_refuse,  always_nxdomain,  always_null, noview,
            and are explained below. After that  the  default  settings  are
            listed.  Use  local-data: to enter data into the local zone. An-
            swers for local zones are authoritative DNS answers. By  default
            the zones are class IN.

            If you need more complicated authoritative data, with referrals,
            wildcards, CNAME/DNAME support, or DNSSEC authoritative service,
            setup  a  stub-zone  for it as detailed in the stub zone section
            below. A stub-zone can be used to have unbound send  queries  to
            another  server,  an authoritative server, to fetch the informa-
            tion. With a forward-zone, unbound sends  queries  to  a  server
            that  is  a  recursive  server to fetch the information. With an
            auth-zone a zone can be loaded from file and  used,  it  can  be
            used  like  a  local-zone for users downstream, or the auth-zone
            information can be used to fetch information from when resolving
            like it is an upstream server. The  forward-zone  and  auth-zone
            options  are  described in their sections below.  If you want to
            perform filtering of the information that the users  can  fetch,
            the  local-zone  and  local-data  statements allow for this, but
            also the rpz functionality can be used,  described  in  the  RPZ
            section.

        deny Do  not  send an answer, drop the query.  If there is a match
                from local data, the query is answered.

        refuse
                Send an error message reply, with rcode REFUSED.  If there is
                a match from local data, the query is answered.

        static
                If there is a match from local data, the query  is  answered.
                Otherwise,  the  query  is  answered with nodata or nxdomain.
                For a negative answer a SOA is  included  in  the  answer  if
                present as local-data for the zone apex domain.

        transparent
                If  there  is a match from local data, the query is answered.
                Otherwise if the query has a different name, the query is re-
                solved normally.  If the query is for a name given in  local-
                data  but  no such type of data is given in localdata, then a
                noerror nodata answer is returned.  If no local-zone is given
                local-data causes a transparent zone to  be  created  by  de-
                fault.

        typetransparent
                If  there  is a match from local data, the query is answered.
                If the query is for a different name, or for  the  same  name
                but  for  a  different  type, the query is resolved normally.
                So, similar to transparent but types that are not  listed  in
                local data are resolved normally, so if an A record is in the
                local  data  that  does  not  cause  a  nodata reply for AAAA
                queries.

        redirect
                The query is answered from the local data for the zone  name.
                There  may  be no local data beneath the zone name.  This an-
                swers queries for the zone, and all subdomains  of  the  zone
                with the local data for the zone.  It can be used to redirect
                a  domain  to  return  a  different address record to the end
                user,  with  local-zone:  "example.com."  redirect  and   lo-
                cal-data:  "example.com.  A  127.0.0.1" queries for www.exam-
                ple.com and www.foo.example.com are redirected, so that users
                with web browsers  cannot  access  sites  with  suffix  exam-
                ple.com.

        inform
                The  query  is  answered  normally, same as transparent.  The
                client IP address (@portnumber) is printed  to  the  logfile.
                The  log  message  is: timestamp, unbound-pid, info: zonename
                inform IP@port queryname type class.  This option can be used
                for normal resolution, but machines looking up infected names
                are logged, eg. to run antivirus on them.

        inform_deny
                The query is dropped, like &#39;deny&#39;, and logged, like &#39;inform&#39;.
                Ie. find infected machines without answering the queries.

        inform_redirect
                The query is redirected, like &#39;redirect&#39;,  and  logged,  like
                &#39;inform&#39;.   Ie.  answer  queries with fixed data and also log
                the machines that ask.

        always_transparent
                Like transparent, but ignores local data  and  resolves  nor-
                mally.

        block_a
                Like  transparent,  but  ignores local data and resolves nor-
                mally all query types excluding A. For A queries it  uncondi-
                tionally  returns  NODATA.   Useful  in cases when there is a
                need to explicitly force all apps to use  IPv6  protocol  and
                avoid any queries to IPv4.

        always_refuse
                Like refuse, but ignores local data and refuses the query.

        always_nxdomain
                Like  static, but ignores local data and returns nxdomain for
                the query.

        always_nodata
                Like static, but ignores local data and  returns  nodata  for
                the query.

        always_deny
                Like deny, but ignores local data and drops the query.

        always_null
                Always  returns  0.0.0.0  or  ::0 for every name in the zone.
                Like redirect with zero data for A and AAAA.   Ignores  local
                data in the zone.  Used for some block lists.

        noview
                Breaks  out  of  that view and moves towards the global local
                zones for answer to the query.  If  the  view  first  is  no,
                it&#39;ll  resolve  normally.   If  view  first is enabled, it&#39;ll
                break perform that step and check the  global  answers.   For
                when  the  view has view specific overrides but some zone has
                to be answered from global local zone contents.

        nodefault
                Used to turn off default contents for AS112 zones. The  other
                types also turn off default contents for the zone. The &#39;node-
                fault&#39;  option  has  no other effect than turning off default
                contents for the given zone.  Use nodefault if  you  use  ex-
                actly  that zone, if you want to use a subzone, use transpar-
                ent.

    The default  zones  are  localhost,  reverse  127.0.0.1  and  ::1,  the
    home.arpa,  the  resolver.arpa,  the service.arpa, the onion, test, in-
    valid and the AS112 zones. The AS112 zones are reverse  DNS  zones  for
    private  use and reserved IP addresses for which the servers on the in-
    ternet cannot provide correct answers. They are configured  by  default
    to  give nxdomain (no reverse information) answers. The defaults can be
    turned off by specifying your own local-zone of that name, or using the
    &#39;nodefault&#39; type. Below is a list of the default zone contents.

        localhost
                The IP4 and IP6 localhost information is given.  NS  and  SOA
                records are provided for completeness and to satisfy some DNS
                update tools. Default content:
                local-zone: "localhost." redirect
                local-data: "localhost. 10800 IN NS localhost."
                local-data: "localhost. 10800 IN
                    SOA localhost. nobody.invalid. 1 3600 1200 604800 10800"
                local-data: "localhost. 10800 IN A 127.0.0.1"
                local-data: "localhost. 10800 IN AAAA ::1"

        reverse IPv4 loopback
                Default content:
                local-zone: "127.in-addr.arpa." static
                local-data: "127.in-addr.arpa. 10800 IN NS localhost."
                local-data: "127.in-addr.arpa. 10800 IN
                    SOA localhost. nobody.invalid. 1 3600 1200 604800 10800"
                local-data: "1.0.0.127.in-addr.arpa. 10800 IN
                    PTR localhost."

        reverse IPv6 loopback
                Default content:
                local-zone: "1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.
                    0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa." static
                local-data: "1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.
                    0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa. 10800 IN
                    NS localhost."
                local-data: "1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.
                    0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa. 10800 IN
                    SOA localhost. nobody.invalid. 1 3600 1200 604800 10800"
                local-data: "1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.
                    0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa. 10800 IN
                    PTR localhost."

        home.arpa (RFC 8375)
                Default content:
                local-zone: "home.arpa." static
                local-data: "home.arpa. 10800 IN NS localhost."
                local-data: "home.arpa. 10800 IN
                    SOA localhost. nobody.invalid. 1 3600 1200 604800 10800"

        resolver.arpa (RFC 9462)
                Default content:
                local-zone: "resolver.arpa." static
                local-data: "resolver.arpa. 10800 IN NS localhost."
                local-data: "resolver.arpa. 10800 IN
                    SOA localhost. nobody.invalid. 1 3600 1200 604800 10800"

        service.arpa (draft-ietf-dnssd-srp-25)
                Default content:
                local-zone: "service.arpa." static
                local-data: "service.arpa. 10800 IN NS localhost."
                local-data: "service.arpa. 10800 IN
                    SOA localhost. nobody.invalid. 1 3600 1200 604800 10800"

        onion (RFC 7686)
                Default content:
                local-zone: "onion." static
                local-data: "onion. 10800 IN NS localhost."
                local-data: "onion. 10800 IN
                    SOA localhost. nobody.invalid. 1 3600 1200 604800 10800"

        test (RFC 6761)
                Default content:
                local-zone: "test." static
                local-data: "test. 10800 IN NS localhost."
                local-data: "test. 10800 IN
                    SOA localhost. nobody.invalid. 1 3600 1200 604800 10800"

        invalid (RFC 6761)
                Default content:
                local-zone: "invalid." static
                local-data: "invalid. 10800 IN NS localhost."
                local-data: "invalid. 10800 IN
                    SOA localhost. nobody.invalid. 1 3600 1200 604800 10800"

        reverse RFC1918 local use zones
                Reverse  data  for zones 10.in-addr.arpa, 16.172.in-addr.arpa
                to  31.172.in-addr.arpa,   168.192.in-addr.arpa.    The   lo-
                cal-zone: is set static and as local-data: SOA and NS records
                are provided.

        reverse RFC3330 IP4 this, link-local, testnet and broadcast
                Reverse  data for zones 0.in-addr.arpa, 254.169.in-addr.arpa,
                2.0.192.in-addr.arpa (TEST  NET  1),  100.51.198.in-addr.arpa
                (TEST   NET   2),   113.0.203.in-addr.arpa   (TEST   NET  3),
                255.255.255.255.in-addr.arpa.  And  from  64.100.in-addr.arpa
                to 127.100.in-addr.arpa (Shared Address Space).

        reverse RFC4291 IP6 unspecified
                Reverse data for zone
                0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.
                0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa.

        reverse RFC4193 IPv6 Locally Assigned Local Addresses
                Reverse data for zone D.F.ip6.arpa.

        reverse RFC4291 IPv6 Link Local Addresses
                Reverse data for zones 8.E.F.ip6.arpa to B.E.F.ip6.arpa.

        reverse IPv6 Example Prefix
                Reverse  data for zone 8.B.D.0.1.0.0.2.ip6.arpa. This zone is
                used for tutorials and examples. You can remove the block  on
                this zone with:
                local-zone: 8.B.D.0.1.0.0.2.ip6.arpa. nodefault
                You can also selectively unblock a part of the zone by making
                that part transparent with a local-zone statement.  This also
                works with the other default zones.

    local-data: "<resource record string>"
        Configure  local data, which is served in reply to queries for it.
        The query has to match exactly unless you configure the local-zone
        as redirect. If not matched exactly, the  local-zone  type  deter-
        mines  further processing. If local-data is configured that is not
        a subdomain of a local-zone, a transparent local-zone  is  config-
        ured.   For record types such as TXT, use single quotes, as in lo-
        cal-data: &#39;example. TXT "text"&#39;.

        If you need more complicated authoritative data,  with  referrals,
        wildcards,  CNAME/DNAME  support, or DNSSEC authoritative service,
        setup a stub-zone for it as detailed in the stub zone section  be-
        low.

    local-data-ptr: "IPaddr name"
        Configure  local data shorthand for a PTR record with the reversed
        IPv4 or IPv6 address and the host name.   For  example  "192.0.2.4
        www.example.com".   TTL  can  be  inserted like this: "2001:DB8::4
        7200 www.example.com"

    local-zone-tag: <zone> <"list of tags">
        Assign tags to localzones. Tagged localzones will only be  applied
        when the used access-control element has a matching tag. Tags must
        be  defined  in  define-tags.  Enclose list of tags in quotes ("")
        and put spaces between tags.  When  there  are  multiple  tags  it
        checks  if  the intersection of the list of tags for the query and
        local-zone-tag is non-empty.

    local-zone-override: <zone> <IP netblock> <type>
        Override the localzone type for queries  from  addresses  matching
        netblock.  Use this localzone type, regardless the type configured
        for  the  local-zone (both tagged and untagged) and regardless the
        type configured using access-control-tag-action.

    response-ip: <IP-netblock> <action>
        This requires use of the "respip" module.

        If the IP address in an AAAA or A RR in the answer  section  of  a
        response  matches  the specified IP netblock, the specified action
        will apply.  <action> has generally the same semantics as that for
        access-control-tag-action, but there are some exceptions.

        Actions for response-ip are different from those for local-zone in
        that in case of the former there is no point of such conditions as
        "the query matches it but there is no  local  data".   Because  of
        this difference, the semantics of response-ip actions are modified
        or  simplified  as follows: The static, refuse, transparent, type-
        transparent, and nodefault actions are  invalid  for  response-ip.
        Using  any of these will cause the configuration to be rejected as
        faulty. The deny action is non-conditional, i.e. it always results
        in dropping the corresponding query.  The resolution result before
        applying the deny action is still cached and can be used for other
        queries.

    response-ip-data: <IP-netblock> <"resource record string">
        This requires use of the "respip" module.

        This specifies the action data for response-ip with  action  being
        to  redirect  as specified by "resource record string".  "Resource
        record string" is similar to  that  of  access-control-tag-action,
        but  it  must be of either AAAA, A or CNAME types.  If the IP-net-
        block is an IPv6/IPv4 prefix, the record must  be  AAAA/A  respec-
        tively,  unless it is a CNAME (which can be used for both versions
        of IP netblocks).  If it is CNAME there must not be more than  one
        response-ip-data  for the same IP-netblock.  Also, CNAME and other
        types of records must not coexist for the same  IP-netblock,  fol-
        lowing  the  normal  rules  for CNAME records.  The textual domain
        name for the CNAME does not have to be explicitly terminated  with
        a  dot  (".");  the  root name is assumed to be the origin for the
        name.

    response-ip-tag: <IP-netblock> <"list of tags">
        This requires use of the "respip" module.

        Assign tags to response IP-netblocks.  If the  IP  address  in  an
        AAAA or A RR in the answer section of a response matches the spec-
        ified  IP-netblock,  the specified tags are assigned to the IP ad-
        dress.  Then, if an access-control-tag is defined for  the  client
        and  it  includes  one of the tags for the response IP, the corre-
        sponding access-control-tag-action will apply.  Tag matching  rule
        is  the  same as that for access-control-tag and local-zones.  Un-
        like local-zone-tag, response-ip-tag can be defined for an IP-net-
        block even if no response-ip is defined  for  that  netblock.   If
        multiple  response-ip-tag  options  are specified for the same IP-
        netblock in different statements, all but the first  will  be  ig-
        nored.   However,  this will not be flagged as a configuration er-
        ror, but the result is probably not what was intended.

        Actions specified  in  an  access-control-tag-action  that  has  a
        matching  tag with response-ip-tag can be those that are "invalid"
        for response-ip listed above, since access-control-tag-actions can
        be shared with local zones.  For these  actions,  if  they  behave
        differently  depending on whether local data exists or not in case
        of local zones, the behavior for response-ip-data  will  generally
        result  in NOERROR/NODATA instead of NXDOMAIN, since the response-
        ip data are inherently type specific, and  non-existence  of  data
        does not indicate anything about the existence or non-existence of
        the qname itself.  For example, if the matching tag action is sta-
        tic but there is no data for the corresponding response-ip config-
        uration,  then  the  result will be NOERROR/NODATA.  The only case
        where NXDOMAIN is returned is when an always_nxdomain  action  ap-
        plies.

    ratelimit: <number or 0>
        Enable  ratelimiting  of queries sent to nameserver for performing
        recursion.  If 0, the default, it is disabled.  This option is ex-
        perimental at this time.  The ratelimit is in queries  per  second
        that  are  allowed.   More  queries  are turned away with an error
        (servfail).  This stops recursive floods, eg. random query  names,
        but not spoofed reflection floods.  Cached responses are not rate-
        limited  by  this setting.  The zone of the query is determined by
        examining the nameservers for it, the zone name is  used  to  keep
        track  of  the rate.  For example, 1000 may be a suitable value to
        stop the server from being overloaded with random names, and keeps
        Unbound from sending traffic to the nameservers for  those  zones.
        Configured forwarders are excluded from ratelimiting.

    ratelimit-size: <memory size>
        Give  the  size of the data structure in which the current ongoing
        rates are kept track in.  Default 4m.  In bytes  or  use  m(mega),
        k(kilo),  g(giga).  The ratelimit structure is small, so this data
        structure likely does not need to be large.

    ratelimit-slabs: <number>
        Give power of 2 number of slabs, this is used to reduce lock  con-
        tention  in  the  ratelimit tracking data structure.  Close to the
        number of cpus is a fairly good setting.

    ratelimit-factor: <number>
        Set the amount of queries to rate limit  when  the  limit  is  ex-
        ceeded.   If  set  to 0, all queries are dropped for domains where
        the limit is exceeded.  If set to another value, 1 in that  number
        is  allowed  through  to  complete.   Default is 10, allowing 1/10
        traffic to flow normally.  This can make ordinary queries complete
        (if repeatedly queried for), and enter the cache, whilst also mit-
        igating the traffic flow by the factor given.

    ratelimit-backoff: <yes or no>
        If enabled, the ratelimit is treated as a hard failure instead  of
        the  default  maximum  allowed  constant  rate.  When the limit is
        reached, traffic is ratelimited and demand continues  to  be  kept
        track  of  for a 2 second rate window.  No traffic is allowed, ex-
        cept for ratelimit-factor, until demand decreases below  the  con-
        figured ratelimit for a 2 second rate window.  Useful to set rate-
        limit  to  a  suspicious rate to aggressively limit unusually high
        traffic.  Default is off.

    ratelimit-for-domain: <domain> <number qps or 0>
        Override the global ratelimit for an exact match domain name  with
        the  listed  number.   You  can give this for any number of names.
        For example, for a top-level-domain you may want to have a  higher
        limit  than  other  names.  A value of 0 will disable ratelimiting
        for that domain.

    ratelimit-below-domain: <domain> <number qps or 0>
        Override the global ratelimit for a domain name that ends in  this
        name.  You can give this multiple times, it then describes differ-
        ent  settings  in  different  parts of the namespace.  The closest
        matching suffix is used to determine the qps limit.  The rate  for
        the   exact  matching  domain  name  is  not  changed,  use  rate-
        limit-for-domain to set that, you might want to use different set-
        tings for a top-level-domain and subdomains.  A value  of  0  will
        disable ratelimiting for domain names that end in this name.

    ip-ratelimit: <number or 0>
        Enable  global  ratelimiting  of  queries accepted per IP address.
        This option is experimental at this time.   The  ratelimit  is  in
        queries  per second that are allowed.  More queries are completely
        dropped and will not receive a reply, SERVFAIL or  otherwise.   IP
        ratelimiting happens before looking in the cache. This may be use-
        ful  for  mitigating  amplification attacks.  Clients with a valid
        DNS Cookie will bypass the ratelimit.  If  a  ratelimit  for  such
        clients  is still needed, ip-ratelimit-cookie can be used instead.
        Default is 0 (disabled).

    ip-ratelimit-cookie: <number or 0>
        Enable global ratelimiting of queries accepted per IP address with
        a valid DNS Cookie.  This option is  experimental  at  this  time.
        The  ratelimit  is  in  queries per second that are allowed.  More
        queries are completely dropped and will not receive a reply, SERV-
        FAIL or otherwise.  IP ratelimiting happens before looking in  the
        cache.   This  option  could  be  useful  in  combination with al-
        low_cookie in an attempt to mitigate other  amplification  attacks
        than  UDP  reflections  (e.g.,  attacks  targeting Unbound itself)
        which are already handled with DNS Cookies.  If used, the value is
        suggested to be higher than ip-ratelimit e.g.,  tenfold.   Default
        is 0 (disabled).

    ip-ratelimit-size: <memory size>
        Give  the  size of the data structure in which the current ongoing
        rates are kept track in.  Default 4m.  In bytes  or  use  m(mega),
        k(kilo),  g(giga).   The  ip ratelimit structure is small, so this
        data structure likely does not need to be large.

    ip-ratelimit-slabs: <number>
        Give power of 2 number of slabs, this is used to reduce lock  con-
        tention in the ip ratelimit tracking data structure.  Close to the
        number of cpus is a fairly good setting.

    ip-ratelimit-factor: <number>
        Set  the  amount  of  queries  to rate limit when the limit is ex-
        ceeded.  If set to 0, all queries are dropped for addresses  where
        the  limit is exceeded.  If set to another value, 1 in that number
        is allowed through to complete.   Default  is  10,  allowing  1/10
        traffic to flow normally.  This can make ordinary queries complete
        (if repeatedly queried for), and enter the cache, whilst also mit-
        igating the traffic flow by the factor given.

    ip-ratelimit-backoff: <yes or no>
        If  enabled, the ratelimit is treated as a hard failure instead of
        the default maximum allowed constant  rate.   When  the  limit  is
        reached,  traffic  is  ratelimited and demand continues to be kept
        track of for a 2 second rate window.  No traffic is  allowed,  ex-
        cept  for  ip-ratelimit-factor,  until  demand decreases below the
        configured ratelimit for a 2 second rate window.   Useful  to  set
        ip-ratelimit  to a suspicious rate to aggressively limit unusually
        high traffic.  Default is off.

    outbound-msg-retry: <number>
        The number of retries, per upstream nameserver  in  a  delegation,
        that  Unbound  will  attempt  in  case a throwaway response is re-
        ceived.  No response (timeout) contributes to the  retry  counter.
        If  a forward/stub zone is used, this is the number of retries per
        nameserver in the zone.  Default is 5.

    max-sent-count: <number>
        Hard limit on the number of outgoing  queries  Unbound  will  make
        while  resolving  a  name,  making sure large NS sets do not loop.
        Results in SERVFAIL when reached.  It  resets  on  query  restarts
        (e.g., CNAME) and referrals.  Default is 32.

    max-query-restarts: <number>
        Hard  limit on the number of times Unbound is allowed to restart a
        query upon encountering a CNAME record.  Results in SERVFAIL  when
        reached.   Changing  this value needs caution as it can allow long
        CNAME chains to be accepted, where Unbound needs  to  verify  (re-
        solve) each link individually.  Default is 11.

    iter-scrub-ns: <number>
        Limit  on the number of NS records allowed in an rrset of type NS,
        from the iterator scrubber. This protects the internals of the re-
        solver from overly large NS sets. Default is 20.

    iter-scrub-cname: <number>
        Limit on the number of CNAME, DNAME records in an answer, from the
        iterator scrubber. This protects the  internals  of  the  resolver
        from  overly  long  indirection chains. Clips off the remainder of
        the reply packet at that point.  Default is 11.

    max-global-quota: <number>
        Limit on the number of upstream queries sent out for  an  incoming
        query  and  its  subqueries from recursion. It is not reset during
        the resolution. When it is exceeded the query is  failed  and  the
        lookup process stops.  Default is 200.

    fast-server-permil: <number>
        Specify how many times out of 1000 to pick from the set of fastest
        servers.  0 turns the feature off.  A value of 900 would pick from
        the fastest servers 90 percent of the time, and would perform nor-
        mal  exploration  of  random  servers for the remaining time. When
        prefetch is enabled (or serve-expired), such  prefetches  are  not
        sped up, because there is no one waiting for it, and it presents a
        good moment to perform server exploration. The fast-server-num op-
        tion  can  be used to specify the size of the fastest servers set.
        The default for fast-server-permil is 0.

    fast-server-num: <number>
        Set the number of servers that should be used for fast server  se-
        lection. Only use the fastest specified number of servers with the
        fast-server-permil  option, that turns this on or off. The default
        is to use the fastest 3 servers.

    answer-cookie: <yes or no>
        If enabled, Unbound will answer to requests containing DNS Cookies
        as specified in RFC 7873 and RFC 9018.  Default is no.

    cookie-secret: <128 bit hex string>
        Server&#39;s secret for DNS Cookie generation.  Useful  to  explicitly
        set  for  servers  in an anycast deployment that need to share the
        secret in order to verify each other&#39;s Server Cookies.  An example
        hex string would be  "000102030405060708090a0b0c0d0e0f".   Default
        is  a  128 bits random secret generated at startup time.  This op-
        tion is ignored if a cookie-secret-file is present.  In that  case
        the secrets from that file are used in DNS Cookie calculations.

    cookie-secret-file: <filename>
        File  from  which the secrets are read used in DNS Cookie calcula-
        tions. When this file exists, the secrets in this  file  are  used
        and  the  secret specified by the cookie-secret option is ignored.
        Enable  it  by  setting  a  filename,   like   "/usr/local/etc/un-
        bound_cookiesecrets.txt".  The content of this file must be manip-
        ulated  with  the  add_cookie_secret, drop_cookie_secret and acti-
        vate_cookie_secret commands to the unbound-control(8) tool. Please
        see that manpage on how to perform a safe cookie secret  rollover.
        Default is "" (disabled).

    edns-client-string: <IP netblock> <string>
        Include  an  EDNS0  option  containing  configured ascii string in
        queries with destination address matching the configured  IP  net-
        block.   This configuration option can be used multiple times. The
        most specific match will be used.

    edns-client-string-opcode: <opcode>
        EDNS0 option code for the edns-client-string  option,  from  0  to
        1.       A  value from the `Reserved for Local/Experimental` range
        (65001-65534) should be used.  Default is 65001.

    ede: <yes or no>
        If enabled, Unbound will respond with  Extended  DNS  Error  codes
        (RFC8914).   These  EDEs provide additional information with a re-
        sponse mainly for, but not limited to, DNS and DNSSEC errors.

        When the val-log-level option is also set to 2, responses with Ex-
        tended DNS Errors concerning DNSSEC failures will also  contain  a
        descriptive  text  message  about the reason for the failure.  De-
        fault is "no".

    ede-serve-expired: <yes or no>
        If enabled, Unbound will attach an Extended  DNS  Error  (RFC8914)
        Code  3  -  Stale  Answer as EDNS0 option to the expired response.
        The ede option needs to be enabled as well for this to work.   De-
        fault is "no".

    dns-error-reporting: <yes or no>
        If  enabled,  Unbound  will send DNS Error Reports (RFC9567).  The
        name servers need to express support by attaching the Report-Chan-
        nel EDNS0 option on their replies specifying the  reporting  agent
        for the zone.  Any errors encountered during resolution that would
        result  in Unbound generating an Extended DNS Error (RFC8914) will
        be reported to the zone&#39;s reporting agent.  The  ede  option  does
        not  need  to be enabled for this to work.  It is advised that the
        qname-minimisation option is also enabled to increase  privacy  on
        the outgoing reports.  Default is "no".

Remote Control Options
    In  the remote-control: clause are the declarations for the remote con-
    trol facility.  If this is enabled, the unbound-control(8) utility  can
    be  used  to  send  commands to the running Unbound server.  The server
    uses these clauses to setup TLSv1 security for the connection.  The un-
    bound-control(8) utility also reads the remote-control section for  op-
    tions.   To  setup  the  correct  self-signed  certificates use the un-
    bound-control-setup(8) utility.

    control-enable: <yes or no>
        The option is used to enable remote control, default is "no".   If
        turned off, the server does not listen for control commands.

    control-interface: <ip address or interface name or path>
        Give  IPv4 or IPv6 addresses or local socket path to listen on for
        control commands.  If an interface name is used instead of  an  ip
        address,  the list of ip addresses on that interface are used.  By
        default localhost (127.0.0.1 and ::1) is listened to.  Use 0.0.0.0
        and ::0 to listen to all interfaces.  If you change this and  per-
        missions  have  been  dropped, you must restart the server for the
        change to take effect.

        If you set it to an absolute path, a unix domain socket  is  used.
        This socket does not use the certificates and keys, so those files
        need not be present.  To restrict access, Unbound sets permissions
        on  the  file to the user and group that is configured, the access
        bits are set to allow the group  members  to  access  the  control
        socket file.  Put users that need to access the socket in the that
        group.   To restrict access further, create a directory to put the
        control socket in and restrict access to that directory.

    control-port: <port number>
        The port number to listen on for IPv4 or IPv6 control  interfaces,
        default  is  8953.   If  you change this and permissions have been
        dropped, you must restart the server for the change  to  take  ef-
        fect.

    control-use-cert: <yes or no>
        For  localhost control-interface you can disable the use of TLS by
        setting this option to "no", default is "yes".  For local sockets,
        TLS is disabled and the value of this option is ignored.

    server-key-file: <private key file>
        Path to the server private  key,  by  default  unbound_server.key.
        This file is generated by the unbound-control-setup utility.  This
        file is used by the Unbound server, but not by unbound-control.

    server-cert-file: <certificate file.pem>
        Path  to  the  server  self  signed  certificate,  by  default un-
        bound_server.pem.  This file  is  generated  by  the  unbound-con-
        trol-setup  utility.  This file is used by the Unbound server, and
        also by unbound-control.

    control-key-file: <private key file>
        Path to the control client private key,  by  default  unbound_con-
        trol.key.   This  file  is  generated by the unbound-control-setup
        utility.  This file is used by unbound-control.

    control-cert-file: <certificate file.pem>
        Path to the control client certificate,  by  default  unbound_con-
        trol.pem.   This certificate has to be signed with the server cer-
        tificate.  This file is  generated  by  the  unbound-control-setup
        utility.  This file is used by unbound-control.

Stub Zone Options
    There may be multiple stub-zone: clauses. Each with a name: and zero or
    more  hostnames  or IP addresses.  For the stub zone this list of name-
    servers is used. Class IN is assumed.  The servers should be  authority
    servers,  not  recursors; Unbound performs the recursive processing it-
    self for stub zones.

    The stub zone can be used to configure authoritative data to be used by
    the resolver that cannot be accessed using the public internet servers.
    This is useful for company-local data or private zones.  Setup  an  au-
    thoritative  server  on  a  different host (or different port). Enter a
    config entry for Unbound with stub-addr: <ip address  of  host[@port]>.
    The Unbound resolver can then access the data, without referring to the
    public internet for it.

    This  setup  allows DNSSEC signed zones to be served by that authorita-
    tive server, in which case a trusted key entry with the public key  can
    be  put in config, so that Unbound can validate the data and set the AD
    bit on replies for the private zone (authoritative servers do  not  set
    the AD bit).  This setup makes Unbound capable of answering queries for
    the private zone, and can even set the AD bit (&#39;authentic&#39;), but the AA
    (&#39;authoritative&#39;) bit is not set on these replies.

    Consider  adding  server:  statements  for domain-insecure: and for lo-
    cal-zone: name nodefault for the zone if it is a locally  served  zone.
    The insecure clause stops DNSSEC from invalidating the zone.  The local
    zone nodefault (or transparent) clause makes the (reverse-) zone bypass
    Unbound&#39;s filtering of RFC1918 zones.

    name: <domain name>
            Name of the stub zone. This is the full domain name of the zone.

    stub-host: <domain name>
            Name  of  stub  zone nameserver. Is itself resolved before it is
            used.  To use a nondefault port for DNS communication append &#39;@&#39;
            with the port number.  If tls is enabled, then you can append  a
            &#39;#&#39; and a name, then it&#39;ll check the tls authentication certifi-
            cates  with  that name.  If you combine the &#39;@&#39; and &#39;#&#39;, the &#39;@&#39;
            comes first.  If only &#39;#&#39; is used the default port is  the  con-
            figured tls-port.

    stub-addr: <IP address>
            IP address of stub zone nameserver. Can be IP 4 or IP 6.  To use
            a nondefault port for DNS communication append &#39;@&#39; with the port
            number.   If  tls  is  enabled,  then you can append a &#39;#&#39; and a
            name, then it&#39;ll check the tls authentication certificates  with
            that name.  If you combine the &#39;@&#39; and &#39;#&#39;, the &#39;@&#39; comes first.
            If only &#39;#&#39; is used the default port is the configured tls-port.

    stub-prime: <yes or no>
            This  option  is  by  default no.  If enabled it performs NS set
            priming, which is similar to root hints, where it  starts  using
            the  list of nameservers currently published by the zone.  Thus,
            if the hint list is slightly outdated, the resolver picks  up  a
            correct list online.

    stub-first: <yes or no>
            If  enabled,  a query is attempted without the stub clause if it
            fails.  The data could not be retrieved and  would  have  caused
            SERVFAIL  because  the  servers  are  unreachable, instead it is
            tried without this clause.  The default is no.

    stub-tls-upstream: <yes or no>
            Enabled or disable whether the queries to this stub use TLS  for
            transport.  Default is no.

    stub-ssl-upstream: <yes or no>
            Alternate syntax for stub-tls-upstream.

    stub-tcp-upstream: <yes or no>
            If  it  is  set  to "yes" then upstream queries use TCP only for
            transport regardless of global flag  tcp-upstream.   Default  is
            no.

    stub-no-cache: <yes or no>
            Default  is no.  If enabled, data inside the stub is not cached.
            This is useful when you want immediate changes to be visible.

Forward Zone Options
    There may be multiple forward-zone: clauses. Each with a name: and zero
    or more hostnames or IP addresses.  For the forward zone this  list  of
    nameservers  is  used  to forward the queries to. The servers listed as
    forward-host: and forward-addr: have to handle  further  recursion  for
    the  query.   Thus,  those  servers  are not authority servers, but are
    (just like Unbound is) recursive servers too; Unbound does not  perform
    recursion itself for the forward zone, it lets the remote server do it.
    Class  IN  is assumed.  CNAMEs are chased by Unbound itself, asking the
    remote server for every name in the indirection chain, to  protect  the
    local cache from illegal indirect referenced items.  A forward-zone en-
    try with name "." and a forward-addr target will forward all queries to
    that other server (unless it can answer from the cache).

    name: <domain name>
            Name  of  the  forward zone. This is the full domain name of the
            zone.

    forward-host: <domain name>
            Name of server to forward to. Is itself resolved  before  it  is
            used.  To use a nondefault port for DNS communication append &#39;@&#39;
            with  the port number.  If tls is enabled, then you can append a
            &#39;#&#39; and a name, then it&#39;ll check the tls authentication certifi-
            cates with that name.  If you combine the &#39;@&#39; and &#39;#&#39;,  the  &#39;@&#39;
            comes  first.   If only &#39;#&#39; is used the default port is the con-
            figured tls-port.

    forward-addr: <IP address>
            IP address of server to forward to. Can be IP 4 or IP 6.  To use
            a nondefault port for DNS communication append &#39;@&#39; with the port
            number.  If tls is enabled, then you can  append  a  &#39;#&#39;  and  a
            name,  then it&#39;ll check the tls authentication certificates with
            that name.  If you combine the &#39;@&#39; and &#39;#&#39;, the &#39;@&#39; comes first.
            If only &#39;#&#39; is used the default port is the configured tls-port.

            At high verbosity it logs the TLS certificate, with TLS enabled.
            If you leave out the &#39;#&#39; and auth name  from  the  forward-addr,
            any  name  is  accepted.  The cert must also match a CA from the
            tls-cert-bundle.

    forward-first: <yes or no>
            If a forwarded query is met with a SERVFAIL error, and this  op-
            tion is enabled, Unbound will fall back to normal recursive res-
            olution for this query as if no query forwarding had been speci-
            fied.  The default is "no".

    forward-tls-upstream: <yes or no>
            Enabled or disable whether the queries to this forwarder use TLS
            for transport.  Default is no.  If you enable this, also config-
            ure a tls-cert-bundle or use tls-win-cert to load CA certs, oth-
            erwise the connections cannot be authenticated.

    forward-ssl-upstream: <yes or no>
            Alternate syntax for forward-tls-upstream.

    forward-tcp-upstream: <yes or no>
            If  it  is  set  to "yes" then upstream queries use TCP only for
            transport regardless of global flag  tcp-upstream.   Default  is
            no.

    forward-no-cache: <yes or no>
            Default  is  no.   If  enabled,  data  inside the forward is not
            cached.  This is useful when you want immediate  changes  to  be
            visible.

Authority Zone Options
    Authority  zones are configured with auth-zone:, and each one must have
    a name:.  There can be multiple ones,  by  listing  multiple  auth-zone
    clauses,  each  with  a  different name, pertaining to that part of the
    namespace.  The authority zone with the name closest to the name looked
    up is used.  Authority zones can be processed on two distinct,  non-ex-
    clusive, configurable stages.

    With for-downstream: yes (default), authority zones are processed after
    local-zones  and  before  cache.  When used in this manner, Unbound re-
    sponds like an authority server with no further processing  other  than
    returning an answer from the zone contents.  A notable example, in this
    case,  is  CNAME  records  which  are  returned  verbatim to downstream
    clients without further resolution.

    With for-upstream: yes (default), authority zones are  processed  after
    the cache lookup, just before going to the network to fetch information
    for  recursion.   When used in this manner they provide a local copy of
    an authority server that speeds up lookups for that data during resolv-
    ing.

    If both options are enabled (default), client queries for an  authority
    zone  are answered authoritatively from Unbound, while internal queries
    that require data from the authority zone consult the local  zone  data
    instead of going to the network.

    An  interesting  configuration is for-downstream: no, for-upstream: yes
    that allows for hyperlocal behavior  where  both  client  and  internal
    queries consult the local zone data while resolving.  In this case, the
    aforementioned  CNAME  example will result in a thoroughly resolved an-
    swer.

    Authority zones can be read from zonefile.  And can be kept updated via
    AXFR and IXFR.  After update the zonefile  is  rewritten.   The  update
    mechanism uses the SOA timer values and performs SOA UDP queries to de-
    tect zone changes.

    If  the  update  fetch  fails, the timers in the SOA record are used to
    time another fetch attempt.  Until the SOA  expiry  timer  is  reached.
    Then  the  zone  is expired.  When a zone is expired, queries are SERV-
    FAIL, and any new serial number is accepted from the primary  (even  if
    older),  and  if  fallback  is enabled, the fallback activates to fetch
    from the upstream instead of the SERVFAIL.

    name: <zone name>
            Name of the authority zone.

    primary: <IP address or host name>
            Where to download a copy of the zone from, with AXFR  and  IXFR.
            Multiple  primaries can be specified.  They are all tried if one
            fails.  To use a nondefault port for  DNS  communication  append
            &#39;@&#39; with the port number.  You can append a &#39;#&#39; and a name, then
            AXFR  over  TLS  can be used and the tls authentication certifi-
            cates will be checked with that name.  If you  combine  the  &#39;@&#39;
            and  &#39;#&#39;,  the  &#39;@&#39; comes first.  If you point it at another Un-
            bound instance, it would not work because that does not  support
            AXFR/IXFR  for  the  zone,  but if you used url: to download the
            zonefile as a text file from a webserver that  would  work.   If
            you  specify  the  hostname,  you cannot use the domain from the
            zonefile, because it may not  have  that  when  retrieving  that
            data,  instead use a plain IP address to avoid a circular depen-
            dency on retrieving that IP address.

    master: <IP address or host name>
            Alternate syntax for primary.

    url: <url to zonefile>
            Where to download a zonefile for the zone.  With http or  https.
            An   example   for   the  url  is  "http://www.example.com/exam-
            ple.org.zone".  Multiple url statements can be given,  they  are
            tried  in turn.  If only urls are given the SOA refresh timer is
            used to wait for making new downloads.  If  also  primaries  are
            listed,  the  primaries are first probed with UDP SOA queries to
            see if the SOA serial number has changed, reducing the number of
            downloads.  If none of the urls work, the  primaries  are  tried
            with  IXFR  and  AXFR.   For  https, the tls-cert-bundle and the
            hostname from the url are used to authenticate  the  connection.
            If  you specify a hostname in the URL, you cannot use the domain
            from the zonefile, because it may not have that when  retrieving
            that  data,  instead  use a plain IP address to avoid a circular
            dependency on retrieving that IP address.  Avoid dependencies on
            name lookups by using a notation like "http://192.0.2.1/unbound-
            primaries/example.com.zone", with an explicit IP address.

    allow-notify: <IP address or host name or netblockIP/prefix>
            With allow-notify you can specify additional  sources  of  noti-
            fies.   When  notified,  the  server attempts to first probe and
            then zone transfer.  If the notify is from a primary,  it  first
            attempts that primary.  Otherwise other primaries are attempted.
            If there are no primaries, but only urls, the file is downloaded
            when  notified.  The primaries from primary: and url: statements
            are allowed notify by default.

    fallback-enabled: <yes or no>
            Default no.  If enabled, Unbound falls back to querying the  in-
            ternet as a resolver for this zone when lookups fail.  For exam-
            ple for DNSSEC validation failures.

    for-downstream: <yes or no>
            Default  yes.  If enabled, Unbound serves authority responses to
            downstream clients for this zone.  This option makes Unbound be-
            have, for the queries with names in this zone, like one  of  the
            authority  servers  for  that zone.  Turn it off if you want Un-
            bound to provide recursion for the zone but have a local copy of
            zone data.  If for-downstream is no  and  for-upstream  is  yes,
            then  Unbound  will DNSSEC validate the contents of the zone be-
            fore serving the zone contents to clients and  store  validation
            results in the cache.

    for-upstream: <yes or no>
            Default  yes.   If  enabled, Unbound fetches data from this data
            collection for answering recursion queries.  Instead of  sending
            queries  over  the  internet  to  the authority servers for this
            zone, it&#39;ll fetch the data directly from the zone data.  Turn it
            on when you want Unbound to  provide  recursion  for  downstream
            clients,  and  use  the  zone  data  as a local copy to speed up
            lookups.

    zonemd-check: <yes or no>
            Enable this option to check ZONEMD records in the zone.  Default
            is  disabled.   The  ZONEMD  record  is a checksum over the zone
            data. This includes glue in the zone  and  data  from  the  zone
            file, and excludes comments from the zone file.  When there is a
            DNSSEC chain of trust, DNSSEC signatures are checked too.

    zonemd-reject-absence: <yes or no>
            Enable  this  option to reject the absence of the ZONEMD record.
            Without it, when zonemd is not there it is not checked.   It  is
            useful  to enable for a nonDNSSEC signed zone where the operator
            wants to require the verification of a ZONEMD, hence  a  missing
            ZONEMD  is  a failure.  The action upon failure is controlled by
            the zonemd-permissive-mode option, for log only  or  also  block
            the zone.  The default is no.

            Without  the  option  absence of a ZONEMD is only a failure when
            the zone is DNSSEC signed, and we have a trust anchor,  and  the
            DNSSEC  verification  of  the absence of the ZONEMD fails.  With
            the option enabled, the absence of a ZONEMD is always a failure,
            also for nonDNSSEC signed zones.

    zonefile: <filename>
            The filename where the zone is stored.  If  not  given  then  no
            zonefile  is  used.  If the file does not exist or is empty, Un-
            bound will attempt to fetch zone  data  (eg.  from  the  primary
            servers).

View Options
    There may be multiple view: clauses. Each with a name: and zero or more
    local-zone  and local-data elements. Views can also contain view-first,
    response-ip, response-ip-data and local-data-ptr elements.  View can be
    mapped to requests by  specifying  the  view  name  in  an  access-con-
    trol-view element. Options from matching views will override global op-
    tions.  Global  options  will  be used if no matching view is found, or
    when the matching view does not have the option specified.

    name: <view name>
            Name of the view. Must be unique.  This  name  is  used  in  ac-
            cess-control-view elements.

    local-zone: <zone> <type>
            View specific local-zone elements. Has the same types and behav-
            iour  as  the global local-zone elements. When there is at least
            one local-zone specified and view-first is no, the  default  lo-
            cal-zones  will be added to this view.  Defaults can be disabled
            using the nodefault type. When view-first is yes or when a  view
            does  not  have a local-zone, the global local-zone will be used
            including it&#39;s default zones.

    local-data: "<resource record string>"
            View specific local-data elements. Has the same behaviour as the
            global local-data elements.

    local-data-ptr: "IPaddr name"
            View specific local-data-ptr elements. Has the same behaviour as
            the global local-data-ptr elements.

    view-first: <yes or no>
            If enabled, it attempts to use the  global  local-zone  and  lo-
            cal-data if there is no match in the view specific options.  The
            default is no.

Python Module Options
    The  python: clause gives the settings for the python(1) script module.
    This module acts like the iterator and validator modules do, on queries
    and answers.  To enable the script module it has to  be  compiled  into
    the  daemon,  and the word "python" has to be put in the module-config:
    option (usually first, or between the validator and iterator). Multiple
    instances of the  python  module  are  supported  by  adding  the  word
    "python" more than once.

    If the chroot: option is enabled, you should make sure Python&#39;s library
    directory  structure  is  bind mounted in the new root environment, see
    mount(8).  Also the python-script: path should be specified as  an  ab-
    solute  path  relative  to  the  new root, or as a relative path to the
    working directory.

    python-script: <python file>
            The script file to load. Repeat this  option  for  every  python
            module instance added to the module-config: option.

Dynamic Library Module Options
    The dynlib: clause gives the settings for the dynlib module.  This mod-
    ule  is  only  a  very  small wrapper that allows dynamic modules to be
    loaded on runtime instead of being compiled into  the  application.  To
    enable the dynlib module it has to be compiled into the daemon, and the
    word  "dynlib" has to be put in the module-config: option. Multiple in-
    stances of dynamic libraries are supported by adding the word  "dynlib"
    more than once.

    The  dynlib-file: path should be specified as an absolute path relative
    to the new path set by chroot: option, or as a  relative  path  to  the
    working directory.

    dynlib-file: <dynlib file>
            The  dynamic  library file to load. Repeat this option for every
            dynlib module instance added to the module-config: option.

DNS64 Module Options
    The dns64 module must be configured  in  the  module-config:  directive
    e.g.,  "dns64 validator iterator" and be compiled into the daemon to be
    enabled.  These settings go in the server: section.

    dns64-prefix: <IPv6 prefix>
            This sets the DNS64 prefix to use  to  synthesize  AAAA  records
            with.   It  must  be  /96  or  shorter.   The  default prefix is
            64:ff9b::/96.

    dns64-synthall: <yes or no>
            Debug option, default  no.   If  enabled,  synthesize  all  AAAA
            records despite the presence of actual AAAA records.

    dns64-ignore-aaaa: <name>
            List  domain  for  which  the AAAA records are ignored and the A
            record is used by dns64 processing instead.  Can be entered mul-
            tiple times, list a new domain for which  it  applies,  one  per
            line.  Applies also to names underneath the name given.

NAT64 Operation
    NAT64  operation  allows  using a NAT64 prefix for outbound requests to
    IPv4-only servers.  It is controlled by two options in the server: sec-
    tion:

    do-nat64: <yes or no>
            Use NAT64 to reach IPv4-only servers.   Consider  also  enabling
            prefer-ip6  to  prefer  native  IPv6 connections to nameservers.
            Default no.

    nat64-prefix: <IPv6 prefix>
            Use a specific NAT64 prefix to  reach  IPv4-only  servers.   De-
            faults  to using the prefix configured in dns64-prefix, which in
            turn defaults to 64:ff9b::/96.  The prefix length must be one of
            /32, /40, /48, /56, /64 or /96.

DNSCrypt Options
    The dnscrypt: clause gives the settings of the dnscrypt channel.  While
    those  options  are  available, they are only meaningful if Unbound was
    compiled with --enable-dnscrypt.  Currently certificate and secret/pub-
    lic keys cannot be generated by Unbound.  You can use  dnscrypt-wrapper
    to  generate those: <https://github.com/cofyc/dnscrypt-wrapper/blob/mas->
    ter/README.md#usage

    dnscrypt-enable: <yes or no>
            Whether or not the dnscrypt config should be  enabled.  You  may
            define configuration but not activate it.  The default is no.

    dnscrypt-port: <port number>
            On which port should dnscrypt should be activated. Note that you
            should  have  a  matching interface option defined in the server
            section for this port.

    dnscrypt-provider: <provider name>
            The provider name to use to distribute certificates. This is  of
            the form: 2.dnscrypt-cert.example.com.. The name MUST end with a
            dot.

    dnscrypt-secret-key: <path to secret key file>
            Path  to  the  time  limited secret key file. This option may be
            specified multiple times.

    dnscrypt-provider-cert: <path to cert file>
            Path to the certificate  related  to  the  dnscrypt-secret-keys.
            This option may be specified multiple times.

    dnscrypt-provider-cert-rotated: <path to cert file>
            Path  to  a certificate that we should be able to serve existing
            connection  from   but   do   not   want   to   advertise   over
            dnscrypt-provider&#39;s  TXT  record  certs distribution.  A typical
            use case is when rotating  certificates,  existing  clients  may
            still  use  the  client magic from the old cert in their queries
            until they fetch and update the new cert. Likewise, it would al-
            low one to prime the new cert/key without distributing  the  new
            cert yet, this can be useful when using a network of servers us-
            ing  anycast  and on which the configuration may not get updated
            at the exact same time. By priming the  cert,  the  servers  can
            handle  both  old  and new certs traffic while distributing only
            one.  This option may be specified multiple times.

    dnscrypt-shared-secret-cache-size: <memory size>
            Give the size of the data structure in which the  shared  secret
            keys  are  kept  in.   Default  4m.   In  bytes  or use m(mega),
            k(kilo), g(giga).  The shared secret cache is used when  a  same
            client  is making multiple queries using the same public key. It
            saves a substantial amount of CPU.

    dnscrypt-shared-secret-cache-slabs: <number>
            Give power of 2 number of slabs, this is  used  to  reduce  lock
            contention  in  the dnscrypt shared secrets cache.  Close to the
            number of cpus is a fairly good setting.

    dnscrypt-nonce-cache-size: <memory size>
            Give the size of the data structure in which the  client  nonces
            are  kept  in.   Default  4m.  In bytes or use m(mega), k(kilo),
            g(giga).  The nonce cache is used to  prevent  dnscrypt  message
            replaying.  Client nonce should be unique for any pair of client
            pk/server sk.

    dnscrypt-nonce-cache-slabs: <number>
            Give power of 2 number of slabs, this is  used  to  reduce  lock
            contention  in the dnscrypt nonce cache.  Close to the number of
            cpus is a fairly good setting.

EDNS Client Subnet Module Options
    The ECS module must be configured in the module-config: directive e.g.,
    "subnetcache validator iterator" and be compiled into the daemon to  be
    enabled.  These settings go in the server: section.

    If the destination address is allowed in the configuration Unbound will
    add  the  EDNS0 option to the query containing the relevant part of the
    client&#39;s address.  When an answer contains the ECS option the  response
    and  the option are placed in a specialized cache. If the authority in-
    dicated no support, the response is stored in the regular cache.

    Additionally, when a client includes the option in its queries, Unbound
    will forward the option when sending the query to  addresses  that  are
    explicitly  allowed  in the configuration using send-client-subnet. The
    option will always be forwarded, regardless the allowed  addresses,  if
    client-subnet-always-forward  is set to yes. In this case the lookup in
    the regular cache is skipped.

    The maximum size of the ECS cache is controlled by &#39;msg-cache-size&#39;  in
    the configuration file. On top of that, for each query only 100 differ-
    ent subnets are allowed to be stored for each address family. Exceeding
    that number, older entries will be purged from cache.

    Note  that due to the nature of how EDNS Client Subnet works, by segre-
    gating the client IP space in order to try and have tailored  responses
    for  prefixes  of  unknown sizes, resolution and cache response perfor-
    mance are impacted as a result.  Usage of the subnetcache module should
    only be enabled in installations that require such functionality  where
    the  resolver and the clients belong to different networks.  An example
    of that is an open resolver installation.

    This module does not interact with the serve-expired* and prefetch: op-
    tions.

    send-client-subnet: <IP address>
            Send client source address to this authority. Append /num to in-
            dicate  a  classless  delegation  netblock,  for  example   like
            10.2.3.4/24 or 2001::11/64. Can be given multiple times. Author-
            ities  not  listed will not receive edns-subnet information, un-
            less domain in query is specified in client-subnet-zone.

    client-subnet-zone: <domain>
            Send client source address in queries for this  domain  and  its
            subdomains.  Can  be given multiple times. Zones not listed will
            not receive edns-subnet information, unless hosted by  authority
            specified in send-client-subnet.

    client-subnet-always-forward: <yes or no>
            Specify   whether   the  ECS  address  check  (configured  using
            send-client-subnet) is applied for  all  queries,  even  if  the
            triggering query contains an ECS record, or only for queries for
            which the ECS record is generated using the querier address (and
            therefore  did not contain ECS data in the client query). If en-
            abled, the address check is skipped when the client  query  con-
            tains  an  ECS  record.  And  the lookup in the regular cache is
            skipped.  Default is no.

    max-client-subnet-ipv6: <number>
            Specifies the maximum prefix length of the client source address
            we are willing to expose to third parties for IPv6.  Defaults to
            56.

    max-client-subnet-ipv4: <number>
            Specifies the maximum prefix length of the client source address
            we are willing to expose to third parties for IPv4. Defaults  to
            24.

    min-client-subnet-ipv6: <number>
            Specifies  the  minimum prefix length of the IPv6 source mask we
            are willing to accept in queries. Shorter source masks result in
            REFUSED answers. Source mask of 0 is always accepted. Default is
            0.

    min-client-subnet-ipv4: <number>
            Specifies the minimum prefix length of the IPv4 source  mask  we
            are willing to accept in queries. Shorter source masks result in
            REFUSED answers. Source mask of 0 is always accepted. Default is
            0.

    max-ecs-tree-size-ipv4: <number>
            Specifies  the maximum number of subnets ECS answers kept in the
            ECS radix tree.  This number applies for each qname/qclass/qtype
            tuple. Defaults to 100.

    max-ecs-tree-size-ipv6: <number>
            Specifies the maximum number of subnets ECS answers kept in  the
            ECS radix tree.  This number applies for each qname/qclass/qtype
            tuple. Defaults to 100.

Opportunistic IPsec Support Module Options
    The  IPsec  module  must  be configured in the module-config: directive
    e.g., "ipsecmod validator iterator" and be compiled into Unbound by us-
    ing --enable-ipsecmod to be enabled.  These settings go in the  server:
    section.

    When  Unbound  receives  an  A/AAAA  query that is not in the cache and
    finds a valid answer, it will withhold returning the answer and instead
    will generate an IPSECKEY subquery for the same domain name.  If an an-
    swer was found, Unbound will call an external hook passing the  follow-
    ing arguments:

        QNAME
                Domain name of the A/AAAA and IPSECKEY query.  In string for-
                mat.

        IPSECKEY TTL
                TTL of the IPSECKEY RRset.

        A/AAAA
                String  of space separated IP addresses present in the A/AAAA
                RRset.  The IP addresses are in string format.

        IPSECKEY
                String of space  separated  IPSECKEY  RDATA  present  in  the
                IPSECKEY  RRset.   The IPSECKEY RDATA are in DNS presentation
                format.

    The A/AAAA answer is then cached and returned to the  client.   If  the
    external  hook  was called the TTL changes to ensure it doesn&#39;t surpass
    ipsecmod-max-ttl.

    The same procedure is also followed when prefetch:  is  used,  but  the
    A/AAAA answer is given to the client before the hook is called.  ipsec-
    mod-max-ttl  ensures  that  the A/AAAA answer given from cache is still
    relevant for opportunistic IPsec.

    ipsecmod-enabled: <yes or no>
            Specifies whether the IPsec module is enabled or not.  The IPsec
            module still needs to be defined in  the  module-config:  direc-
            tive.  This option facilitates turning on/off the module without
            restarting/reloading Unbound.  Defaults to yes.

    ipsecmod-hook: <filename>
            Specifies  the  external  hook  that Unbound will call with sys-
            tem(3).  The file can be specified as an absolute/relative path.
            The file needs the proper permissions to be able to be  executed
            by the same user that runs Unbound.  It must be present when the
            IPsec module is defined in the module-config: directive.

    ipsecmod-strict: <yes or no>
            If  enabled  Unbound requires the external hook to return a suc-
            cess value of 0.  Failing to do so Unbound will reply with SERV-
            FAIL.  The A/AAAA answer will also not be cached.   Defaults  to
            no.

    ipsecmod-max-ttl: <seconds>
            Time to live maximum for A/AAAA cached records after calling the
            external hook.  Defaults to 3600.

    ipsecmod-ignore-bogus: <yes or no>
            Specifies  the  behaviour of Unbound when the IPSECKEY answer is
            bogus.  If set to yes, the hook will be called  and  the  A/AAAA
            answer  will  be returned to the client.  If set to no, the hook
            will not be called and the answer to the A/AAAA  query  will  be
            SERVFAIL.  Mainly used for testing.  Defaults to no.

    ipsecmod-allow: <domain>
            Allow the ipsecmod functionality for the domain so that the mod-
            ule  logic  will  be executed.  Can be given multiple times, for
            different domains.  If the option is not specified, all  domains
            are treated as being allowed (default).

    ipsecmod-whitelist: <domain>
            Alternate syntax for ipsecmod-allow.

Cache DB Module Options
    The  Cache DB module must be configured in the module-config: directive
    e.g., "validator cachedb iterator" and be compiled into the daemon with
    --enable-cachedb.  If this module is enabled and configured, the speci-
    fied backend database works as a second level cache: When Unbound  can-
    not  find an answer to a query in its built-in in-memory cache, it con-
    sults the specified backend.  If it finds a valid answer in  the  back-
    end,  Unbound uses it to respond to the query without performing itera-
    tive DNS resolution.  If Unbound cannot even  find  an  answer  in  the
    backend,  it  resolves the query as usual, and stores the answer in the
    backend.

    This module interacts with the serve-expired-* options and  will  reply
    with expired data if Unbound is configured for that.

    If  Unbound  was  built with --with-libhiredis on a system that has in-
    stalled the hiredis C client library of Redis, then the "redis" backend
    can be used.  This backend communicates with the specified Redis server
    over a TCP connection to store and retrieve cache data.  It can be used
    as a persistent and/or shared cache backend.  It should be  noted  that
    Unbound  never  removes  data  stored in the Redis server, even if some
    data have expired in terms of DNS TTL or the Redis  server  has  cached
    too  much  data;  if  necessary  the Redis server must be configured to
    limit the cache size, preferably with some kind of  least-recently-used
    eviction  policy.  Additionally, the redis-expire-records option can be
    used in order to set the relative DNS TTL of the message as timeout  to
    the Redis records; keep in mind that some additional memory is used per
    key  and  that  the expire information is stored as absolute Unix time-
    stamps in Redis (computer time must be stable).  This backend uses syn-
    chronous communication with the Redis server based  on  the  assumption
    that  the  communication  is  stable and sufficiently fast.  The thread
    waiting for a response from the Redis server cannot  handle  other  DNS
    queries.   Although  the  backend  has  the ability to reconnect to the
    server when the connection is closed unexpectedly and there is  a  con-
    figurable  timeout in case the server is overly slow or hangs up, these
    cases are assumed to be very rare.  If connection close or timeout hap-
    pens too often, Unbound will be effectively unusable with this backend.
    It&#39;s the administrator&#39;s responsibility to make the assumption hold.

    The cachedb: clause gives custom settings of the cache DB module.

    backend: <backend name>
            Specify the backend database name.  The default database is  the
            in-memory  backend  named  "testframe",  which, as the name sug-
            gests, is not of any practical use.  Depending on the build-time
            configuration, "redis" backend may also  be  used  as  described
            above.

    secret-seed: <"secret string">
            Specify a seed to calculate a hash value from query information.
            This  value  will be used as the key of the corresponding answer
            for the backend database and  can  be  customized  if  the  hash
            should  not  be predictable operationally.  If the backend data-
            base is shared by multiple Unbound instances, all instances must
            use the same secret seed.  This option defaults to "default".

    cachedb-no-store: <yes or no>
            If the backend should be read from, but  not  written  to.  This
            makes  this  instance not store dns messages in the backend. But
            if data is available it is retrieved. The default is no.

    cachedb-check-when-serve-expired: <yes or no>
            If enabled, the cachedb is checked before an expired response is
            returned.  When  serve-expired  is  enabled,  without  serve-ex-
            pired-client-timeout,  it then does not immediately respond with
            an expired response from cache, but  instead  first  checks  the
            cachedb for valid contents, and if so returns it. If the cachedb
            also  has no valid contents, the serve expired response is sent.
            If also serve-expired-client-timeout is enabled, the expired re-
            sponse is delayed until the timeout expires. Unless  the  lookup
            succeeds within the timeout. The default is yes.

    The following cachedb options are specific to the redis backend.

    redis-server-host: <server address or name>
            The  IP  (either  v6  or v4) address or domain name of the Redis
            server.  In general an IP address should be specified as  other-
            wise  Unbound  will have to resolve the name of the server every
            time it establishes a connection to the server.  This option de-
            faults to "127.0.0.1".

    redis-server-port: <port number>
            The TCP port number of the Redis server.  This  option  defaults
            to 6379.

    redis-server-path: <unix socket path>
            The  unix socket path to connect to the Redis server. Off by de-
            fault, and it can be set to "" to turn this  off.  Unix  sockets
            may have better throughput than the IP address option.

    redis-server-password: "<password>"
            The Redis AUTH password to use for the Redis server.  Only rele-
            vant  if  Redis is configured for client password authorisation.
            Off by default, and it can be set to "" to turn this off.

    redis-timeout: <msec>
            The period until when Unbound waits for a response from the  Re-
            dis  sever.   If this timeout expires Unbound closes the connec-
            tion, treats it as if the Redis server does  not  have  the  re-
            quested  data,  and  will  try  to re-establish a new connection
            later.  This option defaults to 100 milliseconds.

    redis-command-timeout: <msec>
            The timeout to use for Redis commands, in milliseconds.   If  0,
            it uses the redis-timeout value.  The default is 0.

    redis-connect-timeout: <msec>
            The timeout to use for Redis connection set up, in milliseconds.
            If 0, it uses the redis-timeout value.  The default is 0.

    redis-expire-records: <yes or no>
            If  Redis  record  expiration  is enabled.  If yes, Unbound sets
            timeout for Redis records so that Redis can evict keys that have
            expired automatically.  If Unbound is configured with  serve-ex-
            pired  and serve-expired-ttl is 0, this option is internally re-
            verted to "no".  Redis SETEX support is required for this option
            (Redis >= 2.0.0).  This option defaults to no.

    redis-logical-db: <logical database index>
            The logical database in Redis to use.  These  are  databases  in
            the  same Redis instance sharing the same configuration and per-
            sisted in the same RDB/AOF file.  If unsure about using this op-
            tion,  Redis  documentation  (https://redis.io/commands/select/)
            suggests  not  to use a single Redis instance for multiple unre-
            lated applications.  The default database in Redis  is  0  while
            other  logical  databases  need  to be explicitly SELECT&#39;ed upon
            connecting.  This option defaults to 0.

    redis-replica-server-host: <server address or name>
            The IP (either v6 or v4) address or domain  name  of  the  Redis
            replica server.  In general an IP address should be specified as
            otherwise  Unbound  will  have to resolve the name of the server
            every time it establishes a  connection  to  the  server.   This
            server  is  treated  as  a read-only replica server (https://re-
            dis.io/docs/management/replication/#read-only-replica).       If
            specified,  all  Redis  read  commands  will  go to this replica
            server, while the write commands will go  to  the  redis-server-
            host.  This option defaults to "" (disabled).

    redis-replica-server-port: <port number>
            The  TCP  port  number of the Redis replica server.  This option
            defaults to 6379.

    redis-replica-server-path: <unix socket path>
            The unix socket path to connect to the Redis server. Off by  de-
            fault,  and  it  can be set to "" to turn this off. Unix sockets
            may have better throughput than the IP address option.

    redis-replica-server-password: "<password>"
            The Redis AUTH password to use for  the  Redis  replica  server.
            Only  relevant if Redis is configured for client password autho-
            risation.  Off by default, and it can be set to "" to turn  this
            off.

    redis-replica-timeout: <msec>
            The  period until when Unbound waits for a response from the Re-
            dis replica sever.  If this timeout expires Unbound  closes  the
            connection,  treats  it  as if the Redis replica server does not
            have the requested data, and will try to re-establish a new con-
            nection later.  This option defaults to 100 milliseconds.

    redis-replica-command-timeout: <msec>
            The timeout to use for Redis replica commands, in  milliseconds.
            If  0,  it uses the redis-replica-timeout value.  The default is
            0.

    redis-replica-connect-timeout: <msec>
            The timeout to use for Redis replica connection set up, in  mil-
            liseconds.   If 0, it uses the redis-replica-timeout value.  The
            default is 0.

    redis-replica-logical-db: <logical database index>
            Same as redis-logical-db but for the Redis replica server.  This
            option defaults to 0.

DNSTAP Logging Options
    DNSTAP support, when compiled in by using --enable-dnstap,  is  enabled
    in  the  dnstap:  section.   This starts an extra thread (when compiled
    with threading) that writes the log information to the destination.  If
    Unbound is compiled without threading it does not spawn a  thread,  but
    connects per-process to the destination.

    dnstap-enable: <yes or no>
            If  dnstap  is enabled.  Default no.  If yes, it connects to the
            dnstap server and if any of the  dnstap-log-..-messages  options
            is enabled it sends logs for those messages to the server.

    dnstap-bidirectional: <yes or no>
            Use  frame streams in bidirectional mode to transfer DNSTAP mes-
            sages. Default is yes.

    dnstap-socket-path: <file name>
            Sets the unix socket file name for connecting to the server that
            is listening on that socket.  Default is "".

    dnstap-ip: <IPaddress[@port]>
            If "", the unix socket is used, if set with an IP address  (IPv4
            or IPv6) that address is used to connect to the server.

    dnstap-tls: <yes or no>
            Set  this  to  use  TLS  to  connect  to the server specified in
            dnstap-ip.  The default is yes.  If set to no, TCP  is  used  to
            connect to the server.

    dnstap-tls-server-name: <name of TLS authentication>
            The  TLS server name to authenticate the server with.  Used when
            dnstap-tls is enabled.  If "" it is ignored, default "".

    dnstap-tls-cert-bundle: <file name of cert bundle>
            The pem file with certs to verify the TLS server certificate. If
            "" the server default cert bundle is used, or the  windows  cert
            bundle on windows.  Default is "".

    dnstap-tls-client-key-file: <file name>
            The  client key file for TLS client authentication. If "" client
            authentication is not used.  Default is "".

    dnstap-tls-client-cert-file: <file name>
            The client cert file for TLS client authentication.  Default  is
            "".

    dnstap-send-identity: <yes or no>
            If enabled, the server identity is included in the log messages.
            Default is no.

    dnstap-send-version: <yes or no>
            If  enabled, the server version if included in the log messages.
            Default is no.

    dnstap-identity: <string>
            The identity to send with messages, if "" the hostname is  used.
            Default is "".

    dnstap-version: <string>
            The  version to send with messages, if "" the package version is
            used.  Default is "".

    dnstap-sample-rate: <number>
            The sample rate for log of messages, it logs only 1/N  messages.
            With  0  it  is disabled. Default is 0. This is useful in a high
            volume environment, where log functionality would otherwise  not
            be reliable. For example 10 would spend only 1/10th time on log-
            ging,  and  100 would only spend a hundredth of the time on log-
            ging.

    dnstap-log-resolver-query-messages: <yes or no>
            Enable to log resolver query messages.  Default  is  no.   These
            are messages from Unbound to upstream servers.

    dnstap-log-resolver-response-messages: <yes or no>
            Enable to log resolver response messages.  Default is no.  These
            are replies from upstream servers to Unbound.

    dnstap-log-client-query-messages: <yes or no>
            Enable  to log client query messages.  Default is no.  These are
            client queries to Unbound.

    dnstap-log-client-response-messages: <yes or no>
            Enable to log client response messages.  Default is  no.   These
            are responses from Unbound to clients.

    dnstap-log-forwarder-query-messages: <yes or no>
            Enable to log forwarder query messages.  Default is no.

    dnstap-log-forwarder-response-messages: <yes or no>
            Enable to log forwarder response messages.  Default is no.

Response Policy Zone Options
    Response  Policy Zones are configured with rpz:, and each one must have
    a name:. There can be multiple ones, by listing multiple  RPZ  clauses,
    each with a different name. RPZ clauses are applied in order of config-
    uration  and  any match from an earlier RPZ zone will terminate the RPZ
    lookup. Note that a PASSTHRU action is still considered a  match.   The
    respip module needs to be added to the module-config, e.g.: module-con-
    fig: "respip validator iterator".

    QNAME,  Response  IP  Address,  nsdname, nsip and clientip triggers are
    supported.  Supported actions are: NXDOMAIN,  NODATA,  PASSTHRU,  DROP,
    Local  Data,  tcp-only  and drop.  RPZ QNAME triggers are applied after
    local-zones and before auth-zones.

    The RPZ zone is a regular DNS zone formatted with a SOA start record as
    usual.  The items in the zone are entries, that specify what to act  on
    (the  trigger)  and  what to do (the action).  The trigger to act on is
    recorded in the name, the action to do  is  recorded  as  the  resource
    record.   The  names  all  end  in the zone name, so you could type the
    trigger names without a trailing dot in the zonefile.

    An example RPZ record, that answers example.com with NXDOMAIN
        example.com CNAME .

    The triggers are encoded in the name on the left
        name                          query name
        netblock.rpz-client-ip        client IP address
        netblock.rpz-ip               response IP address in the answer
        name.rpz-nsdname              nameserver name
        netblock.rpz-nsip             nameserver IP address
    The netblock is written as <netblocklen>.<ip address in reverse>.   For
    IPv6 use &#39;zz&#39; for &#39;::&#39;.  Specify individual addresses with scope length
    of 32 or 128.  For example, 24.10.100.51.198.rpz-ip is 198.51.100.10/24
    and 32.10.zz.db8.2001.rpz-ip is 2001:db8:0:0:0:0:0:10/32.

    The actions are specified with the record on the right
        CNAME .                      nxdomain reply
        CNAME *.                     nodata reply
        CNAME rpz-passthru.          do nothing, allow to continue
        CNAME rpz-drop.              the query is dropped
        CNAME rpz-tcp-only.          answer over TCP
        A 192.0.2.1                  answer with this IP address
    Other  records like AAAA, TXT and other CNAMEs (not rpz-..) can also be
    used to answer queries with that content.

    The RPZ zones can be configured in the config file with these  settings
    in the rpz: block.

    name: <zone name>
            Name of the authority zone.

    primary: <IP address or host name>
            Where  to  download a copy of the zone from, with AXFR and IXFR.
            Multiple primaries can be specified.  They are all tried if  one
            fails.   To  use  a nondefault port for DNS communication append
            &#39;@&#39; with the port number.  You can append a &#39;#&#39; and a name, then
            AXFR over TLS can be used and the  tls  authentication  certifi-
            cates  will  be  checked with that name.  If you combine the &#39;@&#39;
            and &#39;#&#39;, the &#39;@&#39; comes first.  If you point it  at  another  Un-
            bound  instance, it would not work because that does not support
            AXFR/IXFR for the zone, but if you used  url:  to  download  the
            zonefile  as  a  text file from a webserver that would work.  If
            you specify the hostname, you cannot use  the  domain  from  the
            zonefile,  because  it  may  not  have that when retrieving that
            data, instead use a plain IP address to avoid a circular  depen-
            dency on retrieving that IP address.

    master: <IP address or host name>
            Alternate syntax for primary.

    url: <url to zonefile>
            Where  to download a zonefile for the zone.  With http or https.
            An  example  for  the   url   is   "http://www.example.com/exam-
            ple.org.zone".   Multiple  url statements can be given, they are
            tried in turn.  If only urls are given the SOA refresh timer  is
            used  to  wait  for making new downloads.  If also primaries are
            listed, the primaries are first probed with UDP SOA  queries  to
            see if the SOA serial number has changed, reducing the number of
            downloads.   If  none  of the urls work, the primaries are tried
            with IXFR and AXFR.  For  https,  the  tls-cert-bundle  and  the
            hostname from the url are used to authenticate the connection.

    allow-notify: <IP address or host name or netblockIP/prefix>
            With  allow-notify  you  can specify additional sources of noti-
            fies.  When notified, the server attempts  to  first  probe  and
            then  zone  transfer.  If the notify is from a primary, it first
            attempts that primary.  Otherwise other primaries are attempted.
            If there are no primaries, but only urls, the file is downloaded
            when notified.  The primaries from primary: and url:  statements
            are allowed notify by default.

    zonefile: <filename>
            The  filename  where  the  zone is stored.  If not given then no
            zonefile is used.  If the file does not exist or is  empty,  Un-
            bound  will  attempt  to  fetch  zone data (eg. from the primary
            servers).

    rpz-action-override: <action>
            Always use this RPZ action for matching triggers from this zone.
            Possible action are: nxdomain, nodata, passthru, drop,  disabled
            and cname.

    rpz-cname-override: <domain>
            The CNAME target domain to use if the cname action is configured
            for rpz-action-override.

    rpz-log: <yes or no>
            Log all applied RPZ actions for this RPZ zone. Default is no.

    rpz-log-name: <name>
            Specify  a string to be part of the log line, for easy referenc-
            ing.

    rpz-signal-nxdomain-ra: <yes or no>
            Signal when a query is blocked by the RPZ with NXDOMAIN with  an
            unset  RA  flag.   This allows certain clients, like dnsmasq, to
            infer that the domain is externally blocked. Default is no.

    for-downstream: <yes or no>
            If enabled the zone is authoritatively answered for and  queries
            for the RPZ zone information are answered to downstream clients.
            This  is useful for monitoring scripts, that can then access the
            SOA information to check if the RPZ information is up  to  date.
            Default is no.

    tags: <list of tags>
            Limit the policies from this RPZ clause to clients with a match-
            ing  tag.  Tags  need to be defined in define-tag and can be as-
            signed to client  addresses  using  access-control-tag.  Enclose
            list  of  tags in quotes ("") and put spaces between tags. If no
            tags are specified the policies from this clause will be applied
            for all clients.

MEMORY CONTROL EXAMPLE
       In the example config settings below memory usage is reduced. Some ser-
       vice levels are lower, notable very large data and a high TCP load  are
       no longer supported. Very large data and high TCP loads are exceptional
       for the DNS.  DNSSEC validation is enabled, just add trust anchors.  If
       you do not have to worry about programs using more than 3 Mb of memory,
       the below example is not for you. Use the defaults to receive full ser-
       vice, which on BSD-32bit tops out at 30-40 Mb after heavy usage.

       # example settings that reduce memory usage
       server:
            num-threads: 1
            outgoing-num-tcp: 1 # this limits TCP service, uses less buffers.
            incoming-num-tcp: 1
            outgoing-range: 60  # uses less memory, but less performance.
            msg-buffer-size: 8192   # note this limits service, &#39;no huge stuff&#39;.
            msg-cache-size: 100k
            msg-cache-slabs: 1
            rrset-cache-size: 100k
            rrset-cache-slabs: 1
            infra-cache-numhosts: 200
            infra-cache-slabs: 1
            key-cache-size: 100k
            key-cache-slabs: 1
            neg-cache-size: 10k
            num-queries-per-thread: 30
            target-fetch-policy: "2 1 0 0 0 0"
            harden-large-queries: "yes"
            harden-short-bufsize: "yes"

FILES
       /usr/local/etc/unbound
              default Unbound working directory.

       /usr/local/etc/unbound
              default chroot(2) location.

       /usr/local/etc/unbound/unbound.conf
              Unbound configuration file.

       /usr/local/etc/unbound/unbound.pid
              default Unbound pidfile with process ID of the running daemon.

       unbound.log
              Unbound log file. default is to log to syslog(3).

SEE ALSO
       unbound(8), unbound-checkconf(8).

AUTHORS
       Unbound  was written by NLnet Labs. Please see CREDITS file in the dis-
       tribution for further details.

NLnet Labs                       Apr 24, 2025                  unbound.conf(5)
'><meta name=author content><link rel=canonical href=https://tnzzz.top/posts/%E6%96%87%E6%A1%A3/unbound/><link crossorigin=anonymous href=/assets/css/stylesheet.93f625d739f1d6a5c6f20c146bc6a8d26b233492b34b2220c54b12fd46a04ded.css integrity="sha256-k/Yl1znx1qXG8gwUa8ao0msjNJKzSyIgxUsS/UagTe0=" rel="preload stylesheet" as=style><link rel=icon href=https://tnzzz.top/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://tnzzz.top/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://tnzzz.top/favicon-32x32.png><link rel=apple-touch-icon href=https://tnzzz.top/apple-touch-icon.png><link rel=mask-icon href=https://tnzzz.top/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://tnzzz.top/posts/%E6%96%87%E6%A1%A3/unbound/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://tnzzz.top/posts/%E6%96%87%E6%A1%A3/unbound/"><meta property="og:site_name" content="明天吃什么？"><meta property="og:title" content="unbound 配置文件中文文档"><meta property="og:description" content='unbound.conf(5) unbound 1.23.0 unbound.conf(5) NAME unbound.conf - Unbound 配置文件. SYNOPSIS unbound.conf DESCRIPTION unbound.conf 用于配置 unbound(8)。文件格式包含属性和值。某些属性内部包含其他属性。表示法为：attribute: value。 注释以 # 开头，并持续到行尾。空行和行首的空白将被忽略。 可以使用 unbound-checkconf(8) 工具在使用前检查 unbound.conf。 EXAMPLE 下面显示了一个示例配置文件。将其复制到 /etc/unbound/unbound.conf 并使用以下命令启动服务器： $ unbound -c /etc/unbound/unbound.conf 大多数设置都是默认值。使用以下命令停止服务器： $ kill `cat /etc/unbound/unbound.pid` 下面是一个最小的配置文件。源代码发行版包含一个带有所有选项的 extensive example.conf 文件。 # unbound.conf(5) unbound(8) 的配置文件。 server: directory: "/etc/unbound" username: unbound # 确保 unbound 可以从 chroot 内部访问熵。 # 例如在 Linux 上使用这些命令（在 BSD 上，使用 devfs(8)）： # mount --bind -n /dev/urandom /etc/unbound/dev/urandom # 并且 mount --bind -n /dev/log /etc/unbound/dev/log chroot: "/etc/unbound" # logfile: "/etc/unbound/unbound.log" #取消注释以使用日志文件。 pidfile: "/etc/unbound/unbound.pid" # verbosity: 1 # 取消注释并增加以获取更多日志记录。 # 监听所有接口，应答来自本地子网的查询。 interface: 0.0.0.0 interface: ::0 access-control: 10.0.0.0/8 allow access-control: 2001:DB8::/64 allow FILE FORMAT 关键字之间必须有空格。属性关键字以冒号“:”结尾。 属性后面跟着一个值，或者包含它的属性（在这种情况下它被称为一个子句）。 子句可以在整个文件（或包含的文件）中重复，以将属性分组到同一个子句下。 可以使用 include: 指令包含文件。 它可以出现在任何地方，接受单个文件名作为参数。 处理将继续，就好像被包含文件中的文本被复制到配置文件的那个位置一样。 如果同时使用 chroot，则使用被包含文件的完整路径名有效； 如果守护进程启动的目录等于其 chroot/工作目录，或者在 include 语句之前用 directory: dir 指定了工作目录， 则被包含文件的相对路径名也有效。 可以使用通配符包含多个文件，请参阅 glob(7)。 对于更结构化的包含选项，可以使用 include-toplevel: 指令。 这将关闭当前活动的任何子句（如果有），并强制在被包含的文件中以及此指令之后使用子句。 Server Options 这些选项属于服务器配置中的`server:`部分。 verbosity: <number> 详细程度等级，0级表示无详细信息，仅显示错误。 1级提供操作信息。 2级则包含详细的操作信息，每条查询都有简短说明。 3级深入到查询层面，逐条输出查询信息。 4级揭示算法层面的信息。 5级记录缓存未命中时的客户端标识。 默认级别为1。详细程度也可通过命令行提升，详见unbound(8)手册。 statistics-interval: <seconds> 打印统计信息到日志的间隔秒数，针对每个线程。 设置为0或""以禁用此功能，默认情况下是禁用的。 直方图统计信息仅在统计间隔期间有回复发送时才会打印， 而请求列表统计信息则会在每个间隔打印（但可能为0）。 这是因为中位数计算需要存在数据。 statistics-cumulative: <yes or no> 若启用此选项，统计信息将自Unbound启动起累计， 且在记录统计后不清除统计计数器。默认设置为`no`。 extended-statistics: <yes or no> 若启用，将从unbound-control(8)打印扩展统计信息。 默认设置为`no`，因为跟踪更多统计信息需要时间。 计数器在unbound-control(8)中列出。 statistics-inhibit-zero: <yes or no> 若启用，值为0的选定扩展统计信息将被抑制 不会在unbound-control(8)中打印。这些包括 查询类型、查询类、查询操作码、回答rcodes（除了 NOERROR、FORMERR、SERVFAIL、NXDOMAIN、NOTIMPL、REFUSED）和RPZ 操作。默认设置为`yes`。 num-threads: <number> 创建用于服务客户端的线程数量。若无需多线程，请设置为1。 port: <port number> 服务器响应查询的端口号，默认为53。 interface: <ip address or interface name [@port]> 用于连接网络的接口。此接口用于监听来自客户端的查询， 并从中向客户端提供响应。可多次指定以在多个接口上工作。 若未指定，则默认监听本地主机。若使用接口名称而非IP地址， 则采用该接口上的所有IP地址列表。在重新加载（kill -HUP）时， 接口不会变更，仅重启时生效。可通过@端口号（接口与端口号间无空格）指定端口， 未指定时则使用默认端口（来自port设置）。 ip-address: <ip address or interface name [@port]> 与 interface 相同：（以便于与nsd.conf兼容）。 interface-automatic: <yes or no> 监听所有（当前及未来）接口上的所有地址， 检测UDP查询的源接口并将其复制到回复中。 这与ip-transparent非常相似，但此选项服务于所有接口， 而使用ip-transparent时，您可以选择Unbound在哪些（未来）接口上提供服务。 此功能尚处于实验阶段，需要您的操作系统支持特定的套接字选项。 默认值为`no`。 interface-automatic-ports: <string> 列出interface-automatic监听的端口号。 若为空，则默认监听默认端口。 端口号在字符串中以空格分隔，默认值为""。 此设置可用于让interface-automatic处理接口， 并通过在列表中包含正常端口号来监听该端口， 同时也可通过将HTTPS或DNS over TLS的端口号加入列表，实现对它们的监听。 outgoing-interface: <ip address or ip6 netblock> 用于连接网络的接口。 此接口用于向权威服务器发送查询并接收其回复。 可多次指定以在多个接口上工作。 若未指定，则默认使用所有接口。 您可以在`interface:`和`outgoing-interface:`行中指定相同的接口， 这些接口将同时用于两种目的。 为防止欺骗，出站查询会通过随机选择的出站接口发送。 若指定的是IPv6网段而非单个IPv6地址， 则外发的UDP查询将采用从该网段中随机选取的源地址，以应对欺骗攻击。 此功能要求该IPv6网段需路由至运行Unbound的主机， 并且操作系统需支持非特权非本地绑定（目前仅Linux支持）。 可通过多个`outgoing-interface:`选项指定多个网段， 但切勿同时指定单个IPv6地址与IPv6网段，否则随机化机制将失效。 建议结合`prefer-ip6: yes`使用，以提高选择IPv6域名服务器进行查询的可能性。 在Linux系统上，需执行以下两条命令， 以便利用`freebind`套接字选项接收指定IPv6网段的流量： `ip -6 addr add 你的网段/64 dev lo && ip -6 route add local 你的网段/64 dev lo`。 outgoing-range: <number> 要打开的端口数量。 每个线程可打开的文件描述符数量至少为1，默认值取决于编译选项。 较大的数值需要操作系统提供额外资源。 为了获得最佳性能，建议设置一个非常大的值，并利用libevent来实现这一目标。 outgoing-port-permit: <port number or range> 允许 Unbound 打开此端口或端口范围，用于发送查询。 允许更多的出站端口能增强抵御欺骗攻击的能力。 请确保这些端口不被其他守护进程占用。 默认情况下，仅使用 IANA 未分配的 1024 以上端口。 请提供一个端口号或“低-高”形式的范围，中间不要有空格。 `outgoing-port-permit` 和 `outgoing-port-avoid` 语句按照配置文件的顺序逐行处理， 将允许的端口加入并从允许的端口集合中减去避免的端口。 处理开始时，允许的端口集合包含非 IANA 分配的、高于 1024 的端口。 outgoing-port-avoid: <port number or range> 不允许Unbound打开此端口或端口范围用于发送查询。 使用此选项可确保Unbound不会占用其他守护进程所需的端口。 该端口在所有出站接口上均被避开，包括IPv4和IPv6。 默认情况下，仅使用IANA未分配的1024以上端口。 请提供一个端口号或“低-高”形式的范围，中间不要有空格。 outgoing-num-tcp: <number> 为每个线程分配的外发TCP缓冲区数量。 默认值为10。 若设置为0，或当do-tcp为“否”时，将不会向权威服务器发送TCP查询。 对于较大规模的部署，建议适当增加此值。 incoming-num-tcp: <number> 为每个线程分配的入站TCP缓冲区数量。 默认值为10。若设置为0，或当do-tcp为“否”时，将不会接受来自客户端的TCP查询。 对于较大规模的部署，建议适当增加此值。 edns-buffer-size: <number> 作为EDNS重组缓冲区大小通告的字节数。 此值用于通过UDP向对等方发送的数据报中。 实际缓冲区大小由msg-buffer-size决定（适用于TCP和UDP）。 请勿设置高于该值。默认值为1232，这是2020年DNS标志日的推荐值。 设置为512可以规避最严格的路径MTU问题，但被视为极端做法， 因为由此产生的TCP回退量过大（可能也适用于此解析器，建议调整出站TCP数量）。 max-udp-size: <number> 最大UDP响应大小（不适用于TCP响应）。 65536表示禁用UDP响应大小上限，始终采用客户端的选择。 建议值范围为512至4096。 默认值为1232，该默认值与edns-buffer-size的默认设置相同。 stream-wait-size: <number> 用于等待流缓冲区的最大字节数。默认值为4兆字节。 纯数字表示字节，可附加&#39;k&#39;、&#39;m&#39;或&#39;g&#39;分别表示千字节、兆字节或吉字节（1兆字节为1024*1024字节）。 由于TCP和TLS流会排队多个结果，这些缓冲区占用的内存总量不会超过此数值，否则将丢弃响应。 此设置用于管理服务器在高负载下的总内存使用量，同时每个连接上可排队的请求数量也受到限制， 额外的请求将在TCP缓冲区中等待。 msg-buffer-size: <number> 消息缓冲区的字节大小，默认设置为65552字节， 足以容纳64Kb的数据包，这是DNS消息的最大尺寸。 任何超过此大小的消息都无法发送或接收。 为了节省内存，可以减小此值，但某些对DNS数据的请求， 如针对大型资源记录的查询，可能会导致向客户端返回SERVFAIL（服务失败）响应。 msg-cache-size: <number> 消息缓存的大小字节数，默认值为4兆字节。 纯数字表示字节数，可附加&#39;k&#39;、&#39;m&#39;或&#39;g&#39;分别表示千字节、兆字节或吉字节（1兆字节等于1024*1024字节）。 msg-cache-slabs: <number> 消息缓存中的分片数量。分片通过减少线程间的锁争用来提升性能。 必须设置为2的幂次方。将其设置为接近CPU核心数的值是一个合理的估计。 num-queries-per-thread: <number> 每个线程同时处理的查询数量。若需服务的查询超出此限， 且无法通过竞争超时机制（参见jostle-timeout）移除已有查询，则新查询将被丢弃。 此举促使客户端在超时后重新发送请求，为服务器留出时间处理现有查询。 默认值依据编译选项而定，通常为512或1024。 jostle-timeout: <msec> 当服务器非常繁忙时使用的超时设置。该值通常设定为能确保一次往返权威服务器的时长。 若查询请求过多，则允许50%的查询完成执行，而另外50%若已超出其允许时间，则会被新到达的查询替换。 此机制旨在防止因慢查询或高查询率导致的服务拒绝。 默认值为200毫秒。 其效果是，对于耗时较长的查询，其每秒查询率（qps）大约为（每线程查询数/2）除以（此类长查询的平均时间）。 而对于短查询，其qps可达到（每线程查询数/2）除以（以整秒计的jostletimeout）， 默认情况下约为（1024/2）* 5 = 2560 qps每线程。 delay-close: <msec> 在UDP端口因超时被关闭前，额外延迟时间以毫秒计。 默认值为0，即不启用此功能。 此设置旨在防止来自上游（递归）服务器的延迟响应数据包撞击已关闭的端口， 从而触发各种关闭端口的计数器，例如1500毫秒。 当发生超时时，系统需要额外的套接字来检查数据包的ID和远程IP， 不符合条件的数据包将被计入无效数据包计数器。 udp-connect: <yes or no> 为UDP套接字执行连接操作，以减轻ICMP侧信道泄露风险。默认设置为`yes`。 unknown-server-time-limit: <msec> 等待未知服务器响应的毫秒时间。 若您处于较慢的卫星链路环境下，可适当增加此值，例如设为1128毫秒。 这样能避免因超时导致每次初始查询都需要重新发起。默认值为376毫秒。 discard-timeout: <msec> 递归请求被丢弃的等待时间，以毫秒计。 此举旨在防止大量回复堆积。 这些请求不会收到回复，工作项将继续递归。 如果启用了服务过期客户端超时，建议此值稍大一些。 建议值为1900毫秒。值为0则禁用此功能。默认值为1900毫秒。 wait-limit: <number> 每个IP地址可等待递归回复的数量。 这为每个IP地址设置了等待递归回复的速率限制，防止大量查询积压等待返回至单一目的地。 若值为0，则禁用等待限制。默认值为1000。 wait-limit-cookie: <number> 对于发送带有有效DNS Cookie查询的IP地址，可等待递归处理的回复数量。 由于Cookie验证了客户端地址，此限制可适当提高，默认值为10000。 wait-limit-netblock: <netblock> <number> 网段等待限制。若未指定，则采用默认的等待限制值。 系统会根据最具体的网段来确定限制，这对于为特定组、个人或服务器覆盖默认设置非常有用。 值为-1时，表示该网段无等待限制。 默认情况下，回环地址的等待限制网段为-1，即不受限，因为它与网络其他部分隔离，防止伪造数据包。 回环地址127.0.0.0/8和::1/128默认设置为-1。 wait-limit-cookie-netblock: <netblock> <number> 当查询带有DNS cookie时，针对网段的等待限制。 若未指定，则采用wait-limit-cookie的值。值为-1时，该网段无等待限制。 默认情况下，回环地址127.0.0.0/8和::1/128的等待限制设置为-1。 so-rcvbuf: <number> 如果非零，则设置SO_RCVBUF套接字选项，以在UDP端口53的入站查询上获取更多缓冲区空间。 这样，在繁忙服务器上的短暂流量高峰不会导致丢包（参见netstat -su中的计数器）。 默认值为0（使用系统值）。否则，指定请求的字节数，在繁忙服务器上可尝试“4m”。 操作系统会设定一个上限， 在Linux上，Unbound需要root权限才能突破此限制，或者管理员可以使用sysctl net.core.rmem_max进行调整。 在BSD系统中，需修改/etc/sysctl.conf中的kern.ipc.maxsockbuf。 在OpenBSD上，需更改头文件并重新编译内核。 在Solaris上，使用ndd -set /dev/udp udp_max_buf 8388608进行设置。 so-sndbuf: <number> 若非0，则设置SO_SNDBUF套接字选项，以在UDP端口53的对外查询中获取更多缓冲区空间。 这对于非常繁忙的服务器而言，能有效应对应答流量的突发高峰， 否则可能会记录“发送：资源暂时不可用”的错误，且通过netstat -su也能观察到缓冲区溢出的情况。 默认值为0（使用系统设定值）。指定请求的字节数，在极其繁忙的服务器上可尝试“4m”。 操作系统会设定一个上限， 在Linux上，Unbound需要root权限才能突破此限制，或者管理员可以使用sysctl net.core.wmem_max进行调整。 在BSD和Solaris系统中，更改方式与so-rcvbuf类似。 so-reuseport: <yes or no> 若选择`yes`，则为每个线程开启专用的监听套接字以接收查询， 并尝试在每个套接字上设置SO_REUSEPORT选项。 此举可能更均匀地分配查询至各线程。 默认设置为`yes`。 在Linux系统中，此功能支持内核版本>=3.9。 其他系统如FreeBSD、OSX也可能适用。您可在任何平台及内核上启用此功能， 系统将尝试打开端口并在编译时若该选项可用则传递之； 若成功则使用，失败则静默继续（除非详细级别为3），不采用该选项。 在极高负载情况下，关闭此选项可能更利于查询的均匀分配，此现象在Linux系统（4.4.x版本）中有报告。 ip-transparent: <yes or no> 如果是，则在Unbound监听入站流量的套接字上使用IP_TRANSPARENT套接字选项。 默认情况下为`no`。此选项允许您绑定到非本地接口， 例如，对于将来会存在但目前不存在的IP地址，配合主机故障转移配置使用。 这与interface-automatic非常相似，但后者服务于所有接口， 而通过此选项，您可以选择Unbound将在哪些（未来）接口上提供服务。 在某些系统上，此选项需要Unbound以root权限启动。 在FreeBSD系统上，该选项使用IP_BINDANY，在OpenBSD系统上则使用SO_BINDANY。 ip-freebind: <yes or no> 如果是，则在监听未绑定地址的套接字上使用IP_FREEBIND选项。 默认情况下为`no`。此选项允许您绑定到非本地或不存在的IP地址，例如当网络接口或IP地址不可用时。 该选项仅存在于Linux系统中，同时也可使用类似的ip-transparent选项。 ip-dscp: <number> 传出IP数据包头中区分服务字段（DS）内的区分服务代码点（DSCP）值。 该字段取代了过时的IPv4服务类型字段及IPv6流量类别字段。 rrset-cache-size: <number> RRset缓存的大小以字节数计，默认值为4兆字节。 纯数字表示字节，可附加&#39;k&#39;、&#39;m&#39;或&#39;g&#39;分别表示千字节、兆字节或吉字节（1兆字节等于1024*1024字节）。 rrset-cache-slabs: <number> RRset缓存中的slab数量。slab通过减少线程间的锁争用来提升性能。必须设置为2的幂次方。 cache-max-ttl: <seconds> RRsets和消息在缓存中的最大生存时间（TTL），默认值为86400秒（1天）。 当TTL到期时，缓存项即视为过期。 可通过设置更低的TTL值，强制解析器频繁查询数据，而不依赖（过大的）TTL值。 下游客户端同样会看到这一较低的TTL设置。 cache-min-ttl: <seconds> RRsets和消息在缓存中的最小生存时间。默认值为0。 若启用最小值，数据将被缓存超过域名所有者预期的时间，从而减少查询次数以查找数据。 设置为零确保缓存中的数据符合域名所有者的意图， 而较高的值，尤其是超过一小时左右，可能导致缓存数据与实际数据不再匹配，从而引发问题。 cache-max-negative-ttl: <seconds> 负响应的生存时间上限，这些响应在授权部分包含一个时间受限的SOA记录。 默认值为3600秒。此设置适用于nxdomain（域名不存在）和nodata（无数据）类型的应答。 cache-min-negative-ttl: <seconds> 负面响应的最小生存时间，这些响应在权威部分包含一个有时间限制的SOA记录。 默认值为0（禁用）。如果此功能被禁用且配置了cache-min-ttl，则后者将生效。 在这种情况下，您可以将其设置为1以遵循上游的TTL。 此设置适用于nxdomain和nodata类型的应答。 infra-host-ttl: <seconds> 主机缓存中条目的生存时间。该缓存包含往返时间、故障状态及EDNS支持信息。默认值为900。 infra-cache-slabs: <number> 基础设施缓存中的slab数量。slab通过减少线程间的锁争用来提升性能，必须设置为2的幂次方。 infra-cache-numhosts: <number> 缓存信息的主机数量，默认值为10000。 infra-cache-min-rtt: <msec> 基础设施缓存中动态重传超时计算的下限值，默认设置为50毫秒。 若使用需更长时间进行递归名称解析的转发器，请适当增加此值。 infra-cache-max-rtt: <msec> 基础设施缓存中动态重传超时计算的上限值，默认设置为2分钟。 infra-keep-probing: <yes or no> 若启用此功能，服务器将持续对已宕机的主机进行探测，采用一次一探的模式。 默认设置为`no`。 对于已宕机的主机，例如在单次探测期间未响应者，将被标记为宕机状态， 并可能需要等待 infra-host-ttl 时间后才会再次被探测。 define-tag: <"list of tags"> 定义可与本地区域（local-zone）和访问控制（access-control）一同使用的标签。 将列表用引号（""）括起，并在标签之间留出空格。 do-ip4: <yes or no> 启用或禁用是否响应或发起ip4查询。默认设置为`yes`。 do-ip6: <yes or no> 启用或禁用是否响应或发起IPv6查询。默认设置为`yes`。 若禁用，则不会在IPv6上响应查询，也不会通过IPv6向互联网域名服务器发送查询。 此选项可用于关闭IPv6传输以发送DNS流量，但不会影响DNS流量的内容，其中可能包含IPv4和IPv6地址。 prefer-ip4: <yes or no> 若启用此选项，将优先使用IPv4传输向互联网域名服务器发送DNS查询。 默认设置为`no`。 当服务器所在的IPv6网段（整个/64）并非由单一运营商所有， 且该网段/64的信誉存在问题时，此选项尤为有用， 此时使用IPv4可利用上游服务器已有的IPv4过滤机制。 prefer-ip6: <yes or no> 若启用，将优先使用IPv6传输向互联网域名服务器发送DNS查询。默认设置为否。 do-udp: <yes or no> 启用或禁用是否响应或发起UDP查询。默认设置为`yes`。 do-tcp: <yes or no> 启用或禁用TCP查询的应答与发起，默认设置为`yes`。 tcp-mss: <number> 服务器响应查询时，TCP套接字的最大段大小（MSS）。 设置低于以太网常见MSS的值（例如1220）可解决路径MTU问题。 需注意，并非所有平台都支持通过套接字选项设置MSS（TCP_MAXSEG）。 默认情况下，MSS由接口MTU及服务器与客户端之间的协商决定，采用系统默认值。 outgoing-tcp-mss: <number> TCP套接字用于发出查询（从Unbound到其他服务器）的最大段大小（MSS）。 设置低于以太网常见MSS的值（例如1220）可解决路径MTU问题。 需要注意的是，并非所有平台都支持通过套接字选项设置MSS（TCP_MAXSEG）。 默认情况下，MSS由接口MTU及Unbound与其他服务器之间的协商决定，采用系统默认值。 tcp-idle-timeout: <msec> Unbound在TCP连接上等待查询的时长，若超时则关闭连接。 此选项默认值为30000毫秒。 当空闲的入站TCP缓冲区数量低于配置总数的50%时，该选项值会逐步降低： 首先降至配置值的1%，若空闲缓冲区进一步低于总数的35%，则降至配置值的0.2%， 最终若空闲缓冲区低于总数的20%，则降至0。 无论采用何种选项值，最小超时时间均保持为200毫秒。 若启用了edns-tcp-keepalive，此设置将被edns-tcp-keepalive-timeout覆盖。 tcp-reuse-timeout: <msec> Unbound 期间将保持与权威服务器的 TCP 持久连接开启。此选项默认值为 60000 毫秒。 max-reuse-tcp-queries: <number> 在持久TCP连接上可发送的最大查询数量，此选项默认设置为200次查询。 tcp-auth-query-timeout: <number> TCP查询认证服务器的超时时间，以毫秒为单位。此选项默认值为3000毫秒。 edns-tcp-keepalive: <yes or no> 启用或禁用EDNS TCP保持连接功能。默认设置为`no`。 edns-tcp-keepalive-timeout: <msec> 当启用edns-tcp-keepalive时，此设置将覆盖tcp-idle-timeout。 若客户端支持EDNS TCP保持连接选项，Unbound会向客户端发送超时值， 以促使客户端在服务器超时前关闭连接。 此选项默认值为120000毫秒。 sock-queue-timeout: <sec> 在套接字缓冲区中等待过久的UDP查询可被丢弃。 默认值为0，即禁用此功能。 时间以秒为单位设置，3秒可能是一个合适的值，用于忽略那些客户端可能已不再需要回复的旧查询。 这种情况可能发生在主机暂时无法处理查询时，例如Unbound未运行，之后又重新启用。 该功能利用了时间戳套接字选项。 tcp-upstream: <yes or no> 启用或禁用上游查询是否仅使用TCP进行传输。 默认设置为`no`。在隧道场景中非常有用。 如果设置为否，您可以通过分别使用forward-tcp-upstream或stub-tcp-upstream， 仅为选定的转发区域或存根区域指定TCP传输。 udp-upstream-without-downstream: <yes or no> 即使do-udp设置为否，也启用UDP上行。 默认情况下为否，此设置不会改变任何现有配置。 对于TLS服务提供商而言，若希望禁止UDP下行但需通过UDP获取上行数据，此功能尤为实用。 tls-upstream: <yes or no> 启用或禁用上游查询是否仅使用TLS进行传输。 默认值为`no`。在隧道场景中非常有用。 TLS包含以TCP线格式传输的纯DNS数据。 另一台服务器必须支持此功能（参见tls-service-key）。 如果启用此选项，还需配置tls-cert-bundle或使用tls-win-cert、tls-system-cert加载CA证书， 否则连接无法进行身份验证。 此选项为所有上游查询启用TLS，但如果不设置此选项， 可以通过forward-tls-upstream为特定转发区域单独配置TLS， 同样适用于stub-tls-upstream。如果启用了tls-upstream选项， 则对所有转发和存根区域生效，此时forward-tls-upstream和stub-tls-upstream选项将被忽略， 视为已设置为`yes`。 ssl-upstream: <yes or no> tls-upstream 的替代语法。若配置文件中两者均存在，则以最后一项为准。 tls-service-key: <file> 若启用此功能，服务器将在通过tls-port或https-port隐式或显式标记的TCP端口上 提供DNS-over-TLS或DNS-over-HTTPS服务。 配置文件必须包含TLS会话的私钥，公钥证书则位于tls-service-pem文件中，且若指定了tls-service-key， 也必须同时指定。 默认值为空，即关闭状态。 启用或禁用此服务需重启服务器（仅重载配置不够），因为密钥读取需在持有root权限及chroot（如有）之前进行。 通过tls-port:和https-port:隐式或显式启用的端口不提供常规的DNS TCP服务。 Unbound需编译时包含libnghttp2以支持DNS-over-HTTPS。 ssl-service-key: <file> tls-service-key 的替代语法。 tls-service-pem: <file> 用于TLS服务的公钥证书pem文件。默认值为""，表示关闭。 ssl-service-pem: <file> tls-service-pem 的替代语法。 tls-port: <number> 提供TCP TLS服务的端口号，默认为853，只有配置了该端口号作为@number的接口才能获得TLS服务。 ssl-port: <number> tls端口的替代语法。 tls-cert-bundle: <file> 若为空或""，则不使用任何文件。 请将其设置为证书包文件，例如"/etc/pki/tls/certs/ca-bundle.crt"。 这些证书用于验证与外部对等方建立的连接，如认证区域URL及DNS over TLS连接。 该文件在启动时、权限降级和chroot之前被读取。 ssl-cert-bundle: <file> tls-cert-bundle 的替代语法。 tls-win-cert: <yes or no> 将系统证书添加到认证所需的证书包中。 若无证书包，则仅使用这些证书。 默认情况下不启用此功能。 在Windows系统上，此选项会使用证书存储中的证书。 在其他系统上，请使用`tls-cert-bundle`选项来启用系统证书。 tls-system-cert: <yes or no> 此设置与tls-win-cert设置相同，只是名称不同，因为它并非专为Windows设计。 tls-additional-port: <portnr> 将端口号列为tls-additional-port，并在定义接口时（例如使用@port后缀）， 作为此端口号，它们将提供DNS over TLS服务。 可列出多个，每个端口号单独一行声明。 tls-session-ticket-keys: <file> 若非空，则列出包含80字节随机内容的文件， 这些文件用于为使用Unbound服务器的客户端执行TLS会话恢复。 这些文件内含有TLS会话票据的密钥。 首个密钥用于加密和解密TLS会话票据，其余密钥仅用于解密。 通过生成新的首个文件，并在其后暂时保留旧文件以允许解密，可以实现密钥的轮换。 待客户端不再使用旧密钥后，即可移除旧密钥。 创建此类文件的一种方法是使用命令`dd if=/dev/random bs=1 count=80 of=ticket.dat`。 若需创建第二个密钥，其前16字节应与旧密钥不同，这部分用于标识密钥。 随后是32字节的随机数据作为AES密钥，再接着32字节的随机数据作为HMAC密钥。 tls-ciphers: <string with cipher list> 设置服务TLS时允许的加密套件列表。使用""表示默认值，且此为默认设置。 tls-ciphersuites: <string with ciphersuites list> 设置服务TLS时允许的加密套件列表，适用于较新的TLS 1.3连接。 使用""表示采用默认值，这也是默认设置。 pad-responses: <yes or no> 若启用此功能，包含EDNS填充选项的TLS服务查询将导致响应被填充至最接近pad-responses-block-size指定大小的倍数。默认设置为`yes`。 pad-responses-block-size: <number> 用于填充通过TLS服务的响应的块大小。仅对填充查询的响应进行填充。默认值为468。 pad-queries: <yes or no> 若启用此功能，所有通过TLS上游发送的查询将被填充至最接近pad-queries-block-size指定大小的倍数。 默认设置为`yes`。 pad-queries-block-size: <number> 用于填充通过TLS上游发送的查询的块大小，默认值为128。 tls-use-sni: <yes or no> 启用或禁用在TLS连接上发送SNI扩展。默认值为`yes`。更改此值需重新加载配置。 https-port: <number> 提供DNS-over-HTTPS服务的端口号，默认443，只有配置了该端口号作为@number的接口才能获得HTTPS服务。 http-endpoint: <endpoint string> 提供DNS-over-HTTPS服务的HTTP端点，默认为"/dns-query"。 http-max-streams: <number of streams> 用于DNS-over-HTTPS连接的HTTP/2 SETTINGS帧中SETTINGS_MAX_CONCURRENT_STREAMS参数的数值，默认设置为100。 http-query-buffer-size: <size in bytes> 所有HTTP/2查询缓冲区合并使用的最大字节数。 这些缓冲区包含等待请求流完成的（部分）DNS查询。 对于超出此限制的流，将发送RST_STREAM帧。 默认值为4兆字节。纯数字表示字节，可附加&#39;k&#39;、&#39;m&#39;或&#39;g&#39;分别表示千字节、兆字节或吉字节（1兆字节等于1024*1024字节）。 http-response-buffer-size: <size in bytes> 所有HTTP/2响应缓冲区合并使用的最大字节数。 这些缓冲区包含等待写回客户端的DNS响应。 对于超出此限制的流，将发送RST_STREAM帧。默认值为4兆字节。 纯数字表示字节，可附加&#39;k&#39;、&#39;m&#39;或&#39;g&#39;分别表示千字节、兆字节或吉字节（1兆字节等于1024*1024字节）。 http-nodelay: <yes or no> 在用于提供DNS-over-HTTPS服务的套接字上设置TCP_NODELAY选项。若该选项不可用，则忽略。默认值为`yes`。 http-notls-downstream: <yes or no> 禁用下游DNS-over-HTTP连接的TLS使用。适用于本地后端服务器。默认设置为`no`。 proxy-protocol-port: <portnr> 将端口号列为代理协议端口（proxy-protocol-port）， 并在定义接口时，如使用@port后缀，指定为此端口号， 这些接口将支持并预期接收PROXYv2协议。 在此情况下，代理地址仅用于网络通信及初始的访问控制列表（ACL，检查代理本身是否被配置拒绝）。 随后，被代理的地址（如有）将作为真实客户端地址， 并在日志记录、ACL、DNSTAP、RPZ及IP限速等适用场景中使用。 PROXYv2协议支持UDP和TCP/TLS监听接口，但在DoH、DoQ或DNSCrypt监听接口上不支持PROXYv2。 可列出多个端口，每个端口单独一行声明。 quic-port: <number> The port number on which to provide DNS-over-QUIC service, de- fault 853, only interfaces configured with that port number as @number get the QUIC service. The interface uses QUIC for the UDP traffic on that port number. quic-size: <size in bytes> Maximum number of bytes for all QUIC buffers and data combined. Default is 8 megabytes. A plain number is in bytes, append &#39;k&#39;, &#39;m&#39; or &#39;g&#39; for kilobytes, megabytes or gigabytes (1024*1024 bytes in a megabyte). New connections receive connection refused when the limit is exceeded. New streams are reset when the limit is exceeded. use-systemd: <yes or no> Enable or disable systemd socket activation. Default is no. do-daemonize: <yes or no> Enable or disable whether the Unbound server forks into the background as a daemon. Set the value to no when Unbound runs as systemd service. Default is yes. tcp-connection-limit: <IP netblock> <limit> Allow up to limit simultaneous TCP connections from the given netblock. When at the limit, further connections are accepted but closed immediately. This option is experimental at this time. access-control: <IP netblock> <action> Specify treatment of incoming queries from their originating IP address. Queries can be allowed to have access to this server that gives DNS answers, or refused, with other actions possible. The IP address range can be specified as a netblock, it is pos- sible to give the statement several times in order to specify the treatment of different netblocks. The netblock is given as an IP4 or IP6 address with /size ap- pended for a classless network block. The action can be deny, refuse, allow, allow_setrd, allow_snoop, allow_cookie, deny_non_local or refuse_non_local. The most specific netblock match is used, if none match refuse is used. The order of the access-control statements therefore does not matter. The deny action stops queries from hosts from that netblock. The refuse action stops queries too, but sends a DNS rcode RE- FUSED error message back. The allow action gives access to clients from that netblock. It gives only access for recursion clients (which is what almost all clients need). Nonrecursive queries are refused. The allow action does allow nonrecursive queries to access the local-data that is configured. The reason is that this does not involve the Unbound server recursive lookup algorithm, and sta- tic data is served in the reply. This supports normal opera- tions where nonrecursive queries are made for the authoritative data. For nonrecursive queries any replies from the dynamic cache are refused. The allow_setrd action ignores the recursion desired (RD) bit and treats all requests as if the recursion desired bit is set. Note that this behavior violates RFC 1034 which states that a name server should never perform recursive service unless asked via the RD bit since this interferes with trouble shooting of name servers and their databases. This prohibited behavior may be useful if another DNS server must forward requests for spe- cific zones to a resolver DNS server, but only supports stub do- mains and sends queries to the resolver DNS server with the RD bit cleared. The allow_snoop action gives nonrecursive access too. This give both recursive and non recursive access. The name allow_snoop refers to cache snooping, a technique to use nonrecursive queries to examine the cache contents (for malicious acts). However, nonrecursive queries can also be a valuable debugging tool (when you want to examine the cache contents). In that case use allow_snoop for your administration host. The allow_cookie action allows access only to UDP queries that contain a valid DNS Cookie as specified in RFC 7873 and RFC 9018, when the answer-cookie option is enabled. UDP queries containing only a DNS Client Cookie and no Server Cookie, or an invalid DNS Cookie, will receive a BADCOOKIE response including a newly generated DNS Cookie, allowing clients to retry with that DNS Cookie. The allow_cookie action will also accept re- quests over stateful transports, regardless of the presence of an DNS Cookie and regardless of the answer-cookie setting. UDP queries without a DNS Cookie receive REFUSED responses with the TC flag set, that may trigger fall back to TCP for those clients. By default only localhost (the 127.0.0.0/8 IP netblock, not the loopback interface) is implicitly allowed, the rest is refused. The default is refused, because that is protocol-friendly. The DNS protocol is not designed to handle dropped packets due to policy, and dropping may result in (possibly excessive) retried queries. The deny_non_local and refuse_non_local settings are for hosts that are only allowed to query for the authoritative local-data, they are not allowed full recursion but only the static data. With deny_non_local, messages that are disallowed are dropped, with refuse_non_local they receive error code REFUSED. access-control-tag: <IP netblock> <"list of tags"> Assign tags to access-control elements. Clients using this ac- cess control element use localzones that are tagged with one of these tags. Tags must be defined in define-tags. Enclose list of tags in quotes ("") and put spaces between tags. If ac- cess-control-tag is configured for a netblock that does not have an access-control, an access-control element with action allow is configured for this netblock. access-control-tag-action: <IP netblock> <tag> <action> Set action for particular tag for given access control element. If you have multiple tag values, the tag used to lookup the ac- tion is the first tag match between access-control-tag and lo- cal-zone-tag where "first" comes from the order of the define- tag values. access-control-tag-data: <IP netblock> <tag> <"resource record string"> Set redirect data for particular tag for given access control element. access-control-view: <IP netblock> <view name> Set view for given access control element. interface-action: <ip address or interface name [@port]> <action> Similar to access-control: but for interfaces. The action is the same as the ones defined under access-con- trol:. Interfaces are refused by default. By default only lo- calhost (the 127.0.0.0/8 IP netblock, not the loopback inter- face) is implicitly allowed through the default access-control: behavior. This also means that any attempt to use the inter- face-*: options for the loopback interface will not work as they will be overridden by the implicit default "access-control: 127.0.0.0/8 allow" option. Note that the interface needs to be already specified with in- terface: and that any access-control*: setting overrides all in- terface-*: settings for targeted clients. interface-tag: <ip address or interface name [@port]> <"list of tags"> Similar to access-control-tag: but for interfaces. Note that the interface needs to be already specified with in- terface: and that any access-control*: setting overrides all in- terface-*: settings for targeted clients. interface-tag-action: <ip address or interface name [@port]> <tag> <ac- tion> Similar to access-control-tag-action: but for interfaces. Note that the interface needs to be already specified with in- terface: and that any access-control*: setting overrides all in- terface-*: settings for targeted clients. interface-tag-data: <ip address or interface name [@port]> <tag> <"re- source record string"> Similar to access-control-tag-data: but for interfaces. Note that the interface needs to be already specified with in- terface: and that any access-control*: setting overrides all in- terface-*: settings for targeted clients. interface-view: <ip address or interface name [@port]> <view name> Similar to access-control-view: but for interfaces. Note that the interface needs to be already specified with in- terface: and that any access-control*: setting overrides all in- terface-*: settings for targeted clients. chroot: <directory> If chroot is enabled, you should pass the configfile (from the commandline) as a full path from the original root. After the chroot has been performed the now defunct portion of the config file path is removed to be able to reread the config after a re- load. All other file paths (working dir, logfile, roothints, and key files) can be specified in several ways: as an absolute path relative to the new root, as a relative path to the working di- rectory, or as an absolute path relative to the original root. In the last case the path is adjusted to remove the unused por- tion. The pidfile can be either a relative path to the working direc- tory, or an absolute path relative to the original root. It is written just prior to chroot and dropping permissions. This al- lows the pidfile to be /var/run/unbound.pid and the chroot to be /var/unbound, for example. Note that Unbound is not able to re- move the pidfile after termination when it is located outside of the chroot directory. Additionally, Unbound may need to access /dev/urandom (for en- tropy) from inside the chroot. If given a chroot is done to the given directory. The chroot is by default set to "/usr/local/etc/unbound". If you give "" no chroot is performed. username: <name> If given, after binding the port the user privileges are dropped. Default is "unbound". If you give username: "" no user change is performed. If this user is not capable of binding the port, reloads (by signal HUP) will still retain the opened ports. If you change the port number in the config file, and that new port number re- quires privileges, then a reload will fail; a restart is needed. directory: <directory> Sets the working directory for the program. Default is "/usr/lo- cal/etc/unbound". On Windows the string "%EXECUTABLE%" tries to change to the directory that unbound.exe resides in. If you give a server: directory: dir before include: file statements then those includes can be relative to the working directory. logfile: <filename> If "" is given, logging goes to stderr, or nowhere once daemo- nized. The logfile is appended to, in the following format: [seconds since 1970] unbound[pid:tid]: type: message. If this option is given, the use-syslog is option is set to "no". The logfile is reopened (for append) when the config file is reread, on SIGHUP. use-syslog: <yes or no> Sets Unbound to send log messages to the syslogd, using sys- log(3). The log facility LOG_DAEMON is used, with identity "un- bound". The logfile setting is overridden when use-syslog is turned on. The default is to log to syslog. log-identity: <string> If "" is given (default), then the name of the executable, usu- ally "unbound" is used to report to the log. Enter a string to override it with that, which is useful on systems that run more than one instance of Unbound, with different configurations, so that the logs can be easily distinguished against. log-time-ascii: <yes or no> Sets logfile lines to use a timestamp in UTC ascii. Default is no, which prints the seconds since 1970 in brackets. No effect if using syslog, in that case syslog formats the timestamp printed into the log files. log-time-iso: <yes or no> Log time in ISO8601 format, if log-time-ascii: yes is also set. Default is no. log-queries: <yes or no> Prints one line per query to the log, with the log timestamp and IP address, name, type and class. Default is no. Note that it takes time to print these lines which makes the server (signifi- cantly) slower. Odd (nonprintable) characters in names are printed as &#39;?&#39;. log-replies: <yes or no> Prints one line per reply to the log, with the log timestamp and IP address, name, type, class, return code, time to resolve, from cache and response size. Default is no. Note that it takes time to print these lines which makes the server (signifi- cantly) slower. Odd (nonprintable) characters in names are printed as &#39;?&#39;. log-tag-queryreply: <yes or no> Prints the word &#39;query&#39; and &#39;reply&#39; with log-queries and log-replies. This makes filtering logs easier. The default is off (for backwards compatibility). log-destaddr: <yes or no> Prints the destination address, port and type in the log-replies output. This disambiguates what type of traffic, eg. udp or tcp, and to what local port the traffic was sent to. log-local-actions: <yes or no> Print log lines to inform about local zone actions. These lines are like the local-zone type inform prints out, but they are also printed for the other types of local zones. log-servfail: <yes or no> Print log lines that say why queries return SERVFAIL to clients. This is separate from the verbosity debug logs, much smaller, and printed at the error level, not the info level of debug info from verbosity. pidfile: <filename> The process id is written to the file. Default is "/usr/lo- cal/etc/unbound/unbound.pid". So, kill -HUP `cat /usr/local/etc/unbound/unbound.pid` triggers a reload, kill -TERM `cat /usr/local/etc/unbound/unbound.pid` gracefully terminates. root-hints: <filename> Read the root hints from this file. Default is nothing, using builtin hints for the IN class. The file has the format of zone files, with root nameserver names and addresses only. The de- fault may become outdated, when servers change, therefore it is good practice to use a root-hints file. hide-identity: <yes or no> If enabled id.server and hostname.bind queries are refused. identity: <string> Set the identity to report. If set to "", the default, then the hostname of the server is returned. hide-version: <yes or no> If enabled version.server and version.bind queries are refused. version: <string> Set the version to report. If set to "", the default, then the package version is returned. hide-http-user-agent: <yes or no> If enabled the HTTP header User-Agent is not set. Use with cau- tion as some webserver configurations may reject HTTP requests lacking this header. If needed, it is better to explicitly set the http-user-agent below. http-user-agent: <string> Set the HTTP User-Agent header for outgoing HTTP requests. If set to "", the default, then the package name and version are used. nsid: <string> Add the specified nsid to the EDNS section of the answer when queried with an NSID EDNS enabled packet. As a sequence of hex characters or with ascii_ prefix and then an ascii string. hide-trustanchor: <yes or no> If enabled trustanchor.unbound queries are refused. target-fetch-policy: <"list of numbers"> Set the target fetch policy used by Unbound to determine if it should fetch nameserver target addresses opportunistically. The policy is described per dependency depth. The number of values determines the maximum dependency depth that Unbound will pursue in answering a query. A value of -1 means to fetch all targets opportunistically for that dependency depth. A value of 0 means to fetch on demand only. A positive value fetches that many targets opportunistically. Enclose the list between quotes ("") and put spaces between num- bers. The default is "3 2 1 0 0". Setting all zeroes, "0 0 0 0 0" gives behaviour closer to that of BIND 9, while setting "-1 -1 -1 -1 -1" gives behaviour rumoured to be closer to that of BIND 8. harden-short-bufsize: <yes or no> Very small EDNS buffer sizes from queries are ignored. Default is yes, as described in the standard. harden-large-queries: <yes or no> Very large queries are ignored. Default is no, since it is legal protocol wise to send these, and could be necessary for opera- tion if TSIG or EDNS payload is very large. harden-glue: <yes or no> Will trust glue only if it is within the servers authority. De- fault is yes. harden-unverified-glue: <yes or no> Will trust only in-zone glue. Will try to resolve all out of zone (<unverfied>) glue. Will fallback to the original glue if unable to resolve. Default is no. harden-dnssec-stripped: <yes or no> Require DNSSEC data for trust-anchored zones, if such data is absent, the zone becomes bogus. If turned off, and no DNSSEC data is received (or the DNSKEY data fails to validate), then the zone is made insecure, this behaves like there is no trust anchor. You could turn this off if you are sometimes behind an intrusive firewall (of some sort) that removes DNSSEC data from packets, or a zone changes from signed to unsigned to badly signed often. If turned off you run the risk of a downgrade at- tack that disables security for a zone. Default is yes. harden-below-nxdomain: <yes or no> From RFC 8020 (with title "NXDOMAIN: There Really Is Nothing Un- derneath"), returns nxdomain to queries for a name below another name that is already known to be nxdomain. DNSSEC mandates no- error for empty nonterminals, hence this is possible. Very old software might return nxdomain for empty nonterminals (that usu- ally happen for reverse IP address lookups), and thus may be in- compatible with this. To try to avoid this only DNSSEC-secure nxdomains are used, because the old software does not have DNSSEC. Default is yes. The nxdomain must be secure, this means nsec3 with optout is insufficient. harden-referral-path: <yes or no> Harden the referral path by performing additional queries for infrastructure data. Validates the replies if trust anchors are configured and the zones are signed. This enforces DNSSEC vali- dation on nameserver NS sets and the nameserver addresses that are encountered on the referral path to the answer. Default no, because it burdens the authority servers, and it is not RFC standard, and could lead to performance problems because of the extra query load that is generated. Experimental option. If you enable it consider adding more numbers after the tar- get-fetch-policy to increase the max depth that is checked to. harden-algo-downgrade: <yes or no> Harden against algorithm downgrade when multiple algorithms are advertised in the DS record. This works by first choosing only the strongest DS digest type as per RFC 4509 (Unbound treats the highest algorithm as the strongest) and then expecting signa- tures from all the advertised signing algorithms from the chosen DS(es) to be present. If no, allows any one supported algorithm to validate the zone, even if other advertised algorithms are broken. Default is no. RFC 6840 mandates that zone signers must produce zones signed with all advertised algorithms, but sometimes they do not. RFC 6840 also clarifies that this re- quirement is not for validators and validators should accept any single valid path. It should thus be explicitly noted that this option violates RFC 6840 for DNSSEC validation and should only be used to perform a signature completeness test to support troubleshooting. Using this option may break DNSSEC resolution with non-RFC6840-conforming signers and/or in multi-signer con- figurations that don&#39;t send all the advertised signatures. harden-unknown-additional: <yes or no> Harden against unknown records in the authority section and ad- ditional section. Default is no. If no, such records are copied from the upstream and presented to the client together with the answer. If yes, it could hamper future protocol developments that want to add records. use-caps-for-id: <yes or no> Use 0x20-encoded random bits in the query to foil spoof at- tempts. This perturbs the lowercase and uppercase of query names sent to authority servers and checks if the reply still has the correct casing. Disabled by default. This feature is an experimental implementation of draft dns-0x20. caps-exempt: <domain> Exempt the domain so that it does not receive caps-for-id per- turbed queries. For domains that do not support 0x20 and also fail with fallback because they keep sending different answers, like some load balancers. Can be given multiple times, for dif- ferent domains. caps-whitelist: <domain> Alternate syntax for caps-exempt. qname-minimisation: <yes or no> Send minimum amount of information to upstream servers to en- hance privacy. Only send minimum required labels of the QNAME and set QTYPE to A when possible. Best effort approach; full QNAME and original QTYPE will be sent when upstream replies with a RCODE other than NOERROR, except when receiving NXDOMAIN from a DNSSEC signed zone. Default is yes. qname-minimisation-strict: <yes or no> QNAME minimisation in strict mode. Do not fall-back to sending full QNAME to potentially broken nameservers. A lot of domains will not be resolvable when this option in enabled. Only use if you know what you are doing. This option only has effect when qname-minimisation is enabled. Default is no. aggressive-nsec: <yes or no> Aggressive NSEC uses the DNSSEC NSEC chain to synthesize NXDO- MAIN and other denials, using information from previous NXDO- MAINs answers. Default is yes. It helps to reduce the query rate towards targets that get a very high nonexistent name lookup rate. private-address: <IP address or subnet> Give IPv4 of IPv6 addresses or classless subnets. These are ad- dresses on your private network, and are not allowed to be re- turned for public internet names. Any occurrence of such ad- dresses are removed from DNS answers. Additionally, the DNSSEC validator may mark the answers bogus. This protects against so-called DNS Rebinding, where a user browser is turned into a network proxy, allowing remote access through the browser to other parts of your private network. Some names can be allowed to contain your private addresses, by default all the local-data that you configured is allowed to, and you can specify addi- tional names using private-domain. No private addresses are en- abled by default. We consider to enable this for the RFC1918 private IP address space by default in later releases. That would enable private addresses for 10.0.0.0/8 172.16.0.0/12 192.168.0.0/16 169.254.0.0/16 fd00::/8 and fe80::/10, since the RFC standards say these addresses should not be visible on the public internet. Turning on 127.0.0.0/8 would hinder many spam- blocklists as they use that. Adding ::ffff:0:0/96 stops IPv4-mapped IPv6 addresses from bypassing the filter. private-domain: <domain name> Allow this domain, and all its subdomains to contain private ad- dresses. Give multiple times to allow multiple domain names to contain private addresses. Default is none. unwanted-reply-threshold: <number> If set, a total number of unwanted replies is kept track of in every thread. When it reaches the threshold, a defensive action is taken and a warning is printed to the log. The defensive ac- tion is to clear the rrset and message caches, hopefully flush- ing away any poison. A value of 10 million is suggested. De- fault is 0 (turned off). do-not-query-address: <IP address> Do not query the given IP address. Can be IP4 or IP6. Append /num to indicate a classless delegation netblock, for example like 10.2.3.4/24 or 2001::11/64. do-not-query-localhost: <yes or no> If yes, localhost is added to the do-not-query-address entries, both IP6 ::1 and IP4 127.0.0.1/8. If no, then localhost can be used to send queries to. Default is yes. prefetch: <yes or no> If yes, cache hits on message cache elements that are on their last 10 percent of their TTL value trigger a prefetch to keep the cache up to date. Default is no. Turning it on gives about 10 percent more traffic and load on the machine, but popular items do not expire from the cache. prefetch-key: <yes or no> If yes, fetch the DNSKEYs earlier in the validation process, when a DS record is encountered. This lowers the latency of re- quests. It does use a little more CPU. Also if the cache is set to 0, it is no use. Default is no. deny-any: <yes or no> If yes, deny queries of type ANY with an empty response. De- fault is no. If disabled, Unbound responds with a short list of resource records if some can be found in the cache and makes the upstream type ANY query if there are none. rrset-roundrobin: <yes or no> If yes, Unbound rotates RRSet order in response (the random num- ber is taken from the query ID, for speed and thread safety). Default is yes. minimal-responses: <yes or no> If yes, Unbound does not insert authority/additional sections into response messages when those sections are not required. This reduces response size significantly, and may avoid TCP fallback for some responses which may cause a slight speedup. The default is yes, even though the DNS protocol RFCs mandate these sections, and the additional content could save roundtrips for clients that use the additional content. However these sec- tions are hardly used by clients. Enabling prefetch can benefit clients that need the additional content by trying to keep that content fresh in the cache. disable-dnssec-lame-check: <yes or no> If true, disables the DNSSEC lameness check in the iterator. This check sees if RRSIGs are present in the answer, when dnssec is expected, and retries another authority if RRSIGs are unex- pectedly missing. The validator will insist in RRSIGs for DNSSEC signed domains regardless of this setting, if a trust an- chor is loaded. module-config: <"module names"> Module configuration, a list of module names separated by spaces, surround the string with quotes (""). The modules can be respip, validator, or iterator (and possibly more, see below). Setting this to just "iterator" will result in a non-validating server. Setting this to "validator iterator" will turn on DNSSEC validation. The ordering of the modules is significant, the order decides the order of processing. You must also set trust-anchors for validation to be useful. Adding respip to the front will cause RPZ processing to be done on all queries. The default is "validator iterator". Most modules that need to be listed here have to be listed at the beginning of the line. The subnetcachedb module has to be listed just before the iterator. The python module can be listed in different places, it then processes the output of the module it is just before. The dynlib module can be listed pretty much anywhere, it is only a very thin wrapper that allows dy- namic libraries to run in its place. trust-anchor-file: <filename> File with trusted keys for validation. Both DS and DNSKEY en- tries can appear in the file. The format of the file is the standard DNS Zone file format. Default is "", or no trust an- chor file. auto-trust-anchor-file: <filename> File with trust anchor for one zone, which is tracked with RFC5011 probes. The probes are run several times per month, thus the machine must be online frequently. The initial file can be one with contents as described in trust-anchor-file. The file is written to when the anchor is updated, so the Unbound user must have write permission. Write permission to the file, but also to the directory it is in (to create a temporary file, which is necessary to deal with filesystem full events), it must also be inside the chroot (if that is used). trust-anchor: <"Resource Record"> A DS or DNSKEY RR for a key to use for validation. Multiple en- tries can be given to specify multiple trusted keys, in addition to the trust-anchor-files. The resource record is entered in the same format as &#39;dig&#39; or &#39;drill&#39; prints them, the same format as in the zone file. Has to be on a single line, with "" around it. A TTL can be specified for ease of cut and paste, but is ig- nored. A class can be specified, but class IN is default. trusted-keys-file: <filename> File with trusted keys for validation. Specify more than one file with several entries, one file per entry. Like trust-an- chor-file but has a different file format. Format is BIND-9 style format, the trusted-keys { name flag proto algo "key"; }; clauses are read. It is possible to use wildcards with this statement, the wildcard is expanded on start and on reload. trust-anchor-signaling: <yes or no> Send RFC8145 key tag query after trust anchor priming. Default is yes. root-key-sentinel: <yes or no> Root key trust anchor sentinel. Default is yes. domain-insecure: <domain name> Sets domain name to be insecure, DNSSEC chain of trust is ig- nored towards the domain name. So a trust anchor above the do- main name can not make the domain secure with a DS record, such a DS record is then ignored. Can be given multiple times to specify multiple domains that are treated as if unsigned. If you set trust anchors for the domain they override this setting (and the domain is secured). This can be useful if you want to make sure a trust anchor for external lookups does not affect an (unsigned) internal domain. A DS record externally can create validation failures for that internal domain. val-override-date: <rrsig-style date spec> Default is "" or "0", which disables this debugging feature. If enabled by giving a RRSIG style date, that date is used for ver- ifying RRSIG inception and expiration dates, instead of the cur- rent date. Do not set this unless you are debugging signature inception and expiration. The value -1 ignores the date alto- gether, useful for some special applications. val-sig-skew-min: <seconds> Minimum number of seconds of clock skew to apply to validated signatures. A value of 10% of the signature lifetime (expira- tion - inception) is used, capped by this setting. Default is 3600 (1 hour) which allows for daylight savings differences. Lower this value for more strict checking of short lived signa- tures. val-sig-skew-max: <seconds> Maximum number of seconds of clock skew to apply to validated signatures. A value of 10% of the signature lifetime (expira- tion - inception) is used, capped by this setting. Default is 86400 (24 hours) which allows for timezone setting problems in stable domains. Setting both min and max very low disables the clock skew allowances. Setting both min and max very high makes the validator check the signature timestamps less strictly. val-max-restart: <number> The maximum number the validator should restart validation with another authority in case of failed validation. Default is 5. val-bogus-ttl: <number> The time to live for bogus data. This is data that has failed validation; due to invalid signatures or other checks. The TTL from that data cannot be trusted, and this value is used in- stead. The value is in seconds, default 60. The time interval prevents repeated revalidation of bogus data. val-clean-additional: <yes or no> Instruct the validator to remove data from the additional sec- tion of secure messages that are not signed properly. Messages that are insecure, bogus, indeterminate or unchecked are not af- fected. Default is yes. Use this setting to protect the users that rely on this validator for authentication from potentially bad data in the additional section. val-log-level: <number> Have the validator print validation failures to the log. Re- gardless of the verbosity setting. Default is 0, off. At 1, for every user query that fails a line is printed to the logs. This way you can monitor what happens with validation. Use a diagnosis tool, such as dig or drill, to find out why validation is failing for these queries. At 2, not only the query that failed is printed but also the reason why Unbound thought it was wrong and which server sent the faulty data. val-permissive-mode: <yes or no> Instruct the validator to mark bogus messages as indeterminate. The security checks are performed, but if the result is bogus (failed security), the reply is not withheld from the client with SERVFAIL as usual. The client receives the bogus data. For messages that are found to be secure the AD bit is set in replies. Also logging is performed as for full validation. The default value is "no". ignore-cd-flag: <yes or no> Instruct Unbound to ignore the CD flag from clients and refuse to return bogus answers to them. Thus, the CD (Checking Dis- abled) flag does not disable checking any more. This is useful if legacy (w2008) servers that set the CD flag but cannot vali- date DNSSEC themselves are the clients, and then Unbound pro- vides them with DNSSEC protection. The default value is "no". disable-edns-do: <yes or no> Disable the EDNS DO flag in upstream requests. It breaks DNSSEC validation for Unbound&#39;s clients. This results in the upstream name servers to not include DNSSEC records in their replies and could be helpful for devices that cannot handle DNSSEC informa- tion. When the option is enabled, clients that set the DO flag receive no EDNS record in the response to indicate the lack of support to them. If this option is enabled but Unbound is al- ready configured for DNSSEC validation (i.e., the validator mod- ule is enabled; default) this option is implicitly turned off with a warning as to not break DNSSEC validation in Unbound. Default is no. serve-expired: <yes or no> If enabled, Unbound attempts to serve old responses from cache with a TTL of serve-expired-reply-ttl in the response. By de- fault the expired answer will be used after a resolution attempt errored out or is taking more than serve-expired-client-timeout to resolve. Default is "no". serve-expired-ttl: <seconds> Limit serving of expired responses to configured seconds after expiration. 0 disables the limit. This option only applies when serve-expired is enabled. A suggested value per RFC 8767 is between 86400 (1 day) and 259200 (3 days). The default is 86400. serve-expired-ttl-reset: <yes or no> Set the TTL of expired records to the serve-expired-ttl value after a failed attempt to retrieve the record from upstream. This makes sure that the expired records will be served as long as there are queries for it. Default is "no". serve-expired-reply-ttl: <seconds> TTL value to use when replying with expired data. If serve-ex- pired-client-timeout is also used then it is RECOMMENDED to use 30 as the value (RFC 8767). The default is 30. serve-expired-client-timeout: <msec> Time in milliseconds before replying to the client with expired data. This essentially enables the serve-stale behavior as specified in RFC 8767 that first tries to resolve before immedi- ately responding with expired data. Setting this to 0 will dis- able this behavior and instead serve the expired record immedi- ately from the cache before attempting to refresh it via resolu- tion. Default is 1800. serve-original-ttl: <yes or no> If enabled, Unbound will always return the original TTL as re- ceived from the upstream name server rather than the decrement- ing TTL as stored in the cache. This feature may be useful if Unbound serves as a front-end to a hidden authoritative name server. Enabling this feature does not impact cache expiry, it only changes the TTL Unbound embeds in responses to queries. Note that enabling this feature implicitly disables enforcement of the configured minimum and maximum TTL, as it is assumed users who enable this feature do not want Unbound to change the TTL obtained from an upstream server. Thus, the values set us- ing cache-min-ttl and cache-max-ttl are ignored. Default is "no". val-nsec3-keysize-iterations: <"list of values"> List of keysize and iteration count values, separated by spaces, surrounded by quotes. Default is "1024 150 2048 150 4096 150". This determines the maximum allowed NSEC3 iteration count before a message is simply marked insecure instead of performing the many hashing iterations. The list must be in ascending order and have at least one entry. If you set it to "1024 65535" there is no restriction to NSEC3 iteration values. This table must be kept short; a very long list could cause slower operation. zonemd-permissive-mode: <yes or no> If enabled the ZONEMD verification failures are only logged and do not cause the zone to be blocked and only return servfail. Useful for testing out if it works, or if the operator only wants to be notified of a problem without disrupting service. Default is no. add-holddown: <seconds> Instruct the auto-trust-anchor-file probe mechanism for RFC5011 autotrust updates to add new trust anchors only after they have been visible for this time. Default is 30 days as per the RFC. del-holddown: <seconds> Instruct the auto-trust-anchor-file probe mechanism for RFC5011 autotrust updates to remove revoked trust anchors after they have been kept in the revoked list for this long. Default is 30 days as per the RFC. keep-missing: <seconds> Instruct the auto-trust-anchor-file probe mechanism for RFC5011 autotrust updates to remove missing trust anchors after they have been unseen for this long. This cleans up the state file if the target zone does not perform trust anchor revocation, so this makes the auto probe mechanism work with zones that perform regular (non-5011) rollovers. The default is 366 days. The value 0 does not remove missing anchors, as per the RFC. permit-small-holddown: <yes or no> Debug option that allows the autotrust 5011 rollover timers to assume very small values. Default is no. key-cache-size: <number> Number of bytes size of the key cache. Default is 4 megabytes. A plain number is in bytes, append &#39;k&#39;, &#39;m&#39; or &#39;g&#39; for kilo- bytes, megabytes or gigabytes (1024*1024 bytes in a megabyte). key-cache-slabs: <number> Number of slabs in the key cache. Slabs reduce lock contention by threads. Must be set to a power of 2. Setting (close) to the number of cpus is a reasonable guess. neg-cache-size: <number> Number of bytes size of the aggressive negative cache. Default is 1 megabyte. A plain number is in bytes, append &#39;k&#39;, &#39;m&#39; or &#39;g&#39; for kilobytes, megabytes or gigabytes (1024*1024 bytes in a megabyte). unblock-lan-zones: <yes or no> Default is disabled. If enabled, then for private address space, the reverse lookups are no longer filtered. This allows Unbound when running as dns service on a host where it provides service for that host, to put out all of the queries for the &#39;lan&#39; upstream. When enabled, only localhost, 127.0.0.1 reverse and ::1 reverse zones are configured with default local zones. Disable the option when Unbound is running as a (DHCP-) DNS net- work resolver for a group of machines, where such lookups should be filtered (RFC compliance), this also stops potential data leakage about the local network to the upstream DNS servers. insecure-lan-zones: <yes or no> Default is disabled. If enabled, then reverse lookups in pri- vate address space are not validated. This is usually required whenever unblock-lan-zones is used. local-zone: <zone> <type> Configure a local zone. The type determines the answer to give if there is no match from local-data. The types are deny, refuse, static, transparent, redirect, nodefault, typetranspar- ent, inform, inform_deny, inform_redirect, always_transparent, block_a, always_refuse, always_nxdomain, always_null, noview, and are explained below. After that the default settings are listed. Use local-data: to enter data into the local zone. An- swers for local zones are authoritative DNS answers. By default the zones are class IN. If you need more complicated authoritative data, with referrals, wildcards, CNAME/DNAME support, or DNSSEC authoritative service, setup a stub-zone for it as detailed in the stub zone section below. A stub-zone can be used to have unbound send queries to another server, an authoritative server, to fetch the informa- tion. With a forward-zone, unbound sends queries to a server that is a recursive server to fetch the information. With an auth-zone a zone can be loaded from file and used, it can be used like a local-zone for users downstream, or the auth-zone information can be used to fetch information from when resolving like it is an upstream server. The forward-zone and auth-zone options are described in their sections below. If you want to perform filtering of the information that the users can fetch, the local-zone and local-data statements allow for this, but also the rpz functionality can be used, described in the RPZ section. deny Do not send an answer, drop the query. If there is a match from local data, the query is answered. refuse Send an error message reply, with rcode REFUSED. If there is a match from local data, the query is answered. static If there is a match from local data, the query is answered. Otherwise, the query is answered with nodata or nxdomain. For a negative answer a SOA is included in the answer if present as local-data for the zone apex domain. transparent If there is a match from local data, the query is answered. Otherwise if the query has a different name, the query is re- solved normally. If the query is for a name given in local- data but no such type of data is given in localdata, then a noerror nodata answer is returned. If no local-zone is given local-data causes a transparent zone to be created by de- fault. typetransparent If there is a match from local data, the query is answered. If the query is for a different name, or for the same name but for a different type, the query is resolved normally. So, similar to transparent but types that are not listed in local data are resolved normally, so if an A record is in the local data that does not cause a nodata reply for AAAA queries. redirect The query is answered from the local data for the zone name. There may be no local data beneath the zone name. This an- swers queries for the zone, and all subdomains of the zone with the local data for the zone. It can be used to redirect a domain to return a different address record to the end user, with local-zone: "example.com." redirect and lo- cal-data: "example.com. A 127.0.0.1" queries for www.exam- ple.com and www.foo.example.com are redirected, so that users with web browsers cannot access sites with suffix exam- ple.com. inform The query is answered normally, same as transparent. The client IP address (@portnumber) is printed to the logfile. The log message is: timestamp, unbound-pid, info: zonename inform IP@port queryname type class. This option can be used for normal resolution, but machines looking up infected names are logged, eg. to run antivirus on them. inform_deny The query is dropped, like &#39;deny&#39;, and logged, like &#39;inform&#39;. Ie. find infected machines without answering the queries. inform_redirect The query is redirected, like &#39;redirect&#39;, and logged, like &#39;inform&#39;. Ie. answer queries with fixed data and also log the machines that ask. always_transparent Like transparent, but ignores local data and resolves nor- mally. block_a Like transparent, but ignores local data and resolves nor- mally all query types excluding A. For A queries it uncondi- tionally returns NODATA. Useful in cases when there is a need to explicitly force all apps to use IPv6 protocol and avoid any queries to IPv4. always_refuse Like refuse, but ignores local data and refuses the query. always_nxdomain Like static, but ignores local data and returns nxdomain for the query. always_nodata Like static, but ignores local data and returns nodata for the query. always_deny Like deny, but ignores local data and drops the query. always_null Always returns 0.0.0.0 or ::0 for every name in the zone. Like redirect with zero data for A and AAAA. Ignores local data in the zone. Used for some block lists. noview Breaks out of that view and moves towards the global local zones for answer to the query. If the view first is no, it&#39;ll resolve normally. If view first is enabled, it&#39;ll break perform that step and check the global answers. For when the view has view specific overrides but some zone has to be answered from global local zone contents. nodefault Used to turn off default contents for AS112 zones. The other types also turn off default contents for the zone. The &#39;node- fault&#39; option has no other effect than turning off default contents for the given zone. Use nodefault if you use ex- actly that zone, if you want to use a subzone, use transpar- ent. The default zones are localhost, reverse 127.0.0.1 and ::1, the home.arpa, the resolver.arpa, the service.arpa, the onion, test, in- valid and the AS112 zones. The AS112 zones are reverse DNS zones for private use and reserved IP addresses for which the servers on the in- ternet cannot provide correct answers. They are configured by default to give nxdomain (no reverse information) answers. The defaults can be turned off by specifying your own local-zone of that name, or using the &#39;nodefault&#39; type. Below is a list of the default zone contents. localhost The IP4 and IP6 localhost information is given. NS and SOA records are provided for completeness and to satisfy some DNS update tools. Default content: local-zone: "localhost." redirect local-data: "localhost. 10800 IN NS localhost." local-data: "localhost. 10800 IN SOA localhost. nobody.invalid. 1 3600 1200 604800 10800" local-data: "localhost. 10800 IN A 127.0.0.1" local-data: "localhost. 10800 IN AAAA ::1" reverse IPv4 loopback Default content: local-zone: "127.in-addr.arpa." static local-data: "127.in-addr.arpa. 10800 IN NS localhost." local-data: "127.in-addr.arpa. 10800 IN SOA localhost. nobody.invalid. 1 3600 1200 604800 10800" local-data: "1.0.0.127.in-addr.arpa. 10800 IN PTR localhost." reverse IPv6 loopback Default content: local-zone: "1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0. 0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa." static local-data: "1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0. 0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa. 10800 IN NS localhost." local-data: "1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0. 0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa. 10800 IN SOA localhost. nobody.invalid. 1 3600 1200 604800 10800" local-data: "1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0. 0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa. 10800 IN PTR localhost." home.arpa (RFC 8375) Default content: local-zone: "home.arpa." static local-data: "home.arpa. 10800 IN NS localhost." local-data: "home.arpa. 10800 IN SOA localhost. nobody.invalid. 1 3600 1200 604800 10800" resolver.arpa (RFC 9462) Default content: local-zone: "resolver.arpa." static local-data: "resolver.arpa. 10800 IN NS localhost." local-data: "resolver.arpa. 10800 IN SOA localhost. nobody.invalid. 1 3600 1200 604800 10800" service.arpa (draft-ietf-dnssd-srp-25) Default content: local-zone: "service.arpa." static local-data: "service.arpa. 10800 IN NS localhost." local-data: "service.arpa. 10800 IN SOA localhost. nobody.invalid. 1 3600 1200 604800 10800" onion (RFC 7686) Default content: local-zone: "onion." static local-data: "onion. 10800 IN NS localhost." local-data: "onion. 10800 IN SOA localhost. nobody.invalid. 1 3600 1200 604800 10800" test (RFC 6761) Default content: local-zone: "test." static local-data: "test. 10800 IN NS localhost." local-data: "test. 10800 IN SOA localhost. nobody.invalid. 1 3600 1200 604800 10800" invalid (RFC 6761) Default content: local-zone: "invalid." static local-data: "invalid. 10800 IN NS localhost." local-data: "invalid. 10800 IN SOA localhost. nobody.invalid. 1 3600 1200 604800 10800" reverse RFC1918 local use zones Reverse data for zones 10.in-addr.arpa, 16.172.in-addr.arpa to 31.172.in-addr.arpa, 168.192.in-addr.arpa. The lo- cal-zone: is set static and as local-data: SOA and NS records are provided. reverse RFC3330 IP4 this, link-local, testnet and broadcast Reverse data for zones 0.in-addr.arpa, 254.169.in-addr.arpa, 2.0.192.in-addr.arpa (TEST NET 1), 100.51.198.in-addr.arpa (TEST NET 2), 113.0.203.in-addr.arpa (TEST NET 3), 255.255.255.255.in-addr.arpa. And from 64.100.in-addr.arpa to 127.100.in-addr.arpa (Shared Address Space). reverse RFC4291 IP6 unspecified Reverse data for zone 0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0. 0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa. reverse RFC4193 IPv6 Locally Assigned Local Addresses Reverse data for zone D.F.ip6.arpa. reverse RFC4291 IPv6 Link Local Addresses Reverse data for zones 8.E.F.ip6.arpa to B.E.F.ip6.arpa. reverse IPv6 Example Prefix Reverse data for zone 8.B.D.0.1.0.0.2.ip6.arpa. This zone is used for tutorials and examples. You can remove the block on this zone with: local-zone: 8.B.D.0.1.0.0.2.ip6.arpa. nodefault You can also selectively unblock a part of the zone by making that part transparent with a local-zone statement. This also works with the other default zones. local-data: "<resource record string>" Configure local data, which is served in reply to queries for it. The query has to match exactly unless you configure the local-zone as redirect. If not matched exactly, the local-zone type deter- mines further processing. If local-data is configured that is not a subdomain of a local-zone, a transparent local-zone is config- ured. For record types such as TXT, use single quotes, as in lo- cal-data: &#39;example. TXT "text"&#39;. If you need more complicated authoritative data, with referrals, wildcards, CNAME/DNAME support, or DNSSEC authoritative service, setup a stub-zone for it as detailed in the stub zone section be- low. local-data-ptr: "IPaddr name" Configure local data shorthand for a PTR record with the reversed IPv4 or IPv6 address and the host name. For example "192.0.2.4 www.example.com". TTL can be inserted like this: "2001:DB8::4 7200 www.example.com" local-zone-tag: <zone> <"list of tags"> Assign tags to localzones. Tagged localzones will only be applied when the used access-control element has a matching tag. Tags must be defined in define-tags. Enclose list of tags in quotes ("") and put spaces between tags. When there are multiple tags it checks if the intersection of the list of tags for the query and local-zone-tag is non-empty. local-zone-override: <zone> <IP netblock> <type> Override the localzone type for queries from addresses matching netblock. Use this localzone type, regardless the type configured for the local-zone (both tagged and untagged) and regardless the type configured using access-control-tag-action. response-ip: <IP-netblock> <action> This requires use of the "respip" module. If the IP address in an AAAA or A RR in the answer section of a response matches the specified IP netblock, the specified action will apply. <action> has generally the same semantics as that for access-control-tag-action, but there are some exceptions. Actions for response-ip are different from those for local-zone in that in case of the former there is no point of such conditions as "the query matches it but there is no local data". Because of this difference, the semantics of response-ip actions are modified or simplified as follows: The static, refuse, transparent, type- transparent, and nodefault actions are invalid for response-ip. Using any of these will cause the configuration to be rejected as faulty. The deny action is non-conditional, i.e. it always results in dropping the corresponding query. The resolution result before applying the deny action is still cached and can be used for other queries. response-ip-data: <IP-netblock> <"resource record string"> This requires use of the "respip" module. This specifies the action data for response-ip with action being to redirect as specified by "resource record string". "Resource record string" is similar to that of access-control-tag-action, but it must be of either AAAA, A or CNAME types. If the IP-net- block is an IPv6/IPv4 prefix, the record must be AAAA/A respec- tively, unless it is a CNAME (which can be used for both versions of IP netblocks). If it is CNAME there must not be more than one response-ip-data for the same IP-netblock. Also, CNAME and other types of records must not coexist for the same IP-netblock, fol- lowing the normal rules for CNAME records. The textual domain name for the CNAME does not have to be explicitly terminated with a dot ("."); the root name is assumed to be the origin for the name. response-ip-tag: <IP-netblock> <"list of tags"> This requires use of the "respip" module. Assign tags to response IP-netblocks. If the IP address in an AAAA or A RR in the answer section of a response matches the spec- ified IP-netblock, the specified tags are assigned to the IP ad- dress. Then, if an access-control-tag is defined for the client and it includes one of the tags for the response IP, the corre- sponding access-control-tag-action will apply. Tag matching rule is the same as that for access-control-tag and local-zones. Un- like local-zone-tag, response-ip-tag can be defined for an IP-net- block even if no response-ip is defined for that netblock. If multiple response-ip-tag options are specified for the same IP- netblock in different statements, all but the first will be ig- nored. However, this will not be flagged as a configuration er- ror, but the result is probably not what was intended. Actions specified in an access-control-tag-action that has a matching tag with response-ip-tag can be those that are "invalid" for response-ip listed above, since access-control-tag-actions can be shared with local zones. For these actions, if they behave differently depending on whether local data exists or not in case of local zones, the behavior for response-ip-data will generally result in NOERROR/NODATA instead of NXDOMAIN, since the response- ip data are inherently type specific, and non-existence of data does not indicate anything about the existence or non-existence of the qname itself. For example, if the matching tag action is sta- tic but there is no data for the corresponding response-ip config- uration, then the result will be NOERROR/NODATA. The only case where NXDOMAIN is returned is when an always_nxdomain action ap- plies. ratelimit: <number or 0> Enable ratelimiting of queries sent to nameserver for performing recursion. If 0, the default, it is disabled. This option is ex- perimental at this time. The ratelimit is in queries per second that are allowed. More queries are turned away with an error (servfail). This stops recursive floods, eg. random query names, but not spoofed reflection floods. Cached responses are not rate- limited by this setting. The zone of the query is determined by examining the nameservers for it, the zone name is used to keep track of the rate. For example, 1000 may be a suitable value to stop the server from being overloaded with random names, and keeps Unbound from sending traffic to the nameservers for those zones. Configured forwarders are excluded from ratelimiting. ratelimit-size: <memory size> Give the size of the data structure in which the current ongoing rates are kept track in. Default 4m. In bytes or use m(mega), k(kilo), g(giga). The ratelimit structure is small, so this data structure likely does not need to be large. ratelimit-slabs: <number> Give power of 2 number of slabs, this is used to reduce lock con- tention in the ratelimit tracking data structure. Close to the number of cpus is a fairly good setting. ratelimit-factor: <number> Set the amount of queries to rate limit when the limit is ex- ceeded. If set to 0, all queries are dropped for domains where the limit is exceeded. If set to another value, 1 in that number is allowed through to complete. Default is 10, allowing 1/10 traffic to flow normally. This can make ordinary queries complete (if repeatedly queried for), and enter the cache, whilst also mit- igating the traffic flow by the factor given. ratelimit-backoff: <yes or no> If enabled, the ratelimit is treated as a hard failure instead of the default maximum allowed constant rate. When the limit is reached, traffic is ratelimited and demand continues to be kept track of for a 2 second rate window. No traffic is allowed, ex- cept for ratelimit-factor, until demand decreases below the con- figured ratelimit for a 2 second rate window. Useful to set rate- limit to a suspicious rate to aggressively limit unusually high traffic. Default is off. ratelimit-for-domain: <domain> <number qps or 0> Override the global ratelimit for an exact match domain name with the listed number. You can give this for any number of names. For example, for a top-level-domain you may want to have a higher limit than other names. A value of 0 will disable ratelimiting for that domain. ratelimit-below-domain: <domain> <number qps or 0> Override the global ratelimit for a domain name that ends in this name. You can give this multiple times, it then describes differ- ent settings in different parts of the namespace. The closest matching suffix is used to determine the qps limit. The rate for the exact matching domain name is not changed, use rate- limit-for-domain to set that, you might want to use different set- tings for a top-level-domain and subdomains. A value of 0 will disable ratelimiting for domain names that end in this name. ip-ratelimit: <number or 0> Enable global ratelimiting of queries accepted per IP address. This option is experimental at this time. The ratelimit is in queries per second that are allowed. More queries are completely dropped and will not receive a reply, SERVFAIL or otherwise. IP ratelimiting happens before looking in the cache. This may be use- ful for mitigating amplification attacks. Clients with a valid DNS Cookie will bypass the ratelimit. If a ratelimit for such clients is still needed, ip-ratelimit-cookie can be used instead. Default is 0 (disabled). ip-ratelimit-cookie: <number or 0> Enable global ratelimiting of queries accepted per IP address with a valid DNS Cookie. This option is experimental at this time. The ratelimit is in queries per second that are allowed. More queries are completely dropped and will not receive a reply, SERV- FAIL or otherwise. IP ratelimiting happens before looking in the cache. This option could be useful in combination with al- low_cookie in an attempt to mitigate other amplification attacks than UDP reflections (e.g., attacks targeting Unbound itself) which are already handled with DNS Cookies. If used, the value is suggested to be higher than ip-ratelimit e.g., tenfold. Default is 0 (disabled). ip-ratelimit-size: <memory size> Give the size of the data structure in which the current ongoing rates are kept track in. Default 4m. In bytes or use m(mega), k(kilo), g(giga). The ip ratelimit structure is small, so this data structure likely does not need to be large. ip-ratelimit-slabs: <number> Give power of 2 number of slabs, this is used to reduce lock con- tention in the ip ratelimit tracking data structure. Close to the number of cpus is a fairly good setting. ip-ratelimit-factor: <number> Set the amount of queries to rate limit when the limit is ex- ceeded. If set to 0, all queries are dropped for addresses where the limit is exceeded. If set to another value, 1 in that number is allowed through to complete. Default is 10, allowing 1/10 traffic to flow normally. This can make ordinary queries complete (if repeatedly queried for), and enter the cache, whilst also mit- igating the traffic flow by the factor given. ip-ratelimit-backoff: <yes or no> If enabled, the ratelimit is treated as a hard failure instead of the default maximum allowed constant rate. When the limit is reached, traffic is ratelimited and demand continues to be kept track of for a 2 second rate window. No traffic is allowed, ex- cept for ip-ratelimit-factor, until demand decreases below the configured ratelimit for a 2 second rate window. Useful to set ip-ratelimit to a suspicious rate to aggressively limit unusually high traffic. Default is off. outbound-msg-retry: <number> The number of retries, per upstream nameserver in a delegation, that Unbound will attempt in case a throwaway response is re- ceived. No response (timeout) contributes to the retry counter. If a forward/stub zone is used, this is the number of retries per nameserver in the zone. Default is 5. max-sent-count: <number> Hard limit on the number of outgoing queries Unbound will make while resolving a name, making sure large NS sets do not loop. Results in SERVFAIL when reached. It resets on query restarts (e.g., CNAME) and referrals. Default is 32. max-query-restarts: <number> Hard limit on the number of times Unbound is allowed to restart a query upon encountering a CNAME record. Results in SERVFAIL when reached. Changing this value needs caution as it can allow long CNAME chains to be accepted, where Unbound needs to verify (re- solve) each link individually. Default is 11. iter-scrub-ns: <number> Limit on the number of NS records allowed in an rrset of type NS, from the iterator scrubber. This protects the internals of the re- solver from overly large NS sets. Default is 20. iter-scrub-cname: <number> Limit on the number of CNAME, DNAME records in an answer, from the iterator scrubber. This protects the internals of the resolver from overly long indirection chains. Clips off the remainder of the reply packet at that point. Default is 11. max-global-quota: <number> Limit on the number of upstream queries sent out for an incoming query and its subqueries from recursion. It is not reset during the resolution. When it is exceeded the query is failed and the lookup process stops. Default is 200. fast-server-permil: <number> Specify how many times out of 1000 to pick from the set of fastest servers. 0 turns the feature off. A value of 900 would pick from the fastest servers 90 percent of the time, and would perform nor- mal exploration of random servers for the remaining time. When prefetch is enabled (or serve-expired), such prefetches are not sped up, because there is no one waiting for it, and it presents a good moment to perform server exploration. The fast-server-num op- tion can be used to specify the size of the fastest servers set. The default for fast-server-permil is 0. fast-server-num: <number> Set the number of servers that should be used for fast server se- lection. Only use the fastest specified number of servers with the fast-server-permil option, that turns this on or off. The default is to use the fastest 3 servers. answer-cookie: <yes or no> If enabled, Unbound will answer to requests containing DNS Cookies as specified in RFC 7873 and RFC 9018. Default is no. cookie-secret: <128 bit hex string> Server&#39;s secret for DNS Cookie generation. Useful to explicitly set for servers in an anycast deployment that need to share the secret in order to verify each other&#39;s Server Cookies. An example hex string would be "000102030405060708090a0b0c0d0e0f". Default is a 128 bits random secret generated at startup time. This op- tion is ignored if a cookie-secret-file is present. In that case the secrets from that file are used in DNS Cookie calculations. cookie-secret-file: <filename> File from which the secrets are read used in DNS Cookie calcula- tions. When this file exists, the secrets in this file are used and the secret specified by the cookie-secret option is ignored. Enable it by setting a filename, like "/usr/local/etc/un- bound_cookiesecrets.txt". The content of this file must be manip- ulated with the add_cookie_secret, drop_cookie_secret and acti- vate_cookie_secret commands to the unbound-control(8) tool. Please see that manpage on how to perform a safe cookie secret rollover. Default is "" (disabled). edns-client-string: <IP netblock> <string> Include an EDNS0 option containing configured ascii string in queries with destination address matching the configured IP net- block. This configuration option can be used multiple times. The most specific match will be used. edns-client-string-opcode: <opcode> EDNS0 option code for the edns-client-string option, from 0 to 1. A value from the `Reserved for Local/Experimental` range (65001-65534) should be used. Default is 65001. ede: <yes or no> If enabled, Unbound will respond with Extended DNS Error codes (RFC8914). These EDEs provide additional information with a re- sponse mainly for, but not limited to, DNS and DNSSEC errors. When the val-log-level option is also set to 2, responses with Ex- tended DNS Errors concerning DNSSEC failures will also contain a descriptive text message about the reason for the failure. De- fault is "no". ede-serve-expired: <yes or no> If enabled, Unbound will attach an Extended DNS Error (RFC8914) Code 3 - Stale Answer as EDNS0 option to the expired response. The ede option needs to be enabled as well for this to work. De- fault is "no". dns-error-reporting: <yes or no> If enabled, Unbound will send DNS Error Reports (RFC9567). The name servers need to express support by attaching the Report-Chan- nel EDNS0 option on their replies specifying the reporting agent for the zone. Any errors encountered during resolution that would result in Unbound generating an Extended DNS Error (RFC8914) will be reported to the zone&#39;s reporting agent. The ede option does not need to be enabled for this to work. It is advised that the qname-minimisation option is also enabled to increase privacy on the outgoing reports. Default is "no". Remote Control Options In the remote-control: clause are the declarations for the remote con- trol facility. If this is enabled, the unbound-control(8) utility can be used to send commands to the running Unbound server. The server uses these clauses to setup TLSv1 security for the connection. The un- bound-control(8) utility also reads the remote-control section for op- tions. To setup the correct self-signed certificates use the un- bound-control-setup(8) utility. control-enable: <yes or no> The option is used to enable remote control, default is "no". If turned off, the server does not listen for control commands. control-interface: <ip address or interface name or path> Give IPv4 or IPv6 addresses or local socket path to listen on for control commands. If an interface name is used instead of an ip address, the list of ip addresses on that interface are used. By default localhost (127.0.0.1 and ::1) is listened to. Use 0.0.0.0 and ::0 to listen to all interfaces. If you change this and per- missions have been dropped, you must restart the server for the change to take effect. If you set it to an absolute path, a unix domain socket is used. This socket does not use the certificates and keys, so those files need not be present. To restrict access, Unbound sets permissions on the file to the user and group that is configured, the access bits are set to allow the group members to access the control socket file. Put users that need to access the socket in the that group. To restrict access further, create a directory to put the control socket in and restrict access to that directory. control-port: <port number> The port number to listen on for IPv4 or IPv6 control interfaces, default is 8953. If you change this and permissions have been dropped, you must restart the server for the change to take ef- fect. control-use-cert: <yes or no> For localhost control-interface you can disable the use of TLS by setting this option to "no", default is "yes". For local sockets, TLS is disabled and the value of this option is ignored. server-key-file: <private key file> Path to the server private key, by default unbound_server.key. This file is generated by the unbound-control-setup utility. This file is used by the Unbound server, but not by unbound-control. server-cert-file: <certificate file.pem> Path to the server self signed certificate, by default un- bound_server.pem. This file is generated by the unbound-con- trol-setup utility. This file is used by the Unbound server, and also by unbound-control. control-key-file: <private key file> Path to the control client private key, by default unbound_con- trol.key. This file is generated by the unbound-control-setup utility. This file is used by unbound-control. control-cert-file: <certificate file.pem> Path to the control client certificate, by default unbound_con- trol.pem. This certificate has to be signed with the server cer- tificate. This file is generated by the unbound-control-setup utility. This file is used by unbound-control. Stub Zone Options There may be multiple stub-zone: clauses. Each with a name: and zero or more hostnames or IP addresses. For the stub zone this list of name- servers is used. Class IN is assumed. The servers should be authority servers, not recursors; Unbound performs the recursive processing it- self for stub zones. The stub zone can be used to configure authoritative data to be used by the resolver that cannot be accessed using the public internet servers. This is useful for company-local data or private zones. Setup an au- thoritative server on a different host (or different port). Enter a config entry for Unbound with stub-addr: <ip address of host[@port]>. The Unbound resolver can then access the data, without referring to the public internet for it. This setup allows DNSSEC signed zones to be served by that authorita- tive server, in which case a trusted key entry with the public key can be put in config, so that Unbound can validate the data and set the AD bit on replies for the private zone (authoritative servers do not set the AD bit). This setup makes Unbound capable of answering queries for the private zone, and can even set the AD bit (&#39;authentic&#39;), but the AA (&#39;authoritative&#39;) bit is not set on these replies. Consider adding server: statements for domain-insecure: and for lo- cal-zone: name nodefault for the zone if it is a locally served zone. The insecure clause stops DNSSEC from invalidating the zone. The local zone nodefault (or transparent) clause makes the (reverse-) zone bypass Unbound&#39;s filtering of RFC1918 zones. name: <domain name> Name of the stub zone. This is the full domain name of the zone. stub-host: <domain name> Name of stub zone nameserver. Is itself resolved before it is used. To use a nondefault port for DNS communication append &#39;@&#39; with the port number. If tls is enabled, then you can append a &#39;#&#39; and a name, then it&#39;ll check the tls authentication certifi- cates with that name. If you combine the &#39;@&#39; and &#39;#&#39;, the &#39;@&#39; comes first. If only &#39;#&#39; is used the default port is the con- figured tls-port. stub-addr: <IP address> IP address of stub zone nameserver. Can be IP 4 or IP 6. To use a nondefault port for DNS communication append &#39;@&#39; with the port number. If tls is enabled, then you can append a &#39;#&#39; and a name, then it&#39;ll check the tls authentication certificates with that name. If you combine the &#39;@&#39; and &#39;#&#39;, the &#39;@&#39; comes first. If only &#39;#&#39; is used the default port is the configured tls-port. stub-prime: <yes or no> This option is by default no. If enabled it performs NS set priming, which is similar to root hints, where it starts using the list of nameservers currently published by the zone. Thus, if the hint list is slightly outdated, the resolver picks up a correct list online. stub-first: <yes or no> If enabled, a query is attempted without the stub clause if it fails. The data could not be retrieved and would have caused SERVFAIL because the servers are unreachable, instead it is tried without this clause. The default is no. stub-tls-upstream: <yes or no> Enabled or disable whether the queries to this stub use TLS for transport. Default is no. stub-ssl-upstream: <yes or no> Alternate syntax for stub-tls-upstream. stub-tcp-upstream: <yes or no> If it is set to "yes" then upstream queries use TCP only for transport regardless of global flag tcp-upstream. Default is no. stub-no-cache: <yes or no> Default is no. If enabled, data inside the stub is not cached. This is useful when you want immediate changes to be visible. Forward Zone Options There may be multiple forward-zone: clauses. Each with a name: and zero or more hostnames or IP addresses. For the forward zone this list of nameservers is used to forward the queries to. The servers listed as forward-host: and forward-addr: have to handle further recursion for the query. Thus, those servers are not authority servers, but are (just like Unbound is) recursive servers too; Unbound does not perform recursion itself for the forward zone, it lets the remote server do it. Class IN is assumed. CNAMEs are chased by Unbound itself, asking the remote server for every name in the indirection chain, to protect the local cache from illegal indirect referenced items. A forward-zone en- try with name "." and a forward-addr target will forward all queries to that other server (unless it can answer from the cache). name: <domain name> Name of the forward zone. This is the full domain name of the zone. forward-host: <domain name> Name of server to forward to. Is itself resolved before it is used. To use a nondefault port for DNS communication append &#39;@&#39; with the port number. If tls is enabled, then you can append a &#39;#&#39; and a name, then it&#39;ll check the tls authentication certifi- cates with that name. If you combine the &#39;@&#39; and &#39;#&#39;, the &#39;@&#39; comes first. If only &#39;#&#39; is used the default port is the con- figured tls-port. forward-addr: <IP address> IP address of server to forward to. Can be IP 4 or IP 6. To use a nondefault port for DNS communication append &#39;@&#39; with the port number. If tls is enabled, then you can append a &#39;#&#39; and a name, then it&#39;ll check the tls authentication certificates with that name. If you combine the &#39;@&#39; and &#39;#&#39;, the &#39;@&#39; comes first. If only &#39;#&#39; is used the default port is the configured tls-port. At high verbosity it logs the TLS certificate, with TLS enabled. If you leave out the &#39;#&#39; and auth name from the forward-addr, any name is accepted. The cert must also match a CA from the tls-cert-bundle. forward-first: <yes or no> If a forwarded query is met with a SERVFAIL error, and this op- tion is enabled, Unbound will fall back to normal recursive res- olution for this query as if no query forwarding had been speci- fied. The default is "no". forward-tls-upstream: <yes or no> Enabled or disable whether the queries to this forwarder use TLS for transport. Default is no. If you enable this, also config- ure a tls-cert-bundle or use tls-win-cert to load CA certs, oth- erwise the connections cannot be authenticated. forward-ssl-upstream: <yes or no> Alternate syntax for forward-tls-upstream. forward-tcp-upstream: <yes or no> If it is set to "yes" then upstream queries use TCP only for transport regardless of global flag tcp-upstream. Default is no. forward-no-cache: <yes or no> Default is no. If enabled, data inside the forward is not cached. This is useful when you want immediate changes to be visible. Authority Zone Options Authority zones are configured with auth-zone:, and each one must have a name:. There can be multiple ones, by listing multiple auth-zone clauses, each with a different name, pertaining to that part of the namespace. The authority zone with the name closest to the name looked up is used. Authority zones can be processed on two distinct, non-ex- clusive, configurable stages. With for-downstream: yes (default), authority zones are processed after local-zones and before cache. When used in this manner, Unbound re- sponds like an authority server with no further processing other than returning an answer from the zone contents. A notable example, in this case, is CNAME records which are returned verbatim to downstream clients without further resolution. With for-upstream: yes (default), authority zones are processed after the cache lookup, just before going to the network to fetch information for recursion. When used in this manner they provide a local copy of an authority server that speeds up lookups for that data during resolv- ing. If both options are enabled (default), client queries for an authority zone are answered authoritatively from Unbound, while internal queries that require data from the authority zone consult the local zone data instead of going to the network. An interesting configuration is for-downstream: no, for-upstream: yes that allows for hyperlocal behavior where both client and internal queries consult the local zone data while resolving. In this case, the aforementioned CNAME example will result in a thoroughly resolved an- swer. Authority zones can be read from zonefile. And can be kept updated via AXFR and IXFR. After update the zonefile is rewritten. The update mechanism uses the SOA timer values and performs SOA UDP queries to de- tect zone changes. If the update fetch fails, the timers in the SOA record are used to time another fetch attempt. Until the SOA expiry timer is reached. Then the zone is expired. When a zone is expired, queries are SERV- FAIL, and any new serial number is accepted from the primary (even if older), and if fallback is enabled, the fallback activates to fetch from the upstream instead of the SERVFAIL. name: <zone name> Name of the authority zone. primary: <IP address or host name> Where to download a copy of the zone from, with AXFR and IXFR. Multiple primaries can be specified. They are all tried if one fails. To use a nondefault port for DNS communication append &#39;@&#39; with the port number. You can append a &#39;#&#39; and a name, then AXFR over TLS can be used and the tls authentication certifi- cates will be checked with that name. If you combine the &#39;@&#39; and &#39;#&#39;, the &#39;@&#39; comes first. If you point it at another Un- bound instance, it would not work because that does not support AXFR/IXFR for the zone, but if you used url: to download the zonefile as a text file from a webserver that would work. If you specify the hostname, you cannot use the domain from the zonefile, because it may not have that when retrieving that data, instead use a plain IP address to avoid a circular depen- dency on retrieving that IP address. master: <IP address or host name> Alternate syntax for primary. url: <url to zonefile> Where to download a zonefile for the zone. With http or https. An example for the url is "http://www.example.com/exam- ple.org.zone". Multiple url statements can be given, they are tried in turn. If only urls are given the SOA refresh timer is used to wait for making new downloads. If also primaries are listed, the primaries are first probed with UDP SOA queries to see if the SOA serial number has changed, reducing the number of downloads. If none of the urls work, the primaries are tried with IXFR and AXFR. For https, the tls-cert-bundle and the hostname from the url are used to authenticate the connection. If you specify a hostname in the URL, you cannot use the domain from the zonefile, because it may not have that when retrieving that data, instead use a plain IP address to avoid a circular dependency on retrieving that IP address. Avoid dependencies on name lookups by using a notation like "http://192.0.2.1/unbound- primaries/example.com.zone", with an explicit IP address. allow-notify: <IP address or host name or netblockIP/prefix> With allow-notify you can specify additional sources of noti- fies. When notified, the server attempts to first probe and then zone transfer. If the notify is from a primary, it first attempts that primary. Otherwise other primaries are attempted. If there are no primaries, but only urls, the file is downloaded when notified. The primaries from primary: and url: statements are allowed notify by default. fallback-enabled: <yes or no> Default no. If enabled, Unbound falls back to querying the in- ternet as a resolver for this zone when lookups fail. For exam- ple for DNSSEC validation failures. for-downstream: <yes or no> Default yes. If enabled, Unbound serves authority responses to downstream clients for this zone. This option makes Unbound be- have, for the queries with names in this zone, like one of the authority servers for that zone. Turn it off if you want Un- bound to provide recursion for the zone but have a local copy of zone data. If for-downstream is no and for-upstream is yes, then Unbound will DNSSEC validate the contents of the zone be- fore serving the zone contents to clients and store validation results in the cache. for-upstream: <yes or no> Default yes. If enabled, Unbound fetches data from this data collection for answering recursion queries. Instead of sending queries over the internet to the authority servers for this zone, it&#39;ll fetch the data directly from the zone data. Turn it on when you want Unbound to provide recursion for downstream clients, and use the zone data as a local copy to speed up lookups. zonemd-check: <yes or no> Enable this option to check ZONEMD records in the zone. Default is disabled. The ZONEMD record is a checksum over the zone data. This includes glue in the zone and data from the zone file, and excludes comments from the zone file. When there is a DNSSEC chain of trust, DNSSEC signatures are checked too. zonemd-reject-absence: <yes or no> Enable this option to reject the absence of the ZONEMD record. Without it, when zonemd is not there it is not checked. It is useful to enable for a nonDNSSEC signed zone where the operator wants to require the verification of a ZONEMD, hence a missing ZONEMD is a failure. The action upon failure is controlled by the zonemd-permissive-mode option, for log only or also block the zone. The default is no. Without the option absence of a ZONEMD is only a failure when the zone is DNSSEC signed, and we have a trust anchor, and the DNSSEC verification of the absence of the ZONEMD fails. With the option enabled, the absence of a ZONEMD is always a failure, also for nonDNSSEC signed zones. zonefile: <filename> The filename where the zone is stored. If not given then no zonefile is used. If the file does not exist or is empty, Un- bound will attempt to fetch zone data (eg. from the primary servers). View Options There may be multiple view: clauses. Each with a name: and zero or more local-zone and local-data elements. Views can also contain view-first, response-ip, response-ip-data and local-data-ptr elements. View can be mapped to requests by specifying the view name in an access-con- trol-view element. Options from matching views will override global op- tions. Global options will be used if no matching view is found, or when the matching view does not have the option specified. name: <view name> Name of the view. Must be unique. This name is used in ac- cess-control-view elements. local-zone: <zone> <type> View specific local-zone elements. Has the same types and behav- iour as the global local-zone elements. When there is at least one local-zone specified and view-first is no, the default lo- cal-zones will be added to this view. Defaults can be disabled using the nodefault type. When view-first is yes or when a view does not have a local-zone, the global local-zone will be used including it&#39;s default zones. local-data: "<resource record string>" View specific local-data elements. Has the same behaviour as the global local-data elements. local-data-ptr: "IPaddr name" View specific local-data-ptr elements. Has the same behaviour as the global local-data-ptr elements. view-first: <yes or no> If enabled, it attempts to use the global local-zone and lo- cal-data if there is no match in the view specific options. The default is no. Python Module Options The python: clause gives the settings for the python(1) script module. This module acts like the iterator and validator modules do, on queries and answers. To enable the script module it has to be compiled into the daemon, and the word "python" has to be put in the module-config: option (usually first, or between the validator and iterator). Multiple instances of the python module are supported by adding the word "python" more than once. If the chroot: option is enabled, you should make sure Python&#39;s library directory structure is bind mounted in the new root environment, see mount(8). Also the python-script: path should be specified as an ab- solute path relative to the new root, or as a relative path to the working directory. python-script: <python file> The script file to load. Repeat this option for every python module instance added to the module-config: option. Dynamic Library Module Options The dynlib: clause gives the settings for the dynlib module. This mod- ule is only a very small wrapper that allows dynamic modules to be loaded on runtime instead of being compiled into the application. To enable the dynlib module it has to be compiled into the daemon, and the word "dynlib" has to be put in the module-config: option. Multiple in- stances of dynamic libraries are supported by adding the word "dynlib" more than once. The dynlib-file: path should be specified as an absolute path relative to the new path set by chroot: option, or as a relative path to the working directory. dynlib-file: <dynlib file> The dynamic library file to load. Repeat this option for every dynlib module instance added to the module-config: option. DNS64 Module Options The dns64 module must be configured in the module-config: directive e.g., "dns64 validator iterator" and be compiled into the daemon to be enabled. These settings go in the server: section. dns64-prefix: <IPv6 prefix> This sets the DNS64 prefix to use to synthesize AAAA records with. It must be /96 or shorter. The default prefix is 64:ff9b::/96. dns64-synthall: <yes or no> Debug option, default no. If enabled, synthesize all AAAA records despite the presence of actual AAAA records. dns64-ignore-aaaa: <name> List domain for which the AAAA records are ignored and the A record is used by dns64 processing instead. Can be entered mul- tiple times, list a new domain for which it applies, one per line. Applies also to names underneath the name given. NAT64 Operation NAT64 operation allows using a NAT64 prefix for outbound requests to IPv4-only servers. It is controlled by two options in the server: sec- tion: do-nat64: <yes or no> Use NAT64 to reach IPv4-only servers. Consider also enabling prefer-ip6 to prefer native IPv6 connections to nameservers. Default no. nat64-prefix: <IPv6 prefix> Use a specific NAT64 prefix to reach IPv4-only servers. De- faults to using the prefix configured in dns64-prefix, which in turn defaults to 64:ff9b::/96. The prefix length must be one of /32, /40, /48, /56, /64 or /96. DNSCrypt Options The dnscrypt: clause gives the settings of the dnscrypt channel. While those options are available, they are only meaningful if Unbound was compiled with --enable-dnscrypt. Currently certificate and secret/pub- lic keys cannot be generated by Unbound. You can use dnscrypt-wrapper to generate those: <https://github.com/cofyc/dnscrypt-wrapper/blob/mas-> ter/README.md#usage dnscrypt-enable: <yes or no> Whether or not the dnscrypt config should be enabled. You may define configuration but not activate it. The default is no. dnscrypt-port: <port number> On which port should dnscrypt should be activated. Note that you should have a matching interface option defined in the server section for this port. dnscrypt-provider: <provider name> The provider name to use to distribute certificates. This is of the form: 2.dnscrypt-cert.example.com.. The name MUST end with a dot. dnscrypt-secret-key: <path to secret key file> Path to the time limited secret key file. This option may be specified multiple times. dnscrypt-provider-cert: <path to cert file> Path to the certificate related to the dnscrypt-secret-keys. This option may be specified multiple times. dnscrypt-provider-cert-rotated: <path to cert file> Path to a certificate that we should be able to serve existing connection from but do not want to advertise over dnscrypt-provider&#39;s TXT record certs distribution. A typical use case is when rotating certificates, existing clients may still use the client magic from the old cert in their queries until they fetch and update the new cert. Likewise, it would al- low one to prime the new cert/key without distributing the new cert yet, this can be useful when using a network of servers us- ing anycast and on which the configuration may not get updated at the exact same time. By priming the cert, the servers can handle both old and new certs traffic while distributing only one. This option may be specified multiple times. dnscrypt-shared-secret-cache-size: <memory size> Give the size of the data structure in which the shared secret keys are kept in. Default 4m. In bytes or use m(mega), k(kilo), g(giga). The shared secret cache is used when a same client is making multiple queries using the same public key. It saves a substantial amount of CPU. dnscrypt-shared-secret-cache-slabs: <number> Give power of 2 number of slabs, this is used to reduce lock contention in the dnscrypt shared secrets cache. Close to the number of cpus is a fairly good setting. dnscrypt-nonce-cache-size: <memory size> Give the size of the data structure in which the client nonces are kept in. Default 4m. In bytes or use m(mega), k(kilo), g(giga). The nonce cache is used to prevent dnscrypt message replaying. Client nonce should be unique for any pair of client pk/server sk. dnscrypt-nonce-cache-slabs: <number> Give power of 2 number of slabs, this is used to reduce lock contention in the dnscrypt nonce cache. Close to the number of cpus is a fairly good setting. EDNS Client Subnet Module Options The ECS module must be configured in the module-config: directive e.g., "subnetcache validator iterator" and be compiled into the daemon to be enabled. These settings go in the server: section. If the destination address is allowed in the configuration Unbound will add the EDNS0 option to the query containing the relevant part of the client&#39;s address. When an answer contains the ECS option the response and the option are placed in a specialized cache. If the authority in- dicated no support, the response is stored in the regular cache. Additionally, when a client includes the option in its queries, Unbound will forward the option when sending the query to addresses that are explicitly allowed in the configuration using send-client-subnet. The option will always be forwarded, regardless the allowed addresses, if client-subnet-always-forward is set to yes. In this case the lookup in the regular cache is skipped. The maximum size of the ECS cache is controlled by &#39;msg-cache-size&#39; in the configuration file. On top of that, for each query only 100 differ- ent subnets are allowed to be stored for each address family. Exceeding that number, older entries will be purged from cache. Note that due to the nature of how EDNS Client Subnet works, by segre- gating the client IP space in order to try and have tailored responses for prefixes of unknown sizes, resolution and cache response perfor- mance are impacted as a result. Usage of the subnetcache module should only be enabled in installations that require such functionality where the resolver and the clients belong to different networks. An example of that is an open resolver installation. This module does not interact with the serve-expired* and prefetch: op- tions. send-client-subnet: <IP address> Send client source address to this authority. Append /num to in- dicate a classless delegation netblock, for example like 10.2.3.4/24 or 2001::11/64. Can be given multiple times. Author- ities not listed will not receive edns-subnet information, un- less domain in query is specified in client-subnet-zone. client-subnet-zone: <domain> Send client source address in queries for this domain and its subdomains. Can be given multiple times. Zones not listed will not receive edns-subnet information, unless hosted by authority specified in send-client-subnet. client-subnet-always-forward: <yes or no> Specify whether the ECS address check (configured using send-client-subnet) is applied for all queries, even if the triggering query contains an ECS record, or only for queries for which the ECS record is generated using the querier address (and therefore did not contain ECS data in the client query). If en- abled, the address check is skipped when the client query con- tains an ECS record. And the lookup in the regular cache is skipped. Default is no. max-client-subnet-ipv6: <number> Specifies the maximum prefix length of the client source address we are willing to expose to third parties for IPv6. Defaults to 56. max-client-subnet-ipv4: <number> Specifies the maximum prefix length of the client source address we are willing to expose to third parties for IPv4. Defaults to 24. min-client-subnet-ipv6: <number> Specifies the minimum prefix length of the IPv6 source mask we are willing to accept in queries. Shorter source masks result in REFUSED answers. Source mask of 0 is always accepted. Default is 0. min-client-subnet-ipv4: <number> Specifies the minimum prefix length of the IPv4 source mask we are willing to accept in queries. Shorter source masks result in REFUSED answers. Source mask of 0 is always accepted. Default is 0. max-ecs-tree-size-ipv4: <number> Specifies the maximum number of subnets ECS answers kept in the ECS radix tree. This number applies for each qname/qclass/qtype tuple. Defaults to 100. max-ecs-tree-size-ipv6: <number> Specifies the maximum number of subnets ECS answers kept in the ECS radix tree. This number applies for each qname/qclass/qtype tuple. Defaults to 100. Opportunistic IPsec Support Module Options The IPsec module must be configured in the module-config: directive e.g., "ipsecmod validator iterator" and be compiled into Unbound by us- ing --enable-ipsecmod to be enabled. These settings go in the server: section. When Unbound receives an A/AAAA query that is not in the cache and finds a valid answer, it will withhold returning the answer and instead will generate an IPSECKEY subquery for the same domain name. If an an- swer was found, Unbound will call an external hook passing the follow- ing arguments: QNAME Domain name of the A/AAAA and IPSECKEY query. In string for- mat. IPSECKEY TTL TTL of the IPSECKEY RRset. A/AAAA String of space separated IP addresses present in the A/AAAA RRset. The IP addresses are in string format. IPSECKEY String of space separated IPSECKEY RDATA present in the IPSECKEY RRset. The IPSECKEY RDATA are in DNS presentation format. The A/AAAA answer is then cached and returned to the client. If the external hook was called the TTL changes to ensure it doesn&#39;t surpass ipsecmod-max-ttl. The same procedure is also followed when prefetch: is used, but the A/AAAA answer is given to the client before the hook is called. ipsec- mod-max-ttl ensures that the A/AAAA answer given from cache is still relevant for opportunistic IPsec. ipsecmod-enabled: <yes or no> Specifies whether the IPsec module is enabled or not. The IPsec module still needs to be defined in the module-config: direc- tive. This option facilitates turning on/off the module without restarting/reloading Unbound. Defaults to yes. ipsecmod-hook: <filename> Specifies the external hook that Unbound will call with sys- tem(3). The file can be specified as an absolute/relative path. The file needs the proper permissions to be able to be executed by the same user that runs Unbound. It must be present when the IPsec module is defined in the module-config: directive. ipsecmod-strict: <yes or no> If enabled Unbound requires the external hook to return a suc- cess value of 0. Failing to do so Unbound will reply with SERV- FAIL. The A/AAAA answer will also not be cached. Defaults to no. ipsecmod-max-ttl: <seconds> Time to live maximum for A/AAAA cached records after calling the external hook. Defaults to 3600. ipsecmod-ignore-bogus: <yes or no> Specifies the behaviour of Unbound when the IPSECKEY answer is bogus. If set to yes, the hook will be called and the A/AAAA answer will be returned to the client. If set to no, the hook will not be called and the answer to the A/AAAA query will be SERVFAIL. Mainly used for testing. Defaults to no. ipsecmod-allow: <domain> Allow the ipsecmod functionality for the domain so that the mod- ule logic will be executed. Can be given multiple times, for different domains. If the option is not specified, all domains are treated as being allowed (default). ipsecmod-whitelist: <domain> Alternate syntax for ipsecmod-allow. Cache DB Module Options The Cache DB module must be configured in the module-config: directive e.g., "validator cachedb iterator" and be compiled into the daemon with --enable-cachedb. If this module is enabled and configured, the speci- fied backend database works as a second level cache: When Unbound can- not find an answer to a query in its built-in in-memory cache, it con- sults the specified backend. If it finds a valid answer in the back- end, Unbound uses it to respond to the query without performing itera- tive DNS resolution. If Unbound cannot even find an answer in the backend, it resolves the query as usual, and stores the answer in the backend. This module interacts with the serve-expired-* options and will reply with expired data if Unbound is configured for that. If Unbound was built with --with-libhiredis on a system that has in- stalled the hiredis C client library of Redis, then the "redis" backend can be used. This backend communicates with the specified Redis server over a TCP connection to store and retrieve cache data. It can be used as a persistent and/or shared cache backend. It should be noted that Unbound never removes data stored in the Redis server, even if some data have expired in terms of DNS TTL or the Redis server has cached too much data; if necessary the Redis server must be configured to limit the cache size, preferably with some kind of least-recently-used eviction policy. Additionally, the redis-expire-records option can be used in order to set the relative DNS TTL of the message as timeout to the Redis records; keep in mind that some additional memory is used per key and that the expire information is stored as absolute Unix time- stamps in Redis (computer time must be stable). This backend uses syn- chronous communication with the Redis server based on the assumption that the communication is stable and sufficiently fast. The thread waiting for a response from the Redis server cannot handle other DNS queries. Although the backend has the ability to reconnect to the server when the connection is closed unexpectedly and there is a con- figurable timeout in case the server is overly slow or hangs up, these cases are assumed to be very rare. If connection close or timeout hap- pens too often, Unbound will be effectively unusable with this backend. It&#39;s the administrator&#39;s responsibility to make the assumption hold. The cachedb: clause gives custom settings of the cache DB module. backend: <backend name> Specify the backend database name. The default database is the in-memory backend named "testframe", which, as the name sug- gests, is not of any practical use. Depending on the build-time configuration, "redis" backend may also be used as described above. secret-seed: <"secret string"> Specify a seed to calculate a hash value from query information. This value will be used as the key of the corresponding answer for the backend database and can be customized if the hash should not be predictable operationally. If the backend data- base is shared by multiple Unbound instances, all instances must use the same secret seed. This option defaults to "default". cachedb-no-store: <yes or no> If the backend should be read from, but not written to. This makes this instance not store dns messages in the backend. But if data is available it is retrieved. The default is no. cachedb-check-when-serve-expired: <yes or no> If enabled, the cachedb is checked before an expired response is returned. When serve-expired is enabled, without serve-ex- pired-client-timeout, it then does not immediately respond with an expired response from cache, but instead first checks the cachedb for valid contents, and if so returns it. If the cachedb also has no valid contents, the serve expired response is sent. If also serve-expired-client-timeout is enabled, the expired re- sponse is delayed until the timeout expires. Unless the lookup succeeds within the timeout. The default is yes. The following cachedb options are specific to the redis backend. redis-server-host: <server address or name> The IP (either v6 or v4) address or domain name of the Redis server. In general an IP address should be specified as other- wise Unbound will have to resolve the name of the server every time it establishes a connection to the server. This option de- faults to "127.0.0.1". redis-server-port: <port number> The TCP port number of the Redis server. This option defaults to 6379. redis-server-path: <unix socket path> The unix socket path to connect to the Redis server. Off by de- fault, and it can be set to "" to turn this off. Unix sockets may have better throughput than the IP address option. redis-server-password: "<password>" The Redis AUTH password to use for the Redis server. Only rele- vant if Redis is configured for client password authorisation. Off by default, and it can be set to "" to turn this off. redis-timeout: <msec> The period until when Unbound waits for a response from the Re- dis sever. If this timeout expires Unbound closes the connec- tion, treats it as if the Redis server does not have the re- quested data, and will try to re-establish a new connection later. This option defaults to 100 milliseconds. redis-command-timeout: <msec> The timeout to use for Redis commands, in milliseconds. If 0, it uses the redis-timeout value. The default is 0. redis-connect-timeout: <msec> The timeout to use for Redis connection set up, in milliseconds. If 0, it uses the redis-timeout value. The default is 0. redis-expire-records: <yes or no> If Redis record expiration is enabled. If yes, Unbound sets timeout for Redis records so that Redis can evict keys that have expired automatically. If Unbound is configured with serve-ex- pired and serve-expired-ttl is 0, this option is internally re- verted to "no". Redis SETEX support is required for this option (Redis >= 2.0.0). This option defaults to no. redis-logical-db: <logical database index> The logical database in Redis to use. These are databases in the same Redis instance sharing the same configuration and per- sisted in the same RDB/AOF file. If unsure about using this op- tion, Redis documentation (https://redis.io/commands/select/) suggests not to use a single Redis instance for multiple unre- lated applications. The default database in Redis is 0 while other logical databases need to be explicitly SELECT&#39;ed upon connecting. This option defaults to 0. redis-replica-server-host: <server address or name> The IP (either v6 or v4) address or domain name of the Redis replica server. In general an IP address should be specified as otherwise Unbound will have to resolve the name of the server every time it establishes a connection to the server. This server is treated as a read-only replica server (https://re- dis.io/docs/management/replication/#read-only-replica). If specified, all Redis read commands will go to this replica server, while the write commands will go to the redis-server- host. This option defaults to "" (disabled). redis-replica-server-port: <port number> The TCP port number of the Redis replica server. This option defaults to 6379. redis-replica-server-path: <unix socket path> The unix socket path to connect to the Redis server. Off by de- fault, and it can be set to "" to turn this off. Unix sockets may have better throughput than the IP address option. redis-replica-server-password: "<password>" The Redis AUTH password to use for the Redis replica server. Only relevant if Redis is configured for client password autho- risation. Off by default, and it can be set to "" to turn this off. redis-replica-timeout: <msec> The period until when Unbound waits for a response from the Re- dis replica sever. If this timeout expires Unbound closes the connection, treats it as if the Redis replica server does not have the requested data, and will try to re-establish a new con- nection later. This option defaults to 100 milliseconds. redis-replica-command-timeout: <msec> The timeout to use for Redis replica commands, in milliseconds. If 0, it uses the redis-replica-timeout value. The default is 0. redis-replica-connect-timeout: <msec> The timeout to use for Redis replica connection set up, in mil- liseconds. If 0, it uses the redis-replica-timeout value. The default is 0. redis-replica-logical-db: <logical database index> Same as redis-logical-db but for the Redis replica server. This option defaults to 0. DNSTAP Logging Options DNSTAP support, when compiled in by using --enable-dnstap, is enabled in the dnstap: section. This starts an extra thread (when compiled with threading) that writes the log information to the destination. If Unbound is compiled without threading it does not spawn a thread, but connects per-process to the destination. dnstap-enable: <yes or no> If dnstap is enabled. Default no. If yes, it connects to the dnstap server and if any of the dnstap-log-..-messages options is enabled it sends logs for those messages to the server. dnstap-bidirectional: <yes or no> Use frame streams in bidirectional mode to transfer DNSTAP mes- sages. Default is yes. dnstap-socket-path: <file name> Sets the unix socket file name for connecting to the server that is listening on that socket. Default is "". dnstap-ip: <IPaddress[@port]> If "", the unix socket is used, if set with an IP address (IPv4 or IPv6) that address is used to connect to the server. dnstap-tls: <yes or no> Set this to use TLS to connect to the server specified in dnstap-ip. The default is yes. If set to no, TCP is used to connect to the server. dnstap-tls-server-name: <name of TLS authentication> The TLS server name to authenticate the server with. Used when dnstap-tls is enabled. If "" it is ignored, default "". dnstap-tls-cert-bundle: <file name of cert bundle> The pem file with certs to verify the TLS server certificate. If "" the server default cert bundle is used, or the windows cert bundle on windows. Default is "". dnstap-tls-client-key-file: <file name> The client key file for TLS client authentication. If "" client authentication is not used. Default is "". dnstap-tls-client-cert-file: <file name> The client cert file for TLS client authentication. Default is "". dnstap-send-identity: <yes or no> If enabled, the server identity is included in the log messages. Default is no. dnstap-send-version: <yes or no> If enabled, the server version if included in the log messages. Default is no. dnstap-identity: <string> The identity to send with messages, if "" the hostname is used. Default is "". dnstap-version: <string> The version to send with messages, if "" the package version is used. Default is "". dnstap-sample-rate: <number> The sample rate for log of messages, it logs only 1/N messages. With 0 it is disabled. Default is 0. This is useful in a high volume environment, where log functionality would otherwise not be reliable. For example 10 would spend only 1/10th time on log- ging, and 100 would only spend a hundredth of the time on log- ging. dnstap-log-resolver-query-messages: <yes or no> Enable to log resolver query messages. Default is no. These are messages from Unbound to upstream servers. dnstap-log-resolver-response-messages: <yes or no> Enable to log resolver response messages. Default is no. These are replies from upstream servers to Unbound. dnstap-log-client-query-messages: <yes or no> Enable to log client query messages. Default is no. These are client queries to Unbound. dnstap-log-client-response-messages: <yes or no> Enable to log client response messages. Default is no. These are responses from Unbound to clients. dnstap-log-forwarder-query-messages: <yes or no> Enable to log forwarder query messages. Default is no. dnstap-log-forwarder-response-messages: <yes or no> Enable to log forwarder response messages. Default is no. Response Policy Zone Options Response Policy Zones are configured with rpz:, and each one must have a name:. There can be multiple ones, by listing multiple RPZ clauses, each with a different name. RPZ clauses are applied in order of config- uration and any match from an earlier RPZ zone will terminate the RPZ lookup. Note that a PASSTHRU action is still considered a match. The respip module needs to be added to the module-config, e.g.: module-con- fig: "respip validator iterator". QNAME, Response IP Address, nsdname, nsip and clientip triggers are supported. Supported actions are: NXDOMAIN, NODATA, PASSTHRU, DROP, Local Data, tcp-only and drop. RPZ QNAME triggers are applied after local-zones and before auth-zones. The RPZ zone is a regular DNS zone formatted with a SOA start record as usual. The items in the zone are entries, that specify what to act on (the trigger) and what to do (the action). The trigger to act on is recorded in the name, the action to do is recorded as the resource record. The names all end in the zone name, so you could type the trigger names without a trailing dot in the zonefile. An example RPZ record, that answers example.com with NXDOMAIN example.com CNAME . The triggers are encoded in the name on the left name query name netblock.rpz-client-ip client IP address netblock.rpz-ip response IP address in the answer name.rpz-nsdname nameserver name netblock.rpz-nsip nameserver IP address The netblock is written as <netblocklen>.<ip address in reverse>. For IPv6 use &#39;zz&#39; for &#39;::&#39;. Specify individual addresses with scope length of 32 or 128. For example, 24.10.100.51.198.rpz-ip is 198.51.100.10/24 and 32.10.zz.db8.2001.rpz-ip is 2001:db8:0:0:0:0:0:10/32. The actions are specified with the record on the right CNAME . nxdomain reply CNAME *. nodata reply CNAME rpz-passthru. do nothing, allow to continue CNAME rpz-drop. the query is dropped CNAME rpz-tcp-only. answer over TCP A 192.0.2.1 answer with this IP address Other records like AAAA, TXT and other CNAMEs (not rpz-..) can also be used to answer queries with that content. The RPZ zones can be configured in the config file with these settings in the rpz: block. name: <zone name> Name of the authority zone. primary: <IP address or host name> Where to download a copy of the zone from, with AXFR and IXFR. Multiple primaries can be specified. They are all tried if one fails. To use a nondefault port for DNS communication append &#39;@&#39; with the port number. You can append a &#39;#&#39; and a name, then AXFR over TLS can be used and the tls authentication certifi- cates will be checked with that name. If you combine the &#39;@&#39; and &#39;#&#39;, the &#39;@&#39; comes first. If you point it at another Un- bound instance, it would not work because that does not support AXFR/IXFR for the zone, but if you used url: to download the zonefile as a text file from a webserver that would work. If you specify the hostname, you cannot use the domain from the zonefile, because it may not have that when retrieving that data, instead use a plain IP address to avoid a circular depen- dency on retrieving that IP address. master: <IP address or host name> Alternate syntax for primary. url: <url to zonefile> Where to download a zonefile for the zone. With http or https. An example for the url is "http://www.example.com/exam- ple.org.zone". Multiple url statements can be given, they are tried in turn. If only urls are given the SOA refresh timer is used to wait for making new downloads. If also primaries are listed, the primaries are first probed with UDP SOA queries to see if the SOA serial number has changed, reducing the number of downloads. If none of the urls work, the primaries are tried with IXFR and AXFR. For https, the tls-cert-bundle and the hostname from the url are used to authenticate the connection. allow-notify: <IP address or host name or netblockIP/prefix> With allow-notify you can specify additional sources of noti- fies. When notified, the server attempts to first probe and then zone transfer. If the notify is from a primary, it first attempts that primary. Otherwise other primaries are attempted. If there are no primaries, but only urls, the file is downloaded when notified. The primaries from primary: and url: statements are allowed notify by default. zonefile: <filename> The filename where the zone is stored. If not given then no zonefile is used. If the file does not exist or is empty, Un- bound will attempt to fetch zone data (eg. from the primary servers). rpz-action-override: <action> Always use this RPZ action for matching triggers from this zone. Possible action are: nxdomain, nodata, passthru, drop, disabled and cname. rpz-cname-override: <domain> The CNAME target domain to use if the cname action is configured for rpz-action-override. rpz-log: <yes or no> Log all applied RPZ actions for this RPZ zone. Default is no. rpz-log-name: <name> Specify a string to be part of the log line, for easy referenc- ing. rpz-signal-nxdomain-ra: <yes or no> Signal when a query is blocked by the RPZ with NXDOMAIN with an unset RA flag. This allows certain clients, like dnsmasq, to infer that the domain is externally blocked. Default is no. for-downstream: <yes or no> If enabled the zone is authoritatively answered for and queries for the RPZ zone information are answered to downstream clients. This is useful for monitoring scripts, that can then access the SOA information to check if the RPZ information is up to date. Default is no. tags: <list of tags> Limit the policies from this RPZ clause to clients with a match- ing tag. Tags need to be defined in define-tag and can be as- signed to client addresses using access-control-tag. Enclose list of tags in quotes ("") and put spaces between tags. If no tags are specified the policies from this clause will be applied for all clients. MEMORY CONTROL EXAMPLE In the example config settings below memory usage is reduced. Some ser- vice levels are lower, notable very large data and a high TCP load are no longer supported. Very large data and high TCP loads are exceptional for the DNS. DNSSEC validation is enabled, just add trust anchors. If you do not have to worry about programs using more than 3 Mb of memory, the below example is not for you. Use the defaults to receive full ser- vice, which on BSD-32bit tops out at 30-40 Mb after heavy usage. # example settings that reduce memory usage server: num-threads: 1 outgoing-num-tcp: 1 # this limits TCP service, uses less buffers. incoming-num-tcp: 1 outgoing-range: 60 # uses less memory, but less performance. msg-buffer-size: 8192 # note this limits service, &#39;no huge stuff&#39;. msg-cache-size: 100k msg-cache-slabs: 1 rrset-cache-size: 100k rrset-cache-slabs: 1 infra-cache-numhosts: 200 infra-cache-slabs: 1 key-cache-size: 100k key-cache-slabs: 1 neg-cache-size: 10k num-queries-per-thread: 30 target-fetch-policy: "2 1 0 0 0 0" harden-large-queries: "yes" harden-short-bufsize: "yes" FILES /usr/local/etc/unbound default Unbound working directory. /usr/local/etc/unbound default chroot(2) location. /usr/local/etc/unbound/unbound.conf Unbound configuration file. /usr/local/etc/unbound/unbound.pid default Unbound pidfile with process ID of the running daemon. unbound.log Unbound log file. default is to log to syslog(3). SEE ALSO unbound(8), unbound-checkconf(8). AUTHORS Unbound was written by NLnet Labs. Please see CREDITS file in the dis- tribution for further details. NLnet Labs Apr 24, 2025 unbound.conf(5) '><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-05-22T12:17:40+08:00"><meta property="article:modified_time" content="2025-05-22T12:17:40+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="unbound 配置文件中文文档"><meta name=twitter:description content='unbound.conf(5)                 unbound 1.23.0                 unbound.conf(5)

NAME
    unbound.conf - Unbound 配置文件.

SYNOPSIS
    unbound.conf

DESCRIPTION
    unbound.conf 用于配置 unbound(8)。文件格式包含属性和值。某些属性内部包含其他属性。表示法为：attribute: value。

    注释以 # 开头，并持续到行尾。空行和行首的空白将被忽略。

    可以使用 unbound-checkconf(8) 工具在使用前检查 unbound.conf。



EXAMPLE
    下面显示了一个示例配置文件。将其复制到 /etc/unbound/unbound.conf 并使用以下命令启动服务器：

        $ unbound -c /etc/unbound/unbound.conf

    大多数设置都是默认值。使用以下命令停止服务器：

        $ kill `cat /etc/unbound/unbound.pid`

    下面是一个最小的配置文件。源代码发行版包含一个带有所有选项的 extensive example.conf 文件。

    # unbound.conf(5) unbound(8) 的配置文件。
    server:
        directory: "/etc/unbound"
        username: unbound
        # 确保 unbound 可以从 chroot 内部访问熵。
        # 例如在 Linux 上使用这些命令（在 BSD 上，使用 devfs(8)）：
        #      mount --bind -n /dev/urandom /etc/unbound/dev/urandom
        # 并且 mount --bind -n /dev/log /etc/unbound/dev/log
        chroot: "/etc/unbound"
        # logfile: "/etc/unbound/unbound.log"  #取消注释以使用日志文件。
        pidfile: "/etc/unbound/unbound.pid"
        # verbosity: 1      # 取消注释并增加以获取更多日志记录。
        # 监听所有接口，应答来自本地子网的查询。
        interface: 0.0.0.0
        interface: ::0
        access-control: 10.0.0.0/8 allow
        access-control: 2001:DB8::/64 allow

FILE FORMAT
    关键字之间必须有空格。属性关键字以冒号“:”结尾。
    属性后面跟着一个值，或者包含它的属性（在这种情况下它被称为一个子句）。
    子句可以在整个文件（或包含的文件）中重复，以将属性分组到同一个子句下。

    可以使用 include: 指令包含文件。
    它可以出现在任何地方，接受单个文件名作为参数。
    处理将继续，就好像被包含文件中的文本被复制到配置文件的那个位置一样。
    如果同时使用 chroot，则使用被包含文件的完整路径名有效；
    如果守护进程启动的目录等于其 chroot/工作目录，或者在 include 语句之前用 directory: dir 指定了工作目录，
    则被包含文件的相对路径名也有效。
    可以使用通配符包含多个文件，请参阅 glob(7)。

    对于更结构化的包含选项，可以使用 include-toplevel: 指令。
    这将关闭当前活动的任何子句（如果有），并强制在被包含的文件中以及此指令之后使用子句。

Server Options
    这些选项属于服务器配置中的`server:`部分。

    verbosity: <number>
            详细程度等级，0级表示无详细信息，仅显示错误。
            1级提供操作信息。
            2级则包含详细的操作信息，每条查询都有简短说明。
            3级深入到查询层面，逐条输出查询信息。
            4级揭示算法层面的信息。
            5级记录缓存未命中时的客户端标识。
            默认级别为1。详细程度也可通过命令行提升，详见unbound(8)手册。

    statistics-interval: <seconds>
            打印统计信息到日志的间隔秒数，针对每个线程。
            设置为0或""以禁用此功能，默认情况下是禁用的。
            直方图统计信息仅在统计间隔期间有回复发送时才会打印，
            而请求列表统计信息则会在每个间隔打印（但可能为0）。
            这是因为中位数计算需要存在数据。

    statistics-cumulative: <yes or no>
            若启用此选项，统计信息将自Unbound启动起累计，
            且在记录统计后不清除统计计数器。默认设置为`no`。

    extended-statistics: <yes or no>
            若启用，将从unbound-control(8)打印扩展统计信息。
            默认设置为`no`，因为跟踪更多统计信息需要时间。
            计数器在unbound-control(8)中列出。

    statistics-inhibit-zero: <yes or no>
            若启用，值为0的选定扩展统计信息将被抑制
            不会在unbound-control(8)中打印。这些包括
            查询类型、查询类、查询操作码、回答rcodes（除了
            NOERROR、FORMERR、SERVFAIL、NXDOMAIN、NOTIMPL、REFUSED）和RPZ
            操作。默认设置为`yes`。

    num-threads: <number>
            创建用于服务客户端的线程数量。若无需多线程，请设置为1。

    port: <port number>
            服务器响应查询的端口号，默认为53。

    interface: <ip address or interface name [@port]>
            用于连接网络的接口。此接口用于监听来自客户端的查询，
            并从中向客户端提供响应。可多次指定以在多个接口上工作。
            若未指定，则默认监听本地主机。若使用接口名称而非IP地址，
            则采用该接口上的所有IP地址列表。在重新加载（kill -HUP）时，
            接口不会变更，仅重启时生效。可通过@端口号（接口与端口号间无空格）指定端口，
            未指定时则使用默认端口（来自port设置）。

    ip-address: <ip address or interface name [@port]>
            与 interface 相同：（以便于与nsd.conf兼容）。

    interface-automatic: <yes or no>
            监听所有（当前及未来）接口上的所有地址，
            检测UDP查询的源接口并将其复制到回复中。
            这与ip-transparent非常相似，但此选项服务于所有接口，
            而使用ip-transparent时，您可以选择Unbound在哪些（未来）接口上提供服务。
            此功能尚处于实验阶段，需要您的操作系统支持特定的套接字选项。
            默认值为`no`。

    interface-automatic-ports: <string>
            列出interface-automatic监听的端口号。
            若为空，则默认监听默认端口。
            端口号在字符串中以空格分隔，默认值为""。

            此设置可用于让interface-automatic处理接口，
            并通过在列表中包含正常端口号来监听该端口，
            同时也可通过将HTTPS或DNS over TLS的端口号加入列表，实现对它们的监听。

    outgoing-interface: <ip address or ip6 netblock>
            用于连接网络的接口。
            此接口用于向权威服务器发送查询并接收其回复。
            可多次指定以在多个接口上工作。
            若未指定，则默认使用所有接口。
            您可以在`interface:`和`outgoing-interface:`行中指定相同的接口，
            这些接口将同时用于两种目的。
            为防止欺骗，出站查询会通过随机选择的出站接口发送。

            若指定的是IPv6网段而非单个IPv6地址，
            则外发的UDP查询将采用从该网段中随机选取的源地址，以应对欺骗攻击。
            此功能要求该IPv6网段需路由至运行Unbound的主机，
            并且操作系统需支持非特权非本地绑定（目前仅Linux支持）。
            可通过多个`outgoing-interface:`选项指定多个网段，
            但切勿同时指定单个IPv6地址与IPv6网段，否则随机化机制将失效。
            建议结合`prefer-ip6: yes`使用，以提高选择IPv6域名服务器进行查询的可能性。
            在Linux系统上，需执行以下两条命令，
            以便利用`freebind`套接字选项接收指定IPv6网段的流量：
            `ip -6 addr add 你的网段/64 dev lo && ip -6 route add local 你的网段/64 dev lo`。

    outgoing-range: <number>
            要打开的端口数量。
            每个线程可打开的文件描述符数量至少为1，默认值取决于编译选项。
            较大的数值需要操作系统提供额外资源。
            为了获得最佳性能，建议设置一个非常大的值，并利用libevent来实现这一目标。

    outgoing-port-permit: <port number or range>
            允许 Unbound 打开此端口或端口范围，用于发送查询。
            允许更多的出站端口能增强抵御欺骗攻击的能力。
            请确保这些端口不被其他守护进程占用。
            默认情况下，仅使用 IANA 未分配的 1024 以上端口。
            请提供一个端口号或“低-高”形式的范围，中间不要有空格。

            `outgoing-port-permit` 和 `outgoing-port-avoid` 语句按照配置文件的顺序逐行处理，
            将允许的端口加入并从允许的端口集合中减去避免的端口。
            处理开始时，允许的端口集合包含非 IANA 分配的、高于 1024 的端口。

    outgoing-port-avoid: <port number or range>
            不允许Unbound打开此端口或端口范围用于发送查询。
            使用此选项可确保Unbound不会占用其他守护进程所需的端口。
            该端口在所有出站接口上均被避开，包括IPv4和IPv6。
            默认情况下，仅使用IANA未分配的1024以上端口。
            请提供一个端口号或“低-高”形式的范围，中间不要有空格。

    outgoing-num-tcp: <number>
            为每个线程分配的外发TCP缓冲区数量。
            默认值为10。
            若设置为0，或当do-tcp为“否”时，将不会向权威服务器发送TCP查询。
            对于较大规模的部署，建议适当增加此值。

    incoming-num-tcp: <number>
            为每个线程分配的入站TCP缓冲区数量。
            默认值为10。若设置为0，或当do-tcp为“否”时，将不会接受来自客户端的TCP查询。
            对于较大规模的部署，建议适当增加此值。

    edns-buffer-size: <number>
            作为EDNS重组缓冲区大小通告的字节数。
            此值用于通过UDP向对等方发送的数据报中。
            实际缓冲区大小由msg-buffer-size决定（适用于TCP和UDP）。
            请勿设置高于该值。默认值为1232，这是2020年DNS标志日的推荐值。
            设置为512可以规避最严格的路径MTU问题，但被视为极端做法，
            因为由此产生的TCP回退量过大（可能也适用于此解析器，建议调整出站TCP数量）。

    max-udp-size: <number>
            最大UDP响应大小（不适用于TCP响应）。
            65536表示禁用UDP响应大小上限，始终采用客户端的选择。
            建议值范围为512至4096。
            默认值为1232，该默认值与edns-buffer-size的默认设置相同。

    stream-wait-size: <number>
            用于等待流缓冲区的最大字节数。默认值为4兆字节。
            纯数字表示字节，可附加&#39;k&#39;、&#39;m&#39;或&#39;g&#39;分别表示千字节、兆字节或吉字节（1兆字节为1024*1024字节）。
            由于TCP和TLS流会排队多个结果，这些缓冲区占用的内存总量不会超过此数值，否则将丢弃响应。
            此设置用于管理服务器在高负载下的总内存使用量，同时每个连接上可排队的请求数量也受到限制，
            额外的请求将在TCP缓冲区中等待。

    msg-buffer-size: <number>
            消息缓冲区的字节大小，默认设置为65552字节，
            足以容纳64Kb的数据包，这是DNS消息的最大尺寸。
            任何超过此大小的消息都无法发送或接收。
            为了节省内存，可以减小此值，但某些对DNS数据的请求，
            如针对大型资源记录的查询，可能会导致向客户端返回SERVFAIL（服务失败）响应。

    msg-cache-size: <number>
            消息缓存的大小字节数，默认值为4兆字节。
            纯数字表示字节数，可附加&#39;k&#39;、&#39;m&#39;或&#39;g&#39;分别表示千字节、兆字节或吉字节（1兆字节等于1024*1024字节）。

    msg-cache-slabs: <number>
            消息缓存中的分片数量。分片通过减少线程间的锁争用来提升性能。
            必须设置为2的幂次方。将其设置为接近CPU核心数的值是一个合理的估计。

    num-queries-per-thread: <number>
            每个线程同时处理的查询数量。若需服务的查询超出此限，
            且无法通过竞争超时机制（参见jostle-timeout）移除已有查询，则新查询将被丢弃。
            此举促使客户端在超时后重新发送请求，为服务器留出时间处理现有查询。
            默认值依据编译选项而定，通常为512或1024。

    jostle-timeout: <msec>
            当服务器非常繁忙时使用的超时设置。该值通常设定为能确保一次往返权威服务器的时长。
            若查询请求过多，则允许50%的查询完成执行，而另外50%若已超出其允许时间，则会被新到达的查询替换。
            此机制旨在防止因慢查询或高查询率导致的服务拒绝。
            默认值为200毫秒。
            其效果是，对于耗时较长的查询，其每秒查询率（qps）大约为（每线程查询数/2）除以（此类长查询的平均时间）。
            而对于短查询，其qps可达到（每线程查询数/2）除以（以整秒计的jostletimeout），
            默认情况下约为（1024/2）* 5 = 2560 qps每线程。

    delay-close: <msec>
            在UDP端口因超时被关闭前，额外延迟时间以毫秒计。
            默认值为0，即不启用此功能。
            此设置旨在防止来自上游（递归）服务器的延迟响应数据包撞击已关闭的端口，
            从而触发各种关闭端口的计数器，例如1500毫秒。
            当发生超时时，系统需要额外的套接字来检查数据包的ID和远程IP，
            不符合条件的数据包将被计入无效数据包计数器。

    udp-connect: <yes or no>
            为UDP套接字执行连接操作，以减轻ICMP侧信道泄露风险。默认设置为`yes`。

    unknown-server-time-limit: <msec>
            等待未知服务器响应的毫秒时间。
            若您处于较慢的卫星链路环境下，可适当增加此值，例如设为1128毫秒。
            这样能避免因超时导致每次初始查询都需要重新发起。默认值为376毫秒。

    discard-timeout: <msec>
            递归请求被丢弃的等待时间，以毫秒计。
            此举旨在防止大量回复堆积。
            这些请求不会收到回复，工作项将继续递归。
            如果启用了服务过期客户端超时，建议此值稍大一些。
            建议值为1900毫秒。值为0则禁用此功能。默认值为1900毫秒。

    wait-limit: <number>
            每个IP地址可等待递归回复的数量。
            这为每个IP地址设置了等待递归回复的速率限制，防止大量查询积压等待返回至单一目的地。
            若值为0，则禁用等待限制。默认值为1000。

    wait-limit-cookie: <number>
            对于发送带有有效DNS Cookie查询的IP地址，可等待递归处理的回复数量。
            由于Cookie验证了客户端地址，此限制可适当提高，默认值为10000。

    wait-limit-netblock: <netblock> <number>
            网段等待限制。若未指定，则采用默认的等待限制值。
            系统会根据最具体的网段来确定限制，这对于为特定组、个人或服务器覆盖默认设置非常有用。
            值为-1时，表示该网段无等待限制。
            默认情况下，回环地址的等待限制网段为-1，即不受限，因为它与网络其他部分隔离，防止伪造数据包。
            回环地址127.0.0.0/8和::1/128默认设置为-1。

    wait-limit-cookie-netblock: <netblock> <number>
            当查询带有DNS cookie时，针对网段的等待限制。
            若未指定，则采用wait-limit-cookie的值。值为-1时，该网段无等待限制。
            默认情况下，回环地址127.0.0.0/8和::1/128的等待限制设置为-1。

    so-rcvbuf: <number>
            如果非零，则设置SO_RCVBUF套接字选项，以在UDP端口53的入站查询上获取更多缓冲区空间。
            这样，在繁忙服务器上的短暂流量高峰不会导致丢包（参见netstat -su中的计数器）。
            默认值为0（使用系统值）。否则，指定请求的字节数，在繁忙服务器上可尝试“4m”。
            操作系统会设定一个上限，
            在Linux上，Unbound需要root权限才能突破此限制，或者管理员可以使用sysctl net.core.rmem_max进行调整。
            在BSD系统中，需修改/etc/sysctl.conf中的kern.ipc.maxsockbuf。
            在OpenBSD上，需更改头文件并重新编译内核。
            在Solaris上，使用ndd -set /dev/udp udp_max_buf 8388608进行设置。

    so-sndbuf: <number>
            若非0，则设置SO_SNDBUF套接字选项，以在UDP端口53的对外查询中获取更多缓冲区空间。
            这对于非常繁忙的服务器而言，能有效应对应答流量的突发高峰，
            否则可能会记录“发送：资源暂时不可用”的错误，且通过netstat -su也能观察到缓冲区溢出的情况。
            默认值为0（使用系统设定值）。指定请求的字节数，在极其繁忙的服务器上可尝试“4m”。
            操作系统会设定一个上限，
            在Linux上，Unbound需要root权限才能突破此限制，或者管理员可以使用sysctl net.core.wmem_max进行调整。
            在BSD和Solaris系统中，更改方式与so-rcvbuf类似。

    so-reuseport: <yes or no>
            若选择`yes`，则为每个线程开启专用的监听套接字以接收查询，
            并尝试在每个套接字上设置SO_REUSEPORT选项。
            此举可能更均匀地分配查询至各线程。
            默认设置为`yes`。
            在Linux系统中，此功能支持内核版本>=3.9。
            其他系统如FreeBSD、OSX也可能适用。您可在任何平台及内核上启用此功能，
            系统将尝试打开端口并在编译时若该选项可用则传递之；
            若成功则使用，失败则静默继续（除非详细级别为3），不采用该选项。
            在极高负载情况下，关闭此选项可能更利于查询的均匀分配，此现象在Linux系统（4.4.x版本）中有报告。

    ip-transparent: <yes or no>
            如果是，则在Unbound监听入站流量的套接字上使用IP_TRANSPARENT套接字选项。
            默认情况下为`no`。此选项允许您绑定到非本地接口，
            例如，对于将来会存在但目前不存在的IP地址，配合主机故障转移配置使用。
            这与interface-automatic非常相似，但后者服务于所有接口，
            而通过此选项，您可以选择Unbound将在哪些（未来）接口上提供服务。
            在某些系统上，此选项需要Unbound以root权限启动。
            在FreeBSD系统上，该选项使用IP_BINDANY，在OpenBSD系统上则使用SO_BINDANY。

    ip-freebind: <yes or no>
            如果是，则在监听未绑定地址的套接字上使用IP_FREEBIND选项。
            默认情况下为`no`。此选项允许您绑定到非本地或不存在的IP地址，例如当网络接口或IP地址不可用时。
            该选项仅存在于Linux系统中，同时也可使用类似的ip-transparent选项。

    ip-dscp: <number>
            传出IP数据包头中区分服务字段（DS）内的区分服务代码点（DSCP）值。
            该字段取代了过时的IPv4服务类型字段及IPv6流量类别字段。

    rrset-cache-size: <number>
            RRset缓存的大小以字节数计，默认值为4兆字节。
            纯数字表示字节，可附加&#39;k&#39;、&#39;m&#39;或&#39;g&#39;分别表示千字节、兆字节或吉字节（1兆字节等于1024*1024字节）。

    rrset-cache-slabs: <number>
            RRset缓存中的slab数量。slab通过减少线程间的锁争用来提升性能。必须设置为2的幂次方。

    cache-max-ttl: <seconds>
            RRsets和消息在缓存中的最大生存时间（TTL），默认值为86400秒（1天）。
            当TTL到期时，缓存项即视为过期。
            可通过设置更低的TTL值，强制解析器频繁查询数据，而不依赖（过大的）TTL值。
            下游客户端同样会看到这一较低的TTL设置。

    cache-min-ttl: <seconds>
            RRsets和消息在缓存中的最小生存时间。默认值为0。
            若启用最小值，数据将被缓存超过域名所有者预期的时间，从而减少查询次数以查找数据。
            设置为零确保缓存中的数据符合域名所有者的意图，
            而较高的值，尤其是超过一小时左右，可能导致缓存数据与实际数据不再匹配，从而引发问题。

    cache-max-negative-ttl: <seconds>
            负响应的生存时间上限，这些响应在授权部分包含一个时间受限的SOA记录。
            默认值为3600秒。此设置适用于nxdomain（域名不存在）和nodata（无数据）类型的应答。

    cache-min-negative-ttl: <seconds>
            负面响应的最小生存时间，这些响应在权威部分包含一个有时间限制的SOA记录。
            默认值为0（禁用）。如果此功能被禁用且配置了cache-min-ttl，则后者将生效。
            在这种情况下，您可以将其设置为1以遵循上游的TTL。
            此设置适用于nxdomain和nodata类型的应答。

    infra-host-ttl: <seconds>
            主机缓存中条目的生存时间。该缓存包含往返时间、故障状态及EDNS支持信息。默认值为900。

    infra-cache-slabs: <number>
            基础设施缓存中的slab数量。slab通过减少线程间的锁争用来提升性能，必须设置为2的幂次方。

    infra-cache-numhosts: <number>
            缓存信息的主机数量，默认值为10000。

    infra-cache-min-rtt: <msec>
            基础设施缓存中动态重传超时计算的下限值，默认设置为50毫秒。
            若使用需更长时间进行递归名称解析的转发器，请适当增加此值。

    infra-cache-max-rtt: <msec>
            基础设施缓存中动态重传超时计算的上限值，默认设置为2分钟。

    infra-keep-probing: <yes or no>
            若启用此功能，服务器将持续对已宕机的主机进行探测，采用一次一探的模式。
            默认设置为`no`。
            对于已宕机的主机，例如在单次探测期间未响应者，将被标记为宕机状态，
            并可能需要等待 infra-host-ttl 时间后才会再次被探测。

    define-tag: <"list of tags">
            定义可与本地区域（local-zone）和访问控制（access-control）一同使用的标签。
            将列表用引号（""）括起，并在标签之间留出空格。

    do-ip4: <yes or no>
            启用或禁用是否响应或发起ip4查询。默认设置为`yes`。

    do-ip6: <yes or no>
            启用或禁用是否响应或发起IPv6查询。默认设置为`yes`。
            若禁用，则不会在IPv6上响应查询，也不会通过IPv6向互联网域名服务器发送查询。
            此选项可用于关闭IPv6传输以发送DNS流量，但不会影响DNS流量的内容，其中可能包含IPv4和IPv6地址。

    prefer-ip4: <yes or no>
            若启用此选项，将优先使用IPv4传输向互联网域名服务器发送DNS查询。
            默认设置为`no`。
            当服务器所在的IPv6网段（整个/64）并非由单一运营商所有，
            且该网段/64的信誉存在问题时，此选项尤为有用，
            此时使用IPv4可利用上游服务器已有的IPv4过滤机制。

    prefer-ip6: <yes or no>
            若启用，将优先使用IPv6传输向互联网域名服务器发送DNS查询。默认设置为否。

    do-udp: <yes or no>
            启用或禁用是否响应或发起UDP查询。默认设置为`yes`。

    do-tcp: <yes or no>
            启用或禁用TCP查询的应答与发起，默认设置为`yes`。

    tcp-mss: <number>
            服务器响应查询时，TCP套接字的最大段大小（MSS）。
            设置低于以太网常见MSS的值（例如1220）可解决路径MTU问题。
            需注意，并非所有平台都支持通过套接字选项设置MSS（TCP_MAXSEG）。
            默认情况下，MSS由接口MTU及服务器与客户端之间的协商决定，采用系统默认值。

    outgoing-tcp-mss: <number>
            TCP套接字用于发出查询（从Unbound到其他服务器）的最大段大小（MSS）。
            设置低于以太网常见MSS的值（例如1220）可解决路径MTU问题。
            需要注意的是，并非所有平台都支持通过套接字选项设置MSS（TCP_MAXSEG）。
            默认情况下，MSS由接口MTU及Unbound与其他服务器之间的协商决定，采用系统默认值。

    tcp-idle-timeout: <msec>
            Unbound在TCP连接上等待查询的时长，若超时则关闭连接。
            此选项默认值为30000毫秒。
            当空闲的入站TCP缓冲区数量低于配置总数的50%时，该选项值会逐步降低：
            首先降至配置值的1%，若空闲缓冲区进一步低于总数的35%，则降至配置值的0.2%，
            最终若空闲缓冲区低于总数的20%，则降至0。
            无论采用何种选项值，最小超时时间均保持为200毫秒。
            若启用了edns-tcp-keepalive，此设置将被edns-tcp-keepalive-timeout覆盖。

    tcp-reuse-timeout: <msec>
            Unbound 期间将保持与权威服务器的 TCP 持久连接开启。此选项默认值为 60000 毫秒。

    max-reuse-tcp-queries: <number>
            在持久TCP连接上可发送的最大查询数量，此选项默认设置为200次查询。

    tcp-auth-query-timeout: <number>
            TCP查询认证服务器的超时时间，以毫秒为单位。此选项默认值为3000毫秒。

    edns-tcp-keepalive: <yes or no>
            启用或禁用EDNS TCP保持连接功能。默认设置为`no`。

    edns-tcp-keepalive-timeout: <msec>
            当启用edns-tcp-keepalive时，此设置将覆盖tcp-idle-timeout。
            若客户端支持EDNS TCP保持连接选项，Unbound会向客户端发送超时值，
            以促使客户端在服务器超时前关闭连接。
            此选项默认值为120000毫秒。

    sock-queue-timeout: <sec>
            在套接字缓冲区中等待过久的UDP查询可被丢弃。
            默认值为0，即禁用此功能。
            时间以秒为单位设置，3秒可能是一个合适的值，用于忽略那些客户端可能已不再需要回复的旧查询。
            这种情况可能发生在主机暂时无法处理查询时，例如Unbound未运行，之后又重新启用。
            该功能利用了时间戳套接字选项。

    tcp-upstream: <yes or no>
            启用或禁用上游查询是否仅使用TCP进行传输。
            默认设置为`no`。在隧道场景中非常有用。
            如果设置为否，您可以通过分别使用forward-tcp-upstream或stub-tcp-upstream，
            仅为选定的转发区域或存根区域指定TCP传输。

    udp-upstream-without-downstream: <yes or no>
            即使do-udp设置为否，也启用UDP上行。
            默认情况下为否，此设置不会改变任何现有配置。
            对于TLS服务提供商而言，若希望禁止UDP下行但需通过UDP获取上行数据，此功能尤为实用。

    tls-upstream: <yes or no>
            启用或禁用上游查询是否仅使用TLS进行传输。
            默认值为`no`。在隧道场景中非常有用。
            TLS包含以TCP线格式传输的纯DNS数据。
            另一台服务器必须支持此功能（参见tls-service-key）。
            如果启用此选项，还需配置tls-cert-bundle或使用tls-win-cert、tls-system-cert加载CA证书，
            否则连接无法进行身份验证。
            此选项为所有上游查询启用TLS，但如果不设置此选项，
            可以通过forward-tls-upstream为特定转发区域单独配置TLS，
            同样适用于stub-tls-upstream。如果启用了tls-upstream选项，
            则对所有转发和存根区域生效，此时forward-tls-upstream和stub-tls-upstream选项将被忽略，
            视为已设置为`yes`。

    ssl-upstream: <yes or no>
            tls-upstream 的替代语法。若配置文件中两者均存在，则以最后一项为准。

    tls-service-key: <file>
            若启用此功能，服务器将在通过tls-port或https-port隐式或显式标记的TCP端口上
            提供DNS-over-TLS或DNS-over-HTTPS服务。
            配置文件必须包含TLS会话的私钥，公钥证书则位于tls-service-pem文件中，且若指定了tls-service-key，
            也必须同时指定。
            默认值为空，即关闭状态。
            启用或禁用此服务需重启服务器（仅重载配置不够），因为密钥读取需在持有root权限及chroot（如有）之前进行。
            通过tls-port:和https-port:隐式或显式启用的端口不提供常规的DNS TCP服务。
            Unbound需编译时包含libnghttp2以支持DNS-over-HTTPS。

    ssl-service-key: <file>
            tls-service-key 的替代语法。

    tls-service-pem: <file>
            用于TLS服务的公钥证书pem文件。默认值为""，表示关闭。

    ssl-service-pem: <file>
            tls-service-pem 的替代语法。

    tls-port: <number>
            提供TCP TLS服务的端口号，默认为853，只有配置了该端口号作为@number的接口才能获得TLS服务。

    ssl-port: <number>
            tls端口的替代语法。

    tls-cert-bundle: <file>
            若为空或""，则不使用任何文件。
            请将其设置为证书包文件，例如"/etc/pki/tls/certs/ca-bundle.crt"。
            这些证书用于验证与外部对等方建立的连接，如认证区域URL及DNS over TLS连接。
            该文件在启动时、权限降级和chroot之前被读取。

    ssl-cert-bundle: <file>
            tls-cert-bundle 的替代语法。

    tls-win-cert: <yes or no>
            将系统证书添加到认证所需的证书包中。
            若无证书包，则仅使用这些证书。
            默认情况下不启用此功能。
            在Windows系统上，此选项会使用证书存储中的证书。
            在其他系统上，请使用`tls-cert-bundle`选项来启用系统证书。

    tls-system-cert: <yes or no>
            此设置与tls-win-cert设置相同，只是名称不同，因为它并非专为Windows设计。

    tls-additional-port: <portnr>
            将端口号列为tls-additional-port，并在定义接口时（例如使用@port后缀），
            作为此端口号，它们将提供DNS over TLS服务。
            可列出多个，每个端口号单独一行声明。

    tls-session-ticket-keys: <file>
            若非空，则列出包含80字节随机内容的文件，
            这些文件用于为使用Unbound服务器的客户端执行TLS会话恢复。
            这些文件内含有TLS会话票据的密钥。
            首个密钥用于加密和解密TLS会话票据，其余密钥仅用于解密。
            通过生成新的首个文件，并在其后暂时保留旧文件以允许解密，可以实现密钥的轮换。
            待客户端不再使用旧密钥后，即可移除旧密钥。
            创建此类文件的一种方法是使用命令`dd if=/dev/random bs=1 count=80 of=ticket.dat`。
            若需创建第二个密钥，其前16字节应与旧密钥不同，这部分用于标识密钥。
            随后是32字节的随机数据作为AES密钥，再接着32字节的随机数据作为HMAC密钥。

    tls-ciphers: <string with cipher list>
            设置服务TLS时允许的加密套件列表。使用""表示默认值，且此为默认设置。

    tls-ciphersuites: <string with ciphersuites list>
            设置服务TLS时允许的加密套件列表，适用于较新的TLS 1.3连接。
            使用""表示采用默认值，这也是默认设置。

    pad-responses: <yes or no>
            若启用此功能，包含EDNS填充选项的TLS服务查询将导致响应被填充至最接近pad-responses-block-size指定大小的倍数。默认设置为`yes`。

    pad-responses-block-size: <number>
            用于填充通过TLS服务的响应的块大小。仅对填充查询的响应进行填充。默认值为468。

    pad-queries: <yes or no>
            若启用此功能，所有通过TLS上游发送的查询将被填充至最接近pad-queries-block-size指定大小的倍数。
            默认设置为`yes`。

    pad-queries-block-size: <number>
            用于填充通过TLS上游发送的查询的块大小，默认值为128。

    tls-use-sni: <yes or no>
            启用或禁用在TLS连接上发送SNI扩展。默认值为`yes`。更改此值需重新加载配置。

    https-port: <number>
            提供DNS-over-HTTPS服务的端口号，默认443，只有配置了该端口号作为@number的接口才能获得HTTPS服务。

    http-endpoint: <endpoint string>
            提供DNS-over-HTTPS服务的HTTP端点，默认为"/dns-query"。

    http-max-streams: <number of streams>
            用于DNS-over-HTTPS连接的HTTP/2 SETTINGS帧中SETTINGS_MAX_CONCURRENT_STREAMS参数的数值，默认设置为100。

    http-query-buffer-size: <size in bytes>
            所有HTTP/2查询缓冲区合并使用的最大字节数。
            这些缓冲区包含等待请求流完成的（部分）DNS查询。
            对于超出此限制的流，将发送RST_STREAM帧。
            默认值为4兆字节。纯数字表示字节，可附加&#39;k&#39;、&#39;m&#39;或&#39;g&#39;分别表示千字节、兆字节或吉字节（1兆字节等于1024*1024字节）。

    http-response-buffer-size: <size in bytes>
            所有HTTP/2响应缓冲区合并使用的最大字节数。
            这些缓冲区包含等待写回客户端的DNS响应。
            对于超出此限制的流，将发送RST_STREAM帧。默认值为4兆字节。
            纯数字表示字节，可附加&#39;k&#39;、&#39;m&#39;或&#39;g&#39;分别表示千字节、兆字节或吉字节（1兆字节等于1024*1024字节）。

    http-nodelay: <yes or no>
            在用于提供DNS-over-HTTPS服务的套接字上设置TCP_NODELAY选项。若该选项不可用，则忽略。默认值为`yes`。

    http-notls-downstream: <yes or no>
            禁用下游DNS-over-HTTP连接的TLS使用。适用于本地后端服务器。默认设置为`no`。

    proxy-protocol-port: <portnr>
            将端口号列为代理协议端口（proxy-protocol-port），
            并在定义接口时，如使用@port后缀，指定为此端口号，
            这些接口将支持并预期接收PROXYv2协议。
            在此情况下，代理地址仅用于网络通信及初始的访问控制列表（ACL，检查代理本身是否被配置拒绝）。
            随后，被代理的地址（如有）将作为真实客户端地址，
            并在日志记录、ACL、DNSTAP、RPZ及IP限速等适用场景中使用。
            PROXYv2协议支持UDP和TCP/TLS监听接口，但在DoH、DoQ或DNSCrypt监听接口上不支持PROXYv2。
            可列出多个端口，每个端口单独一行声明。

    quic-port: <number>
            The  port  number on which to provide DNS-over-QUIC service, de-
            fault 853, only interfaces configured with that port  number  as
            @number  get  the QUIC service.  The interface uses QUIC for the
            UDP traffic on that port number.

    quic-size: <size in bytes>
            Maximum number of bytes for all QUIC buffers and data  combined.
            Default  is 8 megabytes. A plain number is in bytes, append &#39;k&#39;,
            &#39;m&#39; or &#39;g&#39; for  kilobytes,  megabytes  or  gigabytes  (1024*1024
            bytes in a megabyte). New connections receive connection refused
            when the limit is exceeded. New streams are reset when the limit
            is exceeded.

    use-systemd: <yes or no>
            Enable or disable systemd socket activation.  Default is no.

    do-daemonize: <yes or no>
            Enable  or  disable  whether  the  Unbound server forks into the
            background as a daemon.  Set the value to no when  Unbound  runs
            as systemd service.  Default is yes.

    tcp-connection-limit: <IP netblock> <limit>
            Allow  up  to  limit simultaneous TCP connections from the given
            netblock.  When at the limit, further connections  are  accepted
            but  closed  immediately.   This  option is experimental at this
            time.

    access-control: <IP netblock> <action>
            Specify treatment of incoming queries from their originating  IP
            address.   Queries  can be allowed to have access to this server
            that gives DNS answers, or refused, with other actions possible.
            The IP address range can be specified as a netblock, it is  pos-
            sible  to  give  the statement several times in order to specify
            the treatment of different netblocks.

            The netblock is given as an IP4 or IP6 address  with  /size  ap-
            pended  for  a  classless network block. The action can be deny,
            refuse,   allow,   allow_setrd,    allow_snoop,    allow_cookie,
            deny_non_local  or refuse_non_local.  The most specific netblock
            match is used, if none match refuse is used.  The order  of  the
            access-control statements therefore does not matter.

            The deny action stops queries from hosts from that netblock.

            The  refuse  action stops queries too, but sends a DNS rcode RE-
            FUSED error message back.

            The allow action gives access to clients from that netblock.  It
            gives only access for recursion clients (which  is  what  almost
            all clients need).  Nonrecursive queries are refused.

            The  allow  action does allow nonrecursive queries to access the
            local-data that is configured.  The reason is that this does not
            involve the Unbound server recursive lookup algorithm, and  sta-
            tic  data  is  served in the reply.  This supports normal opera-
            tions where nonrecursive queries are made for the  authoritative
            data.   For  nonrecursive  queries  any replies from the dynamic
            cache are refused.

            The allow_setrd action ignores the recursion  desired  (RD)  bit
            and  treats all requests as if the recursion desired bit is set.
            Note that this behavior violates RFC 1034 which  states  that  a
            name  server should never perform recursive service unless asked
            via the RD bit since this interferes with  trouble  shooting  of
            name  servers  and their databases. This prohibited behavior may
            be useful if another DNS server must forward requests  for  spe-
            cific zones to a resolver DNS server, but only supports stub do-
            mains  and  sends queries to the resolver DNS server with the RD
            bit cleared.

            The allow_snoop action gives nonrecursive access too.  This give
            both recursive and non recursive access.  The  name  allow_snoop
            refers  to  cache  snooping,  a  technique  to  use nonrecursive
            queries to examine the  cache  contents  (for  malicious  acts).
            However,  nonrecursive  queries can also be a valuable debugging
            tool (when you want to examine the cache contents). In that case
            use allow_snoop for your administration host.

            The allow_cookie action allows access only to UDP  queries  that
            contain  a  valid  DNS  Cookie  as specified in RFC 7873 and RFC
            9018, when the answer-cookie option  is  enabled.   UDP  queries
            containing  only a DNS Client Cookie and no Server Cookie, or an
            invalid DNS Cookie, will receive a BADCOOKIE response  including
            a  newly  generated  DNS  Cookie, allowing clients to retry with
            that DNS Cookie.  The allow_cookie action will also  accept  re-
            quests  over  stateful transports, regardless of the presence of
            an DNS Cookie and regardless of the answer-cookie setting.   UDP
            queries  without a DNS Cookie receive REFUSED responses with the
            TC flag set, that  may  trigger  fall  back  to  TCP  for  those
            clients.

            By  default only localhost (the 127.0.0.0/8 IP netblock, not the
            loopback interface) is implicitly allowed, the rest is  refused.
            The  default  is refused, because that is protocol-friendly. The
            DNS protocol is not designed to handle dropped  packets  due  to
            policy,  and dropping may result in (possibly excessive) retried
            queries.

            The deny_non_local and refuse_non_local settings are  for  hosts
            that are only allowed to query for the authoritative local-data,
            they  are  not  allowed full recursion but only the static data.
            With deny_non_local, messages that are disallowed  are  dropped,
            with refuse_non_local they receive error code REFUSED.

    access-control-tag: <IP netblock> <"list of tags">
            Assign  tags  to access-control elements. Clients using this ac-
            cess control element use localzones that are tagged with one  of
            these  tags.  Tags must be defined in define-tags.  Enclose list
            of tags in quotes ("") and  put  spaces  between  tags.  If  ac-
            cess-control-tag is configured for a netblock that does not have
            an  access-control,  an access-control element with action allow
            is configured for this netblock.

    access-control-tag-action: <IP netblock> <tag> <action>
            Set action for particular tag for given access control  element.
            If  you have multiple tag values, the tag used to lookup the ac-
            tion is the first tag match between access-control-tag  and  lo-
            cal-zone-tag  where  "first" comes from the order of the define-
            tag values.

    access-control-tag-data: <IP netblock> <tag> <"resource record string">
            Set redirect data for particular tag for  given  access  control
            element.

    access-control-view: <IP netblock> <view name>
            Set view for given access control element.

    interface-action: <ip address or interface name [@port]> <action>
            Similar to access-control: but for interfaces.

            The  action  is  the  same as the ones defined under access-con-
            trol:.  Interfaces are refused by default.  By default only  lo-
            calhost  (the  127.0.0.0/8  IP netblock, not the loopback inter-
            face) is implicitly allowed through the default  access-control:
            behavior.   This  also  means that any attempt to use the inter-
            face-*: options for the loopback interface will not work as they
            will be overridden  by  the  implicit  default  "access-control:
            127.0.0.0/8 allow" option.

            Note  that  the interface needs to be already specified with in-
            terface: and that any access-control*: setting overrides all in-
            terface-*: settings for targeted clients.

    interface-tag: <ip address or interface name [@port]> <"list of tags">
            Similar to access-control-tag: but for interfaces.

            Note that the interface needs to be already specified  with  in-
            terface: and that any access-control*: setting overrides all in-
            terface-*: settings for targeted clients.

    interface-tag-action: <ip address or interface name [@port]> <tag> <ac-
    tion>
            Similar to access-control-tag-action: but for interfaces.

            Note  that  the interface needs to be already specified with in-
            terface: and that any access-control*: setting overrides all in-
            terface-*: settings for targeted clients.

    interface-tag-data: <ip address or interface name [@port]> <tag> <"re-
    source record string">
            Similar to access-control-tag-data: but for interfaces.

            Note that the interface needs to be already specified  with  in-
            terface: and that any access-control*: setting overrides all in-
            terface-*: settings for targeted clients.

    interface-view: <ip address or interface name [@port]> <view name>
            Similar to access-control-view: but for interfaces.

            Note  that  the interface needs to be already specified with in-
            terface: and that any access-control*: setting overrides all in-
            terface-*: settings for targeted clients.

    chroot: <directory>
            If chroot is enabled, you should pass the configfile  (from  the
            commandline)  as  a  full path from the original root. After the
            chroot has been performed the now defunct portion of the  config
            file path is removed to be able to reread the config after a re-
            load.

            All  other  file paths (working dir, logfile, roothints, and key
            files) can be specified in several ways:  as  an  absolute  path
            relative  to the new root, as a relative path to the working di-
            rectory, or as an absolute path relative to the  original  root.
            In  the last case the path is adjusted to remove the unused por-
            tion.

            The pidfile can be either a relative path to the working  direc-
            tory,  or  an absolute path relative to the original root. It is
            written just prior to chroot and dropping permissions. This  al-
            lows the pidfile to be /var/run/unbound.pid and the chroot to be
            /var/unbound,  for example. Note that Unbound is not able to re-
            move the pidfile after termination when it is located outside of
            the chroot directory.

            Additionally, Unbound may need to access /dev/urandom  (for  en-
            tropy) from inside the chroot.

            If  given a chroot is done to the given directory. The chroot is
            by default set to "/usr/local/etc/unbound". If you  give  ""  no
            chroot is performed.

    username: <name>
            If  given,  after  binding  the  port  the  user  privileges are
            dropped. Default is "unbound". If you give username: "" no  user
            change is performed.

            If  this  user  is  not capable of binding the port, reloads (by
            signal HUP) will still retain the opened ports.  If  you  change
            the port number in the config file, and that new port number re-
            quires privileges, then a reload will fail; a restart is needed.

    directory: <directory>
            Sets the working directory for the program. Default is "/usr/lo-
            cal/etc/unbound".  On Windows the string "%EXECUTABLE%" tries to
            change  to  the  directory  that unbound.exe resides in.  If you
            give a server: directory: dir before  include:  file  statements
            then those includes can be relative to the working directory.

    logfile: <filename>
            If  ""  is given, logging goes to stderr, or nowhere once daemo-
            nized.  The logfile is appended to, in the following format:
            [seconds since 1970] unbound[pid:tid]: type: message.
            If this option is given, the use-syslog  is  option  is  set  to
            "no".  The logfile is reopened (for append) when the config file
            is reread, on SIGHUP.

    use-syslog: <yes or no>
            Sets  Unbound  to  send  log messages to the syslogd, using sys-
            log(3).  The log facility LOG_DAEMON is used, with identity "un-
            bound".  The logfile setting is overridden  when  use-syslog  is
            turned on.  The default is to log to syslog.

    log-identity: <string>
            If  "" is given (default), then the name of the executable, usu-
            ally "unbound" is used to report to the log.  Enter a string  to
            override  it with that, which is useful on systems that run more
            than one instance of Unbound, with different configurations,  so
            that the logs can be easily distinguished against.

    log-time-ascii: <yes or no>
            Sets  logfile  lines to use a timestamp in UTC ascii. Default is
            no, which prints the seconds since 1970 in brackets.  No  effect
            if  using  syslog,  in  that  case  syslog formats the timestamp
            printed into the log files.

    log-time-iso: <yes or no>
            Log time in ISO8601 format, if log-time-ascii: yes is also  set.
            Default is no.

    log-queries: <yes or no>
            Prints one line per query to the log, with the log timestamp and
            IP  address, name, type and class.  Default is no.  Note that it
            takes time to print these lines which makes the server (signifi-
            cantly) slower.  Odd  (nonprintable)  characters  in  names  are
            printed as &#39;?&#39;.

    log-replies: <yes or no>
            Prints one line per reply to the log, with the log timestamp and
            IP  address,  name,  type,  class, return code, time to resolve,
            from cache and response size.  Default  is  no.   Note  that  it
            takes time to print these lines which makes the server (signifi-
            cantly)  slower.   Odd  (nonprintable)  characters  in names are
            printed as &#39;?&#39;.

    log-tag-queryreply: <yes or no>
            Prints  the  word  &#39;query&#39;  and  &#39;reply&#39;  with  log-queries  and
            log-replies.   This makes filtering logs easier.  The default is
            off (for backwards compatibility).

    log-destaddr: <yes or no>
            Prints the destination address, port and type in the log-replies
            output.  This disambiguates what type of  traffic,  eg.  udp  or
            tcp, and to what local port the traffic was sent to.

    log-local-actions: <yes or no>
            Print log lines to inform about local zone actions.  These lines
            are  like  the  local-zone  type inform prints out, but they are
            also printed for the other types of local zones.

    log-servfail: <yes or no>
            Print log lines that say why queries return SERVFAIL to clients.
            This is separate from the verbosity debug  logs,  much  smaller,
            and printed at the error level, not the info level of debug info
            from verbosity.

    pidfile: <filename>
            The  process  id  is  written  to the file. Default is "/usr/lo-
            cal/etc/unbound/unbound.pid".  So,
            kill -HUP `cat /usr/local/etc/unbound/unbound.pid`
            triggers a reload,
            kill -TERM `cat /usr/local/etc/unbound/unbound.pid`
            gracefully terminates.

    root-hints: <filename>
            Read the root hints from this file. Default  is  nothing,  using
            builtin  hints for the IN class. The file has the format of zone
            files, with root nameserver names and addresses  only.  The  de-
            fault  may become outdated, when servers change, therefore it is
            good practice to use a root-hints file.

    hide-identity: <yes or no>
            If enabled id.server and hostname.bind queries are refused.

    identity: <string>
            Set the identity to report. If set to "", the default, then  the
            hostname of the server is returned.

    hide-version: <yes or no>
            If enabled version.server and version.bind queries are refused.

    version: <string>
            Set  the  version to report. If set to "", the default, then the
            package version is returned.

    hide-http-user-agent: <yes or no>
            If enabled the HTTP header User-Agent is not set. Use with  cau-
            tion  as  some webserver configurations may reject HTTP requests
            lacking this header.  If needed, it is better to explicitly  set
            the http-user-agent below.

    http-user-agent: <string>
            Set  the  HTTP  User-Agent header for outgoing HTTP requests. If
            set to "", the default, then the package name  and  version  are
            used.

    nsid: <string>
            Add  the  specified  nsid to the EDNS section of the answer when
            queried with an NSID EDNS enabled packet.  As a sequence of  hex
            characters or with ascii_ prefix and then an ascii string.

    hide-trustanchor: <yes or no>
            If enabled trustanchor.unbound queries are refused.

    target-fetch-policy: <"list of numbers">
            Set  the  target fetch policy used by Unbound to determine if it
            should fetch nameserver target addresses opportunistically.  The
            policy is described per dependency depth.

            The  number  of  values  determines the maximum dependency depth
            that Unbound will pursue in answering a query.  A  value  of  -1
            means to fetch all targets opportunistically for that dependency
            depth.  A  value  of 0 means to fetch on demand only. A positive
            value fetches that many targets opportunistically.

            Enclose the list between quotes ("") and put spaces between num-
            bers.  The default is "3 2 1 0 0". Setting all zeroes, "0 0 0  0
            0"  gives  behaviour closer to that of BIND 9, while setting "-1
            -1 -1 -1 -1" gives behaviour rumoured to be closer  to  that  of
            BIND 8.

    harden-short-bufsize: <yes or no>
            Very  small  EDNS buffer sizes from queries are ignored. Default
            is yes, as described in the standard.

    harden-large-queries: <yes or no>
            Very large queries are ignored. Default is no, since it is legal
            protocol wise to send these, and could be necessary  for  opera-
            tion if TSIG or EDNS payload is very large.

    harden-glue: <yes or no>
            Will  trust glue only if it is within the servers authority. De-
            fault is yes.

    harden-unverified-glue: <yes or no>
            Will trust only in-zone glue. Will try to  resolve  all  out  of
            zone  (<unverfied>)  glue. Will fallback to the original glue if
            unable to resolve.  Default is no.

    harden-dnssec-stripped: <yes or no>
            Require DNSSEC data for trust-anchored zones, if  such  data  is
            absent,  the  zone  becomes  bogus. If turned off, and no DNSSEC
            data is received (or the DNSKEY data fails  to  validate),  then
            the  zone  is made insecure, this behaves like there is no trust
            anchor. You could turn this off if you are sometimes  behind  an
            intrusive  firewall (of some sort) that removes DNSSEC data from
            packets, or a zone changes from  signed  to  unsigned  to  badly
            signed  often. If turned off you run the risk of a downgrade at-
            tack that disables security for a zone. Default is yes.

    harden-below-nxdomain: <yes or no>
            From RFC 8020 (with title "NXDOMAIN: There Really Is Nothing Un-
            derneath"), returns nxdomain to queries for a name below another
            name that is already known to be nxdomain.  DNSSEC mandates  no-
            error  for empty nonterminals, hence this is possible.  Very old
            software might return nxdomain for empty nonterminals (that usu-
            ally happen for reverse IP address lookups), and thus may be in-
            compatible with this.  To try to avoid this  only  DNSSEC-secure
            nxdomains  are  used,  because  the  old  software does not have
            DNSSEC.  Default is yes.  The  nxdomain  must  be  secure,  this
            means nsec3 with optout is insufficient.

    harden-referral-path: <yes or no>
            Harden  the  referral  path by performing additional queries for
            infrastructure data.  Validates the replies if trust anchors are
            configured and the zones are signed.  This enforces DNSSEC vali-
            dation on nameserver NS sets and the nameserver  addresses  that
            are encountered on the referral path to the answer.  Default no,
            because  it  burdens  the  authority  servers, and it is not RFC
            standard, and could lead to performance problems because of  the
            extra  query  load  that is generated.  Experimental option.  If
            you enable it  consider  adding  more  numbers  after  the  tar-
            get-fetch-policy to increase the max depth that is checked to.

    harden-algo-downgrade: <yes or no>
            Harden  against algorithm downgrade when multiple algorithms are
            advertised in the DS record.  This works by first choosing  only
            the strongest DS digest type as per RFC 4509 (Unbound treats the
            highest  algorithm  as  the strongest) and then expecting signa-
            tures from all the advertised signing algorithms from the chosen
            DS(es) to be present.  If no, allows any one supported algorithm
            to validate the zone, even if other  advertised  algorithms  are
            broken.   Default  is  no.   RFC 6840 mandates that zone signers
            must produce zones signed with all  advertised  algorithms,  but
            sometimes  they  do  not.  RFC 6840 also clarifies that this re-
            quirement is not for validators and validators should accept any
            single valid path.  It should thus be explicitly noted that this
            option violates RFC 6840 for DNSSEC validation and  should  only
            be  used  to  perform  a  signature completeness test to support
            troubleshooting.  Using this option may break DNSSEC  resolution
            with  non-RFC6840-conforming signers and/or in multi-signer con-
            figurations that don&#39;t send all the advertised signatures.

    harden-unknown-additional: <yes or no>
            Harden against unknown records in the authority section and  ad-
            ditional  section. Default is no. If no, such records are copied
            from the upstream and presented to the client together with  the
            answer.  If  yes,  it  could hamper future protocol developments
            that want to add records.

    use-caps-for-id: <yes or no>
            Use 0x20-encoded random bits in the  query  to  foil  spoof  at-
            tempts.   This  perturbs  the  lowercase  and uppercase of query
            names sent to authority servers and checks if  the  reply  still
            has  the  correct casing.  Disabled by default.  This feature is
            an experimental implementation of draft dns-0x20.

    caps-exempt: <domain>
            Exempt the domain so that it does not receive  caps-for-id  per-
            turbed  queries.   For domains that do not support 0x20 and also
            fail with fallback because they keep sending different  answers,
            like some load balancers.  Can be given multiple times, for dif-
            ferent domains.

    caps-whitelist: <domain>
            Alternate syntax for caps-exempt.

    qname-minimisation: <yes or no>
            Send  minimum  amount  of information to upstream servers to en-
            hance privacy.  Only send minimum required labels of  the  QNAME
            and  set  QTYPE  to  A when possible. Best effort approach; full
            QNAME and original QTYPE will be sent when upstream replies with
            a RCODE other than NOERROR, except when receiving NXDOMAIN  from
            a DNSSEC signed zone. Default is yes.

    qname-minimisation-strict: <yes or no>
            QNAME  minimisation  in strict mode. Do not fall-back to sending
            full QNAME to potentially broken nameservers. A lot  of  domains
            will  not be resolvable when this option in enabled. Only use if
            you know what you are doing.  This option only has  effect  when
            qname-minimisation is enabled. Default is no.

    aggressive-nsec: <yes or no>
            Aggressive  NSEC  uses the DNSSEC NSEC chain to synthesize NXDO-
            MAIN and other denials, using information  from  previous  NXDO-
            MAINs  answers.   Default  is yes.  It helps to reduce the query
            rate towards targets that  get  a  very  high  nonexistent  name
            lookup rate.

    private-address: <IP address or subnet>
            Give  IPv4 of IPv6 addresses or classless subnets. These are ad-
            dresses on your private network, and are not allowed to  be  re-
            turned  for  public  internet names.  Any occurrence of such ad-
            dresses are removed from DNS answers. Additionally,  the  DNSSEC
            validator  may  mark  the  answers  bogus. This protects against
            so-called DNS Rebinding, where a user browser is turned  into  a
            network  proxy,  allowing  remote  access through the browser to
            other parts of your private network.  Some names can be  allowed
            to contain your private addresses, by default all the local-data
            that  you  configured  is  allowed to, and you can specify addi-
            tional names using private-domain.  No private addresses are en-
            abled by default.  We consider to enable this  for  the  RFC1918
            private  IP  address  space  by  default in later releases. That
            would enable  private  addresses  for  10.0.0.0/8  172.16.0.0/12
            192.168.0.0/16  169.254.0.0/16 fd00::/8 and fe80::/10, since the
            RFC standards say these addresses should not be visible  on  the
            public internet.  Turning on 127.0.0.0/8 would hinder many spam-
            blocklists   as  they  use  that.   Adding  ::ffff:0:0/96  stops
            IPv4-mapped IPv6 addresses from bypassing the filter.

    private-domain: <domain name>
            Allow this domain, and all its subdomains to contain private ad-
            dresses.  Give multiple times to allow multiple domain names  to
            contain private addresses. Default is none.

    unwanted-reply-threshold: <number>
            If  set,  a total number of unwanted replies is kept track of in
            every thread.  When it reaches the threshold, a defensive action
            is taken and a warning is printed to the log.  The defensive ac-
            tion is to clear the rrset and message caches, hopefully  flush-
            ing  away  any poison.  A value of 10 million is suggested.  De-
            fault is 0 (turned off).

    do-not-query-address: <IP address>
            Do not query the given IP address. Can be  IP4  or  IP6.  Append
            /num  to  indicate  a classless delegation netblock, for example
            like 10.2.3.4/24 or 2001::11/64.

    do-not-query-localhost: <yes or no>
            If yes, localhost is added to the do-not-query-address  entries,
            both  IP6  ::1 and IP4 127.0.0.1/8. If no, then localhost can be
            used to send queries to. Default is yes.

    prefetch: <yes or no>
            If yes, cache hits on message cache elements that are  on  their
            last  10  percent  of their TTL value trigger a prefetch to keep
            the cache up to date.  Default is no.  Turning it on gives about
            10 percent more traffic and load on  the  machine,  but  popular
            items do not expire from the cache.

    prefetch-key: <yes or no>
            If  yes,  fetch  the  DNSKEYs earlier in the validation process,
            when a DS record is encountered.  This lowers the latency of re-
            quests.  It does use a little more CPU.  Also if  the  cache  is
            set to 0, it is no use. Default is no.

    deny-any: <yes or no>
            If  yes,  deny  queries of type ANY with an empty response.  De-
            fault is no.  If disabled, Unbound responds with a short list of
            resource records if some can be found in the cache and makes the
            upstream type ANY query if there are none.

    rrset-roundrobin: <yes or no>
            If yes, Unbound rotates RRSet order in response (the random num-
            ber is taken from the query ID, for speed  and  thread  safety).
            Default is yes.

    minimal-responses: <yes or no>
            If  yes,  Unbound  does not insert authority/additional sections
            into response messages when those  sections  are  not  required.
            This  reduces  response  size  significantly,  and may avoid TCP
            fallback for some responses which may cause  a  slight  speedup.
            The  default  is  yes, even though the DNS protocol RFCs mandate
            these sections, and the additional content could save roundtrips
            for clients that use the additional content.  However these sec-
            tions are hardly used by clients.  Enabling prefetch can benefit
            clients that need the additional content by trying to keep  that
            content fresh in the cache.

    disable-dnssec-lame-check: <yes or no>
            If  true,  disables  the  DNSSEC lameness check in the iterator.
            This check sees if RRSIGs are present in the answer, when dnssec
            is expected, and retries another authority if RRSIGs  are  unex-
            pectedly  missing.   The  validator  will  insist  in RRSIGs for
            DNSSEC signed domains regardless of this setting, if a trust an-
            chor is loaded.

    module-config: <"module names">
            Module configuration,  a  list  of  module  names  separated  by
            spaces, surround the string with quotes (""). The modules can be
            respip,  validator,  or iterator (and possibly more, see below).
            Setting this to just "iterator" will result in a  non-validating
            server.   Setting  this  to  "validator  iterator"  will turn on
            DNSSEC validation.  The ordering of the modules is  significant,
            the  order  decides  the order of processing.  You must also set
            trust-anchors for validation to be useful.  Adding respip to the
            front will cause RPZ processing to be done on all queries.   The
            default is "validator iterator".

            Most  modules  that  need to be listed here have to be listed at
            the beginning of the line.  The subnetcachedb module has  to  be
            listed  just  before  the  iterator.   The  python module can be
            listed in different places, it then processes the output of  the
            module it is just before. The dynlib module can be listed pretty
            much  anywhere,  it  is only a very thin wrapper that allows dy-
            namic libraries to run in its place.

    trust-anchor-file: <filename>
            File with trusted keys for validation. Both DS  and  DNSKEY  en-
            tries  can  appear  in  the  file. The format of the file is the
            standard DNS Zone file format.  Default is "", or no  trust  an-
            chor file.

    auto-trust-anchor-file: <filename>
            File  with  trust  anchor  for  one  zone, which is tracked with
            RFC5011 probes.  The probes are run  several  times  per  month,
            thus  the  machine  must be online frequently.  The initial file
            can be one with contents as described in trust-anchor-file.  The
            file is written to when the anchor is updated,  so  the  Unbound
            user  must have write permission.  Write permission to the file,
            but also to the directory it is in (to create a temporary  file,
            which is necessary to deal with filesystem full events), it must
            also be inside the chroot (if that is used).

    trust-anchor: <"Resource Record">
            A  DS or DNSKEY RR for a key to use for validation. Multiple en-
            tries can be given to specify multiple trusted keys, in addition
            to the trust-anchor-files.  The resource record  is  entered  in
            the same format as &#39;dig&#39; or &#39;drill&#39; prints them, the same format
            as  in the zone file. Has to be on a single line, with "" around
            it. A TTL can be specified for ease of cut and paste, but is ig-
            nored.  A class can be specified, but class IN is default.

    trusted-keys-file: <filename>
            File with trusted keys for validation.  Specify  more  than  one
            file  with  several  entries, one file per entry. Like trust-an-
            chor-file but has a different  file  format.  Format  is  BIND-9
            style  format, the trusted-keys { name flag proto algo "key"; };
            clauses are read.  It is possible to  use  wildcards  with  this
            statement, the wildcard is expanded on start and on reload.

    trust-anchor-signaling: <yes or no>
            Send  RFC8145  key tag query after trust anchor priming. Default
            is yes.

    root-key-sentinel: <yes or no>
            Root key trust anchor sentinel. Default is yes.

    domain-insecure: <domain name>
            Sets domain name to be insecure, DNSSEC chain of  trust  is  ig-
            nored  towards the domain name.  So a trust anchor above the do-
            main name can not make the domain secure with a DS record,  such
            a  DS  record  is  then ignored.  Can be given multiple times to
            specify multiple domains that are treated as  if  unsigned.   If
            you  set trust anchors for the domain they override this setting
            (and the domain is secured).

            This can be useful if you want to make sure a trust  anchor  for
            external  lookups does not affect an (unsigned) internal domain.
            A DS record externally can create validation failures  for  that
            internal domain.

    val-override-date: <rrsig-style date spec>
            Default  is "" or "0", which disables this debugging feature. If
            enabled by giving a RRSIG style date, that date is used for ver-
            ifying RRSIG inception and expiration dates, instead of the cur-
            rent date. Do not set this unless you  are  debugging  signature
            inception  and  expiration.  The value -1 ignores the date alto-
            gether, useful for some special applications.

    val-sig-skew-min: <seconds>
            Minimum number of seconds of clock skew to  apply  to  validated
            signatures.   A  value of 10% of the signature lifetime (expira-
            tion - inception) is used, capped by this setting.   Default  is
            3600  (1  hour)  which  allows for daylight savings differences.
            Lower this value for more strict checking of short lived  signa-
            tures.

    val-sig-skew-max: <seconds>
            Maximum  number  of  seconds of clock skew to apply to validated
            signatures.  A value of 10% of the signature  lifetime  (expira-
            tion  -  inception) is used, capped by this setting.  Default is
            86400 (24 hours) which allows for timezone setting  problems  in
            stable  domains.  Setting both min and max very low disables the
            clock skew allowances.  Setting both min and max very high makes
            the validator check the signature timestamps less strictly.

    val-max-restart: <number>
            The maximum number the validator should restart validation  with
            another authority in case of failed validation. Default is 5.

    val-bogus-ttl: <number>
            The  time  to  live for bogus data. This is data that has failed
            validation; due to invalid signatures or other checks.  The  TTL
            from  that  data  cannot  be trusted, and this value is used in-
            stead. The value is in seconds, default 60.  The  time  interval
            prevents repeated revalidation of bogus data.

    val-clean-additional: <yes or no>
            Instruct  the  validator to remove data from the additional sec-
            tion of secure messages that are not signed  properly.  Messages
            that are insecure, bogus, indeterminate or unchecked are not af-
            fected.  Default  is  yes. Use this setting to protect the users
            that rely on this validator for authentication from  potentially
            bad data in the additional section.

    val-log-level: <number>
            Have  the  validator  print validation failures to the log.  Re-
            gardless of the verbosity setting.  Default is 0,  off.   At  1,
            for  every  user query that fails a line is printed to the logs.
            This way you can monitor what happens with  validation.   Use  a
            diagnosis tool, such as dig or drill, to find out why validation
            is  failing  for  these  queries.  At 2, not only the query that
            failed is printed but also the reason why Unbound thought it was
            wrong and which server sent the faulty data.

    val-permissive-mode: <yes or no>
            Instruct the validator to mark bogus messages as  indeterminate.
            The  security  checks  are performed, but if the result is bogus
            (failed security), the reply is not  withheld  from  the  client
            with  SERVFAIL as usual. The client receives the bogus data. For
            messages that are found to be  secure  the  AD  bit  is  set  in
            replies.  Also logging is performed as for full validation.  The
            default value is "no".

    ignore-cd-flag: <yes or no>
            Instruct Unbound to ignore the CD flag from clients  and  refuse
            to  return  bogus  answers to them.  Thus, the CD (Checking Dis-
            abled) flag does not disable checking any more.  This is  useful
            if  legacy (w2008) servers that set the CD flag but cannot vali-
            date DNSSEC themselves are the clients, and  then  Unbound  pro-
            vides them with DNSSEC protection.  The default value is "no".

    disable-edns-do: <yes or no>
            Disable the EDNS DO flag in upstream requests.  It breaks DNSSEC
            validation  for Unbound&#39;s clients.  This results in the upstream
            name servers to not include DNSSEC records in their replies  and
            could  be helpful for devices that cannot handle DNSSEC informa-
            tion.  When the option is enabled, clients that set the DO  flag
            receive  no  EDNS record in the response to indicate the lack of
            support to them.  If this option is enabled but Unbound  is  al-
            ready configured for DNSSEC validation (i.e., the validator mod-
            ule  is  enabled;  default) this option is implicitly turned off
            with a warning as to not break  DNSSEC  validation  in  Unbound.
            Default is no.

    serve-expired: <yes or no>
            If  enabled,  Unbound attempts to serve old responses from cache
            with a TTL of serve-expired-reply-ttl in the response.   By  de-
            fault the expired answer will be used after a resolution attempt
            errored  out or is taking more than serve-expired-client-timeout
            to resolve.  Default is "no".

    serve-expired-ttl: <seconds>
            Limit serving of expired responses to configured  seconds  after
            expiration.   0  disables  the  limit.  This option only applies
            when serve-expired is enabled.  A suggested value per  RFC  8767
            is  between  86400  (1 day) and 259200 (3 days).  The default is
            86400.

    serve-expired-ttl-reset: <yes or no>
            Set the TTL of expired records to  the  serve-expired-ttl  value
            after  a  failed  attempt  to retrieve the record from upstream.
            This makes sure that the expired records will be served as  long
            as there are queries for it.  Default is "no".

    serve-expired-reply-ttl: <seconds>
            TTL  value to use when replying with expired data.  If serve-ex-
            pired-client-timeout is also used then it is RECOMMENDED to  use
            30 as the value (RFC 8767).  The default is 30.

    serve-expired-client-timeout: <msec>
            Time  in milliseconds before replying to the client with expired
            data.  This essentially  enables  the  serve-stale  behavior  as
            specified in RFC 8767 that first tries to resolve before immedi-
            ately responding with expired data.  Setting this to 0 will dis-
            able  this behavior and instead serve the expired record immedi-
            ately from the cache before attempting to refresh it via resolu-
            tion.  Default is 1800.

    serve-original-ttl: <yes or no>
            If enabled, Unbound will always return the original TTL  as  re-
            ceived  from the upstream name server rather than the decrement-
            ing TTL as stored in the cache.  This feature may be  useful  if
            Unbound  serves  as  a  front-end to a hidden authoritative name
            server. Enabling this feature does not impact cache  expiry,  it
            only  changes  the  TTL  Unbound embeds in responses to queries.
            Note that enabling this feature implicitly disables  enforcement
            of  the  configured  minimum  and  maximum TTL, as it is assumed
            users who enable this feature do not want Unbound to change  the
            TTL  obtained from an upstream server.  Thus, the values set us-
            ing cache-min-ttl and cache-max-ttl  are  ignored.   Default  is
            "no".

    val-nsec3-keysize-iterations: <"list of values">
            List of keysize and iteration count values, separated by spaces,
            surrounded  by  quotes. Default is "1024 150 2048 150 4096 150".
            This determines the maximum allowed NSEC3 iteration count before
            a message is simply marked insecure instead  of  performing  the
            many hashing iterations. The list must be in ascending order and
            have  at least one entry. If you set it to "1024 65535" there is
            no restriction to NSEC3 iteration values.  This  table  must  be
            kept short; a very long list could cause slower operation.

    zonemd-permissive-mode: <yes or no>
            If  enabled the ZONEMD verification failures are only logged and
            do not cause the zone to be blocked and  only  return  servfail.
            Useful  for  testing  out  if  it works, or if the operator only
            wants to be notified of a problem  without  disrupting  service.
            Default is no.

    add-holddown: <seconds>
            Instruct  the auto-trust-anchor-file probe mechanism for RFC5011
            autotrust updates to add new trust anchors only after they  have
            been visible for this time.  Default is 30 days as per the RFC.

    del-holddown: <seconds>
            Instruct  the auto-trust-anchor-file probe mechanism for RFC5011
            autotrust updates to remove revoked  trust  anchors  after  they
            have been kept in the revoked list for this long.  Default is 30
            days as per the RFC.

    keep-missing: <seconds>
            Instruct  the auto-trust-anchor-file probe mechanism for RFC5011
            autotrust updates to remove missing  trust  anchors  after  they
            have  been  unseen for this long.  This cleans up the state file
            if the target zone does not perform trust anchor revocation,  so
            this makes the auto probe mechanism work with zones that perform
            regular  (non-5011)  rollovers.   The  default is 366 days.  The
            value 0 does not remove missing anchors, as per the RFC.

    permit-small-holddown: <yes or no>
            Debug option that allows the autotrust 5011 rollover  timers  to
            assume very small values.  Default is no.

    key-cache-size: <number>
            Number  of  bytes size of the key cache. Default is 4 megabytes.
            A plain number is in bytes, append &#39;k&#39;, &#39;m&#39;  or  &#39;g&#39;  for  kilo-
            bytes, megabytes or gigabytes (1024*1024 bytes in a megabyte).

    key-cache-slabs: <number>
            Number  of  slabs in the key cache. Slabs reduce lock contention
            by threads.  Must be set to a power of 2. Setting (close) to the
            number of cpus is a reasonable guess.

    neg-cache-size: <number>
            Number of bytes size of the aggressive negative  cache.  Default
            is  1  megabyte.  A plain number is in bytes, append &#39;k&#39;, &#39;m&#39; or
            &#39;g&#39; for kilobytes, megabytes or gigabytes (1024*1024 bytes in  a
            megabyte).

    unblock-lan-zones: <yes or no>
            Default  is  disabled.   If  enabled,  then  for private address
            space, the reverse lookups are no longer filtered.  This  allows
            Unbound  when running as dns service on a host where it provides
            service for that host, to put out all of  the  queries  for  the
            &#39;lan&#39; upstream.  When enabled, only localhost, 127.0.0.1 reverse
            and  ::1  reverse zones are configured with default local zones.
            Disable the option when Unbound is running as a (DHCP-) DNS net-
            work resolver for a group of machines, where such lookups should
            be filtered (RFC compliance), this  also  stops  potential  data
            leakage about the local network to the upstream DNS servers.

    insecure-lan-zones: <yes or no>
            Default  is  disabled.  If enabled, then reverse lookups in pri-
            vate address space are not validated.  This is usually  required
            whenever unblock-lan-zones is used.

    local-zone: <zone> <type>
            Configure  a  local zone. The type determines the answer to give
            if there is no  match  from  local-data.  The  types  are  deny,
            refuse,  static, transparent, redirect, nodefault, typetranspar-
            ent, inform, inform_deny,  inform_redirect,  always_transparent,
            block_a,  always_refuse,  always_nxdomain,  always_null, noview,
            and are explained below. After that  the  default  settings  are
            listed.  Use  local-data: to enter data into the local zone. An-
            swers for local zones are authoritative DNS answers. By  default
            the zones are class IN.

            If you need more complicated authoritative data, with referrals,
            wildcards, CNAME/DNAME support, or DNSSEC authoritative service,
            setup  a  stub-zone  for it as detailed in the stub zone section
            below. A stub-zone can be used to have unbound send  queries  to
            another  server,  an authoritative server, to fetch the informa-
            tion. With a forward-zone, unbound sends  queries  to  a  server
            that  is  a  recursive  server to fetch the information. With an
            auth-zone a zone can be loaded from file and  used,  it  can  be
            used  like  a  local-zone for users downstream, or the auth-zone
            information can be used to fetch information from when resolving
            like it is an upstream server. The  forward-zone  and  auth-zone
            options  are  described in their sections below.  If you want to
            perform filtering of the information that the users  can  fetch,
            the  local-zone  and  local-data  statements allow for this, but
            also the rpz functionality can be used,  described  in  the  RPZ
            section.

        deny Do  not  send an answer, drop the query.  If there is a match
                from local data, the query is answered.

        refuse
                Send an error message reply, with rcode REFUSED.  If there is
                a match from local data, the query is answered.

        static
                If there is a match from local data, the query  is  answered.
                Otherwise,  the  query  is  answered with nodata or nxdomain.
                For a negative answer a SOA is  included  in  the  answer  if
                present as local-data for the zone apex domain.

        transparent
                If  there  is a match from local data, the query is answered.
                Otherwise if the query has a different name, the query is re-
                solved normally.  If the query is for a name given in  local-
                data  but  no such type of data is given in localdata, then a
                noerror nodata answer is returned.  If no local-zone is given
                local-data causes a transparent zone to  be  created  by  de-
                fault.

        typetransparent
                If  there  is a match from local data, the query is answered.
                If the query is for a different name, or for  the  same  name
                but  for  a  different  type, the query is resolved normally.
                So, similar to transparent but types that are not  listed  in
                local data are resolved normally, so if an A record is in the
                local  data  that  does  not  cause  a  nodata reply for AAAA
                queries.

        redirect
                The query is answered from the local data for the zone  name.
                There  may  be no local data beneath the zone name.  This an-
                swers queries for the zone, and all subdomains  of  the  zone
                with the local data for the zone.  It can be used to redirect
                a  domain  to  return  a  different address record to the end
                user,  with  local-zone:  "example.com."  redirect  and   lo-
                cal-data:  "example.com.  A  127.0.0.1" queries for www.exam-
                ple.com and www.foo.example.com are redirected, so that users
                with web browsers  cannot  access  sites  with  suffix  exam-
                ple.com.

        inform
                The  query  is  answered  normally, same as transparent.  The
                client IP address (@portnumber) is printed  to  the  logfile.
                The  log  message  is: timestamp, unbound-pid, info: zonename
                inform IP@port queryname type class.  This option can be used
                for normal resolution, but machines looking up infected names
                are logged, eg. to run antivirus on them.

        inform_deny
                The query is dropped, like &#39;deny&#39;, and logged, like &#39;inform&#39;.
                Ie. find infected machines without answering the queries.

        inform_redirect
                The query is redirected, like &#39;redirect&#39;,  and  logged,  like
                &#39;inform&#39;.   Ie.  answer  queries with fixed data and also log
                the machines that ask.

        always_transparent
                Like transparent, but ignores local data  and  resolves  nor-
                mally.

        block_a
                Like  transparent,  but  ignores local data and resolves nor-
                mally all query types excluding A. For A queries it  uncondi-
                tionally  returns  NODATA.   Useful  in cases when there is a
                need to explicitly force all apps to use  IPv6  protocol  and
                avoid any queries to IPv4.

        always_refuse
                Like refuse, but ignores local data and refuses the query.

        always_nxdomain
                Like  static, but ignores local data and returns nxdomain for
                the query.

        always_nodata
                Like static, but ignores local data and  returns  nodata  for
                the query.

        always_deny
                Like deny, but ignores local data and drops the query.

        always_null
                Always  returns  0.0.0.0  or  ::0 for every name in the zone.
                Like redirect with zero data for A and AAAA.   Ignores  local
                data in the zone.  Used for some block lists.

        noview
                Breaks  out  of  that view and moves towards the global local
                zones for answer to the query.  If  the  view  first  is  no,
                it&#39;ll  resolve  normally.   If  view  first is enabled, it&#39;ll
                break perform that step and check the  global  answers.   For
                when  the  view has view specific overrides but some zone has
                to be answered from global local zone contents.

        nodefault
                Used to turn off default contents for AS112 zones. The  other
                types also turn off default contents for the zone. The &#39;node-
                fault&#39;  option  has  no other effect than turning off default
                contents for the given zone.  Use nodefault if  you  use  ex-
                actly  that zone, if you want to use a subzone, use transpar-
                ent.

    The default  zones  are  localhost,  reverse  127.0.0.1  and  ::1,  the
    home.arpa,  the  resolver.arpa,  the service.arpa, the onion, test, in-
    valid and the AS112 zones. The AS112 zones are reverse  DNS  zones  for
    private  use and reserved IP addresses for which the servers on the in-
    ternet cannot provide correct answers. They are configured  by  default
    to  give nxdomain (no reverse information) answers. The defaults can be
    turned off by specifying your own local-zone of that name, or using the
    &#39;nodefault&#39; type. Below is a list of the default zone contents.

        localhost
                The IP4 and IP6 localhost information is given.  NS  and  SOA
                records are provided for completeness and to satisfy some DNS
                update tools. Default content:
                local-zone: "localhost." redirect
                local-data: "localhost. 10800 IN NS localhost."
                local-data: "localhost. 10800 IN
                    SOA localhost. nobody.invalid. 1 3600 1200 604800 10800"
                local-data: "localhost. 10800 IN A 127.0.0.1"
                local-data: "localhost. 10800 IN AAAA ::1"

        reverse IPv4 loopback
                Default content:
                local-zone: "127.in-addr.arpa." static
                local-data: "127.in-addr.arpa. 10800 IN NS localhost."
                local-data: "127.in-addr.arpa. 10800 IN
                    SOA localhost. nobody.invalid. 1 3600 1200 604800 10800"
                local-data: "1.0.0.127.in-addr.arpa. 10800 IN
                    PTR localhost."

        reverse IPv6 loopback
                Default content:
                local-zone: "1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.
                    0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa." static
                local-data: "1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.
                    0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa. 10800 IN
                    NS localhost."
                local-data: "1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.
                    0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa. 10800 IN
                    SOA localhost. nobody.invalid. 1 3600 1200 604800 10800"
                local-data: "1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.
                    0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa. 10800 IN
                    PTR localhost."

        home.arpa (RFC 8375)
                Default content:
                local-zone: "home.arpa." static
                local-data: "home.arpa. 10800 IN NS localhost."
                local-data: "home.arpa. 10800 IN
                    SOA localhost. nobody.invalid. 1 3600 1200 604800 10800"

        resolver.arpa (RFC 9462)
                Default content:
                local-zone: "resolver.arpa." static
                local-data: "resolver.arpa. 10800 IN NS localhost."
                local-data: "resolver.arpa. 10800 IN
                    SOA localhost. nobody.invalid. 1 3600 1200 604800 10800"

        service.arpa (draft-ietf-dnssd-srp-25)
                Default content:
                local-zone: "service.arpa." static
                local-data: "service.arpa. 10800 IN NS localhost."
                local-data: "service.arpa. 10800 IN
                    SOA localhost. nobody.invalid. 1 3600 1200 604800 10800"

        onion (RFC 7686)
                Default content:
                local-zone: "onion." static
                local-data: "onion. 10800 IN NS localhost."
                local-data: "onion. 10800 IN
                    SOA localhost. nobody.invalid. 1 3600 1200 604800 10800"

        test (RFC 6761)
                Default content:
                local-zone: "test." static
                local-data: "test. 10800 IN NS localhost."
                local-data: "test. 10800 IN
                    SOA localhost. nobody.invalid. 1 3600 1200 604800 10800"

        invalid (RFC 6761)
                Default content:
                local-zone: "invalid." static
                local-data: "invalid. 10800 IN NS localhost."
                local-data: "invalid. 10800 IN
                    SOA localhost. nobody.invalid. 1 3600 1200 604800 10800"

        reverse RFC1918 local use zones
                Reverse  data  for zones 10.in-addr.arpa, 16.172.in-addr.arpa
                to  31.172.in-addr.arpa,   168.192.in-addr.arpa.    The   lo-
                cal-zone: is set static and as local-data: SOA and NS records
                are provided.

        reverse RFC3330 IP4 this, link-local, testnet and broadcast
                Reverse  data for zones 0.in-addr.arpa, 254.169.in-addr.arpa,
                2.0.192.in-addr.arpa (TEST  NET  1),  100.51.198.in-addr.arpa
                (TEST   NET   2),   113.0.203.in-addr.arpa   (TEST   NET  3),
                255.255.255.255.in-addr.arpa.  And  from  64.100.in-addr.arpa
                to 127.100.in-addr.arpa (Shared Address Space).

        reverse RFC4291 IP6 unspecified
                Reverse data for zone
                0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.
                0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa.

        reverse RFC4193 IPv6 Locally Assigned Local Addresses
                Reverse data for zone D.F.ip6.arpa.

        reverse RFC4291 IPv6 Link Local Addresses
                Reverse data for zones 8.E.F.ip6.arpa to B.E.F.ip6.arpa.

        reverse IPv6 Example Prefix
                Reverse  data for zone 8.B.D.0.1.0.0.2.ip6.arpa. This zone is
                used for tutorials and examples. You can remove the block  on
                this zone with:
                local-zone: 8.B.D.0.1.0.0.2.ip6.arpa. nodefault
                You can also selectively unblock a part of the zone by making
                that part transparent with a local-zone statement.  This also
                works with the other default zones.

    local-data: "<resource record string>"
        Configure  local data, which is served in reply to queries for it.
        The query has to match exactly unless you configure the local-zone
        as redirect. If not matched exactly, the  local-zone  type  deter-
        mines  further processing. If local-data is configured that is not
        a subdomain of a local-zone, a transparent local-zone  is  config-
        ured.   For record types such as TXT, use single quotes, as in lo-
        cal-data: &#39;example. TXT "text"&#39;.

        If you need more complicated authoritative data,  with  referrals,
        wildcards,  CNAME/DNAME  support, or DNSSEC authoritative service,
        setup a stub-zone for it as detailed in the stub zone section  be-
        low.

    local-data-ptr: "IPaddr name"
        Configure  local data shorthand for a PTR record with the reversed
        IPv4 or IPv6 address and the host name.   For  example  "192.0.2.4
        www.example.com".   TTL  can  be  inserted like this: "2001:DB8::4
        7200 www.example.com"

    local-zone-tag: <zone> <"list of tags">
        Assign tags to localzones. Tagged localzones will only be  applied
        when the used access-control element has a matching tag. Tags must
        be  defined  in  define-tags.  Enclose list of tags in quotes ("")
        and put spaces between tags.  When  there  are  multiple  tags  it
        checks  if  the intersection of the list of tags for the query and
        local-zone-tag is non-empty.

    local-zone-override: <zone> <IP netblock> <type>
        Override the localzone type for queries  from  addresses  matching
        netblock.  Use this localzone type, regardless the type configured
        for  the  local-zone (both tagged and untagged) and regardless the
        type configured using access-control-tag-action.

    response-ip: <IP-netblock> <action>
        This requires use of the "respip" module.

        If the IP address in an AAAA or A RR in the answer  section  of  a
        response  matches  the specified IP netblock, the specified action
        will apply.  <action> has generally the same semantics as that for
        access-control-tag-action, but there are some exceptions.

        Actions for response-ip are different from those for local-zone in
        that in case of the former there is no point of such conditions as
        "the query matches it but there is no  local  data".   Because  of
        this difference, the semantics of response-ip actions are modified
        or  simplified  as follows: The static, refuse, transparent, type-
        transparent, and nodefault actions are  invalid  for  response-ip.
        Using  any of these will cause the configuration to be rejected as
        faulty. The deny action is non-conditional, i.e. it always results
        in dropping the corresponding query.  The resolution result before
        applying the deny action is still cached and can be used for other
        queries.

    response-ip-data: <IP-netblock> <"resource record string">
        This requires use of the "respip" module.

        This specifies the action data for response-ip with  action  being
        to  redirect  as specified by "resource record string".  "Resource
        record string" is similar to  that  of  access-control-tag-action,
        but  it  must be of either AAAA, A or CNAME types.  If the IP-net-
        block is an IPv6/IPv4 prefix, the record must  be  AAAA/A  respec-
        tively,  unless it is a CNAME (which can be used for both versions
        of IP netblocks).  If it is CNAME there must not be more than  one
        response-ip-data  for the same IP-netblock.  Also, CNAME and other
        types of records must not coexist for the same  IP-netblock,  fol-
        lowing  the  normal  rules  for CNAME records.  The textual domain
        name for the CNAME does not have to be explicitly terminated  with
        a  dot  (".");  the  root name is assumed to be the origin for the
        name.

    response-ip-tag: <IP-netblock> <"list of tags">
        This requires use of the "respip" module.

        Assign tags to response IP-netblocks.  If the  IP  address  in  an
        AAAA or A RR in the answer section of a response matches the spec-
        ified  IP-netblock,  the specified tags are assigned to the IP ad-
        dress.  Then, if an access-control-tag is defined for  the  client
        and  it  includes  one of the tags for the response IP, the corre-
        sponding access-control-tag-action will apply.  Tag matching  rule
        is  the  same as that for access-control-tag and local-zones.  Un-
        like local-zone-tag, response-ip-tag can be defined for an IP-net-
        block even if no response-ip is defined  for  that  netblock.   If
        multiple  response-ip-tag  options  are specified for the same IP-
        netblock in different statements, all but the first  will  be  ig-
        nored.   However,  this will not be flagged as a configuration er-
        ror, but the result is probably not what was intended.

        Actions specified  in  an  access-control-tag-action  that  has  a
        matching  tag with response-ip-tag can be those that are "invalid"
        for response-ip listed above, since access-control-tag-actions can
        be shared with local zones.  For these  actions,  if  they  behave
        differently  depending on whether local data exists or not in case
        of local zones, the behavior for response-ip-data  will  generally
        result  in NOERROR/NODATA instead of NXDOMAIN, since the response-
        ip data are inherently type specific, and  non-existence  of  data
        does not indicate anything about the existence or non-existence of
        the qname itself.  For example, if the matching tag action is sta-
        tic but there is no data for the corresponding response-ip config-
        uration,  then  the  result will be NOERROR/NODATA.  The only case
        where NXDOMAIN is returned is when an always_nxdomain  action  ap-
        plies.

    ratelimit: <number or 0>
        Enable  ratelimiting  of queries sent to nameserver for performing
        recursion.  If 0, the default, it is disabled.  This option is ex-
        perimental at this time.  The ratelimit is in queries  per  second
        that  are  allowed.   More  queries  are turned away with an error
        (servfail).  This stops recursive floods, eg. random query  names,
        but not spoofed reflection floods.  Cached responses are not rate-
        limited  by  this setting.  The zone of the query is determined by
        examining the nameservers for it, the zone name is  used  to  keep
        track  of  the rate.  For example, 1000 may be a suitable value to
        stop the server from being overloaded with random names, and keeps
        Unbound from sending traffic to the nameservers for  those  zones.
        Configured forwarders are excluded from ratelimiting.

    ratelimit-size: <memory size>
        Give  the  size of the data structure in which the current ongoing
        rates are kept track in.  Default 4m.  In bytes  or  use  m(mega),
        k(kilo),  g(giga).  The ratelimit structure is small, so this data
        structure likely does not need to be large.

    ratelimit-slabs: <number>
        Give power of 2 number of slabs, this is used to reduce lock  con-
        tention  in  the  ratelimit tracking data structure.  Close to the
        number of cpus is a fairly good setting.

    ratelimit-factor: <number>
        Set the amount of queries to rate limit  when  the  limit  is  ex-
        ceeded.   If  set  to 0, all queries are dropped for domains where
        the limit is exceeded.  If set to another value, 1 in that  number
        is  allowed  through  to  complete.   Default is 10, allowing 1/10
        traffic to flow normally.  This can make ordinary queries complete
        (if repeatedly queried for), and enter the cache, whilst also mit-
        igating the traffic flow by the factor given.

    ratelimit-backoff: <yes or no>
        If enabled, the ratelimit is treated as a hard failure instead  of
        the  default  maximum  allowed  constant  rate.  When the limit is
        reached, traffic is ratelimited and demand continues  to  be  kept
        track  of  for a 2 second rate window.  No traffic is allowed, ex-
        cept for ratelimit-factor, until demand decreases below  the  con-
        figured ratelimit for a 2 second rate window.  Useful to set rate-
        limit  to  a  suspicious rate to aggressively limit unusually high
        traffic.  Default is off.

    ratelimit-for-domain: <domain> <number qps or 0>
        Override the global ratelimit for an exact match domain name  with
        the  listed  number.   You  can give this for any number of names.
        For example, for a top-level-domain you may want to have a  higher
        limit  than  other  names.  A value of 0 will disable ratelimiting
        for that domain.

    ratelimit-below-domain: <domain> <number qps or 0>
        Override the global ratelimit for a domain name that ends in  this
        name.  You can give this multiple times, it then describes differ-
        ent  settings  in  different  parts of the namespace.  The closest
        matching suffix is used to determine the qps limit.  The rate  for
        the   exact  matching  domain  name  is  not  changed,  use  rate-
        limit-for-domain to set that, you might want to use different set-
        tings for a top-level-domain and subdomains.  A value  of  0  will
        disable ratelimiting for domain names that end in this name.

    ip-ratelimit: <number or 0>
        Enable  global  ratelimiting  of  queries accepted per IP address.
        This option is experimental at this time.   The  ratelimit  is  in
        queries  per second that are allowed.  More queries are completely
        dropped and will not receive a reply, SERVFAIL or  otherwise.   IP
        ratelimiting happens before looking in the cache. This may be use-
        ful  for  mitigating  amplification attacks.  Clients with a valid
        DNS Cookie will bypass the ratelimit.  If  a  ratelimit  for  such
        clients  is still needed, ip-ratelimit-cookie can be used instead.
        Default is 0 (disabled).

    ip-ratelimit-cookie: <number or 0>
        Enable global ratelimiting of queries accepted per IP address with
        a valid DNS Cookie.  This option is  experimental  at  this  time.
        The  ratelimit  is  in  queries per second that are allowed.  More
        queries are completely dropped and will not receive a reply, SERV-
        FAIL or otherwise.  IP ratelimiting happens before looking in  the
        cache.   This  option  could  be  useful  in  combination with al-
        low_cookie in an attempt to mitigate other  amplification  attacks
        than  UDP  reflections  (e.g.,  attacks  targeting Unbound itself)
        which are already handled with DNS Cookies.  If used, the value is
        suggested to be higher than ip-ratelimit e.g.,  tenfold.   Default
        is 0 (disabled).

    ip-ratelimit-size: <memory size>
        Give  the  size of the data structure in which the current ongoing
        rates are kept track in.  Default 4m.  In bytes  or  use  m(mega),
        k(kilo),  g(giga).   The  ip ratelimit structure is small, so this
        data structure likely does not need to be large.

    ip-ratelimit-slabs: <number>
        Give power of 2 number of slabs, this is used to reduce lock  con-
        tention in the ip ratelimit tracking data structure.  Close to the
        number of cpus is a fairly good setting.

    ip-ratelimit-factor: <number>
        Set  the  amount  of  queries  to rate limit when the limit is ex-
        ceeded.  If set to 0, all queries are dropped for addresses  where
        the  limit is exceeded.  If set to another value, 1 in that number
        is allowed through to complete.   Default  is  10,  allowing  1/10
        traffic to flow normally.  This can make ordinary queries complete
        (if repeatedly queried for), and enter the cache, whilst also mit-
        igating the traffic flow by the factor given.

    ip-ratelimit-backoff: <yes or no>
        If  enabled, the ratelimit is treated as a hard failure instead of
        the default maximum allowed constant  rate.   When  the  limit  is
        reached,  traffic  is  ratelimited and demand continues to be kept
        track of for a 2 second rate window.  No traffic is  allowed,  ex-
        cept  for  ip-ratelimit-factor,  until  demand decreases below the
        configured ratelimit for a 2 second rate window.   Useful  to  set
        ip-ratelimit  to a suspicious rate to aggressively limit unusually
        high traffic.  Default is off.

    outbound-msg-retry: <number>
        The number of retries, per upstream nameserver  in  a  delegation,
        that  Unbound  will  attempt  in  case a throwaway response is re-
        ceived.  No response (timeout) contributes to the  retry  counter.
        If  a forward/stub zone is used, this is the number of retries per
        nameserver in the zone.  Default is 5.

    max-sent-count: <number>
        Hard limit on the number of outgoing  queries  Unbound  will  make
        while  resolving  a  name,  making sure large NS sets do not loop.
        Results in SERVFAIL when reached.  It  resets  on  query  restarts
        (e.g., CNAME) and referrals.  Default is 32.

    max-query-restarts: <number>
        Hard  limit on the number of times Unbound is allowed to restart a
        query upon encountering a CNAME record.  Results in SERVFAIL  when
        reached.   Changing  this value needs caution as it can allow long
        CNAME chains to be accepted, where Unbound needs  to  verify  (re-
        solve) each link individually.  Default is 11.

    iter-scrub-ns: <number>
        Limit  on the number of NS records allowed in an rrset of type NS,
        from the iterator scrubber. This protects the internals of the re-
        solver from overly large NS sets. Default is 20.

    iter-scrub-cname: <number>
        Limit on the number of CNAME, DNAME records in an answer, from the
        iterator scrubber. This protects the  internals  of  the  resolver
        from  overly  long  indirection chains. Clips off the remainder of
        the reply packet at that point.  Default is 11.

    max-global-quota: <number>
        Limit on the number of upstream queries sent out for  an  incoming
        query  and  its  subqueries from recursion. It is not reset during
        the resolution. When it is exceeded the query is  failed  and  the
        lookup process stops.  Default is 200.

    fast-server-permil: <number>
        Specify how many times out of 1000 to pick from the set of fastest
        servers.  0 turns the feature off.  A value of 900 would pick from
        the fastest servers 90 percent of the time, and would perform nor-
        mal  exploration  of  random  servers for the remaining time. When
        prefetch is enabled (or serve-expired), such  prefetches  are  not
        sped up, because there is no one waiting for it, and it presents a
        good moment to perform server exploration. The fast-server-num op-
        tion  can  be used to specify the size of the fastest servers set.
        The default for fast-server-permil is 0.

    fast-server-num: <number>
        Set the number of servers that should be used for fast server  se-
        lection. Only use the fastest specified number of servers with the
        fast-server-permil  option, that turns this on or off. The default
        is to use the fastest 3 servers.

    answer-cookie: <yes or no>
        If enabled, Unbound will answer to requests containing DNS Cookies
        as specified in RFC 7873 and RFC 9018.  Default is no.

    cookie-secret: <128 bit hex string>
        Server&#39;s secret for DNS Cookie generation.  Useful  to  explicitly
        set  for  servers  in an anycast deployment that need to share the
        secret in order to verify each other&#39;s Server Cookies.  An example
        hex string would be  "000102030405060708090a0b0c0d0e0f".   Default
        is  a  128 bits random secret generated at startup time.  This op-
        tion is ignored if a cookie-secret-file is present.  In that  case
        the secrets from that file are used in DNS Cookie calculations.

    cookie-secret-file: <filename>
        File  from  which the secrets are read used in DNS Cookie calcula-
        tions. When this file exists, the secrets in this  file  are  used
        and  the  secret specified by the cookie-secret option is ignored.
        Enable  it  by  setting  a  filename,   like   "/usr/local/etc/un-
        bound_cookiesecrets.txt".  The content of this file must be manip-
        ulated  with  the  add_cookie_secret, drop_cookie_secret and acti-
        vate_cookie_secret commands to the unbound-control(8) tool. Please
        see that manpage on how to perform a safe cookie secret  rollover.
        Default is "" (disabled).

    edns-client-string: <IP netblock> <string>
        Include  an  EDNS0  option  containing  configured ascii string in
        queries with destination address matching the configured  IP  net-
        block.   This configuration option can be used multiple times. The
        most specific match will be used.

    edns-client-string-opcode: <opcode>
        EDNS0 option code for the edns-client-string  option,  from  0  to
        1.       A  value from the `Reserved for Local/Experimental` range
        (65001-65534) should be used.  Default is 65001.

    ede: <yes or no>
        If enabled, Unbound will respond with  Extended  DNS  Error  codes
        (RFC8914).   These  EDEs provide additional information with a re-
        sponse mainly for, but not limited to, DNS and DNSSEC errors.

        When the val-log-level option is also set to 2, responses with Ex-
        tended DNS Errors concerning DNSSEC failures will also  contain  a
        descriptive  text  message  about the reason for the failure.  De-
        fault is "no".

    ede-serve-expired: <yes or no>
        If enabled, Unbound will attach an Extended  DNS  Error  (RFC8914)
        Code  3  -  Stale  Answer as EDNS0 option to the expired response.
        The ede option needs to be enabled as well for this to work.   De-
        fault is "no".

    dns-error-reporting: <yes or no>
        If  enabled,  Unbound  will send DNS Error Reports (RFC9567).  The
        name servers need to express support by attaching the Report-Chan-
        nel EDNS0 option on their replies specifying the  reporting  agent
        for the zone.  Any errors encountered during resolution that would
        result  in Unbound generating an Extended DNS Error (RFC8914) will
        be reported to the zone&#39;s reporting agent.  The  ede  option  does
        not  need  to be enabled for this to work.  It is advised that the
        qname-minimisation option is also enabled to increase  privacy  on
        the outgoing reports.  Default is "no".

Remote Control Options
    In  the remote-control: clause are the declarations for the remote con-
    trol facility.  If this is enabled, the unbound-control(8) utility  can
    be  used  to  send  commands to the running Unbound server.  The server
    uses these clauses to setup TLSv1 security for the connection.  The un-
    bound-control(8) utility also reads the remote-control section for  op-
    tions.   To  setup  the  correct  self-signed  certificates use the un-
    bound-control-setup(8) utility.

    control-enable: <yes or no>
        The option is used to enable remote control, default is "no".   If
        turned off, the server does not listen for control commands.

    control-interface: <ip address or interface name or path>
        Give  IPv4 or IPv6 addresses or local socket path to listen on for
        control commands.  If an interface name is used instead of  an  ip
        address,  the list of ip addresses on that interface are used.  By
        default localhost (127.0.0.1 and ::1) is listened to.  Use 0.0.0.0
        and ::0 to listen to all interfaces.  If you change this and  per-
        missions  have  been  dropped, you must restart the server for the
        change to take effect.

        If you set it to an absolute path, a unix domain socket  is  used.
        This socket does not use the certificates and keys, so those files
        need not be present.  To restrict access, Unbound sets permissions
        on  the  file to the user and group that is configured, the access
        bits are set to allow the group  members  to  access  the  control
        socket file.  Put users that need to access the socket in the that
        group.   To restrict access further, create a directory to put the
        control socket in and restrict access to that directory.

    control-port: <port number>
        The port number to listen on for IPv4 or IPv6 control  interfaces,
        default  is  8953.   If  you change this and permissions have been
        dropped, you must restart the server for the change  to  take  ef-
        fect.

    control-use-cert: <yes or no>
        For  localhost control-interface you can disable the use of TLS by
        setting this option to "no", default is "yes".  For local sockets,
        TLS is disabled and the value of this option is ignored.

    server-key-file: <private key file>
        Path to the server private  key,  by  default  unbound_server.key.
        This file is generated by the unbound-control-setup utility.  This
        file is used by the Unbound server, but not by unbound-control.

    server-cert-file: <certificate file.pem>
        Path  to  the  server  self  signed  certificate,  by  default un-
        bound_server.pem.  This file  is  generated  by  the  unbound-con-
        trol-setup  utility.  This file is used by the Unbound server, and
        also by unbound-control.

    control-key-file: <private key file>
        Path to the control client private key,  by  default  unbound_con-
        trol.key.   This  file  is  generated by the unbound-control-setup
        utility.  This file is used by unbound-control.

    control-cert-file: <certificate file.pem>
        Path to the control client certificate,  by  default  unbound_con-
        trol.pem.   This certificate has to be signed with the server cer-
        tificate.  This file is  generated  by  the  unbound-control-setup
        utility.  This file is used by unbound-control.

Stub Zone Options
    There may be multiple stub-zone: clauses. Each with a name: and zero or
    more  hostnames  or IP addresses.  For the stub zone this list of name-
    servers is used. Class IN is assumed.  The servers should be  authority
    servers,  not  recursors; Unbound performs the recursive processing it-
    self for stub zones.

    The stub zone can be used to configure authoritative data to be used by
    the resolver that cannot be accessed using the public internet servers.
    This is useful for company-local data or private zones.  Setup  an  au-
    thoritative  server  on  a  different host (or different port). Enter a
    config entry for Unbound with stub-addr: <ip address  of  host[@port]>.
    The Unbound resolver can then access the data, without referring to the
    public internet for it.

    This  setup  allows DNSSEC signed zones to be served by that authorita-
    tive server, in which case a trusted key entry with the public key  can
    be  put in config, so that Unbound can validate the data and set the AD
    bit on replies for the private zone (authoritative servers do  not  set
    the AD bit).  This setup makes Unbound capable of answering queries for
    the private zone, and can even set the AD bit (&#39;authentic&#39;), but the AA
    (&#39;authoritative&#39;) bit is not set on these replies.

    Consider  adding  server:  statements  for domain-insecure: and for lo-
    cal-zone: name nodefault for the zone if it is a locally  served  zone.
    The insecure clause stops DNSSEC from invalidating the zone.  The local
    zone nodefault (or transparent) clause makes the (reverse-) zone bypass
    Unbound&#39;s filtering of RFC1918 zones.

    name: <domain name>
            Name of the stub zone. This is the full domain name of the zone.

    stub-host: <domain name>
            Name  of  stub  zone nameserver. Is itself resolved before it is
            used.  To use a nondefault port for DNS communication append &#39;@&#39;
            with the port number.  If tls is enabled, then you can append  a
            &#39;#&#39; and a name, then it&#39;ll check the tls authentication certifi-
            cates  with  that name.  If you combine the &#39;@&#39; and &#39;#&#39;, the &#39;@&#39;
            comes first.  If only &#39;#&#39; is used the default port is  the  con-
            figured tls-port.

    stub-addr: <IP address>
            IP address of stub zone nameserver. Can be IP 4 or IP 6.  To use
            a nondefault port for DNS communication append &#39;@&#39; with the port
            number.   If  tls  is  enabled,  then you can append a &#39;#&#39; and a
            name, then it&#39;ll check the tls authentication certificates  with
            that name.  If you combine the &#39;@&#39; and &#39;#&#39;, the &#39;@&#39; comes first.
            If only &#39;#&#39; is used the default port is the configured tls-port.

    stub-prime: <yes or no>
            This  option  is  by  default no.  If enabled it performs NS set
            priming, which is similar to root hints, where it  starts  using
            the  list of nameservers currently published by the zone.  Thus,
            if the hint list is slightly outdated, the resolver picks  up  a
            correct list online.

    stub-first: <yes or no>
            If  enabled,  a query is attempted without the stub clause if it
            fails.  The data could not be retrieved and  would  have  caused
            SERVFAIL  because  the  servers  are  unreachable, instead it is
            tried without this clause.  The default is no.

    stub-tls-upstream: <yes or no>
            Enabled or disable whether the queries to this stub use TLS  for
            transport.  Default is no.

    stub-ssl-upstream: <yes or no>
            Alternate syntax for stub-tls-upstream.

    stub-tcp-upstream: <yes or no>
            If  it  is  set  to "yes" then upstream queries use TCP only for
            transport regardless of global flag  tcp-upstream.   Default  is
            no.

    stub-no-cache: <yes or no>
            Default  is no.  If enabled, data inside the stub is not cached.
            This is useful when you want immediate changes to be visible.

Forward Zone Options
    There may be multiple forward-zone: clauses. Each with a name: and zero
    or more hostnames or IP addresses.  For the forward zone this  list  of
    nameservers  is  used  to forward the queries to. The servers listed as
    forward-host: and forward-addr: have to handle  further  recursion  for
    the  query.   Thus,  those  servers  are not authority servers, but are
    (just like Unbound is) recursive servers too; Unbound does not  perform
    recursion itself for the forward zone, it lets the remote server do it.
    Class  IN  is assumed.  CNAMEs are chased by Unbound itself, asking the
    remote server for every name in the indirection chain, to  protect  the
    local cache from illegal indirect referenced items.  A forward-zone en-
    try with name "." and a forward-addr target will forward all queries to
    that other server (unless it can answer from the cache).

    name: <domain name>
            Name  of  the  forward zone. This is the full domain name of the
            zone.

    forward-host: <domain name>
            Name of server to forward to. Is itself resolved  before  it  is
            used.  To use a nondefault port for DNS communication append &#39;@&#39;
            with  the port number.  If tls is enabled, then you can append a
            &#39;#&#39; and a name, then it&#39;ll check the tls authentication certifi-
            cates with that name.  If you combine the &#39;@&#39; and &#39;#&#39;,  the  &#39;@&#39;
            comes  first.   If only &#39;#&#39; is used the default port is the con-
            figured tls-port.

    forward-addr: <IP address>
            IP address of server to forward to. Can be IP 4 or IP 6.  To use
            a nondefault port for DNS communication append &#39;@&#39; with the port
            number.  If tls is enabled, then you can  append  a  &#39;#&#39;  and  a
            name,  then it&#39;ll check the tls authentication certificates with
            that name.  If you combine the &#39;@&#39; and &#39;#&#39;, the &#39;@&#39; comes first.
            If only &#39;#&#39; is used the default port is the configured tls-port.

            At high verbosity it logs the TLS certificate, with TLS enabled.
            If you leave out the &#39;#&#39; and auth name  from  the  forward-addr,
            any  name  is  accepted.  The cert must also match a CA from the
            tls-cert-bundle.

    forward-first: <yes or no>
            If a forwarded query is met with a SERVFAIL error, and this  op-
            tion is enabled, Unbound will fall back to normal recursive res-
            olution for this query as if no query forwarding had been speci-
            fied.  The default is "no".

    forward-tls-upstream: <yes or no>
            Enabled or disable whether the queries to this forwarder use TLS
            for transport.  Default is no.  If you enable this, also config-
            ure a tls-cert-bundle or use tls-win-cert to load CA certs, oth-
            erwise the connections cannot be authenticated.

    forward-ssl-upstream: <yes or no>
            Alternate syntax for forward-tls-upstream.

    forward-tcp-upstream: <yes or no>
            If  it  is  set  to "yes" then upstream queries use TCP only for
            transport regardless of global flag  tcp-upstream.   Default  is
            no.

    forward-no-cache: <yes or no>
            Default  is  no.   If  enabled,  data  inside the forward is not
            cached.  This is useful when you want immediate  changes  to  be
            visible.

Authority Zone Options
    Authority  zones are configured with auth-zone:, and each one must have
    a name:.  There can be multiple ones,  by  listing  multiple  auth-zone
    clauses,  each  with  a  different name, pertaining to that part of the
    namespace.  The authority zone with the name closest to the name looked
    up is used.  Authority zones can be processed on two distinct,  non-ex-
    clusive, configurable stages.

    With for-downstream: yes (default), authority zones are processed after
    local-zones  and  before  cache.  When used in this manner, Unbound re-
    sponds like an authority server with no further processing  other  than
    returning an answer from the zone contents.  A notable example, in this
    case,  is  CNAME  records  which  are  returned  verbatim to downstream
    clients without further resolution.

    With for-upstream: yes (default), authority zones are  processed  after
    the cache lookup, just before going to the network to fetch information
    for  recursion.   When used in this manner they provide a local copy of
    an authority server that speeds up lookups for that data during resolv-
    ing.

    If both options are enabled (default), client queries for an  authority
    zone  are answered authoritatively from Unbound, while internal queries
    that require data from the authority zone consult the local  zone  data
    instead of going to the network.

    An  interesting  configuration is for-downstream: no, for-upstream: yes
    that allows for hyperlocal behavior  where  both  client  and  internal
    queries consult the local zone data while resolving.  In this case, the
    aforementioned  CNAME  example will result in a thoroughly resolved an-
    swer.

    Authority zones can be read from zonefile.  And can be kept updated via
    AXFR and IXFR.  After update the zonefile  is  rewritten.   The  update
    mechanism uses the SOA timer values and performs SOA UDP queries to de-
    tect zone changes.

    If  the  update  fetch  fails, the timers in the SOA record are used to
    time another fetch attempt.  Until the SOA  expiry  timer  is  reached.
    Then  the  zone  is expired.  When a zone is expired, queries are SERV-
    FAIL, and any new serial number is accepted from the primary  (even  if
    older),  and  if  fallback  is enabled, the fallback activates to fetch
    from the upstream instead of the SERVFAIL.

    name: <zone name>
            Name of the authority zone.

    primary: <IP address or host name>
            Where to download a copy of the zone from, with AXFR  and  IXFR.
            Multiple  primaries can be specified.  They are all tried if one
            fails.  To use a nondefault port for  DNS  communication  append
            &#39;@&#39; with the port number.  You can append a &#39;#&#39; and a name, then
            AXFR  over  TLS  can be used and the tls authentication certifi-
            cates will be checked with that name.  If you  combine  the  &#39;@&#39;
            and  &#39;#&#39;,  the  &#39;@&#39; comes first.  If you point it at another Un-
            bound instance, it would not work because that does not  support
            AXFR/IXFR  for  the  zone,  but if you used url: to download the
            zonefile as a text file from a webserver that  would  work.   If
            you  specify  the  hostname,  you cannot use the domain from the
            zonefile, because it may not  have  that  when  retrieving  that
            data,  instead use a plain IP address to avoid a circular depen-
            dency on retrieving that IP address.

    master: <IP address or host name>
            Alternate syntax for primary.

    url: <url to zonefile>
            Where to download a zonefile for the zone.  With http or  https.
            An   example   for   the  url  is  "http://www.example.com/exam-
            ple.org.zone".  Multiple url statements can be given,  they  are
            tried  in turn.  If only urls are given the SOA refresh timer is
            used to wait for making new downloads.  If  also  primaries  are
            listed,  the  primaries are first probed with UDP SOA queries to
            see if the SOA serial number has changed, reducing the number of
            downloads.  If none of the urls work, the  primaries  are  tried
            with  IXFR  and  AXFR.   For  https, the tls-cert-bundle and the
            hostname from the url are used to authenticate  the  connection.
            If  you specify a hostname in the URL, you cannot use the domain
            from the zonefile, because it may not have that when  retrieving
            that  data,  instead  use a plain IP address to avoid a circular
            dependency on retrieving that IP address.  Avoid dependencies on
            name lookups by using a notation like "http://192.0.2.1/unbound-
            primaries/example.com.zone", with an explicit IP address.

    allow-notify: <IP address or host name or netblockIP/prefix>
            With allow-notify you can specify additional  sources  of  noti-
            fies.   When  notified,  the  server attempts to first probe and
            then zone transfer.  If the notify is from a primary,  it  first
            attempts that primary.  Otherwise other primaries are attempted.
            If there are no primaries, but only urls, the file is downloaded
            when  notified.  The primaries from primary: and url: statements
            are allowed notify by default.

    fallback-enabled: <yes or no>
            Default no.  If enabled, Unbound falls back to querying the  in-
            ternet as a resolver for this zone when lookups fail.  For exam-
            ple for DNSSEC validation failures.

    for-downstream: <yes or no>
            Default  yes.  If enabled, Unbound serves authority responses to
            downstream clients for this zone.  This option makes Unbound be-
            have, for the queries with names in this zone, like one  of  the
            authority  servers  for  that zone.  Turn it off if you want Un-
            bound to provide recursion for the zone but have a local copy of
            zone data.  If for-downstream is no  and  for-upstream  is  yes,
            then  Unbound  will DNSSEC validate the contents of the zone be-
            fore serving the zone contents to clients and  store  validation
            results in the cache.

    for-upstream: <yes or no>
            Default  yes.   If  enabled, Unbound fetches data from this data
            collection for answering recursion queries.  Instead of  sending
            queries  over  the  internet  to  the authority servers for this
            zone, it&#39;ll fetch the data directly from the zone data.  Turn it
            on when you want Unbound to  provide  recursion  for  downstream
            clients,  and  use  the  zone  data  as a local copy to speed up
            lookups.

    zonemd-check: <yes or no>
            Enable this option to check ZONEMD records in the zone.  Default
            is  disabled.   The  ZONEMD  record  is a checksum over the zone
            data. This includes glue in the zone  and  data  from  the  zone
            file, and excludes comments from the zone file.  When there is a
            DNSSEC chain of trust, DNSSEC signatures are checked too.

    zonemd-reject-absence: <yes or no>
            Enable  this  option to reject the absence of the ZONEMD record.
            Without it, when zonemd is not there it is not checked.   It  is
            useful  to enable for a nonDNSSEC signed zone where the operator
            wants to require the verification of a ZONEMD, hence  a  missing
            ZONEMD  is  a failure.  The action upon failure is controlled by
            the zonemd-permissive-mode option, for log only  or  also  block
            the zone.  The default is no.

            Without  the  option  absence of a ZONEMD is only a failure when
            the zone is DNSSEC signed, and we have a trust anchor,  and  the
            DNSSEC  verification  of  the absence of the ZONEMD fails.  With
            the option enabled, the absence of a ZONEMD is always a failure,
            also for nonDNSSEC signed zones.

    zonefile: <filename>
            The filename where the zone is stored.  If  not  given  then  no
            zonefile  is  used.  If the file does not exist or is empty, Un-
            bound will attempt to fetch zone  data  (eg.  from  the  primary
            servers).

View Options
    There may be multiple view: clauses. Each with a name: and zero or more
    local-zone  and local-data elements. Views can also contain view-first,
    response-ip, response-ip-data and local-data-ptr elements.  View can be
    mapped to requests by  specifying  the  view  name  in  an  access-con-
    trol-view element. Options from matching views will override global op-
    tions.  Global  options  will  be used if no matching view is found, or
    when the matching view does not have the option specified.

    name: <view name>
            Name of the view. Must be unique.  This  name  is  used  in  ac-
            cess-control-view elements.

    local-zone: <zone> <type>
            View specific local-zone elements. Has the same types and behav-
            iour  as  the global local-zone elements. When there is at least
            one local-zone specified and view-first is no, the  default  lo-
            cal-zones  will be added to this view.  Defaults can be disabled
            using the nodefault type. When view-first is yes or when a  view
            does  not  have a local-zone, the global local-zone will be used
            including it&#39;s default zones.

    local-data: "<resource record string>"
            View specific local-data elements. Has the same behaviour as the
            global local-data elements.

    local-data-ptr: "IPaddr name"
            View specific local-data-ptr elements. Has the same behaviour as
            the global local-data-ptr elements.

    view-first: <yes or no>
            If enabled, it attempts to use the  global  local-zone  and  lo-
            cal-data if there is no match in the view specific options.  The
            default is no.

Python Module Options
    The  python: clause gives the settings for the python(1) script module.
    This module acts like the iterator and validator modules do, on queries
    and answers.  To enable the script module it has to  be  compiled  into
    the  daemon,  and the word "python" has to be put in the module-config:
    option (usually first, or between the validator and iterator). Multiple
    instances of the  python  module  are  supported  by  adding  the  word
    "python" more than once.

    If the chroot: option is enabled, you should make sure Python&#39;s library
    directory  structure  is  bind mounted in the new root environment, see
    mount(8).  Also the python-script: path should be specified as  an  ab-
    solute  path  relative  to  the  new root, or as a relative path to the
    working directory.

    python-script: <python file>
            The script file to load. Repeat this  option  for  every  python
            module instance added to the module-config: option.

Dynamic Library Module Options
    The dynlib: clause gives the settings for the dynlib module.  This mod-
    ule  is  only  a  very  small wrapper that allows dynamic modules to be
    loaded on runtime instead of being compiled into  the  application.  To
    enable the dynlib module it has to be compiled into the daemon, and the
    word  "dynlib" has to be put in the module-config: option. Multiple in-
    stances of dynamic libraries are supported by adding the word  "dynlib"
    more than once.

    The  dynlib-file: path should be specified as an absolute path relative
    to the new path set by chroot: option, or as a  relative  path  to  the
    working directory.

    dynlib-file: <dynlib file>
            The  dynamic  library file to load. Repeat this option for every
            dynlib module instance added to the module-config: option.

DNS64 Module Options
    The dns64 module must be configured  in  the  module-config:  directive
    e.g.,  "dns64 validator iterator" and be compiled into the daemon to be
    enabled.  These settings go in the server: section.

    dns64-prefix: <IPv6 prefix>
            This sets the DNS64 prefix to use  to  synthesize  AAAA  records
            with.   It  must  be  /96  or  shorter.   The  default prefix is
            64:ff9b::/96.

    dns64-synthall: <yes or no>
            Debug option, default  no.   If  enabled,  synthesize  all  AAAA
            records despite the presence of actual AAAA records.

    dns64-ignore-aaaa: <name>
            List  domain  for  which  the AAAA records are ignored and the A
            record is used by dns64 processing instead.  Can be entered mul-
            tiple times, list a new domain for which  it  applies,  one  per
            line.  Applies also to names underneath the name given.

NAT64 Operation
    NAT64  operation  allows  using a NAT64 prefix for outbound requests to
    IPv4-only servers.  It is controlled by two options in the server: sec-
    tion:

    do-nat64: <yes or no>
            Use NAT64 to reach IPv4-only servers.   Consider  also  enabling
            prefer-ip6  to  prefer  native  IPv6 connections to nameservers.
            Default no.

    nat64-prefix: <IPv6 prefix>
            Use a specific NAT64 prefix to  reach  IPv4-only  servers.   De-
            faults  to using the prefix configured in dns64-prefix, which in
            turn defaults to 64:ff9b::/96.  The prefix length must be one of
            /32, /40, /48, /56, /64 or /96.

DNSCrypt Options
    The dnscrypt: clause gives the settings of the dnscrypt channel.  While
    those  options  are  available, they are only meaningful if Unbound was
    compiled with --enable-dnscrypt.  Currently certificate and secret/pub-
    lic keys cannot be generated by Unbound.  You can use  dnscrypt-wrapper
    to  generate those: <https://github.com/cofyc/dnscrypt-wrapper/blob/mas->
    ter/README.md#usage

    dnscrypt-enable: <yes or no>
            Whether or not the dnscrypt config should be  enabled.  You  may
            define configuration but not activate it.  The default is no.

    dnscrypt-port: <port number>
            On which port should dnscrypt should be activated. Note that you
            should  have  a  matching interface option defined in the server
            section for this port.

    dnscrypt-provider: <provider name>
            The provider name to use to distribute certificates. This is  of
            the form: 2.dnscrypt-cert.example.com.. The name MUST end with a
            dot.

    dnscrypt-secret-key: <path to secret key file>
            Path  to  the  time  limited secret key file. This option may be
            specified multiple times.

    dnscrypt-provider-cert: <path to cert file>
            Path to the certificate  related  to  the  dnscrypt-secret-keys.
            This option may be specified multiple times.

    dnscrypt-provider-cert-rotated: <path to cert file>
            Path  to  a certificate that we should be able to serve existing
            connection  from   but   do   not   want   to   advertise   over
            dnscrypt-provider&#39;s  TXT  record  certs distribution.  A typical
            use case is when rotating  certificates,  existing  clients  may
            still  use  the  client magic from the old cert in their queries
            until they fetch and update the new cert. Likewise, it would al-
            low one to prime the new cert/key without distributing  the  new
            cert yet, this can be useful when using a network of servers us-
            ing  anycast  and on which the configuration may not get updated
            at the exact same time. By priming the  cert,  the  servers  can
            handle  both  old  and new certs traffic while distributing only
            one.  This option may be specified multiple times.

    dnscrypt-shared-secret-cache-size: <memory size>
            Give the size of the data structure in which the  shared  secret
            keys  are  kept  in.   Default  4m.   In  bytes  or use m(mega),
            k(kilo), g(giga).  The shared secret cache is used when  a  same
            client  is making multiple queries using the same public key. It
            saves a substantial amount of CPU.

    dnscrypt-shared-secret-cache-slabs: <number>
            Give power of 2 number of slabs, this is  used  to  reduce  lock
            contention  in  the dnscrypt shared secrets cache.  Close to the
            number of cpus is a fairly good setting.

    dnscrypt-nonce-cache-size: <memory size>
            Give the size of the data structure in which the  client  nonces
            are  kept  in.   Default  4m.  In bytes or use m(mega), k(kilo),
            g(giga).  The nonce cache is used to  prevent  dnscrypt  message
            replaying.  Client nonce should be unique for any pair of client
            pk/server sk.

    dnscrypt-nonce-cache-slabs: <number>
            Give power of 2 number of slabs, this is  used  to  reduce  lock
            contention  in the dnscrypt nonce cache.  Close to the number of
            cpus is a fairly good setting.

EDNS Client Subnet Module Options
    The ECS module must be configured in the module-config: directive e.g.,
    "subnetcache validator iterator" and be compiled into the daemon to  be
    enabled.  These settings go in the server: section.

    If the destination address is allowed in the configuration Unbound will
    add  the  EDNS0 option to the query containing the relevant part of the
    client&#39;s address.  When an answer contains the ECS option the  response
    and  the option are placed in a specialized cache. If the authority in-
    dicated no support, the response is stored in the regular cache.

    Additionally, when a client includes the option in its queries, Unbound
    will forward the option when sending the query to  addresses  that  are
    explicitly  allowed  in the configuration using send-client-subnet. The
    option will always be forwarded, regardless the allowed  addresses,  if
    client-subnet-always-forward  is set to yes. In this case the lookup in
    the regular cache is skipped.

    The maximum size of the ECS cache is controlled by &#39;msg-cache-size&#39;  in
    the configuration file. On top of that, for each query only 100 differ-
    ent subnets are allowed to be stored for each address family. Exceeding
    that number, older entries will be purged from cache.

    Note  that due to the nature of how EDNS Client Subnet works, by segre-
    gating the client IP space in order to try and have tailored  responses
    for  prefixes  of  unknown sizes, resolution and cache response perfor-
    mance are impacted as a result.  Usage of the subnetcache module should
    only be enabled in installations that require such functionality  where
    the  resolver and the clients belong to different networks.  An example
    of that is an open resolver installation.

    This module does not interact with the serve-expired* and prefetch: op-
    tions.

    send-client-subnet: <IP address>
            Send client source address to this authority. Append /num to in-
            dicate  a  classless  delegation  netblock,  for  example   like
            10.2.3.4/24 or 2001::11/64. Can be given multiple times. Author-
            ities  not  listed will not receive edns-subnet information, un-
            less domain in query is specified in client-subnet-zone.

    client-subnet-zone: <domain>
            Send client source address in queries for this  domain  and  its
            subdomains.  Can  be given multiple times. Zones not listed will
            not receive edns-subnet information, unless hosted by  authority
            specified in send-client-subnet.

    client-subnet-always-forward: <yes or no>
            Specify   whether   the  ECS  address  check  (configured  using
            send-client-subnet) is applied for  all  queries,  even  if  the
            triggering query contains an ECS record, or only for queries for
            which the ECS record is generated using the querier address (and
            therefore  did not contain ECS data in the client query). If en-
            abled, the address check is skipped when the client  query  con-
            tains  an  ECS  record.  And  the lookup in the regular cache is
            skipped.  Default is no.

    max-client-subnet-ipv6: <number>
            Specifies the maximum prefix length of the client source address
            we are willing to expose to third parties for IPv6.  Defaults to
            56.

    max-client-subnet-ipv4: <number>
            Specifies the maximum prefix length of the client source address
            we are willing to expose to third parties for IPv4. Defaults  to
            24.

    min-client-subnet-ipv6: <number>
            Specifies  the  minimum prefix length of the IPv6 source mask we
            are willing to accept in queries. Shorter source masks result in
            REFUSED answers. Source mask of 0 is always accepted. Default is
            0.

    min-client-subnet-ipv4: <number>
            Specifies the minimum prefix length of the IPv4 source  mask  we
            are willing to accept in queries. Shorter source masks result in
            REFUSED answers. Source mask of 0 is always accepted. Default is
            0.

    max-ecs-tree-size-ipv4: <number>
            Specifies  the maximum number of subnets ECS answers kept in the
            ECS radix tree.  This number applies for each qname/qclass/qtype
            tuple. Defaults to 100.

    max-ecs-tree-size-ipv6: <number>
            Specifies the maximum number of subnets ECS answers kept in  the
            ECS radix tree.  This number applies for each qname/qclass/qtype
            tuple. Defaults to 100.

Opportunistic IPsec Support Module Options
    The  IPsec  module  must  be configured in the module-config: directive
    e.g., "ipsecmod validator iterator" and be compiled into Unbound by us-
    ing --enable-ipsecmod to be enabled.  These settings go in the  server:
    section.

    When  Unbound  receives  an  A/AAAA  query that is not in the cache and
    finds a valid answer, it will withhold returning the answer and instead
    will generate an IPSECKEY subquery for the same domain name.  If an an-
    swer was found, Unbound will call an external hook passing the  follow-
    ing arguments:

        QNAME
                Domain name of the A/AAAA and IPSECKEY query.  In string for-
                mat.

        IPSECKEY TTL
                TTL of the IPSECKEY RRset.

        A/AAAA
                String  of space separated IP addresses present in the A/AAAA
                RRset.  The IP addresses are in string format.

        IPSECKEY
                String of space  separated  IPSECKEY  RDATA  present  in  the
                IPSECKEY  RRset.   The IPSECKEY RDATA are in DNS presentation
                format.

    The A/AAAA answer is then cached and returned to the  client.   If  the
    external  hook  was called the TTL changes to ensure it doesn&#39;t surpass
    ipsecmod-max-ttl.

    The same procedure is also followed when prefetch:  is  used,  but  the
    A/AAAA answer is given to the client before the hook is called.  ipsec-
    mod-max-ttl  ensures  that  the A/AAAA answer given from cache is still
    relevant for opportunistic IPsec.

    ipsecmod-enabled: <yes or no>
            Specifies whether the IPsec module is enabled or not.  The IPsec
            module still needs to be defined in  the  module-config:  direc-
            tive.  This option facilitates turning on/off the module without
            restarting/reloading Unbound.  Defaults to yes.

    ipsecmod-hook: <filename>
            Specifies  the  external  hook  that Unbound will call with sys-
            tem(3).  The file can be specified as an absolute/relative path.
            The file needs the proper permissions to be able to be  executed
            by the same user that runs Unbound.  It must be present when the
            IPsec module is defined in the module-config: directive.

    ipsecmod-strict: <yes or no>
            If  enabled  Unbound requires the external hook to return a suc-
            cess value of 0.  Failing to do so Unbound will reply with SERV-
            FAIL.  The A/AAAA answer will also not be cached.   Defaults  to
            no.

    ipsecmod-max-ttl: <seconds>
            Time to live maximum for A/AAAA cached records after calling the
            external hook.  Defaults to 3600.

    ipsecmod-ignore-bogus: <yes or no>
            Specifies  the  behaviour of Unbound when the IPSECKEY answer is
            bogus.  If set to yes, the hook will be called  and  the  A/AAAA
            answer  will  be returned to the client.  If set to no, the hook
            will not be called and the answer to the A/AAAA  query  will  be
            SERVFAIL.  Mainly used for testing.  Defaults to no.

    ipsecmod-allow: <domain>
            Allow the ipsecmod functionality for the domain so that the mod-
            ule  logic  will  be executed.  Can be given multiple times, for
            different domains.  If the option is not specified, all  domains
            are treated as being allowed (default).

    ipsecmod-whitelist: <domain>
            Alternate syntax for ipsecmod-allow.

Cache DB Module Options
    The  Cache DB module must be configured in the module-config: directive
    e.g., "validator cachedb iterator" and be compiled into the daemon with
    --enable-cachedb.  If this module is enabled and configured, the speci-
    fied backend database works as a second level cache: When Unbound  can-
    not  find an answer to a query in its built-in in-memory cache, it con-
    sults the specified backend.  If it finds a valid answer in  the  back-
    end,  Unbound uses it to respond to the query without performing itera-
    tive DNS resolution.  If Unbound cannot even  find  an  answer  in  the
    backend,  it  resolves the query as usual, and stores the answer in the
    backend.

    This module interacts with the serve-expired-* options and  will  reply
    with expired data if Unbound is configured for that.

    If  Unbound  was  built with --with-libhiredis on a system that has in-
    stalled the hiredis C client library of Redis, then the "redis" backend
    can be used.  This backend communicates with the specified Redis server
    over a TCP connection to store and retrieve cache data.  It can be used
    as a persistent and/or shared cache backend.  It should be  noted  that
    Unbound  never  removes  data  stored in the Redis server, even if some
    data have expired in terms of DNS TTL or the Redis  server  has  cached
    too  much  data;  if  necessary  the Redis server must be configured to
    limit the cache size, preferably with some kind of  least-recently-used
    eviction  policy.  Additionally, the redis-expire-records option can be
    used in order to set the relative DNS TTL of the message as timeout  to
    the Redis records; keep in mind that some additional memory is used per
    key  and  that  the expire information is stored as absolute Unix time-
    stamps in Redis (computer time must be stable).  This backend uses syn-
    chronous communication with the Redis server based  on  the  assumption
    that  the  communication  is  stable and sufficiently fast.  The thread
    waiting for a response from the Redis server cannot  handle  other  DNS
    queries.   Although  the  backend  has  the ability to reconnect to the
    server when the connection is closed unexpectedly and there is  a  con-
    figurable  timeout in case the server is overly slow or hangs up, these
    cases are assumed to be very rare.  If connection close or timeout hap-
    pens too often, Unbound will be effectively unusable with this backend.
    It&#39;s the administrator&#39;s responsibility to make the assumption hold.

    The cachedb: clause gives custom settings of the cache DB module.

    backend: <backend name>
            Specify the backend database name.  The default database is  the
            in-memory  backend  named  "testframe",  which, as the name sug-
            gests, is not of any practical use.  Depending on the build-time
            configuration, "redis" backend may also  be  used  as  described
            above.

    secret-seed: <"secret string">
            Specify a seed to calculate a hash value from query information.
            This  value  will be used as the key of the corresponding answer
            for the backend database and  can  be  customized  if  the  hash
            should  not  be predictable operationally.  If the backend data-
            base is shared by multiple Unbound instances, all instances must
            use the same secret seed.  This option defaults to "default".

    cachedb-no-store: <yes or no>
            If the backend should be read from, but  not  written  to.  This
            makes  this  instance not store dns messages in the backend. But
            if data is available it is retrieved. The default is no.

    cachedb-check-when-serve-expired: <yes or no>
            If enabled, the cachedb is checked before an expired response is
            returned.  When  serve-expired  is  enabled,  without  serve-ex-
            pired-client-timeout,  it then does not immediately respond with
            an expired response from cache, but  instead  first  checks  the
            cachedb for valid contents, and if so returns it. If the cachedb
            also  has no valid contents, the serve expired response is sent.
            If also serve-expired-client-timeout is enabled, the expired re-
            sponse is delayed until the timeout expires. Unless  the  lookup
            succeeds within the timeout. The default is yes.

    The following cachedb options are specific to the redis backend.

    redis-server-host: <server address or name>
            The  IP  (either  v6  or v4) address or domain name of the Redis
            server.  In general an IP address should be specified as  other-
            wise  Unbound  will have to resolve the name of the server every
            time it establishes a connection to the server.  This option de-
            faults to "127.0.0.1".

    redis-server-port: <port number>
            The TCP port number of the Redis server.  This  option  defaults
            to 6379.

    redis-server-path: <unix socket path>
            The  unix socket path to connect to the Redis server. Off by de-
            fault, and it can be set to "" to turn this  off.  Unix  sockets
            may have better throughput than the IP address option.

    redis-server-password: "<password>"
            The Redis AUTH password to use for the Redis server.  Only rele-
            vant  if  Redis is configured for client password authorisation.
            Off by default, and it can be set to "" to turn this off.

    redis-timeout: <msec>
            The period until when Unbound waits for a response from the  Re-
            dis  sever.   If this timeout expires Unbound closes the connec-
            tion, treats it as if the Redis server does  not  have  the  re-
            quested  data,  and  will  try  to re-establish a new connection
            later.  This option defaults to 100 milliseconds.

    redis-command-timeout: <msec>
            The timeout to use for Redis commands, in milliseconds.   If  0,
            it uses the redis-timeout value.  The default is 0.

    redis-connect-timeout: <msec>
            The timeout to use for Redis connection set up, in milliseconds.
            If 0, it uses the redis-timeout value.  The default is 0.

    redis-expire-records: <yes or no>
            If  Redis  record  expiration  is enabled.  If yes, Unbound sets
            timeout for Redis records so that Redis can evict keys that have
            expired automatically.  If Unbound is configured with  serve-ex-
            pired  and serve-expired-ttl is 0, this option is internally re-
            verted to "no".  Redis SETEX support is required for this option
            (Redis >= 2.0.0).  This option defaults to no.

    redis-logical-db: <logical database index>
            The logical database in Redis to use.  These  are  databases  in
            the  same Redis instance sharing the same configuration and per-
            sisted in the same RDB/AOF file.  If unsure about using this op-
            tion,  Redis  documentation  (https://redis.io/commands/select/)
            suggests  not  to use a single Redis instance for multiple unre-
            lated applications.  The default database in Redis  is  0  while
            other  logical  databases  need  to be explicitly SELECT&#39;ed upon
            connecting.  This option defaults to 0.

    redis-replica-server-host: <server address or name>
            The IP (either v6 or v4) address or domain  name  of  the  Redis
            replica server.  In general an IP address should be specified as
            otherwise  Unbound  will  have to resolve the name of the server
            every time it establishes a  connection  to  the  server.   This
            server  is  treated  as  a read-only replica server (https://re-
            dis.io/docs/management/replication/#read-only-replica).       If
            specified,  all  Redis  read  commands  will  go to this replica
            server, while the write commands will go  to  the  redis-server-
            host.  This option defaults to "" (disabled).

    redis-replica-server-port: <port number>
            The  TCP  port  number of the Redis replica server.  This option
            defaults to 6379.

    redis-replica-server-path: <unix socket path>
            The unix socket path to connect to the Redis server. Off by  de-
            fault,  and  it  can be set to "" to turn this off. Unix sockets
            may have better throughput than the IP address option.

    redis-replica-server-password: "<password>"
            The Redis AUTH password to use for  the  Redis  replica  server.
            Only  relevant if Redis is configured for client password autho-
            risation.  Off by default, and it can be set to "" to turn  this
            off.

    redis-replica-timeout: <msec>
            The  period until when Unbound waits for a response from the Re-
            dis replica sever.  If this timeout expires Unbound  closes  the
            connection,  treats  it  as if the Redis replica server does not
            have the requested data, and will try to re-establish a new con-
            nection later.  This option defaults to 100 milliseconds.

    redis-replica-command-timeout: <msec>
            The timeout to use for Redis replica commands, in  milliseconds.
            If  0,  it uses the redis-replica-timeout value.  The default is
            0.

    redis-replica-connect-timeout: <msec>
            The timeout to use for Redis replica connection set up, in  mil-
            liseconds.   If 0, it uses the redis-replica-timeout value.  The
            default is 0.

    redis-replica-logical-db: <logical database index>
            Same as redis-logical-db but for the Redis replica server.  This
            option defaults to 0.

DNSTAP Logging Options
    DNSTAP support, when compiled in by using --enable-dnstap,  is  enabled
    in  the  dnstap:  section.   This starts an extra thread (when compiled
    with threading) that writes the log information to the destination.  If
    Unbound is compiled without threading it does not spawn a  thread,  but
    connects per-process to the destination.

    dnstap-enable: <yes or no>
            If  dnstap  is enabled.  Default no.  If yes, it connects to the
            dnstap server and if any of the  dnstap-log-..-messages  options
            is enabled it sends logs for those messages to the server.

    dnstap-bidirectional: <yes or no>
            Use  frame streams in bidirectional mode to transfer DNSTAP mes-
            sages. Default is yes.

    dnstap-socket-path: <file name>
            Sets the unix socket file name for connecting to the server that
            is listening on that socket.  Default is "".

    dnstap-ip: <IPaddress[@port]>
            If "", the unix socket is used, if set with an IP address  (IPv4
            or IPv6) that address is used to connect to the server.

    dnstap-tls: <yes or no>
            Set  this  to  use  TLS  to  connect  to the server specified in
            dnstap-ip.  The default is yes.  If set to no, TCP  is  used  to
            connect to the server.

    dnstap-tls-server-name: <name of TLS authentication>
            The  TLS server name to authenticate the server with.  Used when
            dnstap-tls is enabled.  If "" it is ignored, default "".

    dnstap-tls-cert-bundle: <file name of cert bundle>
            The pem file with certs to verify the TLS server certificate. If
            "" the server default cert bundle is used, or the  windows  cert
            bundle on windows.  Default is "".

    dnstap-tls-client-key-file: <file name>
            The  client key file for TLS client authentication. If "" client
            authentication is not used.  Default is "".

    dnstap-tls-client-cert-file: <file name>
            The client cert file for TLS client authentication.  Default  is
            "".

    dnstap-send-identity: <yes or no>
            If enabled, the server identity is included in the log messages.
            Default is no.

    dnstap-send-version: <yes or no>
            If  enabled, the server version if included in the log messages.
            Default is no.

    dnstap-identity: <string>
            The identity to send with messages, if "" the hostname is  used.
            Default is "".

    dnstap-version: <string>
            The  version to send with messages, if "" the package version is
            used.  Default is "".

    dnstap-sample-rate: <number>
            The sample rate for log of messages, it logs only 1/N  messages.
            With  0  it  is disabled. Default is 0. This is useful in a high
            volume environment, where log functionality would otherwise  not
            be reliable. For example 10 would spend only 1/10th time on log-
            ging,  and  100 would only spend a hundredth of the time on log-
            ging.

    dnstap-log-resolver-query-messages: <yes or no>
            Enable to log resolver query messages.  Default  is  no.   These
            are messages from Unbound to upstream servers.

    dnstap-log-resolver-response-messages: <yes or no>
            Enable to log resolver response messages.  Default is no.  These
            are replies from upstream servers to Unbound.

    dnstap-log-client-query-messages: <yes or no>
            Enable  to log client query messages.  Default is no.  These are
            client queries to Unbound.

    dnstap-log-client-response-messages: <yes or no>
            Enable to log client response messages.  Default is  no.   These
            are responses from Unbound to clients.

    dnstap-log-forwarder-query-messages: <yes or no>
            Enable to log forwarder query messages.  Default is no.

    dnstap-log-forwarder-response-messages: <yes or no>
            Enable to log forwarder response messages.  Default is no.

Response Policy Zone Options
    Response  Policy Zones are configured with rpz:, and each one must have
    a name:. There can be multiple ones, by listing multiple  RPZ  clauses,
    each with a different name. RPZ clauses are applied in order of config-
    uration  and  any match from an earlier RPZ zone will terminate the RPZ
    lookup. Note that a PASSTHRU action is still considered a  match.   The
    respip module needs to be added to the module-config, e.g.: module-con-
    fig: "respip validator iterator".

    QNAME,  Response  IP  Address,  nsdname, nsip and clientip triggers are
    supported.  Supported actions are: NXDOMAIN,  NODATA,  PASSTHRU,  DROP,
    Local  Data,  tcp-only  and drop.  RPZ QNAME triggers are applied after
    local-zones and before auth-zones.

    The RPZ zone is a regular DNS zone formatted with a SOA start record as
    usual.  The items in the zone are entries, that specify what to act  on
    (the  trigger)  and  what to do (the action).  The trigger to act on is
    recorded in the name, the action to do  is  recorded  as  the  resource
    record.   The  names  all  end  in the zone name, so you could type the
    trigger names without a trailing dot in the zonefile.

    An example RPZ record, that answers example.com with NXDOMAIN
        example.com CNAME .

    The triggers are encoded in the name on the left
        name                          query name
        netblock.rpz-client-ip        client IP address
        netblock.rpz-ip               response IP address in the answer
        name.rpz-nsdname              nameserver name
        netblock.rpz-nsip             nameserver IP address
    The netblock is written as <netblocklen>.<ip address in reverse>.   For
    IPv6 use &#39;zz&#39; for &#39;::&#39;.  Specify individual addresses with scope length
    of 32 or 128.  For example, 24.10.100.51.198.rpz-ip is 198.51.100.10/24
    and 32.10.zz.db8.2001.rpz-ip is 2001:db8:0:0:0:0:0:10/32.

    The actions are specified with the record on the right
        CNAME .                      nxdomain reply
        CNAME *.                     nodata reply
        CNAME rpz-passthru.          do nothing, allow to continue
        CNAME rpz-drop.              the query is dropped
        CNAME rpz-tcp-only.          answer over TCP
        A 192.0.2.1                  answer with this IP address
    Other  records like AAAA, TXT and other CNAMEs (not rpz-..) can also be
    used to answer queries with that content.

    The RPZ zones can be configured in the config file with these  settings
    in the rpz: block.

    name: <zone name>
            Name of the authority zone.

    primary: <IP address or host name>
            Where  to  download a copy of the zone from, with AXFR and IXFR.
            Multiple primaries can be specified.  They are all tried if  one
            fails.   To  use  a nondefault port for DNS communication append
            &#39;@&#39; with the port number.  You can append a &#39;#&#39; and a name, then
            AXFR over TLS can be used and the  tls  authentication  certifi-
            cates  will  be  checked with that name.  If you combine the &#39;@&#39;
            and &#39;#&#39;, the &#39;@&#39; comes first.  If you point it  at  another  Un-
            bound  instance, it would not work because that does not support
            AXFR/IXFR for the zone, but if you used  url:  to  download  the
            zonefile  as  a  text file from a webserver that would work.  If
            you specify the hostname, you cannot use  the  domain  from  the
            zonefile,  because  it  may  not  have that when retrieving that
            data, instead use a plain IP address to avoid a circular  depen-
            dency on retrieving that IP address.

    master: <IP address or host name>
            Alternate syntax for primary.

    url: <url to zonefile>
            Where  to download a zonefile for the zone.  With http or https.
            An  example  for  the   url   is   "http://www.example.com/exam-
            ple.org.zone".   Multiple  url statements can be given, they are
            tried in turn.  If only urls are given the SOA refresh timer  is
            used  to  wait  for making new downloads.  If also primaries are
            listed, the primaries are first probed with UDP SOA  queries  to
            see if the SOA serial number has changed, reducing the number of
            downloads.   If  none  of the urls work, the primaries are tried
            with IXFR and AXFR.  For  https,  the  tls-cert-bundle  and  the
            hostname from the url are used to authenticate the connection.

    allow-notify: <IP address or host name or netblockIP/prefix>
            With  allow-notify  you  can specify additional sources of noti-
            fies.  When notified, the server attempts  to  first  probe  and
            then  zone  transfer.  If the notify is from a primary, it first
            attempts that primary.  Otherwise other primaries are attempted.
            If there are no primaries, but only urls, the file is downloaded
            when notified.  The primaries from primary: and url:  statements
            are allowed notify by default.

    zonefile: <filename>
            The  filename  where  the  zone is stored.  If not given then no
            zonefile is used.  If the file does not exist or is  empty,  Un-
            bound  will  attempt  to  fetch  zone data (eg. from the primary
            servers).

    rpz-action-override: <action>
            Always use this RPZ action for matching triggers from this zone.
            Possible action are: nxdomain, nodata, passthru, drop,  disabled
            and cname.

    rpz-cname-override: <domain>
            The CNAME target domain to use if the cname action is configured
            for rpz-action-override.

    rpz-log: <yes or no>
            Log all applied RPZ actions for this RPZ zone. Default is no.

    rpz-log-name: <name>
            Specify  a string to be part of the log line, for easy referenc-
            ing.

    rpz-signal-nxdomain-ra: <yes or no>
            Signal when a query is blocked by the RPZ with NXDOMAIN with  an
            unset  RA  flag.   This allows certain clients, like dnsmasq, to
            infer that the domain is externally blocked. Default is no.

    for-downstream: <yes or no>
            If enabled the zone is authoritatively answered for and  queries
            for the RPZ zone information are answered to downstream clients.
            This  is useful for monitoring scripts, that can then access the
            SOA information to check if the RPZ information is up  to  date.
            Default is no.

    tags: <list of tags>
            Limit the policies from this RPZ clause to clients with a match-
            ing  tag.  Tags  need to be defined in define-tag and can be as-
            signed to client  addresses  using  access-control-tag.  Enclose
            list  of  tags in quotes ("") and put spaces between tags. If no
            tags are specified the policies from this clause will be applied
            for all clients.

MEMORY CONTROL EXAMPLE
       In the example config settings below memory usage is reduced. Some ser-
       vice levels are lower, notable very large data and a high TCP load  are
       no longer supported. Very large data and high TCP loads are exceptional
       for the DNS.  DNSSEC validation is enabled, just add trust anchors.  If
       you do not have to worry about programs using more than 3 Mb of memory,
       the below example is not for you. Use the defaults to receive full ser-
       vice, which on BSD-32bit tops out at 30-40 Mb after heavy usage.

       # example settings that reduce memory usage
       server:
            num-threads: 1
            outgoing-num-tcp: 1 # this limits TCP service, uses less buffers.
            incoming-num-tcp: 1
            outgoing-range: 60  # uses less memory, but less performance.
            msg-buffer-size: 8192   # note this limits service, &#39;no huge stuff&#39;.
            msg-cache-size: 100k
            msg-cache-slabs: 1
            rrset-cache-size: 100k
            rrset-cache-slabs: 1
            infra-cache-numhosts: 200
            infra-cache-slabs: 1
            key-cache-size: 100k
            key-cache-slabs: 1
            neg-cache-size: 10k
            num-queries-per-thread: 30
            target-fetch-policy: "2 1 0 0 0 0"
            harden-large-queries: "yes"
            harden-short-bufsize: "yes"

FILES
       /usr/local/etc/unbound
              default Unbound working directory.

       /usr/local/etc/unbound
              default chroot(2) location.

       /usr/local/etc/unbound/unbound.conf
              Unbound configuration file.

       /usr/local/etc/unbound/unbound.pid
              default Unbound pidfile with process ID of the running daemon.

       unbound.log
              Unbound log file. default is to log to syslog(3).

SEE ALSO
       unbound(8), unbound-checkconf(8).

AUTHORS
       Unbound  was written by NLnet Labs. Please see CREDITS file in the dis-
       tribution for further details.

NLnet Labs                       Apr 24, 2025                  unbound.conf(5)
'><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://tnzzz.top/posts/"},{"@type":"ListItem","position":2,"name":"unbound 配置文件中文文档","item":"https://tnzzz.top/posts/%E6%96%87%E6%A1%A3/unbound/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"unbound 配置文件中文文档","name":"unbound 配置文件中文文档","description":"unbound.conf(5) unbound 1.23.0 unbound.conf(5) NAME unbound.conf - Unbound 配置文件. SYNOPSIS unbound.conf DESCRIPTION unbound.conf 用于配置 unbound(8)。文件格式包含属性和值。某些属性内部包含其他属性。表示法为：attribute: value。 注释以 # 开头，并持续到行尾。空行和行首的空白将被忽略。 可以使用 unbound-checkconf(8) 工具在使用前检查 unbound.conf。 EXAMPLE 下面显示了一个示例配置文件。将其复制到 /etc/unbound/unbound.conf 并使用以下命令启动服务器： $ unbound -c /etc/unbound/unbound.conf 大多数设置都是默认值。使用以下命令停止服务器： $ kill `cat /etc/unbound/unbound.pid` 下面是一个最小的配置文件。源代码发行版包含一个带有所有选项的 extensive example.conf 文件。 # unbound.conf(5) unbound(8) 的配置文件。 server: directory: \u0026#34;/etc/unbound\u0026#34; username: unbound # 确保 unbound 可以从 chroot 内部访问熵。 # 例如在 Linux 上使用这些命令（在 BSD 上，使用 devfs(8)）： # mount --bind -n /dev/urandom /etc/unbound/dev/urandom # 并且 mount --bind -n /dev/log /etc/unbound/dev/log chroot: \u0026#34;/etc/unbound\u0026#34; # logfile: \u0026#34;/etc/unbound/unbound.log\u0026#34; #取消注释以使用日志文件。 pidfile: \u0026#34;/etc/unbound/unbound.pid\u0026#34; # verbosity: 1 # 取消注释并增加以获取更多日志记录。 # 监听所有接口，应答来自本地子网的查询。 interface: 0.0.0.0 interface: ::0 access-control: 10.0.0.0/8 allow access-control: 2001:DB8::/64 allow FILE FORMAT 关键字之间必须有空格。属性关键字以冒号“:”结尾。 属性后面跟着一个值，或者包含它的属性（在这种情况下它被称为一个子句）。 子句可以在整个文件（或包含的文件）中重复，以将属性分组到同一个子句下。 可以使用 include: 指令包含文件。 它可以出现在任何地方，接受单个文件名作为参数。 处理将继续，就好像被包含文件中的文本被复制到配置文件的那个位置一样。 如果同时使用 chroot，则使用被包含文件的完整路径名有效； 如果守护进程启动的目录等于其 chroot/工作目录，或者在 include 语句之前用 directory: dir 指定了工作目录， 则被包含文件的相对路径名也有效。 可以使用通配符包含多个文件，请参阅 glob(7)。 对于更结构化的包含选项，可以使用 include-toplevel: 指令。 这将关闭当前活动的任何子句（如果有），并强制在被包含的文件中以及此指令之后使用子句。 Server Options 这些选项属于服务器配置中的`server:`部分。 verbosity: \u0026lt;number\u0026gt; 详细程度等级，0级表示无详细信息，仅显示错误。 1级提供操作信息。 2级则包含详细的操作信息，每条查询都有简短说明。 3级深入到查询层面，逐条输出查询信息。 4级揭示算法层面的信息。 5级记录缓存未命中时的客户端标识。 默认级别为1。详细程度也可通过命令行提升，详见unbound(8)手册。 statistics-interval: \u0026lt;seconds\u0026gt; 打印统计信息到日志的间隔秒数，针对每个线程。 设置为0或\u0026#34;\u0026#34;以禁用此功能，默认情况下是禁用的。 直方图统计信息仅在统计间隔期间有回复发送时才会打印， 而请求列表统计信息则会在每个间隔打印（但可能为0）。 这是因为中位数计算需要存在数据。 statistics-cumulative: \u0026lt;yes or no\u0026gt; 若启用此选项，统计信息将自Unbound启动起累计， 且在记录统计后不清除统计计数器。默认设置为`no`。 extended-statistics: \u0026lt;yes or no\u0026gt; 若启用，将从unbound-control(8)打印扩展统计信息。 默认设置为`no`，因为跟踪更多统计信息需要时间。 计数器在unbound-control(8)中列出。 statistics-inhibit-zero: \u0026lt;yes or no\u0026gt; 若启用，值为0的选定扩展统计信息将被抑制 不会在unbound-control(8)中打印。这些包括 查询类型、查询类、查询操作码、回答rcodes（除了 NOERROR、FORMERR、SERVFAIL、NXDOMAIN、NOTIMPL、REFUSED）和RPZ 操作。默认设置为`yes`。 num-threads: \u0026lt;number\u0026gt; 创建用于服务客户端的线程数量。若无需多线程，请设置为1。 port: \u0026lt;port number\u0026gt; 服务器响应查询的端口号，默认为53。 interface: \u0026lt;ip address or interface name [@port]\u0026gt; 用于连接网络的接口。此接口用于监听来自客户端的查询， 并从中向客户端提供响应。可多次指定以在多个接口上工作。 若未指定，则默认监听本地主机。若使用接口名称而非IP地址， 则采用该接口上的所有IP地址列表。在重新加载（kill -HUP）时， 接口不会变更，仅重启时生效。可通过@端口号（接口与端口号间无空格）指定端口， 未指定时则使用默认端口（来自port设置）。 ip-address: \u0026lt;ip address or interface name [@port]\u0026gt; 与 interface 相同：（以便于与nsd.conf兼容）。 interface-automatic: \u0026lt;yes or no\u0026gt; 监听所有（当前及未来）接口上的所有地址， 检测UDP查询的源接口并将其复制到回复中。 这与ip-transparent非常相似，但此选项服务于所有接口， 而使用ip-transparent时，您可以选择Unbound在哪些（未来）接口上提供服务。 此功能尚处于实验阶段，需要您的操作系统支持特定的套接字选项。 默认值为`no`。 interface-automatic-ports: \u0026lt;string\u0026gt; 列出interface-automatic监听的端口号。 若为空，则默认监听默认端口。 端口号在字符串中以空格分隔，默认值为\u0026#34;\u0026#34;。 此设置可用于让interface-automatic处理接口， 并通过在列表中包含正常端口号来监听该端口， 同时也可通过将HTTPS或DNS over TLS的端口号加入列表，实现对它们的监听。 outgoing-interface: \u0026lt;ip address or ip6 netblock\u0026gt; 用于连接网络的接口。 此接口用于向权威服务器发送查询并接收其回复。 可多次指定以在多个接口上工作。 若未指定，则默认使用所有接口。 您可以在`interface:`和`outgoing-interface:`行中指定相同的接口， 这些接口将同时用于两种目的。 为防止欺骗，出站查询会通过随机选择的出站接口发送。 若指定的是IPv6网段而非单个IPv6地址， 则外发的UDP查询将采用从该网段中随机选取的源地址，以应对欺骗攻击。 此功能要求该IPv6网段需路由至运行Unbound的主机， 并且操作系统需支持非特权非本地绑定（目前仅Linux支持）。 可通过多个`outgoing-interface:`选项指定多个网段， 但切勿同时指定单个IPv6地址与IPv6网段，否则随机化机制将失效。 建议结合`prefer-ip6: yes`使用，以提高选择IPv6域名服务器进行查询的可能性。 在Linux系统上，需执行以下两条命令， 以便利用`freebind`套接字选项接收指定IPv6网段的流量： `ip -6 addr add 你的网段/64 dev lo \u0026amp;\u0026amp; ip -6 route add local 你的网段/64 dev lo`。 outgoing-range: \u0026lt;number\u0026gt; 要打开的端口数量。 每个线程可打开的文件描述符数量至少为1，默认值取决于编译选项。 较大的数值需要操作系统提供额外资源。 为了获得最佳性能，建议设置一个非常大的值，并利用libevent来实现这一目标。 outgoing-port-permit: \u0026lt;port number or range\u0026gt; 允许 Unbound 打开此端口或端口范围，用于发送查询。 允许更多的出站端口能增强抵御欺骗攻击的能力。 请确保这些端口不被其他守护进程占用。 默认情况下，仅使用 IANA 未分配的 1024 以上端口。 请提供一个端口号或“低-高”形式的范围，中间不要有空格。 `outgoing-port-permit` 和 `outgoing-port-avoid` 语句按照配置文件的顺序逐行处理， 将允许的端口加入并从允许的端口集合中减去避免的端口。 处理开始时，允许的端口集合包含非 IANA 分配的、高于 1024 的端口。 outgoing-port-avoid: \u0026lt;port number or range\u0026gt; 不允许Unbound打开此端口或端口范围用于发送查询。 使用此选项可确保Unbound不会占用其他守护进程所需的端口。 该端口在所有出站接口上均被避开，包括IPv4和IPv6。 默认情况下，仅使用IANA未分配的1024以上端口。 请提供一个端口号或“低-高”形式的范围，中间不要有空格。 outgoing-num-tcp: \u0026lt;number\u0026gt; 为每个线程分配的外发TCP缓冲区数量。 默认值为10。 若设置为0，或当do-tcp为“否”时，将不会向权威服务器发送TCP查询。 对于较大规模的部署，建议适当增加此值。 incoming-num-tcp: \u0026lt;number\u0026gt; 为每个线程分配的入站TCP缓冲区数量。 默认值为10。若设置为0，或当do-tcp为“否”时，将不会接受来自客户端的TCP查询。 对于较大规模的部署，建议适当增加此值。 edns-buffer-size: \u0026lt;number\u0026gt; 作为EDNS重组缓冲区大小通告的字节数。 此值用于通过UDP向对等方发送的数据报中。 实际缓冲区大小由msg-buffer-size决定（适用于TCP和UDP）。 请勿设置高于该值。默认值为1232，这是2020年DNS标志日的推荐值。 设置为512可以规避最严格的路径MTU问题，但被视为极端做法， 因为由此产生的TCP回退量过大（可能也适用于此解析器，建议调整出站TCP数量）。 max-udp-size: \u0026lt;number\u0026gt; 最大UDP响应大小（不适用于TCP响应）。 65536表示禁用UDP响应大小上限，始终采用客户端的选择。 建议值范围为512至4096。 默认值为1232，该默认值与edns-buffer-size的默认设置相同。 stream-wait-size: \u0026lt;number\u0026gt; 用于等待流缓冲区的最大字节数。默认值为4兆字节。 纯数字表示字节，可附加\u0026#39;k\u0026#39;、\u0026#39;m\u0026#39;或\u0026#39;g\u0026#39;分别表示千字节、兆字节或吉字节（1兆字节为1024*1024字节）。 由于TCP和TLS流会排队多个结果，这些缓冲区占用的内存总量不会超过此数值，否则将丢弃响应。 此设置用于管理服务器在高负载下的总内存使用量，同时每个连接上可排队的请求数量也受到限制， 额外的请求将在TCP缓冲区中等待。 msg-buffer-size: \u0026lt;number\u0026gt; 消息缓冲区的字节大小，默认设置为65552字节， 足以容纳64Kb的数据包，这是DNS消息的最大尺寸。 任何超过此大小的消息都无法发送或接收。 为了节省内存，可以减小此值，但某些对DNS数据的请求， 如针对大型资源记录的查询，可能会导致向客户端返回SERVFAIL（服务失败）响应。 msg-cache-size: \u0026lt;number\u0026gt; 消息缓存的大小字节数，默认值为4兆字节。 纯数字表示字节数，可附加\u0026#39;k\u0026#39;、\u0026#39;m\u0026#39;或\u0026#39;g\u0026#39;分别表示千字节、兆字节或吉字节（1兆字节等于1024*1024字节）。 msg-cache-slabs: \u0026lt;number\u0026gt; 消息缓存中的分片数量。分片通过减少线程间的锁争用来提升性能。 必须设置为2的幂次方。将其设置为接近CPU核心数的值是一个合理的估计。 num-queries-per-thread: \u0026lt;number\u0026gt; 每个线程同时处理的查询数量。若需服务的查询超出此限， 且无法通过竞争超时机制（参见jostle-timeout）移除已有查询，则新查询将被丢弃。 此举促使客户端在超时后重新发送请求，为服务器留出时间处理现有查询。 默认值依据编译选项而定，通常为512或1024。 jostle-timeout: \u0026lt;msec\u0026gt; 当服务器非常繁忙时使用的超时设置。该值通常设定为能确保一次往返权威服务器的时长。 若查询请求过多，则允许50%的查询完成执行，而另外50%若已超出其允许时间，则会被新到达的查询替换。 此机制旨在防止因慢查询或高查询率导致的服务拒绝。 默认值为200毫秒。 其效果是，对于耗时较长的查询，其每秒查询率（qps）大约为（每线程查询数/2）除以（此类长查询的平均时间）。 而对于短查询，其qps可达到（每线程查询数/2）除以（以整秒计的jostletimeout）， 默认情况下约为（1024/2）* 5 = 2560 qps每线程。 delay-close: \u0026lt;msec\u0026gt; 在UDP端口因超时被关闭前，额外延迟时间以毫秒计。 默认值为0，即不启用此功能。 此设置旨在防止来自上游（递归）服务器的延迟响应数据包撞击已关闭的端口， 从而触发各种关闭端口的计数器，例如1500毫秒。 当发生超时时，系统需要额外的套接字来检查数据包的ID和远程IP， 不符合条件的数据包将被计入无效数据包计数器。 udp-connect: \u0026lt;yes or no\u0026gt; 为UDP套接字执行连接操作，以减轻ICMP侧信道泄露风险。默认设置为`yes`。 unknown-server-time-limit: \u0026lt;msec\u0026gt; 等待未知服务器响应的毫秒时间。 若您处于较慢的卫星链路环境下，可适当增加此值，例如设为1128毫秒。 这样能避免因超时导致每次初始查询都需要重新发起。默认值为376毫秒。 discard-timeout: \u0026lt;msec\u0026gt; 递归请求被丢弃的等待时间，以毫秒计。 此举旨在防止大量回复堆积。 这些请求不会收到回复，工作项将继续递归。 如果启用了服务过期客户端超时，建议此值稍大一些。 建议值为1900毫秒。值为0则禁用此功能。默认值为1900毫秒。 wait-limit: \u0026lt;number\u0026gt; 每个IP地址可等待递归回复的数量。 这为每个IP地址设置了等待递归回复的速率限制，防止大量查询积压等待返回至单一目的地。 若值为0，则禁用等待限制。默认值为1000。 wait-limit-cookie: \u0026lt;number\u0026gt; 对于发送带有有效DNS Cookie查询的IP地址，可等待递归处理的回复数量。 由于Cookie验证了客户端地址，此限制可适当提高，默认值为10000。 wait-limit-netblock: \u0026lt;netblock\u0026gt; \u0026lt;number\u0026gt; 网段等待限制。若未指定，则采用默认的等待限制值。 系统会根据最具体的网段来确定限制，这对于为特定组、个人或服务器覆盖默认设置非常有用。 值为-1时，表示该网段无等待限制。 默认情况下，回环地址的等待限制网段为-1，即不受限，因为它与网络其他部分隔离，防止伪造数据包。 回环地址127.0.0.0/8和::1/128默认设置为-1。 wait-limit-cookie-netblock: \u0026lt;netblock\u0026gt; \u0026lt;number\u0026gt; 当查询带有DNS cookie时，针对网段的等待限制。 若未指定，则采用wait-limit-cookie的值。值为-1时，该网段无等待限制。 默认情况下，回环地址127.0.0.0/8和::1/128的等待限制设置为-1。 so-rcvbuf: \u0026lt;number\u0026gt; 如果非零，则设置SO_RCVBUF套接字选项，以在UDP端口53的入站查询上获取更多缓冲区空间。 这样，在繁忙服务器上的短暂流量高峰不会导致丢包（参见netstat -su中的计数器）。 默认值为0（使用系统值）。否则，指定请求的字节数，在繁忙服务器上可尝试“4m”。 操作系统会设定一个上限， 在Linux上，Unbound需要root权限才能突破此限制，或者管理员可以使用sysctl net.core.rmem_max进行调整。 在BSD系统中，需修改/etc/sysctl.conf中的kern.ipc.maxsockbuf。 在OpenBSD上，需更改头文件并重新编译内核。 在Solaris上，使用ndd -set /dev/udp udp_max_buf 8388608进行设置。 so-sndbuf: \u0026lt;number\u0026gt; 若非0，则设置SO_SNDBUF套接字选项，以在UDP端口53的对外查询中获取更多缓冲区空间。 这对于非常繁忙的服务器而言，能有效应对应答流量的突发高峰， 否则可能会记录“发送：资源暂时不可用”的错误，且通过netstat -su也能观察到缓冲区溢出的情况。 默认值为0（使用系统设定值）。指定请求的字节数，在极其繁忙的服务器上可尝试“4m”。 操作系统会设定一个上限， 在Linux上，Unbound需要root权限才能突破此限制，或者管理员可以使用sysctl net.core.wmem_max进行调整。 在BSD和Solaris系统中，更改方式与so-rcvbuf类似。 so-reuseport: \u0026lt;yes or no\u0026gt; 若选择`yes`，则为每个线程开启专用的监听套接字以接收查询， 并尝试在每个套接字上设置SO_REUSEPORT选项。 此举可能更均匀地分配查询至各线程。 默认设置为`yes`。 在Linux系统中，此功能支持内核版本\u0026gt;=3.9。 其他系统如FreeBSD、OSX也可能适用。您可在任何平台及内核上启用此功能， 系统将尝试打开端口并在编译时若该选项可用则传递之； 若成功则使用，失败则静默继续（除非详细级别为3），不采用该选项。 在极高负载情况下，关闭此选项可能更利于查询的均匀分配，此现象在Linux系统（4.4.x版本）中有报告。 ip-transparent: \u0026lt;yes or no\u0026gt; 如果是，则在Unbound监听入站流量的套接字上使用IP_TRANSPARENT套接字选项。 默认情况下为`no`。此选项允许您绑定到非本地接口， 例如，对于将来会存在但目前不存在的IP地址，配合主机故障转移配置使用。 这与interface-automatic非常相似，但后者服务于所有接口， 而通过此选项，您可以选择Unbound将在哪些（未来）接口上提供服务。 在某些系统上，此选项需要Unbound以root权限启动。 在FreeBSD系统上，该选项使用IP_BINDANY，在OpenBSD系统上则使用SO_BINDANY。 ip-freebind: \u0026lt;yes or no\u0026gt; 如果是，则在监听未绑定地址的套接字上使用IP_FREEBIND选项。 默认情况下为`no`。此选项允许您绑定到非本地或不存在的IP地址，例如当网络接口或IP地址不可用时。 该选项仅存在于Linux系统中，同时也可使用类似的ip-transparent选项。 ip-dscp: \u0026lt;number\u0026gt; 传出IP数据包头中区分服务字段（DS）内的区分服务代码点（DSCP）值。 该字段取代了过时的IPv4服务类型字段及IPv6流量类别字段。 rrset-cache-size: \u0026lt;number\u0026gt; RRset缓存的大小以字节数计，默认值为4兆字节。 纯数字表示字节，可附加\u0026#39;k\u0026#39;、\u0026#39;m\u0026#39;或\u0026#39;g\u0026#39;分别表示千字节、兆字节或吉字节（1兆字节等于1024*1024字节）。 rrset-cache-slabs: \u0026lt;number\u0026gt; RRset缓存中的slab数量。slab通过减少线程间的锁争用来提升性能。必须设置为2的幂次方。 cache-max-ttl: \u0026lt;seconds\u0026gt; RRsets和消息在缓存中的最大生存时间（TTL），默认值为86400秒（1天）。 当TTL到期时，缓存项即视为过期。 可通过设置更低的TTL值，强制解析器频繁查询数据，而不依赖（过大的）TTL值。 下游客户端同样会看到这一较低的TTL设置。 cache-min-ttl: \u0026lt;seconds\u0026gt; RRsets和消息在缓存中的最小生存时间。默认值为0。 若启用最小值，数据将被缓存超过域名所有者预期的时间，从而减少查询次数以查找数据。 设置为零确保缓存中的数据符合域名所有者的意图， 而较高的值，尤其是超过一小时左右，可能导致缓存数据与实际数据不再匹配，从而引发问题。 cache-max-negative-ttl: \u0026lt;seconds\u0026gt; 负响应的生存时间上限，这些响应在授权部分包含一个时间受限的SOA记录。 默认值为3600秒。此设置适用于nxdomain（域名不存在）和nodata（无数据）类型的应答。 cache-min-negative-ttl: \u0026lt;seconds\u0026gt; 负面响应的最小生存时间，这些响应在权威部分包含一个有时间限制的SOA记录。 默认值为0（禁用）。如果此功能被禁用且配置了cache-min-ttl，则后者将生效。 在这种情况下，您可以将其设置为1以遵循上游的TTL。 此设置适用于nxdomain和nodata类型的应答。 infra-host-ttl: \u0026lt;seconds\u0026gt; 主机缓存中条目的生存时间。该缓存包含往返时间、故障状态及EDNS支持信息。默认值为900。 infra-cache-slabs: \u0026lt;number\u0026gt; 基础设施缓存中的slab数量。slab通过减少线程间的锁争用来提升性能，必须设置为2的幂次方。 infra-cache-numhosts: \u0026lt;number\u0026gt; 缓存信息的主机数量，默认值为10000。 infra-cache-min-rtt: \u0026lt;msec\u0026gt; 基础设施缓存中动态重传超时计算的下限值，默认设置为50毫秒。 若使用需更长时间进行递归名称解析的转发器，请适当增加此值。 infra-cache-max-rtt: \u0026lt;msec\u0026gt; 基础设施缓存中动态重传超时计算的上限值，默认设置为2分钟。 infra-keep-probing: \u0026lt;yes or no\u0026gt; 若启用此功能，服务器将持续对已宕机的主机进行探测，采用一次一探的模式。 默认设置为`no`。 对于已宕机的主机，例如在单次探测期间未响应者，将被标记为宕机状态， 并可能需要等待 infra-host-ttl 时间后才会再次被探测。 define-tag: \u0026lt;\u0026#34;list of tags\u0026#34;\u0026gt; 定义可与本地区域（local-zone）和访问控制（access-control）一同使用的标签。 将列表用引号（\u0026#34;\u0026#34;）括起，并在标签之间留出空格。 do-ip4: \u0026lt;yes or no\u0026gt; 启用或禁用是否响应或发起ip4查询。默认设置为`yes`。 do-ip6: \u0026lt;yes or no\u0026gt; 启用或禁用是否响应或发起IPv6查询。默认设置为`yes`。 若禁用，则不会在IPv6上响应查询，也不会通过IPv6向互联网域名服务器发送查询。 此选项可用于关闭IPv6传输以发送DNS流量，但不会影响DNS流量的内容，其中可能包含IPv4和IPv6地址。 prefer-ip4: \u0026lt;yes or no\u0026gt; 若启用此选项，将优先使用IPv4传输向互联网域名服务器发送DNS查询。 默认设置为`no`。 当服务器所在的IPv6网段（整个/64）并非由单一运营商所有， 且该网段/64的信誉存在问题时，此选项尤为有用， 此时使用IPv4可利用上游服务器已有的IPv4过滤机制。 prefer-ip6: \u0026lt;yes or no\u0026gt; 若启用，将优先使用IPv6传输向互联网域名服务器发送DNS查询。默认设置为否。 do-udp: \u0026lt;yes or no\u0026gt; 启用或禁用是否响应或发起UDP查询。默认设置为`yes`。 do-tcp: \u0026lt;yes or no\u0026gt; 启用或禁用TCP查询的应答与发起，默认设置为`yes`。 tcp-mss: \u0026lt;number\u0026gt; 服务器响应查询时，TCP套接字的最大段大小（MSS）。 设置低于以太网常见MSS的值（例如1220）可解决路径MTU问题。 需注意，并非所有平台都支持通过套接字选项设置MSS（TCP_MAXSEG）。 默认情况下，MSS由接口MTU及服务器与客户端之间的协商决定，采用系统默认值。 outgoing-tcp-mss: \u0026lt;number\u0026gt; TCP套接字用于发出查询（从Unbound到其他服务器）的最大段大小（MSS）。 设置低于以太网常见MSS的值（例如1220）可解决路径MTU问题。 需要注意的是，并非所有平台都支持通过套接字选项设置MSS（TCP_MAXSEG）。 默认情况下，MSS由接口MTU及Unbound与其他服务器之间的协商决定，采用系统默认值。 tcp-idle-timeout: \u0026lt;msec\u0026gt; Unbound在TCP连接上等待查询的时长，若超时则关闭连接。 此选项默认值为30000毫秒。 当空闲的入站TCP缓冲区数量低于配置总数的50%时，该选项值会逐步降低： 首先降至配置值的1%，若空闲缓冲区进一步低于总数的35%，则降至配置值的0.2%， 最终若空闲缓冲区低于总数的20%，则降至0。 无论采用何种选项值，最小超时时间均保持为200毫秒。 若启用了edns-tcp-keepalive，此设置将被edns-tcp-keepalive-timeout覆盖。 tcp-reuse-timeout: \u0026lt;msec\u0026gt; Unbound 期间将保持与权威服务器的 TCP 持久连接开启。此选项默认值为 60000 毫秒。 max-reuse-tcp-queries: \u0026lt;number\u0026gt; 在持久TCP连接上可发送的最大查询数量，此选项默认设置为200次查询。 tcp-auth-query-timeout: \u0026lt;number\u0026gt; TCP查询认证服务器的超时时间，以毫秒为单位。此选项默认值为3000毫秒。 edns-tcp-keepalive: \u0026lt;yes or no\u0026gt; 启用或禁用EDNS TCP保持连接功能。默认设置为`no`。 edns-tcp-keepalive-timeout: \u0026lt;msec\u0026gt; 当启用edns-tcp-keepalive时，此设置将覆盖tcp-idle-timeout。 若客户端支持EDNS TCP保持连接选项，Unbound会向客户端发送超时值， 以促使客户端在服务器超时前关闭连接。 此选项默认值为120000毫秒。 sock-queue-timeout: \u0026lt;sec\u0026gt; 在套接字缓冲区中等待过久的UDP查询可被丢弃。 默认值为0，即禁用此功能。 时间以秒为单位设置，3秒可能是一个合适的值，用于忽略那些客户端可能已不再需要回复的旧查询。 这种情况可能发生在主机暂时无法处理查询时，例如Unbound未运行，之后又重新启用。 该功能利用了时间戳套接字选项。 tcp-upstream: \u0026lt;yes or no\u0026gt; 启用或禁用上游查询是否仅使用TCP进行传输。 默认设置为`no`。在隧道场景中非常有用。 如果设置为否，您可以通过分别使用forward-tcp-upstream或stub-tcp-upstream， 仅为选定的转发区域或存根区域指定TCP传输。 udp-upstream-without-downstream: \u0026lt;yes or no\u0026gt; 即使do-udp设置为否，也启用UDP上行。 默认情况下为否，此设置不会改变任何现有配置。 对于TLS服务提供商而言，若希望禁止UDP下行但需通过UDP获取上行数据，此功能尤为实用。 tls-upstream: \u0026lt;yes or no\u0026gt; 启用或禁用上游查询是否仅使用TLS进行传输。 默认值为`no`。在隧道场景中非常有用。 TLS包含以TCP线格式传输的纯DNS数据。 另一台服务器必须支持此功能（参见tls-service-key）。 如果启用此选项，还需配置tls-cert-bundle或使用tls-win-cert、tls-system-cert加载CA证书， 否则连接无法进行身份验证。 此选项为所有上游查询启用TLS，但如果不设置此选项， 可以通过forward-tls-upstream为特定转发区域单独配置TLS， 同样适用于stub-tls-upstream。如果启用了tls-upstream选项， 则对所有转发和存根区域生效，此时forward-tls-upstream和stub-tls-upstream选项将被忽略， 视为已设置为`yes`。 ssl-upstream: \u0026lt;yes or no\u0026gt; tls-upstream 的替代语法。若配置文件中两者均存在，则以最后一项为准。 tls-service-key: \u0026lt;file\u0026gt; 若启用此功能，服务器将在通过tls-port或https-port隐式或显式标记的TCP端口上 提供DNS-over-TLS或DNS-over-HTTPS服务。 配置文件必须包含TLS会话的私钥，公钥证书则位于tls-service-pem文件中，且若指定了tls-service-key， 也必须同时指定。 默认值为空，即关闭状态。 启用或禁用此服务需重启服务器（仅重载配置不够），因为密钥读取需在持有root权限及chroot（如有）之前进行。 通过tls-port:和https-port:隐式或显式启用的端口不提供常规的DNS TCP服务。 Unbound需编译时包含libnghttp2以支持DNS-over-HTTPS。 ssl-service-key: \u0026lt;file\u0026gt; tls-service-key 的替代语法。 tls-service-pem: \u0026lt;file\u0026gt; 用于TLS服务的公钥证书pem文件。默认值为\u0026#34;\u0026#34;，表示关闭。 ssl-service-pem: \u0026lt;file\u0026gt; tls-service-pem 的替代语法。 tls-port: \u0026lt;number\u0026gt; 提供TCP TLS服务的端口号，默认为853，只有配置了该端口号作为@number的接口才能获得TLS服务。 ssl-port: \u0026lt;number\u0026gt; tls端口的替代语法。 tls-cert-bundle: \u0026lt;file\u0026gt; 若为空或\u0026#34;\u0026#34;，则不使用任何文件。 请将其设置为证书包文件，例如\u0026#34;/etc/pki/tls/certs/ca-bundle.crt\u0026#34;。 这些证书用于验证与外部对等方建立的连接，如认证区域URL及DNS over TLS连接。 该文件在启动时、权限降级和chroot之前被读取。 ssl-cert-bundle: \u0026lt;file\u0026gt; tls-cert-bundle 的替代语法。 tls-win-cert: \u0026lt;yes or no\u0026gt; 将系统证书添加到认证所需的证书包中。 若无证书包，则仅使用这些证书。 默认情况下不启用此功能。 在Windows系统上，此选项会使用证书存储中的证书。 在其他系统上，请使用`tls-cert-bundle`选项来启用系统证书。 tls-system-cert: \u0026lt;yes or no\u0026gt; 此设置与tls-win-cert设置相同，只是名称不同，因为它并非专为Windows设计。 tls-additional-port: \u0026lt;portnr\u0026gt; 将端口号列为tls-additional-port，并在定义接口时（例如使用@port后缀）， 作为此端口号，它们将提供DNS over TLS服务。 可列出多个，每个端口号单独一行声明。 tls-session-ticket-keys: \u0026lt;file\u0026gt; 若非空，则列出包含80字节随机内容的文件， 这些文件用于为使用Unbound服务器的客户端执行TLS会话恢复。 这些文件内含有TLS会话票据的密钥。 首个密钥用于加密和解密TLS会话票据，其余密钥仅用于解密。 通过生成新的首个文件，并在其后暂时保留旧文件以允许解密，可以实现密钥的轮换。 待客户端不再使用旧密钥后，即可移除旧密钥。 创建此类文件的一种方法是使用命令`dd if=/dev/random bs=1 count=80 of=ticket.dat`。 若需创建第二个密钥，其前16字节应与旧密钥不同，这部分用于标识密钥。 随后是32字节的随机数据作为AES密钥，再接着32字节的随机数据作为HMAC密钥。 tls-ciphers: \u0026lt;string with cipher list\u0026gt; 设置服务TLS时允许的加密套件列表。使用\u0026#34;\u0026#34;表示默认值，且此为默认设置。 tls-ciphersuites: \u0026lt;string with ciphersuites list\u0026gt; 设置服务TLS时允许的加密套件列表，适用于较新的TLS 1.3连接。 使用\u0026#34;\u0026#34;表示采用默认值，这也是默认设置。 pad-responses: \u0026lt;yes or no\u0026gt; 若启用此功能，包含EDNS填充选项的TLS服务查询将导致响应被填充至最接近pad-responses-block-size指定大小的倍数。默认设置为`yes`。 pad-responses-block-size: \u0026lt;number\u0026gt; 用于填充通过TLS服务的响应的块大小。仅对填充查询的响应进行填充。默认值为468。 pad-queries: \u0026lt;yes or no\u0026gt; 若启用此功能，所有通过TLS上游发送的查询将被填充至最接近pad-queries-block-size指定大小的倍数。 默认设置为`yes`。 pad-queries-block-size: \u0026lt;number\u0026gt; 用于填充通过TLS上游发送的查询的块大小，默认值为128。 tls-use-sni: \u0026lt;yes or no\u0026gt; 启用或禁用在TLS连接上发送SNI扩展。默认值为`yes`。更改此值需重新加载配置。 https-port: \u0026lt;number\u0026gt; 提供DNS-over-HTTPS服务的端口号，默认443，只有配置了该端口号作为@number的接口才能获得HTTPS服务。 http-endpoint: \u0026lt;endpoint string\u0026gt; 提供DNS-over-HTTPS服务的HTTP端点，默认为\u0026#34;/dns-query\u0026#34;。 http-max-streams: \u0026lt;number of streams\u0026gt; 用于DNS-over-HTTPS连接的HTTP/2 SETTINGS帧中SETTINGS_MAX_CONCURRENT_STREAMS参数的数值，默认设置为100。 http-query-buffer-size: \u0026lt;size in bytes\u0026gt; 所有HTTP/2查询缓冲区合并使用的最大字节数。 这些缓冲区包含等待请求流完成的（部分）DNS查询。 对于超出此限制的流，将发送RST_STREAM帧。 默认值为4兆字节。纯数字表示字节，可附加\u0026#39;k\u0026#39;、\u0026#39;m\u0026#39;或\u0026#39;g\u0026#39;分别表示千字节、兆字节或吉字节（1兆字节等于1024*1024字节）。 http-response-buffer-size: \u0026lt;size in bytes\u0026gt; 所有HTTP/2响应缓冲区合并使用的最大字节数。 这些缓冲区包含等待写回客户端的DNS响应。 对于超出此限制的流，将发送RST_STREAM帧。默认值为4兆字节。 纯数字表示字节，可附加\u0026#39;k\u0026#39;、\u0026#39;m\u0026#39;或\u0026#39;g\u0026#39;分别表示千字节、兆字节或吉字节（1兆字节等于1024*1024字节）。 http-nodelay: \u0026lt;yes or no\u0026gt; 在用于提供DNS-over-HTTPS服务的套接字上设置TCP_NODELAY选项。若该选项不可用，则忽略。默认值为`yes`。 http-notls-downstream: \u0026lt;yes or no\u0026gt; 禁用下游DNS-over-HTTP连接的TLS使用。适用于本地后端服务器。默认设置为`no`。 proxy-protocol-port: \u0026lt;portnr\u0026gt; 将端口号列为代理协议端口（proxy-protocol-port）， 并在定义接口时，如使用@port后缀，指定为此端口号， 这些接口将支持并预期接收PROXYv2协议。 在此情况下，代理地址仅用于网络通信及初始的访问控制列表（ACL，检查代理本身是否被配置拒绝）。 随后，被代理的地址（如有）将作为真实客户端地址， 并在日志记录、ACL、DNSTAP、RPZ及IP限速等适用场景中使用。 PROXYv2协议支持UDP和TCP/TLS监听接口，但在DoH、DoQ或DNSCrypt监听接口上不支持PROXYv2。 可列出多个端口，每个端口单独一行声明。 quic-port: \u0026lt;number\u0026gt; The port number on which to provide DNS-over-QUIC service, de- fault 853, only interfaces configured with that port number as @number get the QUIC service. The interface uses QUIC for the UDP traffic on that port number. quic-size: \u0026lt;size in bytes\u0026gt; Maximum number of bytes for all QUIC buffers and data combined. Default is 8 megabytes. A plain number is in bytes, append \u0026#39;k\u0026#39;, \u0026#39;m\u0026#39; or \u0026#39;g\u0026#39; for kilobytes, megabytes or gigabytes (1024*1024 bytes in a megabyte). New connections receive connection refused when the limit is exceeded. New streams are reset when the limit is exceeded. use-systemd: \u0026lt;yes or no\u0026gt; Enable or disable systemd socket activation. Default is no. do-daemonize: \u0026lt;yes or no\u0026gt; Enable or disable whether the Unbound server forks into the background as a daemon. Set the value to no when Unbound runs as systemd service. Default is yes. tcp-connection-limit: \u0026lt;IP netblock\u0026gt; \u0026lt;limit\u0026gt; Allow up to limit simultaneous TCP connections from the given netblock. When at the limit, further connections are accepted but closed immediately. This option is experimental at this time. access-control: \u0026lt;IP netblock\u0026gt; \u0026lt;action\u0026gt; Specify treatment of incoming queries from their originating IP address. Queries can be allowed to have access to this server that gives DNS answers, or refused, with other actions possible. The IP address range can be specified as a netblock, it is pos- sible to give the statement several times in order to specify the treatment of different netblocks. The netblock is given as an IP4 or IP6 address with /size ap- pended for a classless network block. The action can be deny, refuse, allow, allow_setrd, allow_snoop, allow_cookie, deny_non_local or refuse_non_local. The most specific netblock match is used, if none match refuse is used. The order of the access-control statements therefore does not matter. The deny action stops queries from hosts from that netblock. The refuse action stops queries too, but sends a DNS rcode RE- FUSED error message back. The allow action gives access to clients from that netblock. It gives only access for recursion clients (which is what almost all clients need). Nonrecursive queries are refused. The allow action does allow nonrecursive queries to access the local-data that is configured. The reason is that this does not involve the Unbound server recursive lookup algorithm, and sta- tic data is served in the reply. This supports normal opera- tions where nonrecursive queries are made for the authoritative data. For nonrecursive queries any replies from the dynamic cache are refused. The allow_setrd action ignores the recursion desired (RD) bit and treats all requests as if the recursion desired bit is set. Note that this behavior violates RFC 1034 which states that a name server should never perform recursive service unless asked via the RD bit since this interferes with trouble shooting of name servers and their databases. This prohibited behavior may be useful if another DNS server must forward requests for spe- cific zones to a resolver DNS server, but only supports stub do- mains and sends queries to the resolver DNS server with the RD bit cleared. The allow_snoop action gives nonrecursive access too. This give both recursive and non recursive access. The name allow_snoop refers to cache snooping, a technique to use nonrecursive queries to examine the cache contents (for malicious acts). However, nonrecursive queries can also be a valuable debugging tool (when you want to examine the cache contents). In that case use allow_snoop for your administration host. The allow_cookie action allows access only to UDP queries that contain a valid DNS Cookie as specified in RFC 7873 and RFC 9018, when the answer-cookie option is enabled. UDP queries containing only a DNS Client Cookie and no Server Cookie, or an invalid DNS Cookie, will receive a BADCOOKIE response including a newly generated DNS Cookie, allowing clients to retry with that DNS Cookie. The allow_cookie action will also accept re- quests over stateful transports, regardless of the presence of an DNS Cookie and regardless of the answer-cookie setting. UDP queries without a DNS Cookie receive REFUSED responses with the TC flag set, that may trigger fall back to TCP for those clients. By default only localhost (the 127.0.0.0/8 IP netblock, not the loopback interface) is implicitly allowed, the rest is refused. The default is refused, because that is protocol-friendly. The DNS protocol is not designed to handle dropped packets due to policy, and dropping may result in (possibly excessive) retried queries. The deny_non_local and refuse_non_local settings are for hosts that are only allowed to query for the authoritative local-data, they are not allowed full recursion but only the static data. With deny_non_local, messages that are disallowed are dropped, with refuse_non_local they receive error code REFUSED. access-control-tag: \u0026lt;IP netblock\u0026gt; \u0026lt;\u0026#34;list of tags\u0026#34;\u0026gt; Assign tags to access-control elements. Clients using this ac- cess control element use localzones that are tagged with one of these tags. Tags must be defined in define-tags. Enclose list of tags in quotes (\u0026#34;\u0026#34;) and put spaces between tags. If ac- cess-control-tag is configured for a netblock that does not have an access-control, an access-control element with action allow is configured for this netblock. access-control-tag-action: \u0026lt;IP netblock\u0026gt; \u0026lt;tag\u0026gt; \u0026lt;action\u0026gt; Set action for particular tag for given access control element. If you have multiple tag values, the tag used to lookup the ac- tion is the first tag match between access-control-tag and lo- cal-zone-tag where \u0026#34;first\u0026#34; comes from the order of the define- tag values. access-control-tag-data: \u0026lt;IP netblock\u0026gt; \u0026lt;tag\u0026gt; \u0026lt;\u0026#34;resource record string\u0026#34;\u0026gt; Set redirect data for particular tag for given access control element. access-control-view: \u0026lt;IP netblock\u0026gt; \u0026lt;view name\u0026gt; Set view for given access control element. interface-action: \u0026lt;ip address or interface name [@port]\u0026gt; \u0026lt;action\u0026gt; Similar to access-control: but for interfaces. The action is the same as the ones defined under access-con- trol:. Interfaces are refused by default. By default only lo- calhost (the 127.0.0.0/8 IP netblock, not the loopback inter- face) is implicitly allowed through the default access-control: behavior. This also means that any attempt to use the inter- face-*: options for the loopback interface will not work as they will be overridden by the implicit default \u0026#34;access-control: 127.0.0.0/8 allow\u0026#34; option. Note that the interface needs to be already specified with in- terface: and that any access-control*: setting overrides all in- terface-*: settings for targeted clients. interface-tag: \u0026lt;ip address or interface name [@port]\u0026gt; \u0026lt;\u0026#34;list of tags\u0026#34;\u0026gt; Similar to access-control-tag: but for interfaces. Note that the interface needs to be already specified with in- terface: and that any access-control*: setting overrides all in- terface-*: settings for targeted clients. interface-tag-action: \u0026lt;ip address or interface name [@port]\u0026gt; \u0026lt;tag\u0026gt; \u0026lt;ac- tion\u0026gt; Similar to access-control-tag-action: but for interfaces. Note that the interface needs to be already specified with in- terface: and that any access-control*: setting overrides all in- terface-*: settings for targeted clients. interface-tag-data: \u0026lt;ip address or interface name [@port]\u0026gt; \u0026lt;tag\u0026gt; \u0026lt;\u0026#34;re- source record string\u0026#34;\u0026gt; Similar to access-control-tag-data: but for interfaces. Note that the interface needs to be already specified with in- terface: and that any access-control*: setting overrides all in- terface-*: settings for targeted clients. interface-view: \u0026lt;ip address or interface name [@port]\u0026gt; \u0026lt;view name\u0026gt; Similar to access-control-view: but for interfaces. Note that the interface needs to be already specified with in- terface: and that any access-control*: setting overrides all in- terface-*: settings for targeted clients. chroot: \u0026lt;directory\u0026gt; If chroot is enabled, you should pass the configfile (from the commandline) as a full path from the original root. After the chroot has been performed the now defunct portion of the config file path is removed to be able to reread the config after a re- load. All other file paths (working dir, logfile, roothints, and key files) can be specified in several ways: as an absolute path relative to the new root, as a relative path to the working di- rectory, or as an absolute path relative to the original root. In the last case the path is adjusted to remove the unused por- tion. The pidfile can be either a relative path to the working direc- tory, or an absolute path relative to the original root. It is written just prior to chroot and dropping permissions. This al- lows the pidfile to be /var/run/unbound.pid and the chroot to be /var/unbound, for example. Note that Unbound is not able to re- move the pidfile after termination when it is located outside of the chroot directory. Additionally, Unbound may need to access /dev/urandom (for en- tropy) from inside the chroot. If given a chroot is done to the given directory. The chroot is by default set to \u0026#34;/usr/local/etc/unbound\u0026#34;. If you give \u0026#34;\u0026#34; no chroot is performed. username: \u0026lt;name\u0026gt; If given, after binding the port the user privileges are dropped. Default is \u0026#34;unbound\u0026#34;. If you give username: \u0026#34;\u0026#34; no user change is performed. If this user is not capable of binding the port, reloads (by signal HUP) will still retain the opened ports. If you change the port number in the config file, and that new port number re- quires privileges, then a reload will fail; a restart is needed. directory: \u0026lt;directory\u0026gt; Sets the working directory for the program. Default is \u0026#34;/usr/lo- cal/etc/unbound\u0026#34;. On Windows the string \u0026#34;%EXECUTABLE%\u0026#34; tries to change to the directory that unbound.exe resides in. If you give a server: directory: dir before include: file statements then those includes can be relative to the working directory. logfile: \u0026lt;filename\u0026gt; If \u0026#34;\u0026#34; is given, logging goes to stderr, or nowhere once daemo- nized. The logfile is appended to, in the following format: [seconds since 1970] unbound[pid:tid]: type: message. If this option is given, the use-syslog is option is set to \u0026#34;no\u0026#34;. The logfile is reopened (for append) when the config file is reread, on SIGHUP. use-syslog: \u0026lt;yes or no\u0026gt; Sets Unbound to send log messages to the syslogd, using sys- log(3). The log facility LOG_DAEMON is used, with identity \u0026#34;un- bound\u0026#34;. The logfile setting is overridden when use-syslog is turned on. The default is to log to syslog. log-identity: \u0026lt;string\u0026gt; If \u0026#34;\u0026#34; is given (default), then the name of the executable, usu- ally \u0026#34;unbound\u0026#34; is used to report to the log. Enter a string to override it with that, which is useful on systems that run more than one instance of Unbound, with different configurations, so that the logs can be easily distinguished against. log-time-ascii: \u0026lt;yes or no\u0026gt; Sets logfile lines to use a timestamp in UTC ascii. Default is no, which prints the seconds since 1970 in brackets. No effect if using syslog, in that case syslog formats the timestamp printed into the log files. log-time-iso: \u0026lt;yes or no\u0026gt; Log time in ISO8601 format, if log-time-ascii: yes is also set. Default is no. log-queries: \u0026lt;yes or no\u0026gt; Prints one line per query to the log, with the log timestamp and IP address, name, type and class. Default is no. Note that it takes time to print these lines which makes the server (signifi- cantly) slower. Odd (nonprintable) characters in names are printed as \u0026#39;?\u0026#39;. log-replies: \u0026lt;yes or no\u0026gt; Prints one line per reply to the log, with the log timestamp and IP address, name, type, class, return code, time to resolve, from cache and response size. Default is no. Note that it takes time to print these lines which makes the server (signifi- cantly) slower. Odd (nonprintable) characters in names are printed as \u0026#39;?\u0026#39;. log-tag-queryreply: \u0026lt;yes or no\u0026gt; Prints the word \u0026#39;query\u0026#39; and \u0026#39;reply\u0026#39; with log-queries and log-replies. This makes filtering logs easier. The default is off (for backwards compatibility). log-destaddr: \u0026lt;yes or no\u0026gt; Prints the destination address, port and type in the log-replies output. This disambiguates what type of traffic, eg. udp or tcp, and to what local port the traffic was sent to. log-local-actions: \u0026lt;yes or no\u0026gt; Print log lines to inform about local zone actions. These lines are like the local-zone type inform prints out, but they are also printed for the other types of local zones. log-servfail: \u0026lt;yes or no\u0026gt; Print log lines that say why queries return SERVFAIL to clients. This is separate from the verbosity debug logs, much smaller, and printed at the error level, not the info level of debug info from verbosity. pidfile: \u0026lt;filename\u0026gt; The process id is written to the file. Default is \u0026#34;/usr/lo- cal/etc/unbound/unbound.pid\u0026#34;. So, kill -HUP `cat /usr/local/etc/unbound/unbound.pid` triggers a reload, kill -TERM `cat /usr/local/etc/unbound/unbound.pid` gracefully terminates. root-hints: \u0026lt;filename\u0026gt; Read the root hints from this file. Default is nothing, using builtin hints for the IN class. The file has the format of zone files, with root nameserver names and addresses only. The de- fault may become outdated, when servers change, therefore it is good practice to use a root-hints file. hide-identity: \u0026lt;yes or no\u0026gt; If enabled id.server and hostname.bind queries are refused. identity: \u0026lt;string\u0026gt; Set the identity to report. If set to \u0026#34;\u0026#34;, the default, then the hostname of the server is returned. hide-version: \u0026lt;yes or no\u0026gt; If enabled version.server and version.bind queries are refused. version: \u0026lt;string\u0026gt; Set the version to report. If set to \u0026#34;\u0026#34;, the default, then the package version is returned. hide-http-user-agent: \u0026lt;yes or no\u0026gt; If enabled the HTTP header User-Agent is not set. Use with cau- tion as some webserver configurations may reject HTTP requests lacking this header. If needed, it is better to explicitly set the http-user-agent below. http-user-agent: \u0026lt;string\u0026gt; Set the HTTP User-Agent header for outgoing HTTP requests. If set to \u0026#34;\u0026#34;, the default, then the package name and version are used. nsid: \u0026lt;string\u0026gt; Add the specified nsid to the EDNS section of the answer when queried with an NSID EDNS enabled packet. As a sequence of hex characters or with ascii_ prefix and then an ascii string. hide-trustanchor: \u0026lt;yes or no\u0026gt; If enabled trustanchor.unbound queries are refused. target-fetch-policy: \u0026lt;\u0026#34;list of numbers\u0026#34;\u0026gt; Set the target fetch policy used by Unbound to determine if it should fetch nameserver target addresses opportunistically. The policy is described per dependency depth. The number of values determines the maximum dependency depth that Unbound will pursue in answering a query. A value of -1 means to fetch all targets opportunistically for that dependency depth. A value of 0 means to fetch on demand only. A positive value fetches that many targets opportunistically. Enclose the list between quotes (\u0026#34;\u0026#34;) and put spaces between num- bers. The default is \u0026#34;3 2 1 0 0\u0026#34;. Setting all zeroes, \u0026#34;0 0 0 0 0\u0026#34; gives behaviour closer to that of BIND 9, while setting \u0026#34;-1 -1 -1 -1 -1\u0026#34; gives behaviour rumoured to be closer to that of BIND 8. harden-short-bufsize: \u0026lt;yes or no\u0026gt; Very small EDNS buffer sizes from queries are ignored. Default is yes, as described in the standard. harden-large-queries: \u0026lt;yes or no\u0026gt; Very large queries are ignored. Default is no, since it is legal protocol wise to send these, and could be necessary for opera- tion if TSIG or EDNS payload is very large. harden-glue: \u0026lt;yes or no\u0026gt; Will trust glue only if it is within the servers authority. De- fault is yes. harden-unverified-glue: \u0026lt;yes or no\u0026gt; Will trust only in-zone glue. Will try to resolve all out of zone (\u0026lt;unverfied\u0026gt;) glue. Will fallback to the original glue if unable to resolve. Default is no. harden-dnssec-stripped: \u0026lt;yes or no\u0026gt; Require DNSSEC data for trust-anchored zones, if such data is absent, the zone becomes bogus. If turned off, and no DNSSEC data is received (or the DNSKEY data fails to validate), then the zone is made insecure, this behaves like there is no trust anchor. You could turn this off if you are sometimes behind an intrusive firewall (of some sort) that removes DNSSEC data from packets, or a zone changes from signed to unsigned to badly signed often. If turned off you run the risk of a downgrade at- tack that disables security for a zone. Default is yes. harden-below-nxdomain: \u0026lt;yes or no\u0026gt; From RFC 8020 (with title \u0026#34;NXDOMAIN: There Really Is Nothing Un- derneath\u0026#34;), returns nxdomain to queries for a name below another name that is already known to be nxdomain. DNSSEC mandates no- error for empty nonterminals, hence this is possible. Very old software might return nxdomain for empty nonterminals (that usu- ally happen for reverse IP address lookups), and thus may be in- compatible with this. To try to avoid this only DNSSEC-secure nxdomains are used, because the old software does not have DNSSEC. Default is yes. The nxdomain must be secure, this means nsec3 with optout is insufficient. harden-referral-path: \u0026lt;yes or no\u0026gt; Harden the referral path by performing additional queries for infrastructure data. Validates the replies if trust anchors are configured and the zones are signed. This enforces DNSSEC vali- dation on nameserver NS sets and the nameserver addresses that are encountered on the referral path to the answer. Default no, because it burdens the authority servers, and it is not RFC standard, and could lead to performance problems because of the extra query load that is generated. Experimental option. If you enable it consider adding more numbers after the tar- get-fetch-policy to increase the max depth that is checked to. harden-algo-downgrade: \u0026lt;yes or no\u0026gt; Harden against algorithm downgrade when multiple algorithms are advertised in the DS record. This works by first choosing only the strongest DS digest type as per RFC 4509 (Unbound treats the highest algorithm as the strongest) and then expecting signa- tures from all the advertised signing algorithms from the chosen DS(es) to be present. If no, allows any one supported algorithm to validate the zone, even if other advertised algorithms are broken. Default is no. RFC 6840 mandates that zone signers must produce zones signed with all advertised algorithms, but sometimes they do not. RFC 6840 also clarifies that this re- quirement is not for validators and validators should accept any single valid path. It should thus be explicitly noted that this option violates RFC 6840 for DNSSEC validation and should only be used to perform a signature completeness test to support troubleshooting. Using this option may break DNSSEC resolution with non-RFC6840-conforming signers and/or in multi-signer con- figurations that don\u0026#39;t send all the advertised signatures. harden-unknown-additional: \u0026lt;yes or no\u0026gt; Harden against unknown records in the authority section and ad- ditional section. Default is no. If no, such records are copied from the upstream and presented to the client together with the answer. If yes, it could hamper future protocol developments that want to add records. use-caps-for-id: \u0026lt;yes or no\u0026gt; Use 0x20-encoded random bits in the query to foil spoof at- tempts. This perturbs the lowercase and uppercase of query names sent to authority servers and checks if the reply still has the correct casing. Disabled by default. This feature is an experimental implementation of draft dns-0x20. caps-exempt: \u0026lt;domain\u0026gt; Exempt the domain so that it does not receive caps-for-id per- turbed queries. For domains that do not support 0x20 and also fail with fallback because they keep sending different answers, like some load balancers. Can be given multiple times, for dif- ferent domains. caps-whitelist: \u0026lt;domain\u0026gt; Alternate syntax for caps-exempt. qname-minimisation: \u0026lt;yes or no\u0026gt; Send minimum amount of information to upstream servers to en- hance privacy. Only send minimum required labels of the QNAME and set QTYPE to A when possible. Best effort approach; full QNAME and original QTYPE will be sent when upstream replies with a RCODE other than NOERROR, except when receiving NXDOMAIN from a DNSSEC signed zone. Default is yes. qname-minimisation-strict: \u0026lt;yes or no\u0026gt; QNAME minimisation in strict mode. Do not fall-back to sending full QNAME to potentially broken nameservers. A lot of domains will not be resolvable when this option in enabled. Only use if you know what you are doing. This option only has effect when qname-minimisation is enabled. Default is no. aggressive-nsec: \u0026lt;yes or no\u0026gt; Aggressive NSEC uses the DNSSEC NSEC chain to synthesize NXDO- MAIN and other denials, using information from previous NXDO- MAINs answers. Default is yes. It helps to reduce the query rate towards targets that get a very high nonexistent name lookup rate. private-address: \u0026lt;IP address or subnet\u0026gt; Give IPv4 of IPv6 addresses or classless subnets. These are ad- dresses on your private network, and are not allowed to be re- turned for public internet names. Any occurrence of such ad- dresses are removed from DNS answers. Additionally, the DNSSEC validator may mark the answers bogus. This protects against so-called DNS Rebinding, where a user browser is turned into a network proxy, allowing remote access through the browser to other parts of your private network. Some names can be allowed to contain your private addresses, by default all the local-data that you configured is allowed to, and you can specify addi- tional names using private-domain. No private addresses are en- abled by default. We consider to enable this for the RFC1918 private IP address space by default in later releases. That would enable private addresses for 10.0.0.0/8 172.16.0.0/12 192.168.0.0/16 169.254.0.0/16 fd00::/8 and fe80::/10, since the RFC standards say these addresses should not be visible on the public internet. Turning on 127.0.0.0/8 would hinder many spam- blocklists as they use that. Adding ::ffff:0:0/96 stops IPv4-mapped IPv6 addresses from bypassing the filter. private-domain: \u0026lt;domain name\u0026gt; Allow this domain, and all its subdomains to contain private ad- dresses. Give multiple times to allow multiple domain names to contain private addresses. Default is none. unwanted-reply-threshold: \u0026lt;number\u0026gt; If set, a total number of unwanted replies is kept track of in every thread. When it reaches the threshold, a defensive action is taken and a warning is printed to the log. The defensive ac- tion is to clear the rrset and message caches, hopefully flush- ing away any poison. A value of 10 million is suggested. De- fault is 0 (turned off). do-not-query-address: \u0026lt;IP address\u0026gt; Do not query the given IP address. Can be IP4 or IP6. Append /num to indicate a classless delegation netblock, for example like 10.2.3.4/24 or 2001::11/64. do-not-query-localhost: \u0026lt;yes or no\u0026gt; If yes, localhost is added to the do-not-query-address entries, both IP6 ::1 and IP4 127.0.0.1/8. If no, then localhost can be used to send queries to. Default is yes. prefetch: \u0026lt;yes or no\u0026gt; If yes, cache hits on message cache elements that are on their last 10 percent of their TTL value trigger a prefetch to keep the cache up to date. Default is no. Turning it on gives about 10 percent more traffic and load on the machine, but popular items do not expire from the cache. prefetch-key: \u0026lt;yes or no\u0026gt; If yes, fetch the DNSKEYs earlier in the validation process, when a DS record is encountered. This lowers the latency of re- quests. It does use a little more CPU. Also if the cache is set to 0, it is no use. Default is no. deny-any: \u0026lt;yes or no\u0026gt; If yes, deny queries of type ANY with an empty response. De- fault is no. If disabled, Unbound responds with a short list of resource records if some can be found in the cache and makes the upstream type ANY query if there are none. rrset-roundrobin: \u0026lt;yes or no\u0026gt; If yes, Unbound rotates RRSet order in response (the random num- ber is taken from the query ID, for speed and thread safety). Default is yes. minimal-responses: \u0026lt;yes or no\u0026gt; If yes, Unbound does not insert authority/additional sections into response messages when those sections are not required. This reduces response size significantly, and may avoid TCP fallback for some responses which may cause a slight speedup. The default is yes, even though the DNS protocol RFCs mandate these sections, and the additional content could save roundtrips for clients that use the additional content. However these sec- tions are hardly used by clients. Enabling prefetch can benefit clients that need the additional content by trying to keep that content fresh in the cache. disable-dnssec-lame-check: \u0026lt;yes or no\u0026gt; If true, disables the DNSSEC lameness check in the iterator. This check sees if RRSIGs are present in the answer, when dnssec is expected, and retries another authority if RRSIGs are unex- pectedly missing. The validator will insist in RRSIGs for DNSSEC signed domains regardless of this setting, if a trust an- chor is loaded. module-config: \u0026lt;\u0026#34;module names\u0026#34;\u0026gt; Module configuration, a list of module names separated by spaces, surround the string with quotes (\u0026#34;\u0026#34;). The modules can be respip, validator, or iterator (and possibly more, see below). Setting this to just \u0026#34;iterator\u0026#34; will result in a non-validating server. Setting this to \u0026#34;validator iterator\u0026#34; will turn on DNSSEC validation. The ordering of the modules is significant, the order decides the order of processing. You must also set trust-anchors for validation to be useful. Adding respip to the front will cause RPZ processing to be done on all queries. The default is \u0026#34;validator iterator\u0026#34;. Most modules that need to be listed here have to be listed at the beginning of the line. The subnetcachedb module has to be listed just before the iterator. The python module can be listed in different places, it then processes the output of the module it is just before. The dynlib module can be listed pretty much anywhere, it is only a very thin wrapper that allows dy- namic libraries to run in its place. trust-anchor-file: \u0026lt;filename\u0026gt; File with trusted keys for validation. Both DS and DNSKEY en- tries can appear in the file. The format of the file is the standard DNS Zone file format. Default is \u0026#34;\u0026#34;, or no trust an- chor file. auto-trust-anchor-file: \u0026lt;filename\u0026gt; File with trust anchor for one zone, which is tracked with RFC5011 probes. The probes are run several times per month, thus the machine must be online frequently. The initial file can be one with contents as described in trust-anchor-file. The file is written to when the anchor is updated, so the Unbound user must have write permission. Write permission to the file, but also to the directory it is in (to create a temporary file, which is necessary to deal with filesystem full events), it must also be inside the chroot (if that is used). trust-anchor: \u0026lt;\u0026#34;Resource Record\u0026#34;\u0026gt; A DS or DNSKEY RR for a key to use for validation. Multiple en- tries can be given to specify multiple trusted keys, in addition to the trust-anchor-files. The resource record is entered in the same format as \u0026#39;dig\u0026#39; or \u0026#39;drill\u0026#39; prints them, the same format as in the zone file. Has to be on a single line, with \u0026#34;\u0026#34; around it. A TTL can be specified for ease of cut and paste, but is ig- nored. A class can be specified, but class IN is default. trusted-keys-file: \u0026lt;filename\u0026gt; File with trusted keys for validation. Specify more than one file with several entries, one file per entry. Like trust-an- chor-file but has a different file format. Format is BIND-9 style format, the trusted-keys { name flag proto algo \u0026#34;key\u0026#34;; }; clauses are read. It is possible to use wildcards with this statement, the wildcard is expanded on start and on reload. trust-anchor-signaling: \u0026lt;yes or no\u0026gt; Send RFC8145 key tag query after trust anchor priming. Default is yes. root-key-sentinel: \u0026lt;yes or no\u0026gt; Root key trust anchor sentinel. Default is yes. domain-insecure: \u0026lt;domain name\u0026gt; Sets domain name to be insecure, DNSSEC chain of trust is ig- nored towards the domain name. So a trust anchor above the do- main name can not make the domain secure with a DS record, such a DS record is then ignored. Can be given multiple times to specify multiple domains that are treated as if unsigned. If you set trust anchors for the domain they override this setting (and the domain is secured). This can be useful if you want to make sure a trust anchor for external lookups does not affect an (unsigned) internal domain. A DS record externally can create validation failures for that internal domain. val-override-date: \u0026lt;rrsig-style date spec\u0026gt; Default is \u0026#34;\u0026#34; or \u0026#34;0\u0026#34;, which disables this debugging feature. If enabled by giving a RRSIG style date, that date is used for ver- ifying RRSIG inception and expiration dates, instead of the cur- rent date. Do not set this unless you are debugging signature inception and expiration. The value -1 ignores the date alto- gether, useful for some special applications. val-sig-skew-min: \u0026lt;seconds\u0026gt; Minimum number of seconds of clock skew to apply to validated signatures. A value of 10% of the signature lifetime (expira- tion - inception) is used, capped by this setting. Default is 3600 (1 hour) which allows for daylight savings differences. Lower this value for more strict checking of short lived signa- tures. val-sig-skew-max: \u0026lt;seconds\u0026gt; Maximum number of seconds of clock skew to apply to validated signatures. A value of 10% of the signature lifetime (expira- tion - inception) is used, capped by this setting. Default is 86400 (24 hours) which allows for timezone setting problems in stable domains. Setting both min and max very low disables the clock skew allowances. Setting both min and max very high makes the validator check the signature timestamps less strictly. val-max-restart: \u0026lt;number\u0026gt; The maximum number the validator should restart validation with another authority in case of failed validation. Default is 5. val-bogus-ttl: \u0026lt;number\u0026gt; The time to live for bogus data. This is data that has failed validation; due to invalid signatures or other checks. The TTL from that data cannot be trusted, and this value is used in- stead. The value is in seconds, default 60. The time interval prevents repeated revalidation of bogus data. val-clean-additional: \u0026lt;yes or no\u0026gt; Instruct the validator to remove data from the additional sec- tion of secure messages that are not signed properly. Messages that are insecure, bogus, indeterminate or unchecked are not af- fected. Default is yes. Use this setting to protect the users that rely on this validator for authentication from potentially bad data in the additional section. val-log-level: \u0026lt;number\u0026gt; Have the validator print validation failures to the log. Re- gardless of the verbosity setting. Default is 0, off. At 1, for every user query that fails a line is printed to the logs. This way you can monitor what happens with validation. Use a diagnosis tool, such as dig or drill, to find out why validation is failing for these queries. At 2, not only the query that failed is printed but also the reason why Unbound thought it was wrong and which server sent the faulty data. val-permissive-mode: \u0026lt;yes or no\u0026gt; Instruct the validator to mark bogus messages as indeterminate. The security checks are performed, but if the result is bogus (failed security), the reply is not withheld from the client with SERVFAIL as usual. The client receives the bogus data. For messages that are found to be secure the AD bit is set in replies. Also logging is performed as for full validation. The default value is \u0026#34;no\u0026#34;. ignore-cd-flag: \u0026lt;yes or no\u0026gt; Instruct Unbound to ignore the CD flag from clients and refuse to return bogus answers to them. Thus, the CD (Checking Dis- abled) flag does not disable checking any more. This is useful if legacy (w2008) servers that set the CD flag but cannot vali- date DNSSEC themselves are the clients, and then Unbound pro- vides them with DNSSEC protection. The default value is \u0026#34;no\u0026#34;. disable-edns-do: \u0026lt;yes or no\u0026gt; Disable the EDNS DO flag in upstream requests. It breaks DNSSEC validation for Unbound\u0026#39;s clients. This results in the upstream name servers to not include DNSSEC records in their replies and could be helpful for devices that cannot handle DNSSEC informa- tion. When the option is enabled, clients that set the DO flag receive no EDNS record in the response to indicate the lack of support to them. If this option is enabled but Unbound is al- ready configured for DNSSEC validation (i.e., the validator mod- ule is enabled; default) this option is implicitly turned off with a warning as to not break DNSSEC validation in Unbound. Default is no. serve-expired: \u0026lt;yes or no\u0026gt; If enabled, Unbound attempts to serve old responses from cache with a TTL of serve-expired-reply-ttl in the response. By de- fault the expired answer will be used after a resolution attempt errored out or is taking more than serve-expired-client-timeout to resolve. Default is \u0026#34;no\u0026#34;. serve-expired-ttl: \u0026lt;seconds\u0026gt; Limit serving of expired responses to configured seconds after expiration. 0 disables the limit. This option only applies when serve-expired is enabled. A suggested value per RFC 8767 is between 86400 (1 day) and 259200 (3 days). The default is 86400. serve-expired-ttl-reset: \u0026lt;yes or no\u0026gt; Set the TTL of expired records to the serve-expired-ttl value after a failed attempt to retrieve the record from upstream. This makes sure that the expired records will be served as long as there are queries for it. Default is \u0026#34;no\u0026#34;. serve-expired-reply-ttl: \u0026lt;seconds\u0026gt; TTL value to use when replying with expired data. If serve-ex- pired-client-timeout is also used then it is RECOMMENDED to use 30 as the value (RFC 8767). The default is 30. serve-expired-client-timeout: \u0026lt;msec\u0026gt; Time in milliseconds before replying to the client with expired data. This essentially enables the serve-stale behavior as specified in RFC 8767 that first tries to resolve before immedi- ately responding with expired data. Setting this to 0 will dis- able this behavior and instead serve the expired record immedi- ately from the cache before attempting to refresh it via resolu- tion. Default is 1800. serve-original-ttl: \u0026lt;yes or no\u0026gt; If enabled, Unbound will always return the original TTL as re- ceived from the upstream name server rather than the decrement- ing TTL as stored in the cache. This feature may be useful if Unbound serves as a front-end to a hidden authoritative name server. Enabling this feature does not impact cache expiry, it only changes the TTL Unbound embeds in responses to queries. Note that enabling this feature implicitly disables enforcement of the configured minimum and maximum TTL, as it is assumed users who enable this feature do not want Unbound to change the TTL obtained from an upstream server. Thus, the values set us- ing cache-min-ttl and cache-max-ttl are ignored. Default is \u0026#34;no\u0026#34;. val-nsec3-keysize-iterations: \u0026lt;\u0026#34;list of values\u0026#34;\u0026gt; List of keysize and iteration count values, separated by spaces, surrounded by quotes. Default is \u0026#34;1024 150 2048 150 4096 150\u0026#34;. This determines the maximum allowed NSEC3 iteration count before a message is simply marked insecure instead of performing the many hashing iterations. The list must be in ascending order and have at least one entry. If you set it to \u0026#34;1024 65535\u0026#34; there is no restriction to NSEC3 iteration values. This table must be kept short; a very long list could cause slower operation. zonemd-permissive-mode: \u0026lt;yes or no\u0026gt; If enabled the ZONEMD verification failures are only logged and do not cause the zone to be blocked and only return servfail. Useful for testing out if it works, or if the operator only wants to be notified of a problem without disrupting service. Default is no. add-holddown: \u0026lt;seconds\u0026gt; Instruct the auto-trust-anchor-file probe mechanism for RFC5011 autotrust updates to add new trust anchors only after they have been visible for this time. Default is 30 days as per the RFC. del-holddown: \u0026lt;seconds\u0026gt; Instruct the auto-trust-anchor-file probe mechanism for RFC5011 autotrust updates to remove revoked trust anchors after they have been kept in the revoked list for this long. Default is 30 days as per the RFC. keep-missing: \u0026lt;seconds\u0026gt; Instruct the auto-trust-anchor-file probe mechanism for RFC5011 autotrust updates to remove missing trust anchors after they have been unseen for this long. This cleans up the state file if the target zone does not perform trust anchor revocation, so this makes the auto probe mechanism work with zones that perform regular (non-5011) rollovers. The default is 366 days. The value 0 does not remove missing anchors, as per the RFC. permit-small-holddown: \u0026lt;yes or no\u0026gt; Debug option that allows the autotrust 5011 rollover timers to assume very small values. Default is no. key-cache-size: \u0026lt;number\u0026gt; Number of bytes size of the key cache. Default is 4 megabytes. A plain number is in bytes, append \u0026#39;k\u0026#39;, \u0026#39;m\u0026#39; or \u0026#39;g\u0026#39; for kilo- bytes, megabytes or gigabytes (1024*1024 bytes in a megabyte). key-cache-slabs: \u0026lt;number\u0026gt; Number of slabs in the key cache. Slabs reduce lock contention by threads. Must be set to a power of 2. Setting (close) to the number of cpus is a reasonable guess. neg-cache-size: \u0026lt;number\u0026gt; Number of bytes size of the aggressive negative cache. Default is 1 megabyte. A plain number is in bytes, append \u0026#39;k\u0026#39;, \u0026#39;m\u0026#39; or \u0026#39;g\u0026#39; for kilobytes, megabytes or gigabytes (1024*1024 bytes in a megabyte). unblock-lan-zones: \u0026lt;yes or no\u0026gt; Default is disabled. If enabled, then for private address space, the reverse lookups are no longer filtered. This allows Unbound when running as dns service on a host where it provides service for that host, to put out all of the queries for the \u0026#39;lan\u0026#39; upstream. When enabled, only localhost, 127.0.0.1 reverse and ::1 reverse zones are configured with default local zones. Disable the option when Unbound is running as a (DHCP-) DNS net- work resolver for a group of machines, where such lookups should be filtered (RFC compliance), this also stops potential data leakage about the local network to the upstream DNS servers. insecure-lan-zones: \u0026lt;yes or no\u0026gt; Default is disabled. If enabled, then reverse lookups in pri- vate address space are not validated. This is usually required whenever unblock-lan-zones is used. local-zone: \u0026lt;zone\u0026gt; \u0026lt;type\u0026gt; Configure a local zone. The type determines the answer to give if there is no match from local-data. The types are deny, refuse, static, transparent, redirect, nodefault, typetranspar- ent, inform, inform_deny, inform_redirect, always_transparent, block_a, always_refuse, always_nxdomain, always_null, noview, and are explained below. After that the default settings are listed. Use local-data: to enter data into the local zone. An- swers for local zones are authoritative DNS answers. By default the zones are class IN. If you need more complicated authoritative data, with referrals, wildcards, CNAME/DNAME support, or DNSSEC authoritative service, setup a stub-zone for it as detailed in the stub zone section below. A stub-zone can be used to have unbound send queries to another server, an authoritative server, to fetch the informa- tion. With a forward-zone, unbound sends queries to a server that is a recursive server to fetch the information. With an auth-zone a zone can be loaded from file and used, it can be used like a local-zone for users downstream, or the auth-zone information can be used to fetch information from when resolving like it is an upstream server. The forward-zone and auth-zone options are described in their sections below. If you want to perform filtering of the information that the users can fetch, the local-zone and local-data statements allow for this, but also the rpz functionality can be used, described in the RPZ section. deny Do not send an answer, drop the query. If there is a match from local data, the query is answered. refuse Send an error message reply, with rcode REFUSED. If there is a match from local data, the query is answered. static If there is a match from local data, the query is answered. Otherwise, the query is answered with nodata or nxdomain. For a negative answer a SOA is included in the answer if present as local-data for the zone apex domain. transparent If there is a match from local data, the query is answered. Otherwise if the query has a different name, the query is re- solved normally. If the query is for a name given in local- data but no such type of data is given in localdata, then a noerror nodata answer is returned. If no local-zone is given local-data causes a transparent zone to be created by de- fault. typetransparent If there is a match from local data, the query is answered. If the query is for a different name, or for the same name but for a different type, the query is resolved normally. So, similar to transparent but types that are not listed in local data are resolved normally, so if an A record is in the local data that does not cause a nodata reply for AAAA queries. redirect The query is answered from the local data for the zone name. There may be no local data beneath the zone name. This an- swers queries for the zone, and all subdomains of the zone with the local data for the zone. It can be used to redirect a domain to return a different address record to the end user, with local-zone: \u0026#34;example.com.\u0026#34; redirect and lo- cal-data: \u0026#34;example.com. A 127.0.0.1\u0026#34; queries for www.exam- ple.com and www.foo.example.com are redirected, so that users with web browsers cannot access sites with suffix exam- ple.com. inform The query is answered normally, same as transparent. The client IP address (@portnumber) is printed to the logfile. The log message is: timestamp, unbound-pid, info: zonename inform IP@port queryname type class. This option can be used for normal resolution, but machines looking up infected names are logged, eg. to run antivirus on them. inform_deny The query is dropped, like \u0026#39;deny\u0026#39;, and logged, like \u0026#39;inform\u0026#39;. Ie. find infected machines without answering the queries. inform_redirect The query is redirected, like \u0026#39;redirect\u0026#39;, and logged, like \u0026#39;inform\u0026#39;. Ie. answer queries with fixed data and also log the machines that ask. always_transparent Like transparent, but ignores local data and resolves nor- mally. block_a Like transparent, but ignores local data and resolves nor- mally all query types excluding A. For A queries it uncondi- tionally returns NODATA. Useful in cases when there is a need to explicitly force all apps to use IPv6 protocol and avoid any queries to IPv4. always_refuse Like refuse, but ignores local data and refuses the query. always_nxdomain Like static, but ignores local data and returns nxdomain for the query. always_nodata Like static, but ignores local data and returns nodata for the query. always_deny Like deny, but ignores local data and drops the query. always_null Always returns 0.0.0.0 or ::0 for every name in the zone. Like redirect with zero data for A and AAAA. Ignores local data in the zone. Used for some block lists. noview Breaks out of that view and moves towards the global local zones for answer to the query. If the view first is no, it\u0026#39;ll resolve normally. If view first is enabled, it\u0026#39;ll break perform that step and check the global answers. For when the view has view specific overrides but some zone has to be answered from global local zone contents. nodefault Used to turn off default contents for AS112 zones. The other types also turn off default contents for the zone. The \u0026#39;node- fault\u0026#39; option has no other effect than turning off default contents for the given zone. Use nodefault if you use ex- actly that zone, if you want to use a subzone, use transpar- ent. The default zones are localhost, reverse 127.0.0.1 and ::1, the home.arpa, the resolver.arpa, the service.arpa, the onion, test, in- valid and the AS112 zones. The AS112 zones are reverse DNS zones for private use and reserved IP addresses for which the servers on the in- ternet cannot provide correct answers. They are configured by default to give nxdomain (no reverse information) answers. The defaults can be turned off by specifying your own local-zone of that name, or using the \u0026#39;nodefault\u0026#39; type. Below is a list of the default zone contents. localhost The IP4 and IP6 localhost information is given. NS and SOA records are provided for completeness and to satisfy some DNS update tools. Default content: local-zone: \u0026#34;localhost.\u0026#34; redirect local-data: \u0026#34;localhost. 10800 IN NS localhost.\u0026#34; local-data: \u0026#34;localhost. 10800 IN SOA localhost. nobody.invalid. 1 3600 1200 604800 10800\u0026#34; local-data: \u0026#34;localhost. 10800 IN A 127.0.0.1\u0026#34; local-data: \u0026#34;localhost. 10800 IN AAAA ::1\u0026#34; reverse IPv4 loopback Default content: local-zone: \u0026#34;127.in-addr.arpa.\u0026#34; static local-data: \u0026#34;127.in-addr.arpa. 10800 IN NS localhost.\u0026#34; local-data: \u0026#34;127.in-addr.arpa. 10800 IN SOA localhost. nobody.invalid. 1 3600 1200 604800 10800\u0026#34; local-data: \u0026#34;1.0.0.127.in-addr.arpa. 10800 IN PTR localhost.\u0026#34; reverse IPv6 loopback Default content: local-zone: \u0026#34;1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0. 0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa.\u0026#34; static local-data: \u0026#34;1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0. 0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa. 10800 IN NS localhost.\u0026#34; local-data: \u0026#34;1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0. 0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa. 10800 IN SOA localhost. nobody.invalid. 1 3600 1200 604800 10800\u0026#34; local-data: \u0026#34;1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0. 0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa. 10800 IN PTR localhost.\u0026#34; home.arpa (RFC 8375) Default content: local-zone: \u0026#34;home.arpa.\u0026#34; static local-data: \u0026#34;home.arpa. 10800 IN NS localhost.\u0026#34; local-data: \u0026#34;home.arpa. 10800 IN SOA localhost. nobody.invalid. 1 3600 1200 604800 10800\u0026#34; resolver.arpa (RFC 9462) Default content: local-zone: \u0026#34;resolver.arpa.\u0026#34; static local-data: \u0026#34;resolver.arpa. 10800 IN NS localhost.\u0026#34; local-data: \u0026#34;resolver.arpa. 10800 IN SOA localhost. nobody.invalid. 1 3600 1200 604800 10800\u0026#34; service.arpa (draft-ietf-dnssd-srp-25) Default content: local-zone: \u0026#34;service.arpa.\u0026#34; static local-data: \u0026#34;service.arpa. 10800 IN NS localhost.\u0026#34; local-data: \u0026#34;service.arpa. 10800 IN SOA localhost. nobody.invalid. 1 3600 1200 604800 10800\u0026#34; onion (RFC 7686) Default content: local-zone: \u0026#34;onion.\u0026#34; static local-data: \u0026#34;onion. 10800 IN NS localhost.\u0026#34; local-data: \u0026#34;onion. 10800 IN SOA localhost. nobody.invalid. 1 3600 1200 604800 10800\u0026#34; test (RFC 6761) Default content: local-zone: \u0026#34;test.\u0026#34; static local-data: \u0026#34;test. 10800 IN NS localhost.\u0026#34; local-data: \u0026#34;test. 10800 IN SOA localhost. nobody.invalid. 1 3600 1200 604800 10800\u0026#34; invalid (RFC 6761) Default content: local-zone: \u0026#34;invalid.\u0026#34; static local-data: \u0026#34;invalid. 10800 IN NS localhost.\u0026#34; local-data: \u0026#34;invalid. 10800 IN SOA localhost. nobody.invalid. 1 3600 1200 604800 10800\u0026#34; reverse RFC1918 local use zones Reverse data for zones 10.in-addr.arpa, 16.172.in-addr.arpa to 31.172.in-addr.arpa, 168.192.in-addr.arpa. The lo- cal-zone: is set static and as local-data: SOA and NS records are provided. reverse RFC3330 IP4 this, link-local, testnet and broadcast Reverse data for zones 0.in-addr.arpa, 254.169.in-addr.arpa, 2.0.192.in-addr.arpa (TEST NET 1), 100.51.198.in-addr.arpa (TEST NET 2), 113.0.203.in-addr.arpa (TEST NET 3), 255.255.255.255.in-addr.arpa. And from 64.100.in-addr.arpa to 127.100.in-addr.arpa (Shared Address Space). reverse RFC4291 IP6 unspecified Reverse data for zone 0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0. 0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa. reverse RFC4193 IPv6 Locally Assigned Local Addresses Reverse data for zone D.F.ip6.arpa. reverse RFC4291 IPv6 Link Local Addresses Reverse data for zones 8.E.F.ip6.arpa to B.E.F.ip6.arpa. reverse IPv6 Example Prefix Reverse data for zone 8.B.D.0.1.0.0.2.ip6.arpa. This zone is used for tutorials and examples. You can remove the block on this zone with: local-zone: 8.B.D.0.1.0.0.2.ip6.arpa. nodefault You can also selectively unblock a part of the zone by making that part transparent with a local-zone statement. This also works with the other default zones. local-data: \u0026#34;\u0026lt;resource record string\u0026gt;\u0026#34; Configure local data, which is served in reply to queries for it. The query has to match exactly unless you configure the local-zone as redirect. If not matched exactly, the local-zone type deter- mines further processing. If local-data is configured that is not a subdomain of a local-zone, a transparent local-zone is config- ured. For record types such as TXT, use single quotes, as in lo- cal-data: \u0026#39;example. TXT \u0026#34;text\u0026#34;\u0026#39;. If you need more complicated authoritative data, with referrals, wildcards, CNAME/DNAME support, or DNSSEC authoritative service, setup a stub-zone for it as detailed in the stub zone section be- low. local-data-ptr: \u0026#34;IPaddr name\u0026#34; Configure local data shorthand for a PTR record with the reversed IPv4 or IPv6 address and the host name. For example \u0026#34;192.0.2.4 www.example.com\u0026#34;. TTL can be inserted like this: \u0026#34;2001:DB8::4 7200 www.example.com\u0026#34; local-zone-tag: \u0026lt;zone\u0026gt; \u0026lt;\u0026#34;list of tags\u0026#34;\u0026gt; Assign tags to localzones. Tagged localzones will only be applied when the used access-control element has a matching tag. Tags must be defined in define-tags. Enclose list of tags in quotes (\u0026#34;\u0026#34;) and put spaces between tags. When there are multiple tags it checks if the intersection of the list of tags for the query and local-zone-tag is non-empty. local-zone-override: \u0026lt;zone\u0026gt; \u0026lt;IP netblock\u0026gt; \u0026lt;type\u0026gt; Override the localzone type for queries from addresses matching netblock. Use this localzone type, regardless the type configured for the local-zone (both tagged and untagged) and regardless the type configured using access-control-tag-action. response-ip: \u0026lt;IP-netblock\u0026gt; \u0026lt;action\u0026gt; This requires use of the \u0026#34;respip\u0026#34; module. If the IP address in an AAAA or A RR in the answer section of a response matches the specified IP netblock, the specified action will apply. \u0026lt;action\u0026gt; has generally the same semantics as that for access-control-tag-action, but there are some exceptions. Actions for response-ip are different from those for local-zone in that in case of the former there is no point of such conditions as \u0026#34;the query matches it but there is no local data\u0026#34;. Because of this difference, the semantics of response-ip actions are modified or simplified as follows: The static, refuse, transparent, type- transparent, and nodefault actions are invalid for response-ip. Using any of these will cause the configuration to be rejected as faulty. The deny action is non-conditional, i.e. it always results in dropping the corresponding query. The resolution result before applying the deny action is still cached and can be used for other queries. response-ip-data: \u0026lt;IP-netblock\u0026gt; \u0026lt;\u0026#34;resource record string\u0026#34;\u0026gt; This requires use of the \u0026#34;respip\u0026#34; module. This specifies the action data for response-ip with action being to redirect as specified by \u0026#34;resource record string\u0026#34;. \u0026#34;Resource record string\u0026#34; is similar to that of access-control-tag-action, but it must be of either AAAA, A or CNAME types. If the IP-net- block is an IPv6/IPv4 prefix, the record must be AAAA/A respec- tively, unless it is a CNAME (which can be used for both versions of IP netblocks). If it is CNAME there must not be more than one response-ip-data for the same IP-netblock. Also, CNAME and other types of records must not coexist for the same IP-netblock, fol- lowing the normal rules for CNAME records. The textual domain name for the CNAME does not have to be explicitly terminated with a dot (\u0026#34;.\u0026#34;); the root name is assumed to be the origin for the name. response-ip-tag: \u0026lt;IP-netblock\u0026gt; \u0026lt;\u0026#34;list of tags\u0026#34;\u0026gt; This requires use of the \u0026#34;respip\u0026#34; module. Assign tags to response IP-netblocks. If the IP address in an AAAA or A RR in the answer section of a response matches the spec- ified IP-netblock, the specified tags are assigned to the IP ad- dress. Then, if an access-control-tag is defined for the client and it includes one of the tags for the response IP, the corre- sponding access-control-tag-action will apply. Tag matching rule is the same as that for access-control-tag and local-zones. Un- like local-zone-tag, response-ip-tag can be defined for an IP-net- block even if no response-ip is defined for that netblock. If multiple response-ip-tag options are specified for the same IP- netblock in different statements, all but the first will be ig- nored. However, this will not be flagged as a configuration er- ror, but the result is probably not what was intended. Actions specified in an access-control-tag-action that has a matching tag with response-ip-tag can be those that are \u0026#34;invalid\u0026#34; for response-ip listed above, since access-control-tag-actions can be shared with local zones. For these actions, if they behave differently depending on whether local data exists or not in case of local zones, the behavior for response-ip-data will generally result in NOERROR/NODATA instead of NXDOMAIN, since the response- ip data are inherently type specific, and non-existence of data does not indicate anything about the existence or non-existence of the qname itself. For example, if the matching tag action is sta- tic but there is no data for the corresponding response-ip config- uration, then the result will be NOERROR/NODATA. The only case where NXDOMAIN is returned is when an always_nxdomain action ap- plies. ratelimit: \u0026lt;number or 0\u0026gt; Enable ratelimiting of queries sent to nameserver for performing recursion. If 0, the default, it is disabled. This option is ex- perimental at this time. The ratelimit is in queries per second that are allowed. More queries are turned away with an error (servfail). This stops recursive floods, eg. random query names, but not spoofed reflection floods. Cached responses are not rate- limited by this setting. The zone of the query is determined by examining the nameservers for it, the zone name is used to keep track of the rate. For example, 1000 may be a suitable value to stop the server from being overloaded with random names, and keeps Unbound from sending traffic to the nameservers for those zones. Configured forwarders are excluded from ratelimiting. ratelimit-size: \u0026lt;memory size\u0026gt; Give the size of the data structure in which the current ongoing rates are kept track in. Default 4m. In bytes or use m(mega), k(kilo), g(giga). The ratelimit structure is small, so this data structure likely does not need to be large. ratelimit-slabs: \u0026lt;number\u0026gt; Give power of 2 number of slabs, this is used to reduce lock con- tention in the ratelimit tracking data structure. Close to the number of cpus is a fairly good setting. ratelimit-factor: \u0026lt;number\u0026gt; Set the amount of queries to rate limit when the limit is ex- ceeded. If set to 0, all queries are dropped for domains where the limit is exceeded. If set to another value, 1 in that number is allowed through to complete. Default is 10, allowing 1/10 traffic to flow normally. This can make ordinary queries complete (if repeatedly queried for), and enter the cache, whilst also mit- igating the traffic flow by the factor given. ratelimit-backoff: \u0026lt;yes or no\u0026gt; If enabled, the ratelimit is treated as a hard failure instead of the default maximum allowed constant rate. When the limit is reached, traffic is ratelimited and demand continues to be kept track of for a 2 second rate window. No traffic is allowed, ex- cept for ratelimit-factor, until demand decreases below the con- figured ratelimit for a 2 second rate window. Useful to set rate- limit to a suspicious rate to aggressively limit unusually high traffic. Default is off. ratelimit-for-domain: \u0026lt;domain\u0026gt; \u0026lt;number qps or 0\u0026gt; Override the global ratelimit for an exact match domain name with the listed number. You can give this for any number of names. For example, for a top-level-domain you may want to have a higher limit than other names. A value of 0 will disable ratelimiting for that domain. ratelimit-below-domain: \u0026lt;domain\u0026gt; \u0026lt;number qps or 0\u0026gt; Override the global ratelimit for a domain name that ends in this name. You can give this multiple times, it then describes differ- ent settings in different parts of the namespace. The closest matching suffix is used to determine the qps limit. The rate for the exact matching domain name is not changed, use rate- limit-for-domain to set that, you might want to use different set- tings for a top-level-domain and subdomains. A value of 0 will disable ratelimiting for domain names that end in this name. ip-ratelimit: \u0026lt;number or 0\u0026gt; Enable global ratelimiting of queries accepted per IP address. This option is experimental at this time. The ratelimit is in queries per second that are allowed. More queries are completely dropped and will not receive a reply, SERVFAIL or otherwise. IP ratelimiting happens before looking in the cache. This may be use- ful for mitigating amplification attacks. Clients with a valid DNS Cookie will bypass the ratelimit. If a ratelimit for such clients is still needed, ip-ratelimit-cookie can be used instead. Default is 0 (disabled). ip-ratelimit-cookie: \u0026lt;number or 0\u0026gt; Enable global ratelimiting of queries accepted per IP address with a valid DNS Cookie. This option is experimental at this time. The ratelimit is in queries per second that are allowed. More queries are completely dropped and will not receive a reply, SERV- FAIL or otherwise. IP ratelimiting happens before looking in the cache. This option could be useful in combination with al- low_cookie in an attempt to mitigate other amplification attacks than UDP reflections (e.g., attacks targeting Unbound itself) which are already handled with DNS Cookies. If used, the value is suggested to be higher than ip-ratelimit e.g., tenfold. Default is 0 (disabled). ip-ratelimit-size: \u0026lt;memory size\u0026gt; Give the size of the data structure in which the current ongoing rates are kept track in. Default 4m. In bytes or use m(mega), k(kilo), g(giga). The ip ratelimit structure is small, so this data structure likely does not need to be large. ip-ratelimit-slabs: \u0026lt;number\u0026gt; Give power of 2 number of slabs, this is used to reduce lock con- tention in the ip ratelimit tracking data structure. Close to the number of cpus is a fairly good setting. ip-ratelimit-factor: \u0026lt;number\u0026gt; Set the amount of queries to rate limit when the limit is ex- ceeded. If set to 0, all queries are dropped for addresses where the limit is exceeded. If set to another value, 1 in that number is allowed through to complete. Default is 10, allowing 1/10 traffic to flow normally. This can make ordinary queries complete (if repeatedly queried for), and enter the cache, whilst also mit- igating the traffic flow by the factor given. ip-ratelimit-backoff: \u0026lt;yes or no\u0026gt; If enabled, the ratelimit is treated as a hard failure instead of the default maximum allowed constant rate. When the limit is reached, traffic is ratelimited and demand continues to be kept track of for a 2 second rate window. No traffic is allowed, ex- cept for ip-ratelimit-factor, until demand decreases below the configured ratelimit for a 2 second rate window. Useful to set ip-ratelimit to a suspicious rate to aggressively limit unusually high traffic. Default is off. outbound-msg-retry: \u0026lt;number\u0026gt; The number of retries, per upstream nameserver in a delegation, that Unbound will attempt in case a throwaway response is re- ceived. No response (timeout) contributes to the retry counter. If a forward/stub zone is used, this is the number of retries per nameserver in the zone. Default is 5. max-sent-count: \u0026lt;number\u0026gt; Hard limit on the number of outgoing queries Unbound will make while resolving a name, making sure large NS sets do not loop. Results in SERVFAIL when reached. It resets on query restarts (e.g., CNAME) and referrals. Default is 32. max-query-restarts: \u0026lt;number\u0026gt; Hard limit on the number of times Unbound is allowed to restart a query upon encountering a CNAME record. Results in SERVFAIL when reached. Changing this value needs caution as it can allow long CNAME chains to be accepted, where Unbound needs to verify (re- solve) each link individually. Default is 11. iter-scrub-ns: \u0026lt;number\u0026gt; Limit on the number of NS records allowed in an rrset of type NS, from the iterator scrubber. This protects the internals of the re- solver from overly large NS sets. Default is 20. iter-scrub-cname: \u0026lt;number\u0026gt; Limit on the number of CNAME, DNAME records in an answer, from the iterator scrubber. This protects the internals of the resolver from overly long indirection chains. Clips off the remainder of the reply packet at that point. Default is 11. max-global-quota: \u0026lt;number\u0026gt; Limit on the number of upstream queries sent out for an incoming query and its subqueries from recursion. It is not reset during the resolution. When it is exceeded the query is failed and the lookup process stops. Default is 200. fast-server-permil: \u0026lt;number\u0026gt; Specify how many times out of 1000 to pick from the set of fastest servers. 0 turns the feature off. A value of 900 would pick from the fastest servers 90 percent of the time, and would perform nor- mal exploration of random servers for the remaining time. When prefetch is enabled (or serve-expired), such prefetches are not sped up, because there is no one waiting for it, and it presents a good moment to perform server exploration. The fast-server-num op- tion can be used to specify the size of the fastest servers set. The default for fast-server-permil is 0. fast-server-num: \u0026lt;number\u0026gt; Set the number of servers that should be used for fast server se- lection. Only use the fastest specified number of servers with the fast-server-permil option, that turns this on or off. The default is to use the fastest 3 servers. answer-cookie: \u0026lt;yes or no\u0026gt; If enabled, Unbound will answer to requests containing DNS Cookies as specified in RFC 7873 and RFC 9018. Default is no. cookie-secret: \u0026lt;128 bit hex string\u0026gt; Server\u0026#39;s secret for DNS Cookie generation. Useful to explicitly set for servers in an anycast deployment that need to share the secret in order to verify each other\u0026#39;s Server Cookies. An example hex string would be \u0026#34;000102030405060708090a0b0c0d0e0f\u0026#34;. Default is a 128 bits random secret generated at startup time. This op- tion is ignored if a cookie-secret-file is present. In that case the secrets from that file are used in DNS Cookie calculations. cookie-secret-file: \u0026lt;filename\u0026gt; File from which the secrets are read used in DNS Cookie calcula- tions. When this file exists, the secrets in this file are used and the secret specified by the cookie-secret option is ignored. Enable it by setting a filename, like \u0026#34;/usr/local/etc/un- bound_cookiesecrets.txt\u0026#34;. The content of this file must be manip- ulated with the add_cookie_secret, drop_cookie_secret and acti- vate_cookie_secret commands to the unbound-control(8) tool. Please see that manpage on how to perform a safe cookie secret rollover. Default is \u0026#34;\u0026#34; (disabled). edns-client-string: \u0026lt;IP netblock\u0026gt; \u0026lt;string\u0026gt; Include an EDNS0 option containing configured ascii string in queries with destination address matching the configured IP net- block. This configuration option can be used multiple times. The most specific match will be used. edns-client-string-opcode: \u0026lt;opcode\u0026gt; EDNS0 option code for the edns-client-string option, from 0 to 1. A value from the `Reserved for Local/Experimental` range (65001-65534) should be used. Default is 65001. ede: \u0026lt;yes or no\u0026gt; If enabled, Unbound will respond with Extended DNS Error codes (RFC8914). These EDEs provide additional information with a re- sponse mainly for, but not limited to, DNS and DNSSEC errors. When the val-log-level option is also set to 2, responses with Ex- tended DNS Errors concerning DNSSEC failures will also contain a descriptive text message about the reason for the failure. De- fault is \u0026#34;no\u0026#34;. ede-serve-expired: \u0026lt;yes or no\u0026gt; If enabled, Unbound will attach an Extended DNS Error (RFC8914) Code 3 - Stale Answer as EDNS0 option to the expired response. The ede option needs to be enabled as well for this to work. De- fault is \u0026#34;no\u0026#34;. dns-error-reporting: \u0026lt;yes or no\u0026gt; If enabled, Unbound will send DNS Error Reports (RFC9567). The name servers need to express support by attaching the Report-Chan- nel EDNS0 option on their replies specifying the reporting agent for the zone. Any errors encountered during resolution that would result in Unbound generating an Extended DNS Error (RFC8914) will be reported to the zone\u0026#39;s reporting agent. The ede option does not need to be enabled for this to work. It is advised that the qname-minimisation option is also enabled to increase privacy on the outgoing reports. Default is \u0026#34;no\u0026#34;. Remote Control Options In the remote-control: clause are the declarations for the remote con- trol facility. If this is enabled, the unbound-control(8) utility can be used to send commands to the running Unbound server. The server uses these clauses to setup TLSv1 security for the connection. The un- bound-control(8) utility also reads the remote-control section for op- tions. To setup the correct self-signed certificates use the un- bound-control-setup(8) utility. control-enable: \u0026lt;yes or no\u0026gt; The option is used to enable remote control, default is \u0026#34;no\u0026#34;. If turned off, the server does not listen for control commands. control-interface: \u0026lt;ip address or interface name or path\u0026gt; Give IPv4 or IPv6 addresses or local socket path to listen on for control commands. If an interface name is used instead of an ip address, the list of ip addresses on that interface are used. By default localhost (127.0.0.1 and ::1) is listened to. Use 0.0.0.0 and ::0 to listen to all interfaces. If you change this and per- missions have been dropped, you must restart the server for the change to take effect. If you set it to an absolute path, a unix domain socket is used. This socket does not use the certificates and keys, so those files need not be present. To restrict access, Unbound sets permissions on the file to the user and group that is configured, the access bits are set to allow the group members to access the control socket file. Put users that need to access the socket in the that group. To restrict access further, create a directory to put the control socket in and restrict access to that directory. control-port: \u0026lt;port number\u0026gt; The port number to listen on for IPv4 or IPv6 control interfaces, default is 8953. If you change this and permissions have been dropped, you must restart the server for the change to take ef- fect. control-use-cert: \u0026lt;yes or no\u0026gt; For localhost control-interface you can disable the use of TLS by setting this option to \u0026#34;no\u0026#34;, default is \u0026#34;yes\u0026#34;. For local sockets, TLS is disabled and the value of this option is ignored. server-key-file: \u0026lt;private key file\u0026gt; Path to the server private key, by default unbound_server.key. This file is generated by the unbound-control-setup utility. This file is used by the Unbound server, but not by unbound-control. server-cert-file: \u0026lt;certificate file.pem\u0026gt; Path to the server self signed certificate, by default un- bound_server.pem. This file is generated by the unbound-con- trol-setup utility. This file is used by the Unbound server, and also by unbound-control. control-key-file: \u0026lt;private key file\u0026gt; Path to the control client private key, by default unbound_con- trol.key. This file is generated by the unbound-control-setup utility. This file is used by unbound-control. control-cert-file: \u0026lt;certificate file.pem\u0026gt; Path to the control client certificate, by default unbound_con- trol.pem. This certificate has to be signed with the server cer- tificate. This file is generated by the unbound-control-setup utility. This file is used by unbound-control. Stub Zone Options There may be multiple stub-zone: clauses. Each with a name: and zero or more hostnames or IP addresses. For the stub zone this list of name- servers is used. Class IN is assumed. The servers should be authority servers, not recursors; Unbound performs the recursive processing it- self for stub zones. The stub zone can be used to configure authoritative data to be used by the resolver that cannot be accessed using the public internet servers. This is useful for company-local data or private zones. Setup an au- thoritative server on a different host (or different port). Enter a config entry for Unbound with stub-addr: \u0026lt;ip address of host[@port]\u0026gt;. The Unbound resolver can then access the data, without referring to the public internet for it. This setup allows DNSSEC signed zones to be served by that authorita- tive server, in which case a trusted key entry with the public key can be put in config, so that Unbound can validate the data and set the AD bit on replies for the private zone (authoritative servers do not set the AD bit). This setup makes Unbound capable of answering queries for the private zone, and can even set the AD bit (\u0026#39;authentic\u0026#39;), but the AA (\u0026#39;authoritative\u0026#39;) bit is not set on these replies. Consider adding server: statements for domain-insecure: and for lo- cal-zone: name nodefault for the zone if it is a locally served zone. The insecure clause stops DNSSEC from invalidating the zone. The local zone nodefault (or transparent) clause makes the (reverse-) zone bypass Unbound\u0026#39;s filtering of RFC1918 zones. name: \u0026lt;domain name\u0026gt; Name of the stub zone. This is the full domain name of the zone. stub-host: \u0026lt;domain name\u0026gt; Name of stub zone nameserver. Is itself resolved before it is used. To use a nondefault port for DNS communication append \u0026#39;@\u0026#39; with the port number. If tls is enabled, then you can append a \u0026#39;#\u0026#39; and a name, then it\u0026#39;ll check the tls authentication certifi- cates with that name. If you combine the \u0026#39;@\u0026#39; and \u0026#39;#\u0026#39;, the \u0026#39;@\u0026#39; comes first. If only \u0026#39;#\u0026#39; is used the default port is the con- figured tls-port. stub-addr: \u0026lt;IP address\u0026gt; IP address of stub zone nameserver. Can be IP 4 or IP 6. To use a nondefault port for DNS communication append \u0026#39;@\u0026#39; with the port number. If tls is enabled, then you can append a \u0026#39;#\u0026#39; and a name, then it\u0026#39;ll check the tls authentication certificates with that name. If you combine the \u0026#39;@\u0026#39; and \u0026#39;#\u0026#39;, the \u0026#39;@\u0026#39; comes first. If only \u0026#39;#\u0026#39; is used the default port is the configured tls-port. stub-prime: \u0026lt;yes or no\u0026gt; This option is by default no. If enabled it performs NS set priming, which is similar to root hints, where it starts using the list of nameservers currently published by the zone. Thus, if the hint list is slightly outdated, the resolver picks up a correct list online. stub-first: \u0026lt;yes or no\u0026gt; If enabled, a query is attempted without the stub clause if it fails. The data could not be retrieved and would have caused SERVFAIL because the servers are unreachable, instead it is tried without this clause. The default is no. stub-tls-upstream: \u0026lt;yes or no\u0026gt; Enabled or disable whether the queries to this stub use TLS for transport. Default is no. stub-ssl-upstream: \u0026lt;yes or no\u0026gt; Alternate syntax for stub-tls-upstream. stub-tcp-upstream: \u0026lt;yes or no\u0026gt; If it is set to \u0026#34;yes\u0026#34; then upstream queries use TCP only for transport regardless of global flag tcp-upstream. Default is no. stub-no-cache: \u0026lt;yes or no\u0026gt; Default is no. If enabled, data inside the stub is not cached. This is useful when you want immediate changes to be visible. Forward Zone Options There may be multiple forward-zone: clauses. Each with a name: and zero or more hostnames or IP addresses. For the forward zone this list of nameservers is used to forward the queries to. The servers listed as forward-host: and forward-addr: have to handle further recursion for the query. Thus, those servers are not authority servers, but are (just like Unbound is) recursive servers too; Unbound does not perform recursion itself for the forward zone, it lets the remote server do it. Class IN is assumed. CNAMEs are chased by Unbound itself, asking the remote server for every name in the indirection chain, to protect the local cache from illegal indirect referenced items. A forward-zone en- try with name \u0026#34;.\u0026#34; and a forward-addr target will forward all queries to that other server (unless it can answer from the cache). name: \u0026lt;domain name\u0026gt; Name of the forward zone. This is the full domain name of the zone. forward-host: \u0026lt;domain name\u0026gt; Name of server to forward to. Is itself resolved before it is used. To use a nondefault port for DNS communication append \u0026#39;@\u0026#39; with the port number. If tls is enabled, then you can append a \u0026#39;#\u0026#39; and a name, then it\u0026#39;ll check the tls authentication certifi- cates with that name. If you combine the \u0026#39;@\u0026#39; and \u0026#39;#\u0026#39;, the \u0026#39;@\u0026#39; comes first. If only \u0026#39;#\u0026#39; is used the default port is the con- figured tls-port. forward-addr: \u0026lt;IP address\u0026gt; IP address of server to forward to. Can be IP 4 or IP 6. To use a nondefault port for DNS communication append \u0026#39;@\u0026#39; with the port number. If tls is enabled, then you can append a \u0026#39;#\u0026#39; and a name, then it\u0026#39;ll check the tls authentication certificates with that name. If you combine the \u0026#39;@\u0026#39; and \u0026#39;#\u0026#39;, the \u0026#39;@\u0026#39; comes first. If only \u0026#39;#\u0026#39; is used the default port is the configured tls-port. At high verbosity it logs the TLS certificate, with TLS enabled. If you leave out the \u0026#39;#\u0026#39; and auth name from the forward-addr, any name is accepted. The cert must also match a CA from the tls-cert-bundle. forward-first: \u0026lt;yes or no\u0026gt; If a forwarded query is met with a SERVFAIL error, and this op- tion is enabled, Unbound will fall back to normal recursive res- olution for this query as if no query forwarding had been speci- fied. The default is \u0026#34;no\u0026#34;. forward-tls-upstream: \u0026lt;yes or no\u0026gt; Enabled or disable whether the queries to this forwarder use TLS for transport. Default is no. If you enable this, also config- ure a tls-cert-bundle or use tls-win-cert to load CA certs, oth- erwise the connections cannot be authenticated. forward-ssl-upstream: \u0026lt;yes or no\u0026gt; Alternate syntax for forward-tls-upstream. forward-tcp-upstream: \u0026lt;yes or no\u0026gt; If it is set to \u0026#34;yes\u0026#34; then upstream queries use TCP only for transport regardless of global flag tcp-upstream. Default is no. forward-no-cache: \u0026lt;yes or no\u0026gt; Default is no. If enabled, data inside the forward is not cached. This is useful when you want immediate changes to be visible. Authority Zone Options Authority zones are configured with auth-zone:, and each one must have a name:. There can be multiple ones, by listing multiple auth-zone clauses, each with a different name, pertaining to that part of the namespace. The authority zone with the name closest to the name looked up is used. Authority zones can be processed on two distinct, non-ex- clusive, configurable stages. With for-downstream: yes (default), authority zones are processed after local-zones and before cache. When used in this manner, Unbound re- sponds like an authority server with no further processing other than returning an answer from the zone contents. A notable example, in this case, is CNAME records which are returned verbatim to downstream clients without further resolution. With for-upstream: yes (default), authority zones are processed after the cache lookup, just before going to the network to fetch information for recursion. When used in this manner they provide a local copy of an authority server that speeds up lookups for that data during resolv- ing. If both options are enabled (default), client queries for an authority zone are answered authoritatively from Unbound, while internal queries that require data from the authority zone consult the local zone data instead of going to the network. An interesting configuration is for-downstream: no, for-upstream: yes that allows for hyperlocal behavior where both client and internal queries consult the local zone data while resolving. In this case, the aforementioned CNAME example will result in a thoroughly resolved an- swer. Authority zones can be read from zonefile. And can be kept updated via AXFR and IXFR. After update the zonefile is rewritten. The update mechanism uses the SOA timer values and performs SOA UDP queries to de- tect zone changes. If the update fetch fails, the timers in the SOA record are used to time another fetch attempt. Until the SOA expiry timer is reached. Then the zone is expired. When a zone is expired, queries are SERV- FAIL, and any new serial number is accepted from the primary (even if older), and if fallback is enabled, the fallback activates to fetch from the upstream instead of the SERVFAIL. name: \u0026lt;zone name\u0026gt; Name of the authority zone. primary: \u0026lt;IP address or host name\u0026gt; Where to download a copy of the zone from, with AXFR and IXFR. Multiple primaries can be specified. They are all tried if one fails. To use a nondefault port for DNS communication append \u0026#39;@\u0026#39; with the port number. You can append a \u0026#39;#\u0026#39; and a name, then AXFR over TLS can be used and the tls authentication certifi- cates will be checked with that name. If you combine the \u0026#39;@\u0026#39; and \u0026#39;#\u0026#39;, the \u0026#39;@\u0026#39; comes first. If you point it at another Un- bound instance, it would not work because that does not support AXFR/IXFR for the zone, but if you used url: to download the zonefile as a text file from a webserver that would work. If you specify the hostname, you cannot use the domain from the zonefile, because it may not have that when retrieving that data, instead use a plain IP address to avoid a circular depen- dency on retrieving that IP address. master: \u0026lt;IP address or host name\u0026gt; Alternate syntax for primary. url: \u0026lt;url to zonefile\u0026gt; Where to download a zonefile for the zone. With http or https. An example for the url is \u0026#34;http://www.example.com/exam- ple.org.zone\u0026#34;. Multiple url statements can be given, they are tried in turn. If only urls are given the SOA refresh timer is used to wait for making new downloads. If also primaries are listed, the primaries are first probed with UDP SOA queries to see if the SOA serial number has changed, reducing the number of downloads. If none of the urls work, the primaries are tried with IXFR and AXFR. For https, the tls-cert-bundle and the hostname from the url are used to authenticate the connection. If you specify a hostname in the URL, you cannot use the domain from the zonefile, because it may not have that when retrieving that data, instead use a plain IP address to avoid a circular dependency on retrieving that IP address. Avoid dependencies on name lookups by using a notation like \u0026#34;http://192.0.2.1/unbound- primaries/example.com.zone\u0026#34;, with an explicit IP address. allow-notify: \u0026lt;IP address or host name or netblockIP/prefix\u0026gt; With allow-notify you can specify additional sources of noti- fies. When notified, the server attempts to first probe and then zone transfer. If the notify is from a primary, it first attempts that primary. Otherwise other primaries are attempted. If there are no primaries, but only urls, the file is downloaded when notified. The primaries from primary: and url: statements are allowed notify by default. fallback-enabled: \u0026lt;yes or no\u0026gt; Default no. If enabled, Unbound falls back to querying the in- ternet as a resolver for this zone when lookups fail. For exam- ple for DNSSEC validation failures. for-downstream: \u0026lt;yes or no\u0026gt; Default yes. If enabled, Unbound serves authority responses to downstream clients for this zone. This option makes Unbound be- have, for the queries with names in this zone, like one of the authority servers for that zone. Turn it off if you want Un- bound to provide recursion for the zone but have a local copy of zone data. If for-downstream is no and for-upstream is yes, then Unbound will DNSSEC validate the contents of the zone be- fore serving the zone contents to clients and store validation results in the cache. for-upstream: \u0026lt;yes or no\u0026gt; Default yes. If enabled, Unbound fetches data from this data collection for answering recursion queries. Instead of sending queries over the internet to the authority servers for this zone, it\u0026#39;ll fetch the data directly from the zone data. Turn it on when you want Unbound to provide recursion for downstream clients, and use the zone data as a local copy to speed up lookups. zonemd-check: \u0026lt;yes or no\u0026gt; Enable this option to check ZONEMD records in the zone. Default is disabled. The ZONEMD record is a checksum over the zone data. This includes glue in the zone and data from the zone file, and excludes comments from the zone file. When there is a DNSSEC chain of trust, DNSSEC signatures are checked too. zonemd-reject-absence: \u0026lt;yes or no\u0026gt; Enable this option to reject the absence of the ZONEMD record. Without it, when zonemd is not there it is not checked. It is useful to enable for a nonDNSSEC signed zone where the operator wants to require the verification of a ZONEMD, hence a missing ZONEMD is a failure. The action upon failure is controlled by the zonemd-permissive-mode option, for log only or also block the zone. The default is no. Without the option absence of a ZONEMD is only a failure when the zone is DNSSEC signed, and we have a trust anchor, and the DNSSEC verification of the absence of the ZONEMD fails. With the option enabled, the absence of a ZONEMD is always a failure, also for nonDNSSEC signed zones. zonefile: \u0026lt;filename\u0026gt; The filename where the zone is stored. If not given then no zonefile is used. If the file does not exist or is empty, Un- bound will attempt to fetch zone data (eg. from the primary servers). View Options There may be multiple view: clauses. Each with a name: and zero or more local-zone and local-data elements. Views can also contain view-first, response-ip, response-ip-data and local-data-ptr elements. View can be mapped to requests by specifying the view name in an access-con- trol-view element. Options from matching views will override global op- tions. Global options will be used if no matching view is found, or when the matching view does not have the option specified. name: \u0026lt;view name\u0026gt; Name of the view. Must be unique. This name is used in ac- cess-control-view elements. local-zone: \u0026lt;zone\u0026gt; \u0026lt;type\u0026gt; View specific local-zone elements. Has the same types and behav- iour as the global local-zone elements. When there is at least one local-zone specified and view-first is no, the default lo- cal-zones will be added to this view. Defaults can be disabled using the nodefault type. When view-first is yes or when a view does not have a local-zone, the global local-zone will be used including it\u0026#39;s default zones. local-data: \u0026#34;\u0026lt;resource record string\u0026gt;\u0026#34; View specific local-data elements. Has the same behaviour as the global local-data elements. local-data-ptr: \u0026#34;IPaddr name\u0026#34; View specific local-data-ptr elements. Has the same behaviour as the global local-data-ptr elements. view-first: \u0026lt;yes or no\u0026gt; If enabled, it attempts to use the global local-zone and lo- cal-data if there is no match in the view specific options. The default is no. Python Module Options The python: clause gives the settings for the python(1) script module. This module acts like the iterator and validator modules do, on queries and answers. To enable the script module it has to be compiled into the daemon, and the word \u0026#34;python\u0026#34; has to be put in the module-config: option (usually first, or between the validator and iterator). Multiple instances of the python module are supported by adding the word \u0026#34;python\u0026#34; more than once. If the chroot: option is enabled, you should make sure Python\u0026#39;s library directory structure is bind mounted in the new root environment, see mount(8). Also the python-script: path should be specified as an ab- solute path relative to the new root, or as a relative path to the working directory. python-script: \u0026lt;python file\u0026gt; The script file to load. Repeat this option for every python module instance added to the module-config: option. Dynamic Library Module Options The dynlib: clause gives the settings for the dynlib module. This mod- ule is only a very small wrapper that allows dynamic modules to be loaded on runtime instead of being compiled into the application. To enable the dynlib module it has to be compiled into the daemon, and the word \u0026#34;dynlib\u0026#34; has to be put in the module-config: option. Multiple in- stances of dynamic libraries are supported by adding the word \u0026#34;dynlib\u0026#34; more than once. The dynlib-file: path should be specified as an absolute path relative to the new path set by chroot: option, or as a relative path to the working directory. dynlib-file: \u0026lt;dynlib file\u0026gt; The dynamic library file to load. Repeat this option for every dynlib module instance added to the module-config: option. DNS64 Module Options The dns64 module must be configured in the module-config: directive e.g., \u0026#34;dns64 validator iterator\u0026#34; and be compiled into the daemon to be enabled. These settings go in the server: section. dns64-prefix: \u0026lt;IPv6 prefix\u0026gt; This sets the DNS64 prefix to use to synthesize AAAA records with. It must be /96 or shorter. The default prefix is 64:ff9b::/96. dns64-synthall: \u0026lt;yes or no\u0026gt; Debug option, default no. If enabled, synthesize all AAAA records despite the presence of actual AAAA records. dns64-ignore-aaaa: \u0026lt;name\u0026gt; List domain for which the AAAA records are ignored and the A record is used by dns64 processing instead. Can be entered mul- tiple times, list a new domain for which it applies, one per line. Applies also to names underneath the name given. NAT64 Operation NAT64 operation allows using a NAT64 prefix for outbound requests to IPv4-only servers. It is controlled by two options in the server: sec- tion: do-nat64: \u0026lt;yes or no\u0026gt; Use NAT64 to reach IPv4-only servers. Consider also enabling prefer-ip6 to prefer native IPv6 connections to nameservers. Default no. nat64-prefix: \u0026lt;IPv6 prefix\u0026gt; Use a specific NAT64 prefix to reach IPv4-only servers. De- faults to using the prefix configured in dns64-prefix, which in turn defaults to 64:ff9b::/96. The prefix length must be one of /32, /40, /48, /56, /64 or /96. DNSCrypt Options The dnscrypt: clause gives the settings of the dnscrypt channel. While those options are available, they are only meaningful if Unbound was compiled with --enable-dnscrypt. Currently certificate and secret/pub- lic keys cannot be generated by Unbound. You can use dnscrypt-wrapper to generate those: \u0026lt;https://github.com/cofyc/dnscrypt-wrapper/blob/mas-\u0026gt; ter/README.md#usage dnscrypt-enable: \u0026lt;yes or no\u0026gt; Whether or not the dnscrypt config should be enabled. You may define configuration but not activate it. The default is no. dnscrypt-port: \u0026lt;port number\u0026gt; On which port should dnscrypt should be activated. Note that you should have a matching interface option defined in the server section for this port. dnscrypt-provider: \u0026lt;provider name\u0026gt; The provider name to use to distribute certificates. This is of the form: 2.dnscrypt-cert.example.com.. The name MUST end with a dot. dnscrypt-secret-key: \u0026lt;path to secret key file\u0026gt; Path to the time limited secret key file. This option may be specified multiple times. dnscrypt-provider-cert: \u0026lt;path to cert file\u0026gt; Path to the certificate related to the dnscrypt-secret-keys. This option may be specified multiple times. dnscrypt-provider-cert-rotated: \u0026lt;path to cert file\u0026gt; Path to a certificate that we should be able to serve existing connection from but do not want to advertise over dnscrypt-provider\u0026#39;s TXT record certs distribution. A typical use case is when rotating certificates, existing clients may still use the client magic from the old cert in their queries until they fetch and update the new cert. Likewise, it would al- low one to prime the new cert/key without distributing the new cert yet, this can be useful when using a network of servers us- ing anycast and on which the configuration may not get updated at the exact same time. By priming the cert, the servers can handle both old and new certs traffic while distributing only one. This option may be specified multiple times. dnscrypt-shared-secret-cache-size: \u0026lt;memory size\u0026gt; Give the size of the data structure in which the shared secret keys are kept in. Default 4m. In bytes or use m(mega), k(kilo), g(giga). The shared secret cache is used when a same client is making multiple queries using the same public key. It saves a substantial amount of CPU. dnscrypt-shared-secret-cache-slabs: \u0026lt;number\u0026gt; Give power of 2 number of slabs, this is used to reduce lock contention in the dnscrypt shared secrets cache. Close to the number of cpus is a fairly good setting. dnscrypt-nonce-cache-size: \u0026lt;memory size\u0026gt; Give the size of the data structure in which the client nonces are kept in. Default 4m. In bytes or use m(mega), k(kilo), g(giga). The nonce cache is used to prevent dnscrypt message replaying. Client nonce should be unique for any pair of client pk/server sk. dnscrypt-nonce-cache-slabs: \u0026lt;number\u0026gt; Give power of 2 number of slabs, this is used to reduce lock contention in the dnscrypt nonce cache. Close to the number of cpus is a fairly good setting. EDNS Client Subnet Module Options The ECS module must be configured in the module-config: directive e.g., \u0026#34;subnetcache validator iterator\u0026#34; and be compiled into the daemon to be enabled. These settings go in the server: section. If the destination address is allowed in the configuration Unbound will add the EDNS0 option to the query containing the relevant part of the client\u0026#39;s address. When an answer contains the ECS option the response and the option are placed in a specialized cache. If the authority in- dicated no support, the response is stored in the regular cache. Additionally, when a client includes the option in its queries, Unbound will forward the option when sending the query to addresses that are explicitly allowed in the configuration using send-client-subnet. The option will always be forwarded, regardless the allowed addresses, if client-subnet-always-forward is set to yes. In this case the lookup in the regular cache is skipped. The maximum size of the ECS cache is controlled by \u0026#39;msg-cache-size\u0026#39; in the configuration file. On top of that, for each query only 100 differ- ent subnets are allowed to be stored for each address family. Exceeding that number, older entries will be purged from cache. Note that due to the nature of how EDNS Client Subnet works, by segre- gating the client IP space in order to try and have tailored responses for prefixes of unknown sizes, resolution and cache response perfor- mance are impacted as a result. Usage of the subnetcache module should only be enabled in installations that require such functionality where the resolver and the clients belong to different networks. An example of that is an open resolver installation. This module does not interact with the serve-expired* and prefetch: op- tions. send-client-subnet: \u0026lt;IP address\u0026gt; Send client source address to this authority. Append /num to in- dicate a classless delegation netblock, for example like 10.2.3.4/24 or 2001::11/64. Can be given multiple times. Author- ities not listed will not receive edns-subnet information, un- less domain in query is specified in client-subnet-zone. client-subnet-zone: \u0026lt;domain\u0026gt; Send client source address in queries for this domain and its subdomains. Can be given multiple times. Zones not listed will not receive edns-subnet information, unless hosted by authority specified in send-client-subnet. client-subnet-always-forward: \u0026lt;yes or no\u0026gt; Specify whether the ECS address check (configured using send-client-subnet) is applied for all queries, even if the triggering query contains an ECS record, or only for queries for which the ECS record is generated using the querier address (and therefore did not contain ECS data in the client query). If en- abled, the address check is skipped when the client query con- tains an ECS record. And the lookup in the regular cache is skipped. Default is no. max-client-subnet-ipv6: \u0026lt;number\u0026gt; Specifies the maximum prefix length of the client source address we are willing to expose to third parties for IPv6. Defaults to 56. max-client-subnet-ipv4: \u0026lt;number\u0026gt; Specifies the maximum prefix length of the client source address we are willing to expose to third parties for IPv4. Defaults to 24. min-client-subnet-ipv6: \u0026lt;number\u0026gt; Specifies the minimum prefix length of the IPv6 source mask we are willing to accept in queries. Shorter source masks result in REFUSED answers. Source mask of 0 is always accepted. Default is 0. min-client-subnet-ipv4: \u0026lt;number\u0026gt; Specifies the minimum prefix length of the IPv4 source mask we are willing to accept in queries. Shorter source masks result in REFUSED answers. Source mask of 0 is always accepted. Default is 0. max-ecs-tree-size-ipv4: \u0026lt;number\u0026gt; Specifies the maximum number of subnets ECS answers kept in the ECS radix tree. This number applies for each qname/qclass/qtype tuple. Defaults to 100. max-ecs-tree-size-ipv6: \u0026lt;number\u0026gt; Specifies the maximum number of subnets ECS answers kept in the ECS radix tree. This number applies for each qname/qclass/qtype tuple. Defaults to 100. Opportunistic IPsec Support Module Options The IPsec module must be configured in the module-config: directive e.g., \u0026#34;ipsecmod validator iterator\u0026#34; and be compiled into Unbound by us- ing --enable-ipsecmod to be enabled. These settings go in the server: section. When Unbound receives an A/AAAA query that is not in the cache and finds a valid answer, it will withhold returning the answer and instead will generate an IPSECKEY subquery for the same domain name. If an an- swer was found, Unbound will call an external hook passing the follow- ing arguments: QNAME Domain name of the A/AAAA and IPSECKEY query. In string for- mat. IPSECKEY TTL TTL of the IPSECKEY RRset. A/AAAA String of space separated IP addresses present in the A/AAAA RRset. The IP addresses are in string format. IPSECKEY String of space separated IPSECKEY RDATA present in the IPSECKEY RRset. The IPSECKEY RDATA are in DNS presentation format. The A/AAAA answer is then cached and returned to the client. If the external hook was called the TTL changes to ensure it doesn\u0026#39;t surpass ipsecmod-max-ttl. The same procedure is also followed when prefetch: is used, but the A/AAAA answer is given to the client before the hook is called. ipsec- mod-max-ttl ensures that the A/AAAA answer given from cache is still relevant for opportunistic IPsec. ipsecmod-enabled: \u0026lt;yes or no\u0026gt; Specifies whether the IPsec module is enabled or not. The IPsec module still needs to be defined in the module-config: direc- tive. This option facilitates turning on/off the module without restarting/reloading Unbound. Defaults to yes. ipsecmod-hook: \u0026lt;filename\u0026gt; Specifies the external hook that Unbound will call with sys- tem(3). The file can be specified as an absolute/relative path. The file needs the proper permissions to be able to be executed by the same user that runs Unbound. It must be present when the IPsec module is defined in the module-config: directive. ipsecmod-strict: \u0026lt;yes or no\u0026gt; If enabled Unbound requires the external hook to return a suc- cess value of 0. Failing to do so Unbound will reply with SERV- FAIL. The A/AAAA answer will also not be cached. Defaults to no. ipsecmod-max-ttl: \u0026lt;seconds\u0026gt; Time to live maximum for A/AAAA cached records after calling the external hook. Defaults to 3600. ipsecmod-ignore-bogus: \u0026lt;yes or no\u0026gt; Specifies the behaviour of Unbound when the IPSECKEY answer is bogus. If set to yes, the hook will be called and the A/AAAA answer will be returned to the client. If set to no, the hook will not be called and the answer to the A/AAAA query will be SERVFAIL. Mainly used for testing. Defaults to no. ipsecmod-allow: \u0026lt;domain\u0026gt; Allow the ipsecmod functionality for the domain so that the mod- ule logic will be executed. Can be given multiple times, for different domains. If the option is not specified, all domains are treated as being allowed (default). ipsecmod-whitelist: \u0026lt;domain\u0026gt; Alternate syntax for ipsecmod-allow. Cache DB Module Options The Cache DB module must be configured in the module-config: directive e.g., \u0026#34;validator cachedb iterator\u0026#34; and be compiled into the daemon with --enable-cachedb. If this module is enabled and configured, the speci- fied backend database works as a second level cache: When Unbound can- not find an answer to a query in its built-in in-memory cache, it con- sults the specified backend. If it finds a valid answer in the back- end, Unbound uses it to respond to the query without performing itera- tive DNS resolution. If Unbound cannot even find an answer in the backend, it resolves the query as usual, and stores the answer in the backend. This module interacts with the serve-expired-* options and will reply with expired data if Unbound is configured for that. If Unbound was built with --with-libhiredis on a system that has in- stalled the hiredis C client library of Redis, then the \u0026#34;redis\u0026#34; backend can be used. This backend communicates with the specified Redis server over a TCP connection to store and retrieve cache data. It can be used as a persistent and/or shared cache backend. It should be noted that Unbound never removes data stored in the Redis server, even if some data have expired in terms of DNS TTL or the Redis server has cached too much data; if necessary the Redis server must be configured to limit the cache size, preferably with some kind of least-recently-used eviction policy. Additionally, the redis-expire-records option can be used in order to set the relative DNS TTL of the message as timeout to the Redis records; keep in mind that some additional memory is used per key and that the expire information is stored as absolute Unix time- stamps in Redis (computer time must be stable). This backend uses syn- chronous communication with the Redis server based on the assumption that the communication is stable and sufficiently fast. The thread waiting for a response from the Redis server cannot handle other DNS queries. Although the backend has the ability to reconnect to the server when the connection is closed unexpectedly and there is a con- figurable timeout in case the server is overly slow or hangs up, these cases are assumed to be very rare. If connection close or timeout hap- pens too often, Unbound will be effectively unusable with this backend. It\u0026#39;s the administrator\u0026#39;s responsibility to make the assumption hold. The cachedb: clause gives custom settings of the cache DB module. backend: \u0026lt;backend name\u0026gt; Specify the backend database name. The default database is the in-memory backend named \u0026#34;testframe\u0026#34;, which, as the name sug- gests, is not of any practical use. Depending on the build-time configuration, \u0026#34;redis\u0026#34; backend may also be used as described above. secret-seed: \u0026lt;\u0026#34;secret string\u0026#34;\u0026gt; Specify a seed to calculate a hash value from query information. This value will be used as the key of the corresponding answer for the backend database and can be customized if the hash should not be predictable operationally. If the backend data- base is shared by multiple Unbound instances, all instances must use the same secret seed. This option defaults to \u0026#34;default\u0026#34;. cachedb-no-store: \u0026lt;yes or no\u0026gt; If the backend should be read from, but not written to. This makes this instance not store dns messages in the backend. But if data is available it is retrieved. The default is no. cachedb-check-when-serve-expired: \u0026lt;yes or no\u0026gt; If enabled, the cachedb is checked before an expired response is returned. When serve-expired is enabled, without serve-ex- pired-client-timeout, it then does not immediately respond with an expired response from cache, but instead first checks the cachedb for valid contents, and if so returns it. If the cachedb also has no valid contents, the serve expired response is sent. If also serve-expired-client-timeout is enabled, the expired re- sponse is delayed until the timeout expires. Unless the lookup succeeds within the timeout. The default is yes. The following cachedb options are specific to the redis backend. redis-server-host: \u0026lt;server address or name\u0026gt; The IP (either v6 or v4) address or domain name of the Redis server. In general an IP address should be specified as other- wise Unbound will have to resolve the name of the server every time it establishes a connection to the server. This option de- faults to \u0026#34;127.0.0.1\u0026#34;. redis-server-port: \u0026lt;port number\u0026gt; The TCP port number of the Redis server. This option defaults to 6379. redis-server-path: \u0026lt;unix socket path\u0026gt; The unix socket path to connect to the Redis server. Off by de- fault, and it can be set to \u0026#34;\u0026#34; to turn this off. Unix sockets may have better throughput than the IP address option. redis-server-password: \u0026#34;\u0026lt;password\u0026gt;\u0026#34; The Redis AUTH password to use for the Redis server. Only rele- vant if Redis is configured for client password authorisation. Off by default, and it can be set to \u0026#34;\u0026#34; to turn this off. redis-timeout: \u0026lt;msec\u0026gt; The period until when Unbound waits for a response from the Re- dis sever. If this timeout expires Unbound closes the connec- tion, treats it as if the Redis server does not have the re- quested data, and will try to re-establish a new connection later. This option defaults to 100 milliseconds. redis-command-timeout: \u0026lt;msec\u0026gt; The timeout to use for Redis commands, in milliseconds. If 0, it uses the redis-timeout value. The default is 0. redis-connect-timeout: \u0026lt;msec\u0026gt; The timeout to use for Redis connection set up, in milliseconds. If 0, it uses the redis-timeout value. The default is 0. redis-expire-records: \u0026lt;yes or no\u0026gt; If Redis record expiration is enabled. If yes, Unbound sets timeout for Redis records so that Redis can evict keys that have expired automatically. If Unbound is configured with serve-ex- pired and serve-expired-ttl is 0, this option is internally re- verted to \u0026#34;no\u0026#34;. Redis SETEX support is required for this option (Redis \u0026gt;= 2.0.0). This option defaults to no. redis-logical-db: \u0026lt;logical database index\u0026gt; The logical database in Redis to use. These are databases in the same Redis instance sharing the same configuration and per- sisted in the same RDB/AOF file. If unsure about using this op- tion, Redis documentation (https://redis.io/commands/select/) suggests not to use a single Redis instance for multiple unre- lated applications. The default database in Redis is 0 while other logical databases need to be explicitly SELECT\u0026#39;ed upon connecting. This option defaults to 0. redis-replica-server-host: \u0026lt;server address or name\u0026gt; The IP (either v6 or v4) address or domain name of the Redis replica server. In general an IP address should be specified as otherwise Unbound will have to resolve the name of the server every time it establishes a connection to the server. This server is treated as a read-only replica server (https://re- dis.io/docs/management/replication/#read-only-replica). If specified, all Redis read commands will go to this replica server, while the write commands will go to the redis-server- host. This option defaults to \u0026#34;\u0026#34; (disabled). redis-replica-server-port: \u0026lt;port number\u0026gt; The TCP port number of the Redis replica server. This option defaults to 6379. redis-replica-server-path: \u0026lt;unix socket path\u0026gt; The unix socket path to connect to the Redis server. Off by de- fault, and it can be set to \u0026#34;\u0026#34; to turn this off. Unix sockets may have better throughput than the IP address option. redis-replica-server-password: \u0026#34;\u0026lt;password\u0026gt;\u0026#34; The Redis AUTH password to use for the Redis replica server. Only relevant if Redis is configured for client password autho- risation. Off by default, and it can be set to \u0026#34;\u0026#34; to turn this off. redis-replica-timeout: \u0026lt;msec\u0026gt; The period until when Unbound waits for a response from the Re- dis replica sever. If this timeout expires Unbound closes the connection, treats it as if the Redis replica server does not have the requested data, and will try to re-establish a new con- nection later. This option defaults to 100 milliseconds. redis-replica-command-timeout: \u0026lt;msec\u0026gt; The timeout to use for Redis replica commands, in milliseconds. If 0, it uses the redis-replica-timeout value. The default is 0. redis-replica-connect-timeout: \u0026lt;msec\u0026gt; The timeout to use for Redis replica connection set up, in mil- liseconds. If 0, it uses the redis-replica-timeout value. The default is 0. redis-replica-logical-db: \u0026lt;logical database index\u0026gt; Same as redis-logical-db but for the Redis replica server. This option defaults to 0. DNSTAP Logging Options DNSTAP support, when compiled in by using --enable-dnstap, is enabled in the dnstap: section. This starts an extra thread (when compiled with threading) that writes the log information to the destination. If Unbound is compiled without threading it does not spawn a thread, but connects per-process to the destination. dnstap-enable: \u0026lt;yes or no\u0026gt; If dnstap is enabled. Default no. If yes, it connects to the dnstap server and if any of the dnstap-log-..-messages options is enabled it sends logs for those messages to the server. dnstap-bidirectional: \u0026lt;yes or no\u0026gt; Use frame streams in bidirectional mode to transfer DNSTAP mes- sages. Default is yes. dnstap-socket-path: \u0026lt;file name\u0026gt; Sets the unix socket file name for connecting to the server that is listening on that socket. Default is \u0026#34;\u0026#34;. dnstap-ip: \u0026lt;IPaddress[@port]\u0026gt; If \u0026#34;\u0026#34;, the unix socket is used, if set with an IP address (IPv4 or IPv6) that address is used to connect to the server. dnstap-tls: \u0026lt;yes or no\u0026gt; Set this to use TLS to connect to the server specified in dnstap-ip. The default is yes. If set to no, TCP is used to connect to the server. dnstap-tls-server-name: \u0026lt;name of TLS authentication\u0026gt; The TLS server name to authenticate the server with. Used when dnstap-tls is enabled. If \u0026#34;\u0026#34; it is ignored, default \u0026#34;\u0026#34;. dnstap-tls-cert-bundle: \u0026lt;file name of cert bundle\u0026gt; The pem file with certs to verify the TLS server certificate. If \u0026#34;\u0026#34; the server default cert bundle is used, or the windows cert bundle on windows. Default is \u0026#34;\u0026#34;. dnstap-tls-client-key-file: \u0026lt;file name\u0026gt; The client key file for TLS client authentication. If \u0026#34;\u0026#34; client authentication is not used. Default is \u0026#34;\u0026#34;. dnstap-tls-client-cert-file: \u0026lt;file name\u0026gt; The client cert file for TLS client authentication. Default is \u0026#34;\u0026#34;. dnstap-send-identity: \u0026lt;yes or no\u0026gt; If enabled, the server identity is included in the log messages. Default is no. dnstap-send-version: \u0026lt;yes or no\u0026gt; If enabled, the server version if included in the log messages. Default is no. dnstap-identity: \u0026lt;string\u0026gt; The identity to send with messages, if \u0026#34;\u0026#34; the hostname is used. Default is \u0026#34;\u0026#34;. dnstap-version: \u0026lt;string\u0026gt; The version to send with messages, if \u0026#34;\u0026#34; the package version is used. Default is \u0026#34;\u0026#34;. dnstap-sample-rate: \u0026lt;number\u0026gt; The sample rate for log of messages, it logs only 1/N messages. With 0 it is disabled. Default is 0. This is useful in a high volume environment, where log functionality would otherwise not be reliable. For example 10 would spend only 1/10th time on log- ging, and 100 would only spend a hundredth of the time on log- ging. dnstap-log-resolver-query-messages: \u0026lt;yes or no\u0026gt; Enable to log resolver query messages. Default is no. These are messages from Unbound to upstream servers. dnstap-log-resolver-response-messages: \u0026lt;yes or no\u0026gt; Enable to log resolver response messages. Default is no. These are replies from upstream servers to Unbound. dnstap-log-client-query-messages: \u0026lt;yes or no\u0026gt; Enable to log client query messages. Default is no. These are client queries to Unbound. dnstap-log-client-response-messages: \u0026lt;yes or no\u0026gt; Enable to log client response messages. Default is no. These are responses from Unbound to clients. dnstap-log-forwarder-query-messages: \u0026lt;yes or no\u0026gt; Enable to log forwarder query messages. Default is no. dnstap-log-forwarder-response-messages: \u0026lt;yes or no\u0026gt; Enable to log forwarder response messages. Default is no. Response Policy Zone Options Response Policy Zones are configured with rpz:, and each one must have a name:. There can be multiple ones, by listing multiple RPZ clauses, each with a different name. RPZ clauses are applied in order of config- uration and any match from an earlier RPZ zone will terminate the RPZ lookup. Note that a PASSTHRU action is still considered a match. The respip module needs to be added to the module-config, e.g.: module-con- fig: \u0026#34;respip validator iterator\u0026#34;. QNAME, Response IP Address, nsdname, nsip and clientip triggers are supported. Supported actions are: NXDOMAIN, NODATA, PASSTHRU, DROP, Local Data, tcp-only and drop. RPZ QNAME triggers are applied after local-zones and before auth-zones. The RPZ zone is a regular DNS zone formatted with a SOA start record as usual. The items in the zone are entries, that specify what to act on (the trigger) and what to do (the action). The trigger to act on is recorded in the name, the action to do is recorded as the resource record. The names all end in the zone name, so you could type the trigger names without a trailing dot in the zonefile. An example RPZ record, that answers example.com with NXDOMAIN example.com CNAME . The triggers are encoded in the name on the left name query name netblock.rpz-client-ip client IP address netblock.rpz-ip response IP address in the answer name.rpz-nsdname nameserver name netblock.rpz-nsip nameserver IP address The netblock is written as \u0026lt;netblocklen\u0026gt;.\u0026lt;ip address in reverse\u0026gt;. For IPv6 use \u0026#39;zz\u0026#39; for \u0026#39;::\u0026#39;. Specify individual addresses with scope length of 32 or 128. For example, 24.10.100.51.198.rpz-ip is 198.51.100.10/24 and 32.10.zz.db8.2001.rpz-ip is 2001:db8:0:0:0:0:0:10/32. The actions are specified with the record on the right CNAME . nxdomain reply CNAME *. nodata reply CNAME rpz-passthru. do nothing, allow to continue CNAME rpz-drop. the query is dropped CNAME rpz-tcp-only. answer over TCP A 192.0.2.1 answer with this IP address Other records like AAAA, TXT and other CNAMEs (not rpz-..) can also be used to answer queries with that content. The RPZ zones can be configured in the config file with these settings in the rpz: block. name: \u0026lt;zone name\u0026gt; Name of the authority zone. primary: \u0026lt;IP address or host name\u0026gt; Where to download a copy of the zone from, with AXFR and IXFR. Multiple primaries can be specified. They are all tried if one fails. To use a nondefault port for DNS communication append \u0026#39;@\u0026#39; with the port number. You can append a \u0026#39;#\u0026#39; and a name, then AXFR over TLS can be used and the tls authentication certifi- cates will be checked with that name. If you combine the \u0026#39;@\u0026#39; and \u0026#39;#\u0026#39;, the \u0026#39;@\u0026#39; comes first. If you point it at another Un- bound instance, it would not work because that does not support AXFR/IXFR for the zone, but if you used url: to download the zonefile as a text file from a webserver that would work. If you specify the hostname, you cannot use the domain from the zonefile, because it may not have that when retrieving that data, instead use a plain IP address to avoid a circular depen- dency on retrieving that IP address. master: \u0026lt;IP address or host name\u0026gt; Alternate syntax for primary. url: \u0026lt;url to zonefile\u0026gt; Where to download a zonefile for the zone. With http or https. An example for the url is \u0026#34;http://www.example.com/exam- ple.org.zone\u0026#34;. Multiple url statements can be given, they are tried in turn. If only urls are given the SOA refresh timer is used to wait for making new downloads. If also primaries are listed, the primaries are first probed with UDP SOA queries to see if the SOA serial number has changed, reducing the number of downloads. If none of the urls work, the primaries are tried with IXFR and AXFR. For https, the tls-cert-bundle and the hostname from the url are used to authenticate the connection. allow-notify: \u0026lt;IP address or host name or netblockIP/prefix\u0026gt; With allow-notify you can specify additional sources of noti- fies. When notified, the server attempts to first probe and then zone transfer. If the notify is from a primary, it first attempts that primary. Otherwise other primaries are attempted. If there are no primaries, but only urls, the file is downloaded when notified. The primaries from primary: and url: statements are allowed notify by default. zonefile: \u0026lt;filename\u0026gt; The filename where the zone is stored. If not given then no zonefile is used. If the file does not exist or is empty, Un- bound will attempt to fetch zone data (eg. from the primary servers). rpz-action-override: \u0026lt;action\u0026gt; Always use this RPZ action for matching triggers from this zone. Possible action are: nxdomain, nodata, passthru, drop, disabled and cname. rpz-cname-override: \u0026lt;domain\u0026gt; The CNAME target domain to use if the cname action is configured for rpz-action-override. rpz-log: \u0026lt;yes or no\u0026gt; Log all applied RPZ actions for this RPZ zone. Default is no. rpz-log-name: \u0026lt;name\u0026gt; Specify a string to be part of the log line, for easy referenc- ing. rpz-signal-nxdomain-ra: \u0026lt;yes or no\u0026gt; Signal when a query is blocked by the RPZ with NXDOMAIN with an unset RA flag. This allows certain clients, like dnsmasq, to infer that the domain is externally blocked. Default is no. for-downstream: \u0026lt;yes or no\u0026gt; If enabled the zone is authoritatively answered for and queries for the RPZ zone information are answered to downstream clients. This is useful for monitoring scripts, that can then access the SOA information to check if the RPZ information is up to date. Default is no. tags: \u0026lt;list of tags\u0026gt; Limit the policies from this RPZ clause to clients with a match- ing tag. Tags need to be defined in define-tag and can be as- signed to client addresses using access-control-tag. Enclose list of tags in quotes (\u0026#34;\u0026#34;) and put spaces between tags. If no tags are specified the policies from this clause will be applied for all clients. MEMORY CONTROL EXAMPLE In the example config settings below memory usage is reduced. Some ser- vice levels are lower, notable very large data and a high TCP load are no longer supported. Very large data and high TCP loads are exceptional for the DNS. DNSSEC validation is enabled, just add trust anchors. If you do not have to worry about programs using more than 3 Mb of memory, the below example is not for you. Use the defaults to receive full ser- vice, which on BSD-32bit tops out at 30-40 Mb after heavy usage. # example settings that reduce memory usage server: num-threads: 1 outgoing-num-tcp: 1 # this limits TCP service, uses less buffers. incoming-num-tcp: 1 outgoing-range: 60 # uses less memory, but less performance. msg-buffer-size: 8192 # note this limits service, \u0026#39;no huge stuff\u0026#39;. msg-cache-size: 100k msg-cache-slabs: 1 rrset-cache-size: 100k rrset-cache-slabs: 1 infra-cache-numhosts: 200 infra-cache-slabs: 1 key-cache-size: 100k key-cache-slabs: 1 neg-cache-size: 10k num-queries-per-thread: 30 target-fetch-policy: \u0026#34;2 1 0 0 0 0\u0026#34; harden-large-queries: \u0026#34;yes\u0026#34; harden-short-bufsize: \u0026#34;yes\u0026#34; FILES /usr/local/etc/unbound default Unbound working directory. /usr/local/etc/unbound default chroot(2) location. /usr/local/etc/unbound/unbound.conf Unbound configuration file. /usr/local/etc/unbound/unbound.pid default Unbound pidfile with process ID of the running daemon. unbound.log Unbound log file. default is to log to syslog(3). SEE ALSO unbound(8), unbound-checkconf(8). AUTHORS Unbound was written by NLnet Labs. Please see CREDITS file in the dis- tribution for further details. NLnet Labs Apr 24, 2025 unbound.conf(5) ","keywords":["unbound","unbound.conf"],"articleBody":"unbound.conf(5) unbound 1.23.0 unbound.conf(5) NAME unbound.conf - Unbound 配置文件. SYNOPSIS unbound.conf DESCRIPTION unbound.conf 用于配置 unbound(8)。文件格式包含属性和值。某些属性内部包含其他属性。表示法为：attribute: value。 注释以 # 开头，并持续到行尾。空行和行首的空白将被忽略。 可以使用 unbound-checkconf(8) 工具在使用前检查 unbound.conf。 EXAMPLE 下面显示了一个示例配置文件。将其复制到 /etc/unbound/unbound.conf 并使用以下命令启动服务器： $ unbound -c /etc/unbound/unbound.conf 大多数设置都是默认值。使用以下命令停止服务器： $ kill `cat /etc/unbound/unbound.pid` 下面是一个最小的配置文件。源代码发行版包含一个带有所有选项的 extensive example.conf 文件。 # unbound.conf(5) unbound(8) 的配置文件。 server: directory: \"/etc/unbound\" username: unbound # 确保 unbound 可以从 chroot 内部访问熵。 # 例如在 Linux 上使用这些命令（在 BSD 上，使用 devfs(8)）： # mount --bind -n /dev/urandom /etc/unbound/dev/urandom # 并且 mount --bind -n /dev/log /etc/unbound/dev/log chroot: \"/etc/unbound\" # logfile: \"/etc/unbound/unbound.log\" #取消注释以使用日志文件。 pidfile: \"/etc/unbound/unbound.pid\" # verbosity: 1 # 取消注释并增加以获取更多日志记录。 # 监听所有接口，应答来自本地子网的查询。 interface: 0.0.0.0 interface: ::0 access-control: 10.0.0.0/8 allow access-control: 2001:DB8::/64 allow FILE FORMAT 关键字之间必须有空格。属性关键字以冒号“:”结尾。 属性后面跟着一个值，或者包含它的属性（在这种情况下它被称为一个子句）。 子句可以在整个文件（或包含的文件）中重复，以将属性分组到同一个子句下。 可以使用 include: 指令包含文件。 它可以出现在任何地方，接受单个文件名作为参数。 处理将继续，就好像被包含文件中的文本被复制到配置文件的那个位置一样。 如果同时使用 chroot，则使用被包含文件的完整路径名有效； 如果守护进程启动的目录等于其 chroot/工作目录，或者在 include 语句之前用 directory: dir 指定了工作目录， 则被包含文件的相对路径名也有效。 可以使用通配符包含多个文件，请参阅 glob(7)。 对于更结构化的包含选项，可以使用 include-toplevel: 指令。 这将关闭当前活动的任何子句（如果有），并强制在被包含的文件中以及此指令之后使用子句。 Server Options 这些选项属于服务器配置中的`server:`部分。 verbosity: 详细程度等级，0级表示无详细信息，仅显示错误。 1级提供操作信息。 2级则包含详细的操作信息，每条查询都有简短说明。 3级深入到查询层面，逐条输出查询信息。 4级揭示算法层面的信息。 5级记录缓存未命中时的客户端标识。 默认级别为1。详细程度也可通过命令行提升，详见unbound(8)手册。 statistics-interval: 打印统计信息到日志的间隔秒数，针对每个线程。 设置为0或\"\"以禁用此功能，默认情况下是禁用的。 直方图统计信息仅在统计间隔期间有回复发送时才会打印， 而请求列表统计信息则会在每个间隔打印（但可能为0）。 这是因为中位数计算需要存在数据。 statistics-cumulative: 若启用此选项，统计信息将自Unbound启动起累计， 且在记录统计后不清除统计计数器。默认设置为`no`。 extended-statistics: 若启用，将从unbound-control(8)打印扩展统计信息。 默认设置为`no`，因为跟踪更多统计信息需要时间。 计数器在unbound-control(8)中列出。 statistics-inhibit-zero: 若启用，值为0的选定扩展统计信息将被抑制 不会在unbound-control(8)中打印。这些包括 查询类型、查询类、查询操作码、回答rcodes（除了 NOERROR、FORMERR、SERVFAIL、NXDOMAIN、NOTIMPL、REFUSED）和RPZ 操作。默认设置为`yes`。 num-threads: 创建用于服务客户端的线程数量。若无需多线程，请设置为1。 port: 服务器响应查询的端口号，默认为53。 interface: 用于连接网络的接口。此接口用于监听来自客户端的查询， 并从中向客户端提供响应。可多次指定以在多个接口上工作。 若未指定，则默认监听本地主机。若使用接口名称而非IP地址， 则采用该接口上的所有IP地址列表。在重新加载（kill -HUP）时， 接口不会变更，仅重启时生效。可通过@端口号（接口与端口号间无空格）指定端口， 未指定时则使用默认端口（来自port设置）。 ip-address: 与 interface 相同：（以便于与nsd.conf兼容）。 interface-automatic: 监听所有（当前及未来）接口上的所有地址， 检测UDP查询的源接口并将其复制到回复中。 这与ip-transparent非常相似，但此选项服务于所有接口， 而使用ip-transparent时，您可以选择Unbound在哪些（未来）接口上提供服务。 此功能尚处于实验阶段，需要您的操作系统支持特定的套接字选项。 默认值为`no`。 interface-automatic-ports: 列出interface-automatic监听的端口号。 若为空，则默认监听默认端口。 端口号在字符串中以空格分隔，默认值为\"\"。 此设置可用于让interface-automatic处理接口， 并通过在列表中包含正常端口号来监听该端口， 同时也可通过将HTTPS或DNS over TLS的端口号加入列表，实现对它们的监听。 outgoing-interface: 用于连接网络的接口。 此接口用于向权威服务器发送查询并接收其回复。 可多次指定以在多个接口上工作。 若未指定，则默认使用所有接口。 您可以在`interface:`和`outgoing-interface:`行中指定相同的接口， 这些接口将同时用于两种目的。 为防止欺骗，出站查询会通过随机选择的出站接口发送。 若指定的是IPv6网段而非单个IPv6地址， 则外发的UDP查询将采用从该网段中随机选取的源地址，以应对欺骗攻击。 此功能要求该IPv6网段需路由至运行Unbound的主机， 并且操作系统需支持非特权非本地绑定（目前仅Linux支持）。 可通过多个`outgoing-interface:`选项指定多个网段， 但切勿同时指定单个IPv6地址与IPv6网段，否则随机化机制将失效。 建议结合`prefer-ip6: yes`使用，以提高选择IPv6域名服务器进行查询的可能性。 在Linux系统上，需执行以下两条命令， 以便利用`freebind`套接字选项接收指定IPv6网段的流量： `ip -6 addr add 你的网段/64 dev lo \u0026\u0026 ip -6 route add local 你的网段/64 dev lo`。 outgoing-range: 要打开的端口数量。 每个线程可打开的文件描述符数量至少为1，默认值取决于编译选项。 较大的数值需要操作系统提供额外资源。 为了获得最佳性能，建议设置一个非常大的值，并利用libevent来实现这一目标。 outgoing-port-permit: 允许 Unbound 打开此端口或端口范围，用于发送查询。 允许更多的出站端口能增强抵御欺骗攻击的能力。 请确保这些端口不被其他守护进程占用。 默认情况下，仅使用 IANA 未分配的 1024 以上端口。 请提供一个端口号或“低-高”形式的范围，中间不要有空格。 `outgoing-port-permit` 和 `outgoing-port-avoid` 语句按照配置文件的顺序逐行处理， 将允许的端口加入并从允许的端口集合中减去避免的端口。 处理开始时，允许的端口集合包含非 IANA 分配的、高于 1024 的端口。 outgoing-port-avoid: 不允许Unbound打开此端口或端口范围用于发送查询。 使用此选项可确保Unbound不会占用其他守护进程所需的端口。 该端口在所有出站接口上均被避开，包括IPv4和IPv6。 默认情况下，仅使用IANA未分配的1024以上端口。 请提供一个端口号或“低-高”形式的范围，中间不要有空格。 outgoing-num-tcp: 为每个线程分配的外发TCP缓冲区数量。 默认值为10。 若设置为0，或当do-tcp为“否”时，将不会向权威服务器发送TCP查询。 对于较大规模的部署，建议适当增加此值。 incoming-num-tcp: 为每个线程分配的入站TCP缓冲区数量。 默认值为10。若设置为0，或当do-tcp为“否”时，将不会接受来自客户端的TCP查询。 对于较大规模的部署，建议适当增加此值。 edns-buffer-size: 作为EDNS重组缓冲区大小通告的字节数。 此值用于通过UDP向对等方发送的数据报中。 实际缓冲区大小由msg-buffer-size决定（适用于TCP和UDP）。 请勿设置高于该值。默认值为1232，这是2020年DNS标志日的推荐值。 设置为512可以规避最严格的路径MTU问题，但被视为极端做法， 因为由此产生的TCP回退量过大（可能也适用于此解析器，建议调整出站TCP数量）。 max-udp-size: 最大UDP响应大小（不适用于TCP响应）。 65536表示禁用UDP响应大小上限，始终采用客户端的选择。 建议值范围为512至4096。 默认值为1232，该默认值与edns-buffer-size的默认设置相同。 stream-wait-size: 用于等待流缓冲区的最大字节数。默认值为4兆字节。 纯数字表示字节，可附加'k'、'm'或'g'分别表示千字节、兆字节或吉字节（1兆字节为1024*1024字节）。 由于TCP和TLS流会排队多个结果，这些缓冲区占用的内存总量不会超过此数值，否则将丢弃响应。 此设置用于管理服务器在高负载下的总内存使用量，同时每个连接上可排队的请求数量也受到限制， 额外的请求将在TCP缓冲区中等待。 msg-buffer-size: 消息缓冲区的字节大小，默认设置为65552字节， 足以容纳64Kb的数据包，这是DNS消息的最大尺寸。 任何超过此大小的消息都无法发送或接收。 为了节省内存，可以减小此值，但某些对DNS数据的请求， 如针对大型资源记录的查询，可能会导致向客户端返回SERVFAIL（服务失败）响应。 msg-cache-size: 消息缓存的大小字节数，默认值为4兆字节。 纯数字表示字节数，可附加'k'、'm'或'g'分别表示千字节、兆字节或吉字节（1兆字节等于1024*1024字节）。 msg-cache-slabs: 消息缓存中的分片数量。分片通过减少线程间的锁争用来提升性能。 必须设置为2的幂次方。将其设置为接近CPU核心数的值是一个合理的估计。 num-queries-per-thread: 每个线程同时处理的查询数量。若需服务的查询超出此限， 且无法通过竞争超时机制（参见jostle-timeout）移除已有查询，则新查询将被丢弃。 此举促使客户端在超时后重新发送请求，为服务器留出时间处理现有查询。 默认值依据编译选项而定，通常为512或1024。 jostle-timeout: 当服务器非常繁忙时使用的超时设置。该值通常设定为能确保一次往返权威服务器的时长。 若查询请求过多，则允许50%的查询完成执行，而另外50%若已超出其允许时间，则会被新到达的查询替换。 此机制旨在防止因慢查询或高查询率导致的服务拒绝。 默认值为200毫秒。 其效果是，对于耗时较长的查询，其每秒查询率（qps）大约为（每线程查询数/2）除以（此类长查询的平均时间）。 而对于短查询，其qps可达到（每线程查询数/2）除以（以整秒计的jostletimeout）， 默认情况下约为（1024/2）* 5 = 2560 qps每线程。 delay-close: 在UDP端口因超时被关闭前，额外延迟时间以毫秒计。 默认值为0，即不启用此功能。 此设置旨在防止来自上游（递归）服务器的延迟响应数据包撞击已关闭的端口， 从而触发各种关闭端口的计数器，例如1500毫秒。 当发生超时时，系统需要额外的套接字来检查数据包的ID和远程IP， 不符合条件的数据包将被计入无效数据包计数器。 udp-connect: 为UDP套接字执行连接操作，以减轻ICMP侧信道泄露风险。默认设置为`yes`。 unknown-server-time-limit: 等待未知服务器响应的毫秒时间。 若您处于较慢的卫星链路环境下，可适当增加此值，例如设为1128毫秒。 这样能避免因超时导致每次初始查询都需要重新发起。默认值为376毫秒。 discard-timeout: 递归请求被丢弃的等待时间，以毫秒计。 此举旨在防止大量回复堆积。 这些请求不会收到回复，工作项将继续递归。 如果启用了服务过期客户端超时，建议此值稍大一些。 建议值为1900毫秒。值为0则禁用此功能。默认值为1900毫秒。 wait-limit: 每个IP地址可等待递归回复的数量。 这为每个IP地址设置了等待递归回复的速率限制，防止大量查询积压等待返回至单一目的地。 若值为0，则禁用等待限制。默认值为1000。 wait-limit-cookie: 对于发送带有有效DNS Cookie查询的IP地址，可等待递归处理的回复数量。 由于Cookie验证了客户端地址，此限制可适当提高，默认值为10000。 wait-limit-netblock: 网段等待限制。若未指定，则采用默认的等待限制值。 系统会根据最具体的网段来确定限制，这对于为特定组、个人或服务器覆盖默认设置非常有用。 值为-1时，表示该网段无等待限制。 默认情况下，回环地址的等待限制网段为-1，即不受限，因为它与网络其他部分隔离，防止伪造数据包。 回环地址127.0.0.0/8和::1/128默认设置为-1。 wait-limit-cookie-netblock: 当查询带有DNS cookie时，针对网段的等待限制。 若未指定，则采用wait-limit-cookie的值。值为-1时，该网段无等待限制。 默认情况下，回环地址127.0.0.0/8和::1/128的等待限制设置为-1。 so-rcvbuf: 如果非零，则设置SO_RCVBUF套接字选项，以在UDP端口53的入站查询上获取更多缓冲区空间。 这样，在繁忙服务器上的短暂流量高峰不会导致丢包（参见netstat -su中的计数器）。 默认值为0（使用系统值）。否则，指定请求的字节数，在繁忙服务器上可尝试“4m”。 操作系统会设定一个上限， 在Linux上，Unbound需要root权限才能突破此限制，或者管理员可以使用sysctl net.core.rmem_max进行调整。 在BSD系统中，需修改/etc/sysctl.conf中的kern.ipc.maxsockbuf。 在OpenBSD上，需更改头文件并重新编译内核。 在Solaris上，使用ndd -set /dev/udp udp_max_buf 8388608进行设置。 so-sndbuf: 若非0，则设置SO_SNDBUF套接字选项，以在UDP端口53的对外查询中获取更多缓冲区空间。 这对于非常繁忙的服务器而言，能有效应对应答流量的突发高峰， 否则可能会记录“发送：资源暂时不可用”的错误，且通过netstat -su也能观察到缓冲区溢出的情况。 默认值为0（使用系统设定值）。指定请求的字节数，在极其繁忙的服务器上可尝试“4m”。 操作系统会设定一个上限， 在Linux上，Unbound需要root权限才能突破此限制，或者管理员可以使用sysctl net.core.wmem_max进行调整。 在BSD和Solaris系统中，更改方式与so-rcvbuf类似。 so-reuseport: 若选择`yes`，则为每个线程开启专用的监听套接字以接收查询， 并尝试在每个套接字上设置SO_REUSEPORT选项。 此举可能更均匀地分配查询至各线程。 默认设置为`yes`。 在Linux系统中，此功能支持内核版本\u003e=3.9。 其他系统如FreeBSD、OSX也可能适用。您可在任何平台及内核上启用此功能， 系统将尝试打开端口并在编译时若该选项可用则传递之； 若成功则使用，失败则静默继续（除非详细级别为3），不采用该选项。 在极高负载情况下，关闭此选项可能更利于查询的均匀分配，此现象在Linux系统（4.4.x版本）中有报告。 ip-transparent: 如果是，则在Unbound监听入站流量的套接字上使用IP_TRANSPARENT套接字选项。 默认情况下为`no`。此选项允许您绑定到非本地接口， 例如，对于将来会存在但目前不存在的IP地址，配合主机故障转移配置使用。 这与interface-automatic非常相似，但后者服务于所有接口， 而通过此选项，您可以选择Unbound将在哪些（未来）接口上提供服务。 在某些系统上，此选项需要Unbound以root权限启动。 在FreeBSD系统上，该选项使用IP_BINDANY，在OpenBSD系统上则使用SO_BINDANY。 ip-freebind: 如果是，则在监听未绑定地址的套接字上使用IP_FREEBIND选项。 默认情况下为`no`。此选项允许您绑定到非本地或不存在的IP地址，例如当网络接口或IP地址不可用时。 该选项仅存在于Linux系统中，同时也可使用类似的ip-transparent选项。 ip-dscp: 传出IP数据包头中区分服务字段（DS）内的区分服务代码点（DSCP）值。 该字段取代了过时的IPv4服务类型字段及IPv6流量类别字段。 rrset-cache-size: RRset缓存的大小以字节数计，默认值为4兆字节。 纯数字表示字节，可附加'k'、'm'或'g'分别表示千字节、兆字节或吉字节（1兆字节等于1024*1024字节）。 rrset-cache-slabs: RRset缓存中的slab数量。slab通过减少线程间的锁争用来提升性能。必须设置为2的幂次方。 cache-max-ttl: RRsets和消息在缓存中的最大生存时间（TTL），默认值为86400秒（1天）。 当TTL到期时，缓存项即视为过期。 可通过设置更低的TTL值，强制解析器频繁查询数据，而不依赖（过大的）TTL值。 下游客户端同样会看到这一较低的TTL设置。 cache-min-ttl: RRsets和消息在缓存中的最小生存时间。默认值为0。 若启用最小值，数据将被缓存超过域名所有者预期的时间，从而减少查询次数以查找数据。 设置为零确保缓存中的数据符合域名所有者的意图， 而较高的值，尤其是超过一小时左右，可能导致缓存数据与实际数据不再匹配，从而引发问题。 cache-max-negative-ttl: 负响应的生存时间上限，这些响应在授权部分包含一个时间受限的SOA记录。 默认值为3600秒。此设置适用于nxdomain（域名不存在）和nodata（无数据）类型的应答。 cache-min-negative-ttl: 负面响应的最小生存时间，这些响应在权威部分包含一个有时间限制的SOA记录。 默认值为0（禁用）。如果此功能被禁用且配置了cache-min-ttl，则后者将生效。 在这种情况下，您可以将其设置为1以遵循上游的TTL。 此设置适用于nxdomain和nodata类型的应答。 infra-host-ttl: 主机缓存中条目的生存时间。该缓存包含往返时间、故障状态及EDNS支持信息。默认值为900。 infra-cache-slabs: 基础设施缓存中的slab数量。slab通过减少线程间的锁争用来提升性能，必须设置为2的幂次方。 infra-cache-numhosts: 缓存信息的主机数量，默认值为10000。 infra-cache-min-rtt: 基础设施缓存中动态重传超时计算的下限值，默认设置为50毫秒。 若使用需更长时间进行递归名称解析的转发器，请适当增加此值。 infra-cache-max-rtt: 基础设施缓存中动态重传超时计算的上限值，默认设置为2分钟。 infra-keep-probing: 若启用此功能，服务器将持续对已宕机的主机进行探测，采用一次一探的模式。 默认设置为`no`。 对于已宕机的主机，例如在单次探测期间未响应者，将被标记为宕机状态， 并可能需要等待 infra-host-ttl 时间后才会再次被探测。 define-tag: \u003c\"list of tags\"\u003e 定义可与本地区域（local-zone）和访问控制（access-control）一同使用的标签。 将列表用引号（\"\"）括起，并在标签之间留出空格。 do-ip4: 启用或禁用是否响应或发起ip4查询。默认设置为`yes`。 do-ip6: 启用或禁用是否响应或发起IPv6查询。默认设置为`yes`。 若禁用，则不会在IPv6上响应查询，也不会通过IPv6向互联网域名服务器发送查询。 此选项可用于关闭IPv6传输以发送DNS流量，但不会影响DNS流量的内容，其中可能包含IPv4和IPv6地址。 prefer-ip4: 若启用此选项，将优先使用IPv4传输向互联网域名服务器发送DNS查询。 默认设置为`no`。 当服务器所在的IPv6网段（整个/64）并非由单一运营商所有， 且该网段/64的信誉存在问题时，此选项尤为有用， 此时使用IPv4可利用上游服务器已有的IPv4过滤机制。 prefer-ip6: 若启用，将优先使用IPv6传输向互联网域名服务器发送DNS查询。默认设置为否。 do-udp: 启用或禁用是否响应或发起UDP查询。默认设置为`yes`。 do-tcp: 启用或禁用TCP查询的应答与发起，默认设置为`yes`。 tcp-mss: 服务器响应查询时，TCP套接字的最大段大小（MSS）。 设置低于以太网常见MSS的值（例如1220）可解决路径MTU问题。 需注意，并非所有平台都支持通过套接字选项设置MSS（TCP_MAXSEG）。 默认情况下，MSS由接口MTU及服务器与客户端之间的协商决定，采用系统默认值。 outgoing-tcp-mss: TCP套接字用于发出查询（从Unbound到其他服务器）的最大段大小（MSS）。 设置低于以太网常见MSS的值（例如1220）可解决路径MTU问题。 需要注意的是，并非所有平台都支持通过套接字选项设置MSS（TCP_MAXSEG）。 默认情况下，MSS由接口MTU及Unbound与其他服务器之间的协商决定，采用系统默认值。 tcp-idle-timeout: Unbound在TCP连接上等待查询的时长，若超时则关闭连接。 此选项默认值为30000毫秒。 当空闲的入站TCP缓冲区数量低于配置总数的50%时，该选项值会逐步降低： 首先降至配置值的1%，若空闲缓冲区进一步低于总数的35%，则降至配置值的0.2%， 最终若空闲缓冲区低于总数的20%，则降至0。 无论采用何种选项值，最小超时时间均保持为200毫秒。 若启用了edns-tcp-keepalive，此设置将被edns-tcp-keepalive-timeout覆盖。 tcp-reuse-timeout: Unbound 期间将保持与权威服务器的 TCP 持久连接开启。此选项默认值为 60000 毫秒。 max-reuse-tcp-queries: 在持久TCP连接上可发送的最大查询数量，此选项默认设置为200次查询。 tcp-auth-query-timeout: TCP查询认证服务器的超时时间，以毫秒为单位。此选项默认值为3000毫秒。 edns-tcp-keepalive: 启用或禁用EDNS TCP保持连接功能。默认设置为`no`。 edns-tcp-keepalive-timeout: 当启用edns-tcp-keepalive时，此设置将覆盖tcp-idle-timeout。 若客户端支持EDNS TCP保持连接选项，Unbound会向客户端发送超时值， 以促使客户端在服务器超时前关闭连接。 此选项默认值为120000毫秒。 sock-queue-timeout: 在套接字缓冲区中等待过久的UDP查询可被丢弃。 默认值为0，即禁用此功能。 时间以秒为单位设置，3秒可能是一个合适的值，用于忽略那些客户端可能已不再需要回复的旧查询。 这种情况可能发生在主机暂时无法处理查询时，例如Unbound未运行，之后又重新启用。 该功能利用了时间戳套接字选项。 tcp-upstream: 启用或禁用上游查询是否仅使用TCP进行传输。 默认设置为`no`。在隧道场景中非常有用。 如果设置为否，您可以通过分别使用forward-tcp-upstream或stub-tcp-upstream， 仅为选定的转发区域或存根区域指定TCP传输。 udp-upstream-without-downstream: 即使do-udp设置为否，也启用UDP上行。 默认情况下为否，此设置不会改变任何现有配置。 对于TLS服务提供商而言，若希望禁止UDP下行但需通过UDP获取上行数据，此功能尤为实用。 tls-upstream: 启用或禁用上游查询是否仅使用TLS进行传输。 默认值为`no`。在隧道场景中非常有用。 TLS包含以TCP线格式传输的纯DNS数据。 另一台服务器必须支持此功能（参见tls-service-key）。 如果启用此选项，还需配置tls-cert-bundle或使用tls-win-cert、tls-system-cert加载CA证书， 否则连接无法进行身份验证。 此选项为所有上游查询启用TLS，但如果不设置此选项， 可以通过forward-tls-upstream为特定转发区域单独配置TLS， 同样适用于stub-tls-upstream。如果启用了tls-upstream选项， 则对所有转发和存根区域生效，此时forward-tls-upstream和stub-tls-upstream选项将被忽略， 视为已设置为`yes`。 ssl-upstream: tls-upstream 的替代语法。若配置文件中两者均存在，则以最后一项为准。 tls-service-key: 若启用此功能，服务器将在通过tls-port或https-port隐式或显式标记的TCP端口上 提供DNS-over-TLS或DNS-over-HTTPS服务。 配置文件必须包含TLS会话的私钥，公钥证书则位于tls-service-pem文件中，且若指定了tls-service-key， 也必须同时指定。 默认值为空，即关闭状态。 启用或禁用此服务需重启服务器（仅重载配置不够），因为密钥读取需在持有root权限及chroot（如有）之前进行。 通过tls-port:和https-port:隐式或显式启用的端口不提供常规的DNS TCP服务。 Unbound需编译时包含libnghttp2以支持DNS-over-HTTPS。 ssl-service-key: tls-service-key 的替代语法。 tls-service-pem: 用于TLS服务的公钥证书pem文件。默认值为\"\"，表示关闭。 ssl-service-pem: tls-service-pem 的替代语法。 tls-port: 提供TCP TLS服务的端口号，默认为853，只有配置了该端口号作为@number的接口才能获得TLS服务。 ssl-port: tls端口的替代语法。 tls-cert-bundle: 若为空或\"\"，则不使用任何文件。 请将其设置为证书包文件，例如\"/etc/pki/tls/certs/ca-bundle.crt\"。 这些证书用于验证与外部对等方建立的连接，如认证区域URL及DNS over TLS连接。 该文件在启动时、权限降级和chroot之前被读取。 ssl-cert-bundle: tls-cert-bundle 的替代语法。 tls-win-cert: 将系统证书添加到认证所需的证书包中。 若无证书包，则仅使用这些证书。 默认情况下不启用此功能。 在Windows系统上，此选项会使用证书存储中的证书。 在其他系统上，请使用`tls-cert-bundle`选项来启用系统证书。 tls-system-cert: 此设置与tls-win-cert设置相同，只是名称不同，因为它并非专为Windows设计。 tls-additional-port: 将端口号列为tls-additional-port，并在定义接口时（例如使用@port后缀）， 作为此端口号，它们将提供DNS over TLS服务。 可列出多个，每个端口号单独一行声明。 tls-session-ticket-keys: 若非空，则列出包含80字节随机内容的文件， 这些文件用于为使用Unbound服务器的客户端执行TLS会话恢复。 这些文件内含有TLS会话票据的密钥。 首个密钥用于加密和解密TLS会话票据，其余密钥仅用于解密。 通过生成新的首个文件，并在其后暂时保留旧文件以允许解密，可以实现密钥的轮换。 待客户端不再使用旧密钥后，即可移除旧密钥。 创建此类文件的一种方法是使用命令`dd if=/dev/random bs=1 count=80 of=ticket.dat`。 若需创建第二个密钥，其前16字节应与旧密钥不同，这部分用于标识密钥。 随后是32字节的随机数据作为AES密钥，再接着32字节的随机数据作为HMAC密钥。 tls-ciphers: 设置服务TLS时允许的加密套件列表。使用\"\"表示默认值，且此为默认设置。 tls-ciphersuites: 设置服务TLS时允许的加密套件列表，适用于较新的TLS 1.3连接。 使用\"\"表示采用默认值，这也是默认设置。 pad-responses: 若启用此功能，包含EDNS填充选项的TLS服务查询将导致响应被填充至最接近pad-responses-block-size指定大小的倍数。默认设置为`yes`。 pad-responses-block-size: 用于填充通过TLS服务的响应的块大小。仅对填充查询的响应进行填充。默认值为468。 pad-queries: 若启用此功能，所有通过TLS上游发送的查询将被填充至最接近pad-queries-block-size指定大小的倍数。 默认设置为`yes`。 pad-queries-block-size: 用于填充通过TLS上游发送的查询的块大小，默认值为128。 tls-use-sni: 启用或禁用在TLS连接上发送SNI扩展。默认值为`yes`。更改此值需重新加载配置。 https-port: 提供DNS-over-HTTPS服务的端口号，默认443，只有配置了该端口号作为@number的接口才能获得HTTPS服务。 http-endpoint: 提供DNS-over-HTTPS服务的HTTP端点，默认为\"/dns-query\"。 http-max-streams: 用于DNS-over-HTTPS连接的HTTP/2 SETTINGS帧中SETTINGS_MAX_CONCURRENT_STREAMS参数的数值，默认设置为100。 http-query-buffer-size: 所有HTTP/2查询缓冲区合并使用的最大字节数。 这些缓冲区包含等待请求流完成的（部分）DNS查询。 对于超出此限制的流，将发送RST_STREAM帧。 默认值为4兆字节。纯数字表示字节，可附加'k'、'm'或'g'分别表示千字节、兆字节或吉字节（1兆字节等于1024*1024字节）。 http-response-buffer-size: 所有HTTP/2响应缓冲区合并使用的最大字节数。 这些缓冲区包含等待写回客户端的DNS响应。 对于超出此限制的流，将发送RST_STREAM帧。默认值为4兆字节。 纯数字表示字节，可附加'k'、'm'或'g'分别表示千字节、兆字节或吉字节（1兆字节等于1024*1024字节）。 http-nodelay: 在用于提供DNS-over-HTTPS服务的套接字上设置TCP_NODELAY选项。若该选项不可用，则忽略。默认值为`yes`。 http-notls-downstream: 禁用下游DNS-over-HTTP连接的TLS使用。适用于本地后端服务器。默认设置为`no`。 proxy-protocol-port: 将端口号列为代理协议端口（proxy-protocol-port）， 并在定义接口时，如使用@port后缀，指定为此端口号， 这些接口将支持并预期接收PROXYv2协议。 在此情况下，代理地址仅用于网络通信及初始的访问控制列表（ACL，检查代理本身是否被配置拒绝）。 随后，被代理的地址（如有）将作为真实客户端地址， 并在日志记录、ACL、DNSTAP、RPZ及IP限速等适用场景中使用。 PROXYv2协议支持UDP和TCP/TLS监听接口，但在DoH、DoQ或DNSCrypt监听接口上不支持PROXYv2。 可列出多个端口，每个端口单独一行声明。 quic-port: The port number on which to provide DNS-over-QUIC service, de- fault 853, only interfaces configured with that port number as @number get the QUIC service. The interface uses QUIC for the UDP traffic on that port number. quic-size: Maximum number of bytes for all QUIC buffers and data combined. Default is 8 megabytes. A plain number is in bytes, append 'k', 'm' or 'g' for kilobytes, megabytes or gigabytes (1024*1024 bytes in a megabyte). New connections receive connection refused when the limit is exceeded. New streams are reset when the limit is exceeded. use-systemd: Enable or disable systemd socket activation. Default is no. do-daemonize: Enable or disable whether the Unbound server forks into the background as a daemon. Set the value to no when Unbound runs as systemd service. Default is yes. tcp-connection-limit: Allow up to limit simultaneous TCP connections from the given netblock. When at the limit, further connections are accepted but closed immediately. This option is experimental at this time. access-control: Specify treatment of incoming queries from their originating IP address. Queries can be allowed to have access to this server that gives DNS answers, or refused, with other actions possible. The IP address range can be specified as a netblock, it is pos- sible to give the statement several times in order to specify the treatment of different netblocks. The netblock is given as an IP4 or IP6 address with /size ap- pended for a classless network block. The action can be deny, refuse, allow, allow_setrd, allow_snoop, allow_cookie, deny_non_local or refuse_non_local. The most specific netblock match is used, if none match refuse is used. The order of the access-control statements therefore does not matter. The deny action stops queries from hosts from that netblock. The refuse action stops queries too, but sends a DNS rcode RE- FUSED error message back. The allow action gives access to clients from that netblock. It gives only access for recursion clients (which is what almost all clients need). Nonrecursive queries are refused. The allow action does allow nonrecursive queries to access the local-data that is configured. The reason is that this does not involve the Unbound server recursive lookup algorithm, and sta- tic data is served in the reply. This supports normal opera- tions where nonrecursive queries are made for the authoritative data. For nonrecursive queries any replies from the dynamic cache are refused. The allow_setrd action ignores the recursion desired (RD) bit and treats all requests as if the recursion desired bit is set. Note that this behavior violates RFC 1034 which states that a name server should never perform recursive service unless asked via the RD bit since this interferes with trouble shooting of name servers and their databases. This prohibited behavior may be useful if another DNS server must forward requests for spe- cific zones to a resolver DNS server, but only supports stub do- mains and sends queries to the resolver DNS server with the RD bit cleared. The allow_snoop action gives nonrecursive access too. This give both recursive and non recursive access. The name allow_snoop refers to cache snooping, a technique to use nonrecursive queries to examine the cache contents (for malicious acts). However, nonrecursive queries can also be a valuable debugging tool (when you want to examine the cache contents). In that case use allow_snoop for your administration host. The allow_cookie action allows access only to UDP queries that contain a valid DNS Cookie as specified in RFC 7873 and RFC 9018, when the answer-cookie option is enabled. UDP queries containing only a DNS Client Cookie and no Server Cookie, or an invalid DNS Cookie, will receive a BADCOOKIE response including a newly generated DNS Cookie, allowing clients to retry with that DNS Cookie. The allow_cookie action will also accept re- quests over stateful transports, regardless of the presence of an DNS Cookie and regardless of the answer-cookie setting. UDP queries without a DNS Cookie receive REFUSED responses with the TC flag set, that may trigger fall back to TCP for those clients. By default only localhost (the 127.0.0.0/8 IP netblock, not the loopback interface) is implicitly allowed, the rest is refused. The default is refused, because that is protocol-friendly. The DNS protocol is not designed to handle dropped packets due to policy, and dropping may result in (possibly excessive) retried queries. The deny_non_local and refuse_non_local settings are for hosts that are only allowed to query for the authoritative local-data, they are not allowed full recursion but only the static data. With deny_non_local, messages that are disallowed are dropped, with refuse_non_local they receive error code REFUSED. access-control-tag: \u003c\"list of tags\"\u003e Assign tags to access-control elements. Clients using this ac- cess control element use localzones that are tagged with one of these tags. Tags must be defined in define-tags. Enclose list of tags in quotes (\"\") and put spaces between tags. If ac- cess-control-tag is configured for a netblock that does not have an access-control, an access-control element with action allow is configured for this netblock. access-control-tag-action: Set action for particular tag for given access control element. If you have multiple tag values, the tag used to lookup the ac- tion is the first tag match between access-control-tag and lo- cal-zone-tag where \"first\" comes from the order of the define- tag values. access-control-tag-data: \u003c\"resource record string\"\u003e Set redirect data for particular tag for given access control element. access-control-view: Set view for given access control element. interface-action: Similar to access-control: but for interfaces. The action is the same as the ones defined under access-con- trol:. Interfaces are refused by default. By default only lo- calhost (the 127.0.0.0/8 IP netblock, not the loopback inter- face) is implicitly allowed through the default access-control: behavior. This also means that any attempt to use the inter- face-*: options for the loopback interface will not work as they will be overridden by the implicit default \"access-control: 127.0.0.0/8 allow\" option. Note that the interface needs to be already specified with in- terface: and that any access-control*: setting overrides all in- terface-*: settings for targeted clients. interface-tag: \u003c\"list of tags\"\u003e Similar to access-control-tag: but for interfaces. Note that the interface needs to be already specified with in- terface: and that any access-control*: setting overrides all in- terface-*: settings for targeted clients. interface-tag-action: ","wordCount":"19242","inLanguage":"en","datePublished":"2025-05-22T12:17:40+08:00","dateModified":"2025-05-22T12:17:40+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://tnzzz.top/posts/%E6%96%87%E6%A1%A3/unbound/"},"publisher":{"@type":"Organization","name":"明天吃什么？","logo":{"@type":"ImageObject","url":"https://tnzzz.top/favicon.ico"}}}</script></head><body id=top><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "ccaaab867b5e4fe590baed8e233a2d10"}'></script><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://tnzzz.top/ accesskey=h title="明天吃什么？ (Alt + H)">明天吃什么？</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://tnzzz.top/categories/ title=分类><span>分类</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">unbound 配置文件中文文档</h1><div class=post-meta><span title='2025-05-22 12:17:40 +0800 +0800'>May 22, 2025</span></div></header><div class=post-content><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext><span style=display:flex><span>unbound.conf(5)                 unbound 1.23.0                 unbound.conf(5)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>NAME
</span></span><span style=display:flex><span>    unbound.conf - Unbound 配置文件.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>SYNOPSIS
</span></span><span style=display:flex><span>    unbound.conf
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>DESCRIPTION
</span></span><span style=display:flex><span>    unbound.conf 用于配置 unbound(8)。文件格式包含属性和值。某些属性内部包含其他属性。表示法为：attribute: value。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    注释以 # 开头，并持续到行尾。空行和行首的空白将被忽略。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    可以使用 unbound-checkconf(8) 工具在使用前检查 unbound.conf。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>EXAMPLE
</span></span><span style=display:flex><span>    下面显示了一个示例配置文件。将其复制到 /etc/unbound/unbound.conf 并使用以下命令启动服务器：
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        $ unbound -c /etc/unbound/unbound.conf
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    大多数设置都是默认值。使用以下命令停止服务器：
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        $ kill `cat /etc/unbound/unbound.pid`
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    下面是一个最小的配置文件。源代码发行版包含一个带有所有选项的 extensive example.conf 文件。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    # unbound.conf(5) unbound(8) 的配置文件。
</span></span><span style=display:flex><span>    server:
</span></span><span style=display:flex><span>        directory: &#34;/etc/unbound&#34;
</span></span><span style=display:flex><span>        username: unbound
</span></span><span style=display:flex><span>        # 确保 unbound 可以从 chroot 内部访问熵。
</span></span><span style=display:flex><span>        # 例如在 Linux 上使用这些命令（在 BSD 上，使用 devfs(8)）：
</span></span><span style=display:flex><span>        #      mount --bind -n /dev/urandom /etc/unbound/dev/urandom
</span></span><span style=display:flex><span>        # 并且 mount --bind -n /dev/log /etc/unbound/dev/log
</span></span><span style=display:flex><span>        chroot: &#34;/etc/unbound&#34;
</span></span><span style=display:flex><span>        # logfile: &#34;/etc/unbound/unbound.log&#34;  #取消注释以使用日志文件。
</span></span><span style=display:flex><span>        pidfile: &#34;/etc/unbound/unbound.pid&#34;
</span></span><span style=display:flex><span>        # verbosity: 1      # 取消注释并增加以获取更多日志记录。
</span></span><span style=display:flex><span>        # 监听所有接口，应答来自本地子网的查询。
</span></span><span style=display:flex><span>        interface: 0.0.0.0
</span></span><span style=display:flex><span>        interface: ::0
</span></span><span style=display:flex><span>        access-control: 10.0.0.0/8 allow
</span></span><span style=display:flex><span>        access-control: 2001:DB8::/64 allow
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>FILE FORMAT
</span></span><span style=display:flex><span>    关键字之间必须有空格。属性关键字以冒号“:”结尾。
</span></span><span style=display:flex><span>    属性后面跟着一个值，或者包含它的属性（在这种情况下它被称为一个子句）。
</span></span><span style=display:flex><span>    子句可以在整个文件（或包含的文件）中重复，以将属性分组到同一个子句下。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    可以使用 include: 指令包含文件。
</span></span><span style=display:flex><span>    它可以出现在任何地方，接受单个文件名作为参数。
</span></span><span style=display:flex><span>    处理将继续，就好像被包含文件中的文本被复制到配置文件的那个位置一样。
</span></span><span style=display:flex><span>    如果同时使用 chroot，则使用被包含文件的完整路径名有效；
</span></span><span style=display:flex><span>    如果守护进程启动的目录等于其 chroot/工作目录，或者在 include 语句之前用 directory: dir 指定了工作目录，
</span></span><span style=display:flex><span>    则被包含文件的相对路径名也有效。
</span></span><span style=display:flex><span>    可以使用通配符包含多个文件，请参阅 glob(7)。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    对于更结构化的包含选项，可以使用 include-toplevel: 指令。
</span></span><span style=display:flex><span>    这将关闭当前活动的任何子句（如果有），并强制在被包含的文件中以及此指令之后使用子句。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Server Options
</span></span><span style=display:flex><span>    这些选项属于服务器配置中的`server:`部分。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    verbosity: &lt;number&gt;
</span></span><span style=display:flex><span>            详细程度等级，0级表示无详细信息，仅显示错误。
</span></span><span style=display:flex><span>            1级提供操作信息。
</span></span><span style=display:flex><span>            2级则包含详细的操作信息，每条查询都有简短说明。
</span></span><span style=display:flex><span>            3级深入到查询层面，逐条输出查询信息。
</span></span><span style=display:flex><span>            4级揭示算法层面的信息。
</span></span><span style=display:flex><span>            5级记录缓存未命中时的客户端标识。
</span></span><span style=display:flex><span>            默认级别为1。详细程度也可通过命令行提升，详见unbound(8)手册。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    statistics-interval: &lt;seconds&gt;
</span></span><span style=display:flex><span>            打印统计信息到日志的间隔秒数，针对每个线程。
</span></span><span style=display:flex><span>            设置为0或&#34;&#34;以禁用此功能，默认情况下是禁用的。
</span></span><span style=display:flex><span>            直方图统计信息仅在统计间隔期间有回复发送时才会打印，
</span></span><span style=display:flex><span>            而请求列表统计信息则会在每个间隔打印（但可能为0）。
</span></span><span style=display:flex><span>            这是因为中位数计算需要存在数据。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    statistics-cumulative: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            若启用此选项，统计信息将自Unbound启动起累计，
</span></span><span style=display:flex><span>            且在记录统计后不清除统计计数器。默认设置为`no`。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    extended-statistics: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            若启用，将从unbound-control(8)打印扩展统计信息。
</span></span><span style=display:flex><span>            默认设置为`no`，因为跟踪更多统计信息需要时间。
</span></span><span style=display:flex><span>            计数器在unbound-control(8)中列出。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    statistics-inhibit-zero: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            若启用，值为0的选定扩展统计信息将被抑制
</span></span><span style=display:flex><span>            不会在unbound-control(8)中打印。这些包括
</span></span><span style=display:flex><span>            查询类型、查询类、查询操作码、回答rcodes（除了
</span></span><span style=display:flex><span>            NOERROR、FORMERR、SERVFAIL、NXDOMAIN、NOTIMPL、REFUSED）和RPZ
</span></span><span style=display:flex><span>            操作。默认设置为`yes`。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    num-threads: &lt;number&gt;
</span></span><span style=display:flex><span>            创建用于服务客户端的线程数量。若无需多线程，请设置为1。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    port: &lt;port number&gt;
</span></span><span style=display:flex><span>            服务器响应查询的端口号，默认为53。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    interface: &lt;ip address or interface name [@port]&gt;
</span></span><span style=display:flex><span>            用于连接网络的接口。此接口用于监听来自客户端的查询，
</span></span><span style=display:flex><span>            并从中向客户端提供响应。可多次指定以在多个接口上工作。
</span></span><span style=display:flex><span>            若未指定，则默认监听本地主机。若使用接口名称而非IP地址，
</span></span><span style=display:flex><span>            则采用该接口上的所有IP地址列表。在重新加载（kill -HUP）时，
</span></span><span style=display:flex><span>            接口不会变更，仅重启时生效。可通过@端口号（接口与端口号间无空格）指定端口，
</span></span><span style=display:flex><span>            未指定时则使用默认端口（来自port设置）。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ip-address: &lt;ip address or interface name [@port]&gt;
</span></span><span style=display:flex><span>            与 interface 相同：（以便于与nsd.conf兼容）。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    interface-automatic: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            监听所有（当前及未来）接口上的所有地址，
</span></span><span style=display:flex><span>            检测UDP查询的源接口并将其复制到回复中。
</span></span><span style=display:flex><span>            这与ip-transparent非常相似，但此选项服务于所有接口，
</span></span><span style=display:flex><span>            而使用ip-transparent时，您可以选择Unbound在哪些（未来）接口上提供服务。
</span></span><span style=display:flex><span>            此功能尚处于实验阶段，需要您的操作系统支持特定的套接字选项。
</span></span><span style=display:flex><span>            默认值为`no`。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    interface-automatic-ports: &lt;string&gt;
</span></span><span style=display:flex><span>            列出interface-automatic监听的端口号。
</span></span><span style=display:flex><span>            若为空，则默认监听默认端口。
</span></span><span style=display:flex><span>            端口号在字符串中以空格分隔，默认值为&#34;&#34;。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            此设置可用于让interface-automatic处理接口，
</span></span><span style=display:flex><span>            并通过在列表中包含正常端口号来监听该端口，
</span></span><span style=display:flex><span>            同时也可通过将HTTPS或DNS over TLS的端口号加入列表，实现对它们的监听。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    outgoing-interface: &lt;ip address or ip6 netblock&gt;
</span></span><span style=display:flex><span>            用于连接网络的接口。
</span></span><span style=display:flex><span>            此接口用于向权威服务器发送查询并接收其回复。
</span></span><span style=display:flex><span>            可多次指定以在多个接口上工作。
</span></span><span style=display:flex><span>            若未指定，则默认使用所有接口。
</span></span><span style=display:flex><span>            您可以在`interface:`和`outgoing-interface:`行中指定相同的接口，
</span></span><span style=display:flex><span>            这些接口将同时用于两种目的。
</span></span><span style=display:flex><span>            为防止欺骗，出站查询会通过随机选择的出站接口发送。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            若指定的是IPv6网段而非单个IPv6地址，
</span></span><span style=display:flex><span>            则外发的UDP查询将采用从该网段中随机选取的源地址，以应对欺骗攻击。
</span></span><span style=display:flex><span>            此功能要求该IPv6网段需路由至运行Unbound的主机，
</span></span><span style=display:flex><span>            并且操作系统需支持非特权非本地绑定（目前仅Linux支持）。
</span></span><span style=display:flex><span>            可通过多个`outgoing-interface:`选项指定多个网段，
</span></span><span style=display:flex><span>            但切勿同时指定单个IPv6地址与IPv6网段，否则随机化机制将失效。
</span></span><span style=display:flex><span>            建议结合`prefer-ip6: yes`使用，以提高选择IPv6域名服务器进行查询的可能性。
</span></span><span style=display:flex><span>            在Linux系统上，需执行以下两条命令，
</span></span><span style=display:flex><span>            以便利用`freebind`套接字选项接收指定IPv6网段的流量：
</span></span><span style=display:flex><span>            `ip -6 addr add 你的网段/64 dev lo &amp;&amp; ip -6 route add local 你的网段/64 dev lo`。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    outgoing-range: &lt;number&gt;
</span></span><span style=display:flex><span>            要打开的端口数量。
</span></span><span style=display:flex><span>            每个线程可打开的文件描述符数量至少为1，默认值取决于编译选项。
</span></span><span style=display:flex><span>            较大的数值需要操作系统提供额外资源。
</span></span><span style=display:flex><span>            为了获得最佳性能，建议设置一个非常大的值，并利用libevent来实现这一目标。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    outgoing-port-permit: &lt;port number or range&gt;
</span></span><span style=display:flex><span>            允许 Unbound 打开此端口或端口范围，用于发送查询。
</span></span><span style=display:flex><span>            允许更多的出站端口能增强抵御欺骗攻击的能力。
</span></span><span style=display:flex><span>            请确保这些端口不被其他守护进程占用。
</span></span><span style=display:flex><span>            默认情况下，仅使用 IANA 未分配的 1024 以上端口。
</span></span><span style=display:flex><span>            请提供一个端口号或“低-高”形式的范围，中间不要有空格。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            `outgoing-port-permit` 和 `outgoing-port-avoid` 语句按照配置文件的顺序逐行处理，
</span></span><span style=display:flex><span>            将允许的端口加入并从允许的端口集合中减去避免的端口。
</span></span><span style=display:flex><span>            处理开始时，允许的端口集合包含非 IANA 分配的、高于 1024 的端口。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    outgoing-port-avoid: &lt;port number or range&gt;
</span></span><span style=display:flex><span>            不允许Unbound打开此端口或端口范围用于发送查询。
</span></span><span style=display:flex><span>            使用此选项可确保Unbound不会占用其他守护进程所需的端口。
</span></span><span style=display:flex><span>            该端口在所有出站接口上均被避开，包括IPv4和IPv6。
</span></span><span style=display:flex><span>            默认情况下，仅使用IANA未分配的1024以上端口。
</span></span><span style=display:flex><span>            请提供一个端口号或“低-高”形式的范围，中间不要有空格。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    outgoing-num-tcp: &lt;number&gt;
</span></span><span style=display:flex><span>            为每个线程分配的外发TCP缓冲区数量。
</span></span><span style=display:flex><span>            默认值为10。
</span></span><span style=display:flex><span>            若设置为0，或当do-tcp为“否”时，将不会向权威服务器发送TCP查询。
</span></span><span style=display:flex><span>            对于较大规模的部署，建议适当增加此值。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    incoming-num-tcp: &lt;number&gt;
</span></span><span style=display:flex><span>            为每个线程分配的入站TCP缓冲区数量。
</span></span><span style=display:flex><span>            默认值为10。若设置为0，或当do-tcp为“否”时，将不会接受来自客户端的TCP查询。
</span></span><span style=display:flex><span>            对于较大规模的部署，建议适当增加此值。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    edns-buffer-size: &lt;number&gt;
</span></span><span style=display:flex><span>            作为EDNS重组缓冲区大小通告的字节数。
</span></span><span style=display:flex><span>            此值用于通过UDP向对等方发送的数据报中。
</span></span><span style=display:flex><span>            实际缓冲区大小由msg-buffer-size决定（适用于TCP和UDP）。
</span></span><span style=display:flex><span>            请勿设置高于该值。默认值为1232，这是2020年DNS标志日的推荐值。
</span></span><span style=display:flex><span>            设置为512可以规避最严格的路径MTU问题，但被视为极端做法，
</span></span><span style=display:flex><span>            因为由此产生的TCP回退量过大（可能也适用于此解析器，建议调整出站TCP数量）。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    max-udp-size: &lt;number&gt;
</span></span><span style=display:flex><span>            最大UDP响应大小（不适用于TCP响应）。
</span></span><span style=display:flex><span>            65536表示禁用UDP响应大小上限，始终采用客户端的选择。
</span></span><span style=display:flex><span>            建议值范围为512至4096。
</span></span><span style=display:flex><span>            默认值为1232，该默认值与edns-buffer-size的默认设置相同。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    stream-wait-size: &lt;number&gt;
</span></span><span style=display:flex><span>            用于等待流缓冲区的最大字节数。默认值为4兆字节。
</span></span><span style=display:flex><span>            纯数字表示字节，可附加&#39;k&#39;、&#39;m&#39;或&#39;g&#39;分别表示千字节、兆字节或吉字节（1兆字节为1024*1024字节）。
</span></span><span style=display:flex><span>            由于TCP和TLS流会排队多个结果，这些缓冲区占用的内存总量不会超过此数值，否则将丢弃响应。
</span></span><span style=display:flex><span>            此设置用于管理服务器在高负载下的总内存使用量，同时每个连接上可排队的请求数量也受到限制，
</span></span><span style=display:flex><span>            额外的请求将在TCP缓冲区中等待。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    msg-buffer-size: &lt;number&gt;
</span></span><span style=display:flex><span>            消息缓冲区的字节大小，默认设置为65552字节，
</span></span><span style=display:flex><span>            足以容纳64Kb的数据包，这是DNS消息的最大尺寸。
</span></span><span style=display:flex><span>            任何超过此大小的消息都无法发送或接收。
</span></span><span style=display:flex><span>            为了节省内存，可以减小此值，但某些对DNS数据的请求，
</span></span><span style=display:flex><span>            如针对大型资源记录的查询，可能会导致向客户端返回SERVFAIL（服务失败）响应。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    msg-cache-size: &lt;number&gt;
</span></span><span style=display:flex><span>            消息缓存的大小字节数，默认值为4兆字节。
</span></span><span style=display:flex><span>            纯数字表示字节数，可附加&#39;k&#39;、&#39;m&#39;或&#39;g&#39;分别表示千字节、兆字节或吉字节（1兆字节等于1024*1024字节）。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    msg-cache-slabs: &lt;number&gt;
</span></span><span style=display:flex><span>            消息缓存中的分片数量。分片通过减少线程间的锁争用来提升性能。
</span></span><span style=display:flex><span>            必须设置为2的幂次方。将其设置为接近CPU核心数的值是一个合理的估计。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    num-queries-per-thread: &lt;number&gt;
</span></span><span style=display:flex><span>            每个线程同时处理的查询数量。若需服务的查询超出此限，
</span></span><span style=display:flex><span>            且无法通过竞争超时机制（参见jostle-timeout）移除已有查询，则新查询将被丢弃。
</span></span><span style=display:flex><span>            此举促使客户端在超时后重新发送请求，为服务器留出时间处理现有查询。
</span></span><span style=display:flex><span>            默认值依据编译选项而定，通常为512或1024。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    jostle-timeout: &lt;msec&gt;
</span></span><span style=display:flex><span>            当服务器非常繁忙时使用的超时设置。该值通常设定为能确保一次往返权威服务器的时长。
</span></span><span style=display:flex><span>            若查询请求过多，则允许50%的查询完成执行，而另外50%若已超出其允许时间，则会被新到达的查询替换。
</span></span><span style=display:flex><span>            此机制旨在防止因慢查询或高查询率导致的服务拒绝。
</span></span><span style=display:flex><span>            默认值为200毫秒。
</span></span><span style=display:flex><span>            其效果是，对于耗时较长的查询，其每秒查询率（qps）大约为（每线程查询数/2）除以（此类长查询的平均时间）。
</span></span><span style=display:flex><span>            而对于短查询，其qps可达到（每线程查询数/2）除以（以整秒计的jostletimeout），
</span></span><span style=display:flex><span>            默认情况下约为（1024/2）* 5 = 2560 qps每线程。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    delay-close: &lt;msec&gt;
</span></span><span style=display:flex><span>            在UDP端口因超时被关闭前，额外延迟时间以毫秒计。
</span></span><span style=display:flex><span>            默认值为0，即不启用此功能。
</span></span><span style=display:flex><span>            此设置旨在防止来自上游（递归）服务器的延迟响应数据包撞击已关闭的端口，
</span></span><span style=display:flex><span>            从而触发各种关闭端口的计数器，例如1500毫秒。
</span></span><span style=display:flex><span>            当发生超时时，系统需要额外的套接字来检查数据包的ID和远程IP，
</span></span><span style=display:flex><span>            不符合条件的数据包将被计入无效数据包计数器。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    udp-connect: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            为UDP套接字执行连接操作，以减轻ICMP侧信道泄露风险。默认设置为`yes`。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    unknown-server-time-limit: &lt;msec&gt;
</span></span><span style=display:flex><span>            等待未知服务器响应的毫秒时间。
</span></span><span style=display:flex><span>            若您处于较慢的卫星链路环境下，可适当增加此值，例如设为1128毫秒。
</span></span><span style=display:flex><span>            这样能避免因超时导致每次初始查询都需要重新发起。默认值为376毫秒。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    discard-timeout: &lt;msec&gt;
</span></span><span style=display:flex><span>            递归请求被丢弃的等待时间，以毫秒计。
</span></span><span style=display:flex><span>            此举旨在防止大量回复堆积。
</span></span><span style=display:flex><span>            这些请求不会收到回复，工作项将继续递归。
</span></span><span style=display:flex><span>            如果启用了服务过期客户端超时，建议此值稍大一些。
</span></span><span style=display:flex><span>            建议值为1900毫秒。值为0则禁用此功能。默认值为1900毫秒。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    wait-limit: &lt;number&gt;
</span></span><span style=display:flex><span>            每个IP地址可等待递归回复的数量。
</span></span><span style=display:flex><span>            这为每个IP地址设置了等待递归回复的速率限制，防止大量查询积压等待返回至单一目的地。
</span></span><span style=display:flex><span>            若值为0，则禁用等待限制。默认值为1000。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    wait-limit-cookie: &lt;number&gt;
</span></span><span style=display:flex><span>            对于发送带有有效DNS Cookie查询的IP地址，可等待递归处理的回复数量。
</span></span><span style=display:flex><span>            由于Cookie验证了客户端地址，此限制可适当提高，默认值为10000。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    wait-limit-netblock: &lt;netblock&gt; &lt;number&gt;
</span></span><span style=display:flex><span>            网段等待限制。若未指定，则采用默认的等待限制值。
</span></span><span style=display:flex><span>            系统会根据最具体的网段来确定限制，这对于为特定组、个人或服务器覆盖默认设置非常有用。
</span></span><span style=display:flex><span>            值为-1时，表示该网段无等待限制。
</span></span><span style=display:flex><span>            默认情况下，回环地址的等待限制网段为-1，即不受限，因为它与网络其他部分隔离，防止伪造数据包。
</span></span><span style=display:flex><span>            回环地址127.0.0.0/8和::1/128默认设置为-1。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    wait-limit-cookie-netblock: &lt;netblock&gt; &lt;number&gt;
</span></span><span style=display:flex><span>            当查询带有DNS cookie时，针对网段的等待限制。
</span></span><span style=display:flex><span>            若未指定，则采用wait-limit-cookie的值。值为-1时，该网段无等待限制。
</span></span><span style=display:flex><span>            默认情况下，回环地址127.0.0.0/8和::1/128的等待限制设置为-1。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    so-rcvbuf: &lt;number&gt;
</span></span><span style=display:flex><span>            如果非零，则设置SO_RCVBUF套接字选项，以在UDP端口53的入站查询上获取更多缓冲区空间。
</span></span><span style=display:flex><span>            这样，在繁忙服务器上的短暂流量高峰不会导致丢包（参见netstat -su中的计数器）。
</span></span><span style=display:flex><span>            默认值为0（使用系统值）。否则，指定请求的字节数，在繁忙服务器上可尝试“4m”。
</span></span><span style=display:flex><span>            操作系统会设定一个上限，
</span></span><span style=display:flex><span>            在Linux上，Unbound需要root权限才能突破此限制，或者管理员可以使用sysctl net.core.rmem_max进行调整。
</span></span><span style=display:flex><span>            在BSD系统中，需修改/etc/sysctl.conf中的kern.ipc.maxsockbuf。
</span></span><span style=display:flex><span>            在OpenBSD上，需更改头文件并重新编译内核。
</span></span><span style=display:flex><span>            在Solaris上，使用ndd -set /dev/udp udp_max_buf 8388608进行设置。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    so-sndbuf: &lt;number&gt;
</span></span><span style=display:flex><span>            若非0，则设置SO_SNDBUF套接字选项，以在UDP端口53的对外查询中获取更多缓冲区空间。
</span></span><span style=display:flex><span>            这对于非常繁忙的服务器而言，能有效应对应答流量的突发高峰，
</span></span><span style=display:flex><span>            否则可能会记录“发送：资源暂时不可用”的错误，且通过netstat -su也能观察到缓冲区溢出的情况。
</span></span><span style=display:flex><span>            默认值为0（使用系统设定值）。指定请求的字节数，在极其繁忙的服务器上可尝试“4m”。
</span></span><span style=display:flex><span>            操作系统会设定一个上限，
</span></span><span style=display:flex><span>            在Linux上，Unbound需要root权限才能突破此限制，或者管理员可以使用sysctl net.core.wmem_max进行调整。
</span></span><span style=display:flex><span>            在BSD和Solaris系统中，更改方式与so-rcvbuf类似。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    so-reuseport: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            若选择`yes`，则为每个线程开启专用的监听套接字以接收查询，
</span></span><span style=display:flex><span>            并尝试在每个套接字上设置SO_REUSEPORT选项。
</span></span><span style=display:flex><span>            此举可能更均匀地分配查询至各线程。
</span></span><span style=display:flex><span>            默认设置为`yes`。
</span></span><span style=display:flex><span>            在Linux系统中，此功能支持内核版本&gt;=3.9。
</span></span><span style=display:flex><span>            其他系统如FreeBSD、OSX也可能适用。您可在任何平台及内核上启用此功能，
</span></span><span style=display:flex><span>            系统将尝试打开端口并在编译时若该选项可用则传递之；
</span></span><span style=display:flex><span>            若成功则使用，失败则静默继续（除非详细级别为3），不采用该选项。
</span></span><span style=display:flex><span>            在极高负载情况下，关闭此选项可能更利于查询的均匀分配，此现象在Linux系统（4.4.x版本）中有报告。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ip-transparent: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            如果是，则在Unbound监听入站流量的套接字上使用IP_TRANSPARENT套接字选项。
</span></span><span style=display:flex><span>            默认情况下为`no`。此选项允许您绑定到非本地接口，
</span></span><span style=display:flex><span>            例如，对于将来会存在但目前不存在的IP地址，配合主机故障转移配置使用。
</span></span><span style=display:flex><span>            这与interface-automatic非常相似，但后者服务于所有接口，
</span></span><span style=display:flex><span>            而通过此选项，您可以选择Unbound将在哪些（未来）接口上提供服务。
</span></span><span style=display:flex><span>            在某些系统上，此选项需要Unbound以root权限启动。
</span></span><span style=display:flex><span>            在FreeBSD系统上，该选项使用IP_BINDANY，在OpenBSD系统上则使用SO_BINDANY。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ip-freebind: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            如果是，则在监听未绑定地址的套接字上使用IP_FREEBIND选项。
</span></span><span style=display:flex><span>            默认情况下为`no`。此选项允许您绑定到非本地或不存在的IP地址，例如当网络接口或IP地址不可用时。
</span></span><span style=display:flex><span>            该选项仅存在于Linux系统中，同时也可使用类似的ip-transparent选项。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ip-dscp: &lt;number&gt;
</span></span><span style=display:flex><span>            传出IP数据包头中区分服务字段（DS）内的区分服务代码点（DSCP）值。
</span></span><span style=display:flex><span>            该字段取代了过时的IPv4服务类型字段及IPv6流量类别字段。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    rrset-cache-size: &lt;number&gt;
</span></span><span style=display:flex><span>            RRset缓存的大小以字节数计，默认值为4兆字节。
</span></span><span style=display:flex><span>            纯数字表示字节，可附加&#39;k&#39;、&#39;m&#39;或&#39;g&#39;分别表示千字节、兆字节或吉字节（1兆字节等于1024*1024字节）。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    rrset-cache-slabs: &lt;number&gt;
</span></span><span style=display:flex><span>            RRset缓存中的slab数量。slab通过减少线程间的锁争用来提升性能。必须设置为2的幂次方。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    cache-max-ttl: &lt;seconds&gt;
</span></span><span style=display:flex><span>            RRsets和消息在缓存中的最大生存时间（TTL），默认值为86400秒（1天）。
</span></span><span style=display:flex><span>            当TTL到期时，缓存项即视为过期。
</span></span><span style=display:flex><span>            可通过设置更低的TTL值，强制解析器频繁查询数据，而不依赖（过大的）TTL值。
</span></span><span style=display:flex><span>            下游客户端同样会看到这一较低的TTL设置。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    cache-min-ttl: &lt;seconds&gt;
</span></span><span style=display:flex><span>            RRsets和消息在缓存中的最小生存时间。默认值为0。
</span></span><span style=display:flex><span>            若启用最小值，数据将被缓存超过域名所有者预期的时间，从而减少查询次数以查找数据。
</span></span><span style=display:flex><span>            设置为零确保缓存中的数据符合域名所有者的意图，
</span></span><span style=display:flex><span>            而较高的值，尤其是超过一小时左右，可能导致缓存数据与实际数据不再匹配，从而引发问题。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    cache-max-negative-ttl: &lt;seconds&gt;
</span></span><span style=display:flex><span>            负响应的生存时间上限，这些响应在授权部分包含一个时间受限的SOA记录。
</span></span><span style=display:flex><span>            默认值为3600秒。此设置适用于nxdomain（域名不存在）和nodata（无数据）类型的应答。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    cache-min-negative-ttl: &lt;seconds&gt;
</span></span><span style=display:flex><span>            负面响应的最小生存时间，这些响应在权威部分包含一个有时间限制的SOA记录。
</span></span><span style=display:flex><span>            默认值为0（禁用）。如果此功能被禁用且配置了cache-min-ttl，则后者将生效。
</span></span><span style=display:flex><span>            在这种情况下，您可以将其设置为1以遵循上游的TTL。
</span></span><span style=display:flex><span>            此设置适用于nxdomain和nodata类型的应答。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    infra-host-ttl: &lt;seconds&gt;
</span></span><span style=display:flex><span>            主机缓存中条目的生存时间。该缓存包含往返时间、故障状态及EDNS支持信息。默认值为900。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    infra-cache-slabs: &lt;number&gt;
</span></span><span style=display:flex><span>            基础设施缓存中的slab数量。slab通过减少线程间的锁争用来提升性能，必须设置为2的幂次方。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    infra-cache-numhosts: &lt;number&gt;
</span></span><span style=display:flex><span>            缓存信息的主机数量，默认值为10000。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    infra-cache-min-rtt: &lt;msec&gt;
</span></span><span style=display:flex><span>            基础设施缓存中动态重传超时计算的下限值，默认设置为50毫秒。
</span></span><span style=display:flex><span>            若使用需更长时间进行递归名称解析的转发器，请适当增加此值。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    infra-cache-max-rtt: &lt;msec&gt;
</span></span><span style=display:flex><span>            基础设施缓存中动态重传超时计算的上限值，默认设置为2分钟。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    infra-keep-probing: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            若启用此功能，服务器将持续对已宕机的主机进行探测，采用一次一探的模式。
</span></span><span style=display:flex><span>            默认设置为`no`。
</span></span><span style=display:flex><span>            对于已宕机的主机，例如在单次探测期间未响应者，将被标记为宕机状态，
</span></span><span style=display:flex><span>            并可能需要等待 infra-host-ttl 时间后才会再次被探测。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    define-tag: &lt;&#34;list of tags&#34;&gt;
</span></span><span style=display:flex><span>            定义可与本地区域（local-zone）和访问控制（access-control）一同使用的标签。
</span></span><span style=display:flex><span>            将列表用引号（&#34;&#34;）括起，并在标签之间留出空格。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    do-ip4: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            启用或禁用是否响应或发起ip4查询。默认设置为`yes`。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    do-ip6: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            启用或禁用是否响应或发起IPv6查询。默认设置为`yes`。
</span></span><span style=display:flex><span>            若禁用，则不会在IPv6上响应查询，也不会通过IPv6向互联网域名服务器发送查询。
</span></span><span style=display:flex><span>            此选项可用于关闭IPv6传输以发送DNS流量，但不会影响DNS流量的内容，其中可能包含IPv4和IPv6地址。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    prefer-ip4: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            若启用此选项，将优先使用IPv4传输向互联网域名服务器发送DNS查询。
</span></span><span style=display:flex><span>            默认设置为`no`。
</span></span><span style=display:flex><span>            当服务器所在的IPv6网段（整个/64）并非由单一运营商所有，
</span></span><span style=display:flex><span>            且该网段/64的信誉存在问题时，此选项尤为有用，
</span></span><span style=display:flex><span>            此时使用IPv4可利用上游服务器已有的IPv4过滤机制。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    prefer-ip6: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            若启用，将优先使用IPv6传输向互联网域名服务器发送DNS查询。默认设置为否。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    do-udp: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            启用或禁用是否响应或发起UDP查询。默认设置为`yes`。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    do-tcp: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            启用或禁用TCP查询的应答与发起，默认设置为`yes`。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    tcp-mss: &lt;number&gt;
</span></span><span style=display:flex><span>            服务器响应查询时，TCP套接字的最大段大小（MSS）。
</span></span><span style=display:flex><span>            设置低于以太网常见MSS的值（例如1220）可解决路径MTU问题。
</span></span><span style=display:flex><span>            需注意，并非所有平台都支持通过套接字选项设置MSS（TCP_MAXSEG）。
</span></span><span style=display:flex><span>            默认情况下，MSS由接口MTU及服务器与客户端之间的协商决定，采用系统默认值。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    outgoing-tcp-mss: &lt;number&gt;
</span></span><span style=display:flex><span>            TCP套接字用于发出查询（从Unbound到其他服务器）的最大段大小（MSS）。
</span></span><span style=display:flex><span>            设置低于以太网常见MSS的值（例如1220）可解决路径MTU问题。
</span></span><span style=display:flex><span>            需要注意的是，并非所有平台都支持通过套接字选项设置MSS（TCP_MAXSEG）。
</span></span><span style=display:flex><span>            默认情况下，MSS由接口MTU及Unbound与其他服务器之间的协商决定，采用系统默认值。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    tcp-idle-timeout: &lt;msec&gt;
</span></span><span style=display:flex><span>            Unbound在TCP连接上等待查询的时长，若超时则关闭连接。
</span></span><span style=display:flex><span>            此选项默认值为30000毫秒。
</span></span><span style=display:flex><span>            当空闲的入站TCP缓冲区数量低于配置总数的50%时，该选项值会逐步降低：
</span></span><span style=display:flex><span>            首先降至配置值的1%，若空闲缓冲区进一步低于总数的35%，则降至配置值的0.2%，
</span></span><span style=display:flex><span>            最终若空闲缓冲区低于总数的20%，则降至0。
</span></span><span style=display:flex><span>            无论采用何种选项值，最小超时时间均保持为200毫秒。
</span></span><span style=display:flex><span>            若启用了edns-tcp-keepalive，此设置将被edns-tcp-keepalive-timeout覆盖。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    tcp-reuse-timeout: &lt;msec&gt;
</span></span><span style=display:flex><span>            Unbound 期间将保持与权威服务器的 TCP 持久连接开启。此选项默认值为 60000 毫秒。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    max-reuse-tcp-queries: &lt;number&gt;
</span></span><span style=display:flex><span>            在持久TCP连接上可发送的最大查询数量，此选项默认设置为200次查询。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    tcp-auth-query-timeout: &lt;number&gt;
</span></span><span style=display:flex><span>            TCP查询认证服务器的超时时间，以毫秒为单位。此选项默认值为3000毫秒。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    edns-tcp-keepalive: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            启用或禁用EDNS TCP保持连接功能。默认设置为`no`。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    edns-tcp-keepalive-timeout: &lt;msec&gt;
</span></span><span style=display:flex><span>            当启用edns-tcp-keepalive时，此设置将覆盖tcp-idle-timeout。
</span></span><span style=display:flex><span>            若客户端支持EDNS TCP保持连接选项，Unbound会向客户端发送超时值，
</span></span><span style=display:flex><span>            以促使客户端在服务器超时前关闭连接。
</span></span><span style=display:flex><span>            此选项默认值为120000毫秒。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    sock-queue-timeout: &lt;sec&gt;
</span></span><span style=display:flex><span>            在套接字缓冲区中等待过久的UDP查询可被丢弃。
</span></span><span style=display:flex><span>            默认值为0，即禁用此功能。
</span></span><span style=display:flex><span>            时间以秒为单位设置，3秒可能是一个合适的值，用于忽略那些客户端可能已不再需要回复的旧查询。
</span></span><span style=display:flex><span>            这种情况可能发生在主机暂时无法处理查询时，例如Unbound未运行，之后又重新启用。
</span></span><span style=display:flex><span>            该功能利用了时间戳套接字选项。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    tcp-upstream: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            启用或禁用上游查询是否仅使用TCP进行传输。
</span></span><span style=display:flex><span>            默认设置为`no`。在隧道场景中非常有用。
</span></span><span style=display:flex><span>            如果设置为否，您可以通过分别使用forward-tcp-upstream或stub-tcp-upstream，
</span></span><span style=display:flex><span>            仅为选定的转发区域或存根区域指定TCP传输。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    udp-upstream-without-downstream: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            即使do-udp设置为否，也启用UDP上行。
</span></span><span style=display:flex><span>            默认情况下为否，此设置不会改变任何现有配置。
</span></span><span style=display:flex><span>            对于TLS服务提供商而言，若希望禁止UDP下行但需通过UDP获取上行数据，此功能尤为实用。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    tls-upstream: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            启用或禁用上游查询是否仅使用TLS进行传输。
</span></span><span style=display:flex><span>            默认值为`no`。在隧道场景中非常有用。
</span></span><span style=display:flex><span>            TLS包含以TCP线格式传输的纯DNS数据。
</span></span><span style=display:flex><span>            另一台服务器必须支持此功能（参见tls-service-key）。
</span></span><span style=display:flex><span>            如果启用此选项，还需配置tls-cert-bundle或使用tls-win-cert、tls-system-cert加载CA证书，
</span></span><span style=display:flex><span>            否则连接无法进行身份验证。
</span></span><span style=display:flex><span>            此选项为所有上游查询启用TLS，但如果不设置此选项，
</span></span><span style=display:flex><span>            可以通过forward-tls-upstream为特定转发区域单独配置TLS，
</span></span><span style=display:flex><span>            同样适用于stub-tls-upstream。如果启用了tls-upstream选项，
</span></span><span style=display:flex><span>            则对所有转发和存根区域生效，此时forward-tls-upstream和stub-tls-upstream选项将被忽略，
</span></span><span style=display:flex><span>            视为已设置为`yes`。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ssl-upstream: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            tls-upstream 的替代语法。若配置文件中两者均存在，则以最后一项为准。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    tls-service-key: &lt;file&gt;
</span></span><span style=display:flex><span>            若启用此功能，服务器将在通过tls-port或https-port隐式或显式标记的TCP端口上
</span></span><span style=display:flex><span>            提供DNS-over-TLS或DNS-over-HTTPS服务。
</span></span><span style=display:flex><span>            配置文件必须包含TLS会话的私钥，公钥证书则位于tls-service-pem文件中，且若指定了tls-service-key，
</span></span><span style=display:flex><span>            也必须同时指定。
</span></span><span style=display:flex><span>            默认值为空，即关闭状态。
</span></span><span style=display:flex><span>            启用或禁用此服务需重启服务器（仅重载配置不够），因为密钥读取需在持有root权限及chroot（如有）之前进行。
</span></span><span style=display:flex><span>            通过tls-port:和https-port:隐式或显式启用的端口不提供常规的DNS TCP服务。
</span></span><span style=display:flex><span>            Unbound需编译时包含libnghttp2以支持DNS-over-HTTPS。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ssl-service-key: &lt;file&gt;
</span></span><span style=display:flex><span>            tls-service-key 的替代语法。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    tls-service-pem: &lt;file&gt;
</span></span><span style=display:flex><span>            用于TLS服务的公钥证书pem文件。默认值为&#34;&#34;，表示关闭。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ssl-service-pem: &lt;file&gt;
</span></span><span style=display:flex><span>            tls-service-pem 的替代语法。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    tls-port: &lt;number&gt;
</span></span><span style=display:flex><span>            提供TCP TLS服务的端口号，默认为853，只有配置了该端口号作为@number的接口才能获得TLS服务。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ssl-port: &lt;number&gt;
</span></span><span style=display:flex><span>            tls端口的替代语法。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    tls-cert-bundle: &lt;file&gt;
</span></span><span style=display:flex><span>            若为空或&#34;&#34;，则不使用任何文件。
</span></span><span style=display:flex><span>            请将其设置为证书包文件，例如&#34;/etc/pki/tls/certs/ca-bundle.crt&#34;。
</span></span><span style=display:flex><span>            这些证书用于验证与外部对等方建立的连接，如认证区域URL及DNS over TLS连接。
</span></span><span style=display:flex><span>            该文件在启动时、权限降级和chroot之前被读取。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ssl-cert-bundle: &lt;file&gt;
</span></span><span style=display:flex><span>            tls-cert-bundle 的替代语法。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    tls-win-cert: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            将系统证书添加到认证所需的证书包中。
</span></span><span style=display:flex><span>            若无证书包，则仅使用这些证书。
</span></span><span style=display:flex><span>            默认情况下不启用此功能。
</span></span><span style=display:flex><span>            在Windows系统上，此选项会使用证书存储中的证书。
</span></span><span style=display:flex><span>            在其他系统上，请使用`tls-cert-bundle`选项来启用系统证书。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    tls-system-cert: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            此设置与tls-win-cert设置相同，只是名称不同，因为它并非专为Windows设计。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    tls-additional-port: &lt;portnr&gt;
</span></span><span style=display:flex><span>            将端口号列为tls-additional-port，并在定义接口时（例如使用@port后缀），
</span></span><span style=display:flex><span>            作为此端口号，它们将提供DNS over TLS服务。
</span></span><span style=display:flex><span>            可列出多个，每个端口号单独一行声明。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    tls-session-ticket-keys: &lt;file&gt;
</span></span><span style=display:flex><span>            若非空，则列出包含80字节随机内容的文件，
</span></span><span style=display:flex><span>            这些文件用于为使用Unbound服务器的客户端执行TLS会话恢复。
</span></span><span style=display:flex><span>            这些文件内含有TLS会话票据的密钥。
</span></span><span style=display:flex><span>            首个密钥用于加密和解密TLS会话票据，其余密钥仅用于解密。
</span></span><span style=display:flex><span>            通过生成新的首个文件，并在其后暂时保留旧文件以允许解密，可以实现密钥的轮换。
</span></span><span style=display:flex><span>            待客户端不再使用旧密钥后，即可移除旧密钥。
</span></span><span style=display:flex><span>            创建此类文件的一种方法是使用命令`dd if=/dev/random bs=1 count=80 of=ticket.dat`。
</span></span><span style=display:flex><span>            若需创建第二个密钥，其前16字节应与旧密钥不同，这部分用于标识密钥。
</span></span><span style=display:flex><span>            随后是32字节的随机数据作为AES密钥，再接着32字节的随机数据作为HMAC密钥。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    tls-ciphers: &lt;string with cipher list&gt;
</span></span><span style=display:flex><span>            设置服务TLS时允许的加密套件列表。使用&#34;&#34;表示默认值，且此为默认设置。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    tls-ciphersuites: &lt;string with ciphersuites list&gt;
</span></span><span style=display:flex><span>            设置服务TLS时允许的加密套件列表，适用于较新的TLS 1.3连接。
</span></span><span style=display:flex><span>            使用&#34;&#34;表示采用默认值，这也是默认设置。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    pad-responses: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            若启用此功能，包含EDNS填充选项的TLS服务查询将导致响应被填充至最接近pad-responses-block-size指定大小的倍数。默认设置为`yes`。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    pad-responses-block-size: &lt;number&gt;
</span></span><span style=display:flex><span>            用于填充通过TLS服务的响应的块大小。仅对填充查询的响应进行填充。默认值为468。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    pad-queries: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            若启用此功能，所有通过TLS上游发送的查询将被填充至最接近pad-queries-block-size指定大小的倍数。
</span></span><span style=display:flex><span>            默认设置为`yes`。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    pad-queries-block-size: &lt;number&gt;
</span></span><span style=display:flex><span>            用于填充通过TLS上游发送的查询的块大小，默认值为128。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    tls-use-sni: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            启用或禁用在TLS连接上发送SNI扩展。默认值为`yes`。更改此值需重新加载配置。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    https-port: &lt;number&gt;
</span></span><span style=display:flex><span>            提供DNS-over-HTTPS服务的端口号，默认443，只有配置了该端口号作为@number的接口才能获得HTTPS服务。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    http-endpoint: &lt;endpoint string&gt;
</span></span><span style=display:flex><span>            提供DNS-over-HTTPS服务的HTTP端点，默认为&#34;/dns-query&#34;。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    http-max-streams: &lt;number of streams&gt;
</span></span><span style=display:flex><span>            用于DNS-over-HTTPS连接的HTTP/2 SETTINGS帧中SETTINGS_MAX_CONCURRENT_STREAMS参数的数值，默认设置为100。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    http-query-buffer-size: &lt;size in bytes&gt;
</span></span><span style=display:flex><span>            所有HTTP/2查询缓冲区合并使用的最大字节数。
</span></span><span style=display:flex><span>            这些缓冲区包含等待请求流完成的（部分）DNS查询。
</span></span><span style=display:flex><span>            对于超出此限制的流，将发送RST_STREAM帧。
</span></span><span style=display:flex><span>            默认值为4兆字节。纯数字表示字节，可附加&#39;k&#39;、&#39;m&#39;或&#39;g&#39;分别表示千字节、兆字节或吉字节（1兆字节等于1024*1024字节）。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    http-response-buffer-size: &lt;size in bytes&gt;
</span></span><span style=display:flex><span>            所有HTTP/2响应缓冲区合并使用的最大字节数。
</span></span><span style=display:flex><span>            这些缓冲区包含等待写回客户端的DNS响应。
</span></span><span style=display:flex><span>            对于超出此限制的流，将发送RST_STREAM帧。默认值为4兆字节。
</span></span><span style=display:flex><span>            纯数字表示字节，可附加&#39;k&#39;、&#39;m&#39;或&#39;g&#39;分别表示千字节、兆字节或吉字节（1兆字节等于1024*1024字节）。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    http-nodelay: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            在用于提供DNS-over-HTTPS服务的套接字上设置TCP_NODELAY选项。若该选项不可用，则忽略。默认值为`yes`。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    http-notls-downstream: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            禁用下游DNS-over-HTTP连接的TLS使用。适用于本地后端服务器。默认设置为`no`。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    proxy-protocol-port: &lt;portnr&gt;
</span></span><span style=display:flex><span>            将端口号列为代理协议端口（proxy-protocol-port），
</span></span><span style=display:flex><span>            并在定义接口时，如使用@port后缀，指定为此端口号，
</span></span><span style=display:flex><span>            这些接口将支持并预期接收PROXYv2协议。
</span></span><span style=display:flex><span>            在此情况下，代理地址仅用于网络通信及初始的访问控制列表（ACL，检查代理本身是否被配置拒绝）。
</span></span><span style=display:flex><span>            随后，被代理的地址（如有）将作为真实客户端地址，
</span></span><span style=display:flex><span>            并在日志记录、ACL、DNSTAP、RPZ及IP限速等适用场景中使用。
</span></span><span style=display:flex><span>            PROXYv2协议支持UDP和TCP/TLS监听接口，但在DoH、DoQ或DNSCrypt监听接口上不支持PROXYv2。
</span></span><span style=display:flex><span>            可列出多个端口，每个端口单独一行声明。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    quic-port: &lt;number&gt;
</span></span><span style=display:flex><span>            The  port  number on which to provide DNS-over-QUIC service, de-
</span></span><span style=display:flex><span>            fault 853, only interfaces configured with that port  number  as
</span></span><span style=display:flex><span>            @number  get  the QUIC service.  The interface uses QUIC for the
</span></span><span style=display:flex><span>            UDP traffic on that port number.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    quic-size: &lt;size in bytes&gt;
</span></span><span style=display:flex><span>            Maximum number of bytes for all QUIC buffers and data  combined.
</span></span><span style=display:flex><span>            Default  is 8 megabytes. A plain number is in bytes, append &#39;k&#39;,
</span></span><span style=display:flex><span>            &#39;m&#39; or &#39;g&#39; for  kilobytes,  megabytes  or  gigabytes  (1024*1024
</span></span><span style=display:flex><span>            bytes in a megabyte). New connections receive connection refused
</span></span><span style=display:flex><span>            when the limit is exceeded. New streams are reset when the limit
</span></span><span style=display:flex><span>            is exceeded.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    use-systemd: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Enable or disable systemd socket activation.  Default is no.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    do-daemonize: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Enable  or  disable  whether  the  Unbound server forks into the
</span></span><span style=display:flex><span>            background as a daemon.  Set the value to no when  Unbound  runs
</span></span><span style=display:flex><span>            as systemd service.  Default is yes.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    tcp-connection-limit: &lt;IP netblock&gt; &lt;limit&gt;
</span></span><span style=display:flex><span>            Allow  up  to  limit simultaneous TCP connections from the given
</span></span><span style=display:flex><span>            netblock.  When at the limit, further connections  are  accepted
</span></span><span style=display:flex><span>            but  closed  immediately.   This  option is experimental at this
</span></span><span style=display:flex><span>            time.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    access-control: &lt;IP netblock&gt; &lt;action&gt;
</span></span><span style=display:flex><span>            Specify treatment of incoming queries from their originating  IP
</span></span><span style=display:flex><span>            address.   Queries  can be allowed to have access to this server
</span></span><span style=display:flex><span>            that gives DNS answers, or refused, with other actions possible.
</span></span><span style=display:flex><span>            The IP address range can be specified as a netblock, it is  pos-
</span></span><span style=display:flex><span>            sible  to  give  the statement several times in order to specify
</span></span><span style=display:flex><span>            the treatment of different netblocks.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            The netblock is given as an IP4 or IP6 address  with  /size  ap-
</span></span><span style=display:flex><span>            pended  for  a  classless network block. The action can be deny,
</span></span><span style=display:flex><span>            refuse,   allow,   allow_setrd,    allow_snoop,    allow_cookie,
</span></span><span style=display:flex><span>            deny_non_local  or refuse_non_local.  The most specific netblock
</span></span><span style=display:flex><span>            match is used, if none match refuse is used.  The order  of  the
</span></span><span style=display:flex><span>            access-control statements therefore does not matter.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            The deny action stops queries from hosts from that netblock.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            The  refuse  action stops queries too, but sends a DNS rcode RE-
</span></span><span style=display:flex><span>            FUSED error message back.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            The allow action gives access to clients from that netblock.  It
</span></span><span style=display:flex><span>            gives only access for recursion clients (which  is  what  almost
</span></span><span style=display:flex><span>            all clients need).  Nonrecursive queries are refused.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            The  allow  action does allow nonrecursive queries to access the
</span></span><span style=display:flex><span>            local-data that is configured.  The reason is that this does not
</span></span><span style=display:flex><span>            involve the Unbound server recursive lookup algorithm, and  sta-
</span></span><span style=display:flex><span>            tic  data  is  served in the reply.  This supports normal opera-
</span></span><span style=display:flex><span>            tions where nonrecursive queries are made for the  authoritative
</span></span><span style=display:flex><span>            data.   For  nonrecursive  queries  any replies from the dynamic
</span></span><span style=display:flex><span>            cache are refused.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            The allow_setrd action ignores the recursion  desired  (RD)  bit
</span></span><span style=display:flex><span>            and  treats all requests as if the recursion desired bit is set.
</span></span><span style=display:flex><span>            Note that this behavior violates RFC 1034 which  states  that  a
</span></span><span style=display:flex><span>            name  server should never perform recursive service unless asked
</span></span><span style=display:flex><span>            via the RD bit since this interferes with  trouble  shooting  of
</span></span><span style=display:flex><span>            name  servers  and their databases. This prohibited behavior may
</span></span><span style=display:flex><span>            be useful if another DNS server must forward requests  for  spe-
</span></span><span style=display:flex><span>            cific zones to a resolver DNS server, but only supports stub do-
</span></span><span style=display:flex><span>            mains  and  sends queries to the resolver DNS server with the RD
</span></span><span style=display:flex><span>            bit cleared.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            The allow_snoop action gives nonrecursive access too.  This give
</span></span><span style=display:flex><span>            both recursive and non recursive access.  The  name  allow_snoop
</span></span><span style=display:flex><span>            refers  to  cache  snooping,  a  technique  to  use nonrecursive
</span></span><span style=display:flex><span>            queries to examine the  cache  contents  (for  malicious  acts).
</span></span><span style=display:flex><span>            However,  nonrecursive  queries can also be a valuable debugging
</span></span><span style=display:flex><span>            tool (when you want to examine the cache contents). In that case
</span></span><span style=display:flex><span>            use allow_snoop for your administration host.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            The allow_cookie action allows access only to UDP  queries  that
</span></span><span style=display:flex><span>            contain  a  valid  DNS  Cookie  as specified in RFC 7873 and RFC
</span></span><span style=display:flex><span>            9018, when the answer-cookie option  is  enabled.   UDP  queries
</span></span><span style=display:flex><span>            containing  only a DNS Client Cookie and no Server Cookie, or an
</span></span><span style=display:flex><span>            invalid DNS Cookie, will receive a BADCOOKIE response  including
</span></span><span style=display:flex><span>            a  newly  generated  DNS  Cookie, allowing clients to retry with
</span></span><span style=display:flex><span>            that DNS Cookie.  The allow_cookie action will also  accept  re-
</span></span><span style=display:flex><span>            quests  over  stateful transports, regardless of the presence of
</span></span><span style=display:flex><span>            an DNS Cookie and regardless of the answer-cookie setting.   UDP
</span></span><span style=display:flex><span>            queries  without a DNS Cookie receive REFUSED responses with the
</span></span><span style=display:flex><span>            TC flag set, that  may  trigger  fall  back  to  TCP  for  those
</span></span><span style=display:flex><span>            clients.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            By  default only localhost (the 127.0.0.0/8 IP netblock, not the
</span></span><span style=display:flex><span>            loopback interface) is implicitly allowed, the rest is  refused.
</span></span><span style=display:flex><span>            The  default  is refused, because that is protocol-friendly. The
</span></span><span style=display:flex><span>            DNS protocol is not designed to handle dropped  packets  due  to
</span></span><span style=display:flex><span>            policy,  and dropping may result in (possibly excessive) retried
</span></span><span style=display:flex><span>            queries.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            The deny_non_local and refuse_non_local settings are  for  hosts
</span></span><span style=display:flex><span>            that are only allowed to query for the authoritative local-data,
</span></span><span style=display:flex><span>            they  are  not  allowed full recursion but only the static data.
</span></span><span style=display:flex><span>            With deny_non_local, messages that are disallowed  are  dropped,
</span></span><span style=display:flex><span>            with refuse_non_local they receive error code REFUSED.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    access-control-tag: &lt;IP netblock&gt; &lt;&#34;list of tags&#34;&gt;
</span></span><span style=display:flex><span>            Assign  tags  to access-control elements. Clients using this ac-
</span></span><span style=display:flex><span>            cess control element use localzones that are tagged with one  of
</span></span><span style=display:flex><span>            these  tags.  Tags must be defined in define-tags.  Enclose list
</span></span><span style=display:flex><span>            of tags in quotes (&#34;&#34;) and  put  spaces  between  tags.  If  ac-
</span></span><span style=display:flex><span>            cess-control-tag is configured for a netblock that does not have
</span></span><span style=display:flex><span>            an  access-control,  an access-control element with action allow
</span></span><span style=display:flex><span>            is configured for this netblock.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    access-control-tag-action: &lt;IP netblock&gt; &lt;tag&gt; &lt;action&gt;
</span></span><span style=display:flex><span>            Set action for particular tag for given access control  element.
</span></span><span style=display:flex><span>            If  you have multiple tag values, the tag used to lookup the ac-
</span></span><span style=display:flex><span>            tion is the first tag match between access-control-tag  and  lo-
</span></span><span style=display:flex><span>            cal-zone-tag  where  &#34;first&#34; comes from the order of the define-
</span></span><span style=display:flex><span>            tag values.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    access-control-tag-data: &lt;IP netblock&gt; &lt;tag&gt; &lt;&#34;resource record string&#34;&gt;
</span></span><span style=display:flex><span>            Set redirect data for particular tag for  given  access  control
</span></span><span style=display:flex><span>            element.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    access-control-view: &lt;IP netblock&gt; &lt;view name&gt;
</span></span><span style=display:flex><span>            Set view for given access control element.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    interface-action: &lt;ip address or interface name [@port]&gt; &lt;action&gt;
</span></span><span style=display:flex><span>            Similar to access-control: but for interfaces.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            The  action  is  the  same as the ones defined under access-con-
</span></span><span style=display:flex><span>            trol:.  Interfaces are refused by default.  By default only  lo-
</span></span><span style=display:flex><span>            calhost  (the  127.0.0.0/8  IP netblock, not the loopback inter-
</span></span><span style=display:flex><span>            face) is implicitly allowed through the default  access-control:
</span></span><span style=display:flex><span>            behavior.   This  also  means that any attempt to use the inter-
</span></span><span style=display:flex><span>            face-*: options for the loopback interface will not work as they
</span></span><span style=display:flex><span>            will be overridden  by  the  implicit  default  &#34;access-control:
</span></span><span style=display:flex><span>            127.0.0.0/8 allow&#34; option.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            Note  that  the interface needs to be already specified with in-
</span></span><span style=display:flex><span>            terface: and that any access-control*: setting overrides all in-
</span></span><span style=display:flex><span>            terface-*: settings for targeted clients.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    interface-tag: &lt;ip address or interface name [@port]&gt; &lt;&#34;list of tags&#34;&gt;
</span></span><span style=display:flex><span>            Similar to access-control-tag: but for interfaces.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            Note that the interface needs to be already specified  with  in-
</span></span><span style=display:flex><span>            terface: and that any access-control*: setting overrides all in-
</span></span><span style=display:flex><span>            terface-*: settings for targeted clients.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    interface-tag-action: &lt;ip address or interface name [@port]&gt; &lt;tag&gt; &lt;ac-
</span></span><span style=display:flex><span>    tion&gt;
</span></span><span style=display:flex><span>            Similar to access-control-tag-action: but for interfaces.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            Note  that  the interface needs to be already specified with in-
</span></span><span style=display:flex><span>            terface: and that any access-control*: setting overrides all in-
</span></span><span style=display:flex><span>            terface-*: settings for targeted clients.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    interface-tag-data: &lt;ip address or interface name [@port]&gt; &lt;tag&gt; &lt;&#34;re-
</span></span><span style=display:flex><span>    source record string&#34;&gt;
</span></span><span style=display:flex><span>            Similar to access-control-tag-data: but for interfaces.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            Note that the interface needs to be already specified  with  in-
</span></span><span style=display:flex><span>            terface: and that any access-control*: setting overrides all in-
</span></span><span style=display:flex><span>            terface-*: settings for targeted clients.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    interface-view: &lt;ip address or interface name [@port]&gt; &lt;view name&gt;
</span></span><span style=display:flex><span>            Similar to access-control-view: but for interfaces.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            Note  that  the interface needs to be already specified with in-
</span></span><span style=display:flex><span>            terface: and that any access-control*: setting overrides all in-
</span></span><span style=display:flex><span>            terface-*: settings for targeted clients.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    chroot: &lt;directory&gt;
</span></span><span style=display:flex><span>            If chroot is enabled, you should pass the configfile  (from  the
</span></span><span style=display:flex><span>            commandline)  as  a  full path from the original root. After the
</span></span><span style=display:flex><span>            chroot has been performed the now defunct portion of the  config
</span></span><span style=display:flex><span>            file path is removed to be able to reread the config after a re-
</span></span><span style=display:flex><span>            load.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            All  other  file paths (working dir, logfile, roothints, and key
</span></span><span style=display:flex><span>            files) can be specified in several ways:  as  an  absolute  path
</span></span><span style=display:flex><span>            relative  to the new root, as a relative path to the working di-
</span></span><span style=display:flex><span>            rectory, or as an absolute path relative to the  original  root.
</span></span><span style=display:flex><span>            In  the last case the path is adjusted to remove the unused por-
</span></span><span style=display:flex><span>            tion.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            The pidfile can be either a relative path to the working  direc-
</span></span><span style=display:flex><span>            tory,  or  an absolute path relative to the original root. It is
</span></span><span style=display:flex><span>            written just prior to chroot and dropping permissions. This  al-
</span></span><span style=display:flex><span>            lows the pidfile to be /var/run/unbound.pid and the chroot to be
</span></span><span style=display:flex><span>            /var/unbound,  for example. Note that Unbound is not able to re-
</span></span><span style=display:flex><span>            move the pidfile after termination when it is located outside of
</span></span><span style=display:flex><span>            the chroot directory.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            Additionally, Unbound may need to access /dev/urandom  (for  en-
</span></span><span style=display:flex><span>            tropy) from inside the chroot.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            If  given a chroot is done to the given directory. The chroot is
</span></span><span style=display:flex><span>            by default set to &#34;/usr/local/etc/unbound&#34;. If you  give  &#34;&#34;  no
</span></span><span style=display:flex><span>            chroot is performed.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    username: &lt;name&gt;
</span></span><span style=display:flex><span>            If  given,  after  binding  the  port  the  user  privileges are
</span></span><span style=display:flex><span>            dropped. Default is &#34;unbound&#34;. If you give username: &#34;&#34; no  user
</span></span><span style=display:flex><span>            change is performed.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            If  this  user  is  not capable of binding the port, reloads (by
</span></span><span style=display:flex><span>            signal HUP) will still retain the opened ports.  If  you  change
</span></span><span style=display:flex><span>            the port number in the config file, and that new port number re-
</span></span><span style=display:flex><span>            quires privileges, then a reload will fail; a restart is needed.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    directory: &lt;directory&gt;
</span></span><span style=display:flex><span>            Sets the working directory for the program. Default is &#34;/usr/lo-
</span></span><span style=display:flex><span>            cal/etc/unbound&#34;.  On Windows the string &#34;%EXECUTABLE%&#34; tries to
</span></span><span style=display:flex><span>            change  to  the  directory  that unbound.exe resides in.  If you
</span></span><span style=display:flex><span>            give a server: directory: dir before  include:  file  statements
</span></span><span style=display:flex><span>            then those includes can be relative to the working directory.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    logfile: &lt;filename&gt;
</span></span><span style=display:flex><span>            If  &#34;&#34;  is given, logging goes to stderr, or nowhere once daemo-
</span></span><span style=display:flex><span>            nized.  The logfile is appended to, in the following format:
</span></span><span style=display:flex><span>            [seconds since 1970] unbound[pid:tid]: type: message.
</span></span><span style=display:flex><span>            If this option is given, the use-syslog  is  option  is  set  to
</span></span><span style=display:flex><span>            &#34;no&#34;.  The logfile is reopened (for append) when the config file
</span></span><span style=display:flex><span>            is reread, on SIGHUP.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    use-syslog: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Sets  Unbound  to  send  log messages to the syslogd, using sys-
</span></span><span style=display:flex><span>            log(3).  The log facility LOG_DAEMON is used, with identity &#34;un-
</span></span><span style=display:flex><span>            bound&#34;.  The logfile setting is overridden  when  use-syslog  is
</span></span><span style=display:flex><span>            turned on.  The default is to log to syslog.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    log-identity: &lt;string&gt;
</span></span><span style=display:flex><span>            If  &#34;&#34; is given (default), then the name of the executable, usu-
</span></span><span style=display:flex><span>            ally &#34;unbound&#34; is used to report to the log.  Enter a string  to
</span></span><span style=display:flex><span>            override  it with that, which is useful on systems that run more
</span></span><span style=display:flex><span>            than one instance of Unbound, with different configurations,  so
</span></span><span style=display:flex><span>            that the logs can be easily distinguished against.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    log-time-ascii: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Sets  logfile  lines to use a timestamp in UTC ascii. Default is
</span></span><span style=display:flex><span>            no, which prints the seconds since 1970 in brackets.  No  effect
</span></span><span style=display:flex><span>            if  using  syslog,  in  that  case  syslog formats the timestamp
</span></span><span style=display:flex><span>            printed into the log files.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    log-time-iso: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Log time in ISO8601 format, if log-time-ascii: yes is also  set.
</span></span><span style=display:flex><span>            Default is no.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    log-queries: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Prints one line per query to the log, with the log timestamp and
</span></span><span style=display:flex><span>            IP  address, name, type and class.  Default is no.  Note that it
</span></span><span style=display:flex><span>            takes time to print these lines which makes the server (signifi-
</span></span><span style=display:flex><span>            cantly) slower.  Odd  (nonprintable)  characters  in  names  are
</span></span><span style=display:flex><span>            printed as &#39;?&#39;.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    log-replies: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Prints one line per reply to the log, with the log timestamp and
</span></span><span style=display:flex><span>            IP  address,  name,  type,  class, return code, time to resolve,
</span></span><span style=display:flex><span>            from cache and response size.  Default  is  no.   Note  that  it
</span></span><span style=display:flex><span>            takes time to print these lines which makes the server (signifi-
</span></span><span style=display:flex><span>            cantly)  slower.   Odd  (nonprintable)  characters  in names are
</span></span><span style=display:flex><span>            printed as &#39;?&#39;.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    log-tag-queryreply: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Prints  the  word  &#39;query&#39;  and  &#39;reply&#39;  with  log-queries  and
</span></span><span style=display:flex><span>            log-replies.   This makes filtering logs easier.  The default is
</span></span><span style=display:flex><span>            off (for backwards compatibility).
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    log-destaddr: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Prints the destination address, port and type in the log-replies
</span></span><span style=display:flex><span>            output.  This disambiguates what type of  traffic,  eg.  udp  or
</span></span><span style=display:flex><span>            tcp, and to what local port the traffic was sent to.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    log-local-actions: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Print log lines to inform about local zone actions.  These lines
</span></span><span style=display:flex><span>            are  like  the  local-zone  type inform prints out, but they are
</span></span><span style=display:flex><span>            also printed for the other types of local zones.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    log-servfail: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Print log lines that say why queries return SERVFAIL to clients.
</span></span><span style=display:flex><span>            This is separate from the verbosity debug  logs,  much  smaller,
</span></span><span style=display:flex><span>            and printed at the error level, not the info level of debug info
</span></span><span style=display:flex><span>            from verbosity.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    pidfile: &lt;filename&gt;
</span></span><span style=display:flex><span>            The  process  id  is  written  to the file. Default is &#34;/usr/lo-
</span></span><span style=display:flex><span>            cal/etc/unbound/unbound.pid&#34;.  So,
</span></span><span style=display:flex><span>            kill -HUP `cat /usr/local/etc/unbound/unbound.pid`
</span></span><span style=display:flex><span>            triggers a reload,
</span></span><span style=display:flex><span>            kill -TERM `cat /usr/local/etc/unbound/unbound.pid`
</span></span><span style=display:flex><span>            gracefully terminates.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    root-hints: &lt;filename&gt;
</span></span><span style=display:flex><span>            Read the root hints from this file. Default  is  nothing,  using
</span></span><span style=display:flex><span>            builtin  hints for the IN class. The file has the format of zone
</span></span><span style=display:flex><span>            files, with root nameserver names and addresses  only.  The  de-
</span></span><span style=display:flex><span>            fault  may become outdated, when servers change, therefore it is
</span></span><span style=display:flex><span>            good practice to use a root-hints file.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    hide-identity: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            If enabled id.server and hostname.bind queries are refused.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    identity: &lt;string&gt;
</span></span><span style=display:flex><span>            Set the identity to report. If set to &#34;&#34;, the default, then  the
</span></span><span style=display:flex><span>            hostname of the server is returned.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    hide-version: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            If enabled version.server and version.bind queries are refused.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    version: &lt;string&gt;
</span></span><span style=display:flex><span>            Set  the  version to report. If set to &#34;&#34;, the default, then the
</span></span><span style=display:flex><span>            package version is returned.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    hide-http-user-agent: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            If enabled the HTTP header User-Agent is not set. Use with  cau-
</span></span><span style=display:flex><span>            tion  as  some webserver configurations may reject HTTP requests
</span></span><span style=display:flex><span>            lacking this header.  If needed, it is better to explicitly  set
</span></span><span style=display:flex><span>            the http-user-agent below.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    http-user-agent: &lt;string&gt;
</span></span><span style=display:flex><span>            Set  the  HTTP  User-Agent header for outgoing HTTP requests. If
</span></span><span style=display:flex><span>            set to &#34;&#34;, the default, then the package name  and  version  are
</span></span><span style=display:flex><span>            used.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    nsid: &lt;string&gt;
</span></span><span style=display:flex><span>            Add  the  specified  nsid to the EDNS section of the answer when
</span></span><span style=display:flex><span>            queried with an NSID EDNS enabled packet.  As a sequence of  hex
</span></span><span style=display:flex><span>            characters or with ascii_ prefix and then an ascii string.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    hide-trustanchor: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            If enabled trustanchor.unbound queries are refused.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    target-fetch-policy: &lt;&#34;list of numbers&#34;&gt;
</span></span><span style=display:flex><span>            Set  the  target fetch policy used by Unbound to determine if it
</span></span><span style=display:flex><span>            should fetch nameserver target addresses opportunistically.  The
</span></span><span style=display:flex><span>            policy is described per dependency depth.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            The  number  of  values  determines the maximum dependency depth
</span></span><span style=display:flex><span>            that Unbound will pursue in answering a query.  A  value  of  -1
</span></span><span style=display:flex><span>            means to fetch all targets opportunistically for that dependency
</span></span><span style=display:flex><span>            depth.  A  value  of 0 means to fetch on demand only. A positive
</span></span><span style=display:flex><span>            value fetches that many targets opportunistically.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            Enclose the list between quotes (&#34;&#34;) and put spaces between num-
</span></span><span style=display:flex><span>            bers.  The default is &#34;3 2 1 0 0&#34;. Setting all zeroes, &#34;0 0 0  0
</span></span><span style=display:flex><span>            0&#34;  gives  behaviour closer to that of BIND 9, while setting &#34;-1
</span></span><span style=display:flex><span>            -1 -1 -1 -1&#34; gives behaviour rumoured to be closer  to  that  of
</span></span><span style=display:flex><span>            BIND 8.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    harden-short-bufsize: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Very  small  EDNS buffer sizes from queries are ignored. Default
</span></span><span style=display:flex><span>            is yes, as described in the standard.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    harden-large-queries: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Very large queries are ignored. Default is no, since it is legal
</span></span><span style=display:flex><span>            protocol wise to send these, and could be necessary  for  opera-
</span></span><span style=display:flex><span>            tion if TSIG or EDNS payload is very large.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    harden-glue: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Will  trust glue only if it is within the servers authority. De-
</span></span><span style=display:flex><span>            fault is yes.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    harden-unverified-glue: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Will trust only in-zone glue. Will try to  resolve  all  out  of
</span></span><span style=display:flex><span>            zone  (&lt;unverfied&gt;)  glue. Will fallback to the original glue if
</span></span><span style=display:flex><span>            unable to resolve.  Default is no.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    harden-dnssec-stripped: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Require DNSSEC data for trust-anchored zones, if  such  data  is
</span></span><span style=display:flex><span>            absent,  the  zone  becomes  bogus. If turned off, and no DNSSEC
</span></span><span style=display:flex><span>            data is received (or the DNSKEY data fails  to  validate),  then
</span></span><span style=display:flex><span>            the  zone  is made insecure, this behaves like there is no trust
</span></span><span style=display:flex><span>            anchor. You could turn this off if you are sometimes  behind  an
</span></span><span style=display:flex><span>            intrusive  firewall (of some sort) that removes DNSSEC data from
</span></span><span style=display:flex><span>            packets, or a zone changes from  signed  to  unsigned  to  badly
</span></span><span style=display:flex><span>            signed  often. If turned off you run the risk of a downgrade at-
</span></span><span style=display:flex><span>            tack that disables security for a zone. Default is yes.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    harden-below-nxdomain: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            From RFC 8020 (with title &#34;NXDOMAIN: There Really Is Nothing Un-
</span></span><span style=display:flex><span>            derneath&#34;), returns nxdomain to queries for a name below another
</span></span><span style=display:flex><span>            name that is already known to be nxdomain.  DNSSEC mandates  no-
</span></span><span style=display:flex><span>            error  for empty nonterminals, hence this is possible.  Very old
</span></span><span style=display:flex><span>            software might return nxdomain for empty nonterminals (that usu-
</span></span><span style=display:flex><span>            ally happen for reverse IP address lookups), and thus may be in-
</span></span><span style=display:flex><span>            compatible with this.  To try to avoid this  only  DNSSEC-secure
</span></span><span style=display:flex><span>            nxdomains  are  used,  because  the  old  software does not have
</span></span><span style=display:flex><span>            DNSSEC.  Default is yes.  The  nxdomain  must  be  secure,  this
</span></span><span style=display:flex><span>            means nsec3 with optout is insufficient.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    harden-referral-path: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Harden  the  referral  path by performing additional queries for
</span></span><span style=display:flex><span>            infrastructure data.  Validates the replies if trust anchors are
</span></span><span style=display:flex><span>            configured and the zones are signed.  This enforces DNSSEC vali-
</span></span><span style=display:flex><span>            dation on nameserver NS sets and the nameserver  addresses  that
</span></span><span style=display:flex><span>            are encountered on the referral path to the answer.  Default no,
</span></span><span style=display:flex><span>            because  it  burdens  the  authority  servers, and it is not RFC
</span></span><span style=display:flex><span>            standard, and could lead to performance problems because of  the
</span></span><span style=display:flex><span>            extra  query  load  that is generated.  Experimental option.  If
</span></span><span style=display:flex><span>            you enable it  consider  adding  more  numbers  after  the  tar-
</span></span><span style=display:flex><span>            get-fetch-policy to increase the max depth that is checked to.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    harden-algo-downgrade: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Harden  against algorithm downgrade when multiple algorithms are
</span></span><span style=display:flex><span>            advertised in the DS record.  This works by first choosing  only
</span></span><span style=display:flex><span>            the strongest DS digest type as per RFC 4509 (Unbound treats the
</span></span><span style=display:flex><span>            highest  algorithm  as  the strongest) and then expecting signa-
</span></span><span style=display:flex><span>            tures from all the advertised signing algorithms from the chosen
</span></span><span style=display:flex><span>            DS(es) to be present.  If no, allows any one supported algorithm
</span></span><span style=display:flex><span>            to validate the zone, even if other  advertised  algorithms  are
</span></span><span style=display:flex><span>            broken.   Default  is  no.   RFC 6840 mandates that zone signers
</span></span><span style=display:flex><span>            must produce zones signed with all  advertised  algorithms,  but
</span></span><span style=display:flex><span>            sometimes  they  do  not.  RFC 6840 also clarifies that this re-
</span></span><span style=display:flex><span>            quirement is not for validators and validators should accept any
</span></span><span style=display:flex><span>            single valid path.  It should thus be explicitly noted that this
</span></span><span style=display:flex><span>            option violates RFC 6840 for DNSSEC validation and  should  only
</span></span><span style=display:flex><span>            be  used  to  perform  a  signature completeness test to support
</span></span><span style=display:flex><span>            troubleshooting.  Using this option may break DNSSEC  resolution
</span></span><span style=display:flex><span>            with  non-RFC6840-conforming signers and/or in multi-signer con-
</span></span><span style=display:flex><span>            figurations that don&#39;t send all the advertised signatures.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    harden-unknown-additional: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Harden against unknown records in the authority section and  ad-
</span></span><span style=display:flex><span>            ditional  section. Default is no. If no, such records are copied
</span></span><span style=display:flex><span>            from the upstream and presented to the client together with  the
</span></span><span style=display:flex><span>            answer.  If  yes,  it  could hamper future protocol developments
</span></span><span style=display:flex><span>            that want to add records.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    use-caps-for-id: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Use 0x20-encoded random bits in the  query  to  foil  spoof  at-
</span></span><span style=display:flex><span>            tempts.   This  perturbs  the  lowercase  and uppercase of query
</span></span><span style=display:flex><span>            names sent to authority servers and checks if  the  reply  still
</span></span><span style=display:flex><span>            has  the  correct casing.  Disabled by default.  This feature is
</span></span><span style=display:flex><span>            an experimental implementation of draft dns-0x20.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    caps-exempt: &lt;domain&gt;
</span></span><span style=display:flex><span>            Exempt the domain so that it does not receive  caps-for-id  per-
</span></span><span style=display:flex><span>            turbed  queries.   For domains that do not support 0x20 and also
</span></span><span style=display:flex><span>            fail with fallback because they keep sending different  answers,
</span></span><span style=display:flex><span>            like some load balancers.  Can be given multiple times, for dif-
</span></span><span style=display:flex><span>            ferent domains.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    caps-whitelist: &lt;domain&gt;
</span></span><span style=display:flex><span>            Alternate syntax for caps-exempt.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    qname-minimisation: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Send  minimum  amount  of information to upstream servers to en-
</span></span><span style=display:flex><span>            hance privacy.  Only send minimum required labels of  the  QNAME
</span></span><span style=display:flex><span>            and  set  QTYPE  to  A when possible. Best effort approach; full
</span></span><span style=display:flex><span>            QNAME and original QTYPE will be sent when upstream replies with
</span></span><span style=display:flex><span>            a RCODE other than NOERROR, except when receiving NXDOMAIN  from
</span></span><span style=display:flex><span>            a DNSSEC signed zone. Default is yes.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    qname-minimisation-strict: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            QNAME  minimisation  in strict mode. Do not fall-back to sending
</span></span><span style=display:flex><span>            full QNAME to potentially broken nameservers. A lot  of  domains
</span></span><span style=display:flex><span>            will  not be resolvable when this option in enabled. Only use if
</span></span><span style=display:flex><span>            you know what you are doing.  This option only has  effect  when
</span></span><span style=display:flex><span>            qname-minimisation is enabled. Default is no.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    aggressive-nsec: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Aggressive  NSEC  uses the DNSSEC NSEC chain to synthesize NXDO-
</span></span><span style=display:flex><span>            MAIN and other denials, using information  from  previous  NXDO-
</span></span><span style=display:flex><span>            MAINs  answers.   Default  is yes.  It helps to reduce the query
</span></span><span style=display:flex><span>            rate towards targets that  get  a  very  high  nonexistent  name
</span></span><span style=display:flex><span>            lookup rate.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    private-address: &lt;IP address or subnet&gt;
</span></span><span style=display:flex><span>            Give  IPv4 of IPv6 addresses or classless subnets. These are ad-
</span></span><span style=display:flex><span>            dresses on your private network, and are not allowed to  be  re-
</span></span><span style=display:flex><span>            turned  for  public  internet names.  Any occurrence of such ad-
</span></span><span style=display:flex><span>            dresses are removed from DNS answers. Additionally,  the  DNSSEC
</span></span><span style=display:flex><span>            validator  may  mark  the  answers  bogus. This protects against
</span></span><span style=display:flex><span>            so-called DNS Rebinding, where a user browser is turned  into  a
</span></span><span style=display:flex><span>            network  proxy,  allowing  remote  access through the browser to
</span></span><span style=display:flex><span>            other parts of your private network.  Some names can be  allowed
</span></span><span style=display:flex><span>            to contain your private addresses, by default all the local-data
</span></span><span style=display:flex><span>            that  you  configured  is  allowed to, and you can specify addi-
</span></span><span style=display:flex><span>            tional names using private-domain.  No private addresses are en-
</span></span><span style=display:flex><span>            abled by default.  We consider to enable this  for  the  RFC1918
</span></span><span style=display:flex><span>            private  IP  address  space  by  default in later releases. That
</span></span><span style=display:flex><span>            would enable  private  addresses  for  10.0.0.0/8  172.16.0.0/12
</span></span><span style=display:flex><span>            192.168.0.0/16  169.254.0.0/16 fd00::/8 and fe80::/10, since the
</span></span><span style=display:flex><span>            RFC standards say these addresses should not be visible  on  the
</span></span><span style=display:flex><span>            public internet.  Turning on 127.0.0.0/8 would hinder many spam-
</span></span><span style=display:flex><span>            blocklists   as  they  use  that.   Adding  ::ffff:0:0/96  stops
</span></span><span style=display:flex><span>            IPv4-mapped IPv6 addresses from bypassing the filter.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    private-domain: &lt;domain name&gt;
</span></span><span style=display:flex><span>            Allow this domain, and all its subdomains to contain private ad-
</span></span><span style=display:flex><span>            dresses.  Give multiple times to allow multiple domain names  to
</span></span><span style=display:flex><span>            contain private addresses. Default is none.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    unwanted-reply-threshold: &lt;number&gt;
</span></span><span style=display:flex><span>            If  set,  a total number of unwanted replies is kept track of in
</span></span><span style=display:flex><span>            every thread.  When it reaches the threshold, a defensive action
</span></span><span style=display:flex><span>            is taken and a warning is printed to the log.  The defensive ac-
</span></span><span style=display:flex><span>            tion is to clear the rrset and message caches, hopefully  flush-
</span></span><span style=display:flex><span>            ing  away  any poison.  A value of 10 million is suggested.  De-
</span></span><span style=display:flex><span>            fault is 0 (turned off).
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    do-not-query-address: &lt;IP address&gt;
</span></span><span style=display:flex><span>            Do not query the given IP address. Can be  IP4  or  IP6.  Append
</span></span><span style=display:flex><span>            /num  to  indicate  a classless delegation netblock, for example
</span></span><span style=display:flex><span>            like 10.2.3.4/24 or 2001::11/64.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    do-not-query-localhost: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            If yes, localhost is added to the do-not-query-address  entries,
</span></span><span style=display:flex><span>            both  IP6  ::1 and IP4 127.0.0.1/8. If no, then localhost can be
</span></span><span style=display:flex><span>            used to send queries to. Default is yes.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    prefetch: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            If yes, cache hits on message cache elements that are  on  their
</span></span><span style=display:flex><span>            last  10  percent  of their TTL value trigger a prefetch to keep
</span></span><span style=display:flex><span>            the cache up to date.  Default is no.  Turning it on gives about
</span></span><span style=display:flex><span>            10 percent more traffic and load on  the  machine,  but  popular
</span></span><span style=display:flex><span>            items do not expire from the cache.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    prefetch-key: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            If  yes,  fetch  the  DNSKEYs earlier in the validation process,
</span></span><span style=display:flex><span>            when a DS record is encountered.  This lowers the latency of re-
</span></span><span style=display:flex><span>            quests.  It does use a little more CPU.  Also if  the  cache  is
</span></span><span style=display:flex><span>            set to 0, it is no use. Default is no.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    deny-any: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            If  yes,  deny  queries of type ANY with an empty response.  De-
</span></span><span style=display:flex><span>            fault is no.  If disabled, Unbound responds with a short list of
</span></span><span style=display:flex><span>            resource records if some can be found in the cache and makes the
</span></span><span style=display:flex><span>            upstream type ANY query if there are none.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    rrset-roundrobin: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            If yes, Unbound rotates RRSet order in response (the random num-
</span></span><span style=display:flex><span>            ber is taken from the query ID, for speed  and  thread  safety).
</span></span><span style=display:flex><span>            Default is yes.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    minimal-responses: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            If  yes,  Unbound  does not insert authority/additional sections
</span></span><span style=display:flex><span>            into response messages when those  sections  are  not  required.
</span></span><span style=display:flex><span>            This  reduces  response  size  significantly,  and may avoid TCP
</span></span><span style=display:flex><span>            fallback for some responses which may cause  a  slight  speedup.
</span></span><span style=display:flex><span>            The  default  is  yes, even though the DNS protocol RFCs mandate
</span></span><span style=display:flex><span>            these sections, and the additional content could save roundtrips
</span></span><span style=display:flex><span>            for clients that use the additional content.  However these sec-
</span></span><span style=display:flex><span>            tions are hardly used by clients.  Enabling prefetch can benefit
</span></span><span style=display:flex><span>            clients that need the additional content by trying to keep  that
</span></span><span style=display:flex><span>            content fresh in the cache.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    disable-dnssec-lame-check: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            If  true,  disables  the  DNSSEC lameness check in the iterator.
</span></span><span style=display:flex><span>            This check sees if RRSIGs are present in the answer, when dnssec
</span></span><span style=display:flex><span>            is expected, and retries another authority if RRSIGs  are  unex-
</span></span><span style=display:flex><span>            pectedly  missing.   The  validator  will  insist  in RRSIGs for
</span></span><span style=display:flex><span>            DNSSEC signed domains regardless of this setting, if a trust an-
</span></span><span style=display:flex><span>            chor is loaded.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    module-config: &lt;&#34;module names&#34;&gt;
</span></span><span style=display:flex><span>            Module configuration,  a  list  of  module  names  separated  by
</span></span><span style=display:flex><span>            spaces, surround the string with quotes (&#34;&#34;). The modules can be
</span></span><span style=display:flex><span>            respip,  validator,  or iterator (and possibly more, see below).
</span></span><span style=display:flex><span>            Setting this to just &#34;iterator&#34; will result in a  non-validating
</span></span><span style=display:flex><span>            server.   Setting  this  to  &#34;validator  iterator&#34;  will turn on
</span></span><span style=display:flex><span>            DNSSEC validation.  The ordering of the modules is  significant,
</span></span><span style=display:flex><span>            the  order  decides  the order of processing.  You must also set
</span></span><span style=display:flex><span>            trust-anchors for validation to be useful.  Adding respip to the
</span></span><span style=display:flex><span>            front will cause RPZ processing to be done on all queries.   The
</span></span><span style=display:flex><span>            default is &#34;validator iterator&#34;.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            Most  modules  that  need to be listed here have to be listed at
</span></span><span style=display:flex><span>            the beginning of the line.  The subnetcachedb module has  to  be
</span></span><span style=display:flex><span>            listed  just  before  the  iterator.   The  python module can be
</span></span><span style=display:flex><span>            listed in different places, it then processes the output of  the
</span></span><span style=display:flex><span>            module it is just before. The dynlib module can be listed pretty
</span></span><span style=display:flex><span>            much  anywhere,  it  is only a very thin wrapper that allows dy-
</span></span><span style=display:flex><span>            namic libraries to run in its place.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    trust-anchor-file: &lt;filename&gt;
</span></span><span style=display:flex><span>            File with trusted keys for validation. Both DS  and  DNSKEY  en-
</span></span><span style=display:flex><span>            tries  can  appear  in  the  file. The format of the file is the
</span></span><span style=display:flex><span>            standard DNS Zone file format.  Default is &#34;&#34;, or no  trust  an-
</span></span><span style=display:flex><span>            chor file.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    auto-trust-anchor-file: &lt;filename&gt;
</span></span><span style=display:flex><span>            File  with  trust  anchor  for  one  zone, which is tracked with
</span></span><span style=display:flex><span>            RFC5011 probes.  The probes are run  several  times  per  month,
</span></span><span style=display:flex><span>            thus  the  machine  must be online frequently.  The initial file
</span></span><span style=display:flex><span>            can be one with contents as described in trust-anchor-file.  The
</span></span><span style=display:flex><span>            file is written to when the anchor is updated,  so  the  Unbound
</span></span><span style=display:flex><span>            user  must have write permission.  Write permission to the file,
</span></span><span style=display:flex><span>            but also to the directory it is in (to create a temporary  file,
</span></span><span style=display:flex><span>            which is necessary to deal with filesystem full events), it must
</span></span><span style=display:flex><span>            also be inside the chroot (if that is used).
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    trust-anchor: &lt;&#34;Resource Record&#34;&gt;
</span></span><span style=display:flex><span>            A  DS or DNSKEY RR for a key to use for validation. Multiple en-
</span></span><span style=display:flex><span>            tries can be given to specify multiple trusted keys, in addition
</span></span><span style=display:flex><span>            to the trust-anchor-files.  The resource record  is  entered  in
</span></span><span style=display:flex><span>            the same format as &#39;dig&#39; or &#39;drill&#39; prints them, the same format
</span></span><span style=display:flex><span>            as  in the zone file. Has to be on a single line, with &#34;&#34; around
</span></span><span style=display:flex><span>            it. A TTL can be specified for ease of cut and paste, but is ig-
</span></span><span style=display:flex><span>            nored.  A class can be specified, but class IN is default.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    trusted-keys-file: &lt;filename&gt;
</span></span><span style=display:flex><span>            File with trusted keys for validation.  Specify  more  than  one
</span></span><span style=display:flex><span>            file  with  several  entries, one file per entry. Like trust-an-
</span></span><span style=display:flex><span>            chor-file but has a different  file  format.  Format  is  BIND-9
</span></span><span style=display:flex><span>            style  format, the trusted-keys { name flag proto algo &#34;key&#34;; };
</span></span><span style=display:flex><span>            clauses are read.  It is possible to  use  wildcards  with  this
</span></span><span style=display:flex><span>            statement, the wildcard is expanded on start and on reload.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    trust-anchor-signaling: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Send  RFC8145  key tag query after trust anchor priming. Default
</span></span><span style=display:flex><span>            is yes.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    root-key-sentinel: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Root key trust anchor sentinel. Default is yes.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    domain-insecure: &lt;domain name&gt;
</span></span><span style=display:flex><span>            Sets domain name to be insecure, DNSSEC chain of  trust  is  ig-
</span></span><span style=display:flex><span>            nored  towards the domain name.  So a trust anchor above the do-
</span></span><span style=display:flex><span>            main name can not make the domain secure with a DS record,  such
</span></span><span style=display:flex><span>            a  DS  record  is  then ignored.  Can be given multiple times to
</span></span><span style=display:flex><span>            specify multiple domains that are treated as  if  unsigned.   If
</span></span><span style=display:flex><span>            you  set trust anchors for the domain they override this setting
</span></span><span style=display:flex><span>            (and the domain is secured).
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            This can be useful if you want to make sure a trust  anchor  for
</span></span><span style=display:flex><span>            external  lookups does not affect an (unsigned) internal domain.
</span></span><span style=display:flex><span>            A DS record externally can create validation failures  for  that
</span></span><span style=display:flex><span>            internal domain.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    val-override-date: &lt;rrsig-style date spec&gt;
</span></span><span style=display:flex><span>            Default  is &#34;&#34; or &#34;0&#34;, which disables this debugging feature. If
</span></span><span style=display:flex><span>            enabled by giving a RRSIG style date, that date is used for ver-
</span></span><span style=display:flex><span>            ifying RRSIG inception and expiration dates, instead of the cur-
</span></span><span style=display:flex><span>            rent date. Do not set this unless you  are  debugging  signature
</span></span><span style=display:flex><span>            inception  and  expiration.  The value -1 ignores the date alto-
</span></span><span style=display:flex><span>            gether, useful for some special applications.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    val-sig-skew-min: &lt;seconds&gt;
</span></span><span style=display:flex><span>            Minimum number of seconds of clock skew to  apply  to  validated
</span></span><span style=display:flex><span>            signatures.   A  value of 10% of the signature lifetime (expira-
</span></span><span style=display:flex><span>            tion - inception) is used, capped by this setting.   Default  is
</span></span><span style=display:flex><span>            3600  (1  hour)  which  allows for daylight savings differences.
</span></span><span style=display:flex><span>            Lower this value for more strict checking of short lived  signa-
</span></span><span style=display:flex><span>            tures.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    val-sig-skew-max: &lt;seconds&gt;
</span></span><span style=display:flex><span>            Maximum  number  of  seconds of clock skew to apply to validated
</span></span><span style=display:flex><span>            signatures.  A value of 10% of the signature  lifetime  (expira-
</span></span><span style=display:flex><span>            tion  -  inception) is used, capped by this setting.  Default is
</span></span><span style=display:flex><span>            86400 (24 hours) which allows for timezone setting  problems  in
</span></span><span style=display:flex><span>            stable  domains.  Setting both min and max very low disables the
</span></span><span style=display:flex><span>            clock skew allowances.  Setting both min and max very high makes
</span></span><span style=display:flex><span>            the validator check the signature timestamps less strictly.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    val-max-restart: &lt;number&gt;
</span></span><span style=display:flex><span>            The maximum number the validator should restart validation  with
</span></span><span style=display:flex><span>            another authority in case of failed validation. Default is 5.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    val-bogus-ttl: &lt;number&gt;
</span></span><span style=display:flex><span>            The  time  to  live for bogus data. This is data that has failed
</span></span><span style=display:flex><span>            validation; due to invalid signatures or other checks.  The  TTL
</span></span><span style=display:flex><span>            from  that  data  cannot  be trusted, and this value is used in-
</span></span><span style=display:flex><span>            stead. The value is in seconds, default 60.  The  time  interval
</span></span><span style=display:flex><span>            prevents repeated revalidation of bogus data.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    val-clean-additional: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Instruct  the  validator to remove data from the additional sec-
</span></span><span style=display:flex><span>            tion of secure messages that are not signed  properly.  Messages
</span></span><span style=display:flex><span>            that are insecure, bogus, indeterminate or unchecked are not af-
</span></span><span style=display:flex><span>            fected.  Default  is  yes. Use this setting to protect the users
</span></span><span style=display:flex><span>            that rely on this validator for authentication from  potentially
</span></span><span style=display:flex><span>            bad data in the additional section.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    val-log-level: &lt;number&gt;
</span></span><span style=display:flex><span>            Have  the  validator  print validation failures to the log.  Re-
</span></span><span style=display:flex><span>            gardless of the verbosity setting.  Default is 0,  off.   At  1,
</span></span><span style=display:flex><span>            for  every  user query that fails a line is printed to the logs.
</span></span><span style=display:flex><span>            This way you can monitor what happens with  validation.   Use  a
</span></span><span style=display:flex><span>            diagnosis tool, such as dig or drill, to find out why validation
</span></span><span style=display:flex><span>            is  failing  for  these  queries.  At 2, not only the query that
</span></span><span style=display:flex><span>            failed is printed but also the reason why Unbound thought it was
</span></span><span style=display:flex><span>            wrong and which server sent the faulty data.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    val-permissive-mode: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Instruct the validator to mark bogus messages as  indeterminate.
</span></span><span style=display:flex><span>            The  security  checks  are performed, but if the result is bogus
</span></span><span style=display:flex><span>            (failed security), the reply is not  withheld  from  the  client
</span></span><span style=display:flex><span>            with  SERVFAIL as usual. The client receives the bogus data. For
</span></span><span style=display:flex><span>            messages that are found to be  secure  the  AD  bit  is  set  in
</span></span><span style=display:flex><span>            replies.  Also logging is performed as for full validation.  The
</span></span><span style=display:flex><span>            default value is &#34;no&#34;.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ignore-cd-flag: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Instruct Unbound to ignore the CD flag from clients  and  refuse
</span></span><span style=display:flex><span>            to  return  bogus  answers to them.  Thus, the CD (Checking Dis-
</span></span><span style=display:flex><span>            abled) flag does not disable checking any more.  This is  useful
</span></span><span style=display:flex><span>            if  legacy (w2008) servers that set the CD flag but cannot vali-
</span></span><span style=display:flex><span>            date DNSSEC themselves are the clients, and  then  Unbound  pro-
</span></span><span style=display:flex><span>            vides them with DNSSEC protection.  The default value is &#34;no&#34;.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    disable-edns-do: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Disable the EDNS DO flag in upstream requests.  It breaks DNSSEC
</span></span><span style=display:flex><span>            validation  for Unbound&#39;s clients.  This results in the upstream
</span></span><span style=display:flex><span>            name servers to not include DNSSEC records in their replies  and
</span></span><span style=display:flex><span>            could  be helpful for devices that cannot handle DNSSEC informa-
</span></span><span style=display:flex><span>            tion.  When the option is enabled, clients that set the DO  flag
</span></span><span style=display:flex><span>            receive  no  EDNS record in the response to indicate the lack of
</span></span><span style=display:flex><span>            support to them.  If this option is enabled but Unbound  is  al-
</span></span><span style=display:flex><span>            ready configured for DNSSEC validation (i.e., the validator mod-
</span></span><span style=display:flex><span>            ule  is  enabled;  default) this option is implicitly turned off
</span></span><span style=display:flex><span>            with a warning as to not break  DNSSEC  validation  in  Unbound.
</span></span><span style=display:flex><span>            Default is no.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    serve-expired: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            If  enabled,  Unbound attempts to serve old responses from cache
</span></span><span style=display:flex><span>            with a TTL of serve-expired-reply-ttl in the response.   By  de-
</span></span><span style=display:flex><span>            fault the expired answer will be used after a resolution attempt
</span></span><span style=display:flex><span>            errored  out or is taking more than serve-expired-client-timeout
</span></span><span style=display:flex><span>            to resolve.  Default is &#34;no&#34;.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    serve-expired-ttl: &lt;seconds&gt;
</span></span><span style=display:flex><span>            Limit serving of expired responses to configured  seconds  after
</span></span><span style=display:flex><span>            expiration.   0  disables  the  limit.  This option only applies
</span></span><span style=display:flex><span>            when serve-expired is enabled.  A suggested value per  RFC  8767
</span></span><span style=display:flex><span>            is  between  86400  (1 day) and 259200 (3 days).  The default is
</span></span><span style=display:flex><span>            86400.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    serve-expired-ttl-reset: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Set the TTL of expired records to  the  serve-expired-ttl  value
</span></span><span style=display:flex><span>            after  a  failed  attempt  to retrieve the record from upstream.
</span></span><span style=display:flex><span>            This makes sure that the expired records will be served as  long
</span></span><span style=display:flex><span>            as there are queries for it.  Default is &#34;no&#34;.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    serve-expired-reply-ttl: &lt;seconds&gt;
</span></span><span style=display:flex><span>            TTL  value to use when replying with expired data.  If serve-ex-
</span></span><span style=display:flex><span>            pired-client-timeout is also used then it is RECOMMENDED to  use
</span></span><span style=display:flex><span>            30 as the value (RFC 8767).  The default is 30.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    serve-expired-client-timeout: &lt;msec&gt;
</span></span><span style=display:flex><span>            Time  in milliseconds before replying to the client with expired
</span></span><span style=display:flex><span>            data.  This essentially  enables  the  serve-stale  behavior  as
</span></span><span style=display:flex><span>            specified in RFC 8767 that first tries to resolve before immedi-
</span></span><span style=display:flex><span>            ately responding with expired data.  Setting this to 0 will dis-
</span></span><span style=display:flex><span>            able  this behavior and instead serve the expired record immedi-
</span></span><span style=display:flex><span>            ately from the cache before attempting to refresh it via resolu-
</span></span><span style=display:flex><span>            tion.  Default is 1800.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    serve-original-ttl: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            If enabled, Unbound will always return the original TTL  as  re-
</span></span><span style=display:flex><span>            ceived  from the upstream name server rather than the decrement-
</span></span><span style=display:flex><span>            ing TTL as stored in the cache.  This feature may be  useful  if
</span></span><span style=display:flex><span>            Unbound  serves  as  a  front-end to a hidden authoritative name
</span></span><span style=display:flex><span>            server. Enabling this feature does not impact cache  expiry,  it
</span></span><span style=display:flex><span>            only  changes  the  TTL  Unbound embeds in responses to queries.
</span></span><span style=display:flex><span>            Note that enabling this feature implicitly disables  enforcement
</span></span><span style=display:flex><span>            of  the  configured  minimum  and  maximum TTL, as it is assumed
</span></span><span style=display:flex><span>            users who enable this feature do not want Unbound to change  the
</span></span><span style=display:flex><span>            TTL  obtained from an upstream server.  Thus, the values set us-
</span></span><span style=display:flex><span>            ing cache-min-ttl and cache-max-ttl  are  ignored.   Default  is
</span></span><span style=display:flex><span>            &#34;no&#34;.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    val-nsec3-keysize-iterations: &lt;&#34;list of values&#34;&gt;
</span></span><span style=display:flex><span>            List of keysize and iteration count values, separated by spaces,
</span></span><span style=display:flex><span>            surrounded  by  quotes. Default is &#34;1024 150 2048 150 4096 150&#34;.
</span></span><span style=display:flex><span>            This determines the maximum allowed NSEC3 iteration count before
</span></span><span style=display:flex><span>            a message is simply marked insecure instead  of  performing  the
</span></span><span style=display:flex><span>            many hashing iterations. The list must be in ascending order and
</span></span><span style=display:flex><span>            have  at least one entry. If you set it to &#34;1024 65535&#34; there is
</span></span><span style=display:flex><span>            no restriction to NSEC3 iteration values.  This  table  must  be
</span></span><span style=display:flex><span>            kept short; a very long list could cause slower operation.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    zonemd-permissive-mode: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            If  enabled the ZONEMD verification failures are only logged and
</span></span><span style=display:flex><span>            do not cause the zone to be blocked and  only  return  servfail.
</span></span><span style=display:flex><span>            Useful  for  testing  out  if  it works, or if the operator only
</span></span><span style=display:flex><span>            wants to be notified of a problem  without  disrupting  service.
</span></span><span style=display:flex><span>            Default is no.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    add-holddown: &lt;seconds&gt;
</span></span><span style=display:flex><span>            Instruct  the auto-trust-anchor-file probe mechanism for RFC5011
</span></span><span style=display:flex><span>            autotrust updates to add new trust anchors only after they  have
</span></span><span style=display:flex><span>            been visible for this time.  Default is 30 days as per the RFC.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    del-holddown: &lt;seconds&gt;
</span></span><span style=display:flex><span>            Instruct  the auto-trust-anchor-file probe mechanism for RFC5011
</span></span><span style=display:flex><span>            autotrust updates to remove revoked  trust  anchors  after  they
</span></span><span style=display:flex><span>            have been kept in the revoked list for this long.  Default is 30
</span></span><span style=display:flex><span>            days as per the RFC.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    keep-missing: &lt;seconds&gt;
</span></span><span style=display:flex><span>            Instruct  the auto-trust-anchor-file probe mechanism for RFC5011
</span></span><span style=display:flex><span>            autotrust updates to remove missing  trust  anchors  after  they
</span></span><span style=display:flex><span>            have  been  unseen for this long.  This cleans up the state file
</span></span><span style=display:flex><span>            if the target zone does not perform trust anchor revocation,  so
</span></span><span style=display:flex><span>            this makes the auto probe mechanism work with zones that perform
</span></span><span style=display:flex><span>            regular  (non-5011)  rollovers.   The  default is 366 days.  The
</span></span><span style=display:flex><span>            value 0 does not remove missing anchors, as per the RFC.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    permit-small-holddown: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Debug option that allows the autotrust 5011 rollover  timers  to
</span></span><span style=display:flex><span>            assume very small values.  Default is no.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    key-cache-size: &lt;number&gt;
</span></span><span style=display:flex><span>            Number  of  bytes size of the key cache. Default is 4 megabytes.
</span></span><span style=display:flex><span>            A plain number is in bytes, append &#39;k&#39;, &#39;m&#39;  or  &#39;g&#39;  for  kilo-
</span></span><span style=display:flex><span>            bytes, megabytes or gigabytes (1024*1024 bytes in a megabyte).
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    key-cache-slabs: &lt;number&gt;
</span></span><span style=display:flex><span>            Number  of  slabs in the key cache. Slabs reduce lock contention
</span></span><span style=display:flex><span>            by threads.  Must be set to a power of 2. Setting (close) to the
</span></span><span style=display:flex><span>            number of cpus is a reasonable guess.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    neg-cache-size: &lt;number&gt;
</span></span><span style=display:flex><span>            Number of bytes size of the aggressive negative  cache.  Default
</span></span><span style=display:flex><span>            is  1  megabyte.  A plain number is in bytes, append &#39;k&#39;, &#39;m&#39; or
</span></span><span style=display:flex><span>            &#39;g&#39; for kilobytes, megabytes or gigabytes (1024*1024 bytes in  a
</span></span><span style=display:flex><span>            megabyte).
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    unblock-lan-zones: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Default  is  disabled.   If  enabled,  then  for private address
</span></span><span style=display:flex><span>            space, the reverse lookups are no longer filtered.  This  allows
</span></span><span style=display:flex><span>            Unbound  when running as dns service on a host where it provides
</span></span><span style=display:flex><span>            service for that host, to put out all of  the  queries  for  the
</span></span><span style=display:flex><span>            &#39;lan&#39; upstream.  When enabled, only localhost, 127.0.0.1 reverse
</span></span><span style=display:flex><span>            and  ::1  reverse zones are configured with default local zones.
</span></span><span style=display:flex><span>            Disable the option when Unbound is running as a (DHCP-) DNS net-
</span></span><span style=display:flex><span>            work resolver for a group of machines, where such lookups should
</span></span><span style=display:flex><span>            be filtered (RFC compliance), this  also  stops  potential  data
</span></span><span style=display:flex><span>            leakage about the local network to the upstream DNS servers.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    insecure-lan-zones: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Default  is  disabled.  If enabled, then reverse lookups in pri-
</span></span><span style=display:flex><span>            vate address space are not validated.  This is usually  required
</span></span><span style=display:flex><span>            whenever unblock-lan-zones is used.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    local-zone: &lt;zone&gt; &lt;type&gt;
</span></span><span style=display:flex><span>            Configure  a  local zone. The type determines the answer to give
</span></span><span style=display:flex><span>            if there is no  match  from  local-data.  The  types  are  deny,
</span></span><span style=display:flex><span>            refuse,  static, transparent, redirect, nodefault, typetranspar-
</span></span><span style=display:flex><span>            ent, inform, inform_deny,  inform_redirect,  always_transparent,
</span></span><span style=display:flex><span>            block_a,  always_refuse,  always_nxdomain,  always_null, noview,
</span></span><span style=display:flex><span>            and are explained below. After that  the  default  settings  are
</span></span><span style=display:flex><span>            listed.  Use  local-data: to enter data into the local zone. An-
</span></span><span style=display:flex><span>            swers for local zones are authoritative DNS answers. By  default
</span></span><span style=display:flex><span>            the zones are class IN.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            If you need more complicated authoritative data, with referrals,
</span></span><span style=display:flex><span>            wildcards, CNAME/DNAME support, or DNSSEC authoritative service,
</span></span><span style=display:flex><span>            setup  a  stub-zone  for it as detailed in the stub zone section
</span></span><span style=display:flex><span>            below. A stub-zone can be used to have unbound send  queries  to
</span></span><span style=display:flex><span>            another  server,  an authoritative server, to fetch the informa-
</span></span><span style=display:flex><span>            tion. With a forward-zone, unbound sends  queries  to  a  server
</span></span><span style=display:flex><span>            that  is  a  recursive  server to fetch the information. With an
</span></span><span style=display:flex><span>            auth-zone a zone can be loaded from file and  used,  it  can  be
</span></span><span style=display:flex><span>            used  like  a  local-zone for users downstream, or the auth-zone
</span></span><span style=display:flex><span>            information can be used to fetch information from when resolving
</span></span><span style=display:flex><span>            like it is an upstream server. The  forward-zone  and  auth-zone
</span></span><span style=display:flex><span>            options  are  described in their sections below.  If you want to
</span></span><span style=display:flex><span>            perform filtering of the information that the users  can  fetch,
</span></span><span style=display:flex><span>            the  local-zone  and  local-data  statements allow for this, but
</span></span><span style=display:flex><span>            also the rpz functionality can be used,  described  in  the  RPZ
</span></span><span style=display:flex><span>            section.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        deny Do  not  send an answer, drop the query.  If there is a match
</span></span><span style=display:flex><span>                from local data, the query is answered.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        refuse
</span></span><span style=display:flex><span>                Send an error message reply, with rcode REFUSED.  If there is
</span></span><span style=display:flex><span>                a match from local data, the query is answered.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        static
</span></span><span style=display:flex><span>                If there is a match from local data, the query  is  answered.
</span></span><span style=display:flex><span>                Otherwise,  the  query  is  answered with nodata or nxdomain.
</span></span><span style=display:flex><span>                For a negative answer a SOA is  included  in  the  answer  if
</span></span><span style=display:flex><span>                present as local-data for the zone apex domain.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        transparent
</span></span><span style=display:flex><span>                If  there  is a match from local data, the query is answered.
</span></span><span style=display:flex><span>                Otherwise if the query has a different name, the query is re-
</span></span><span style=display:flex><span>                solved normally.  If the query is for a name given in  local-
</span></span><span style=display:flex><span>                data  but  no such type of data is given in localdata, then a
</span></span><span style=display:flex><span>                noerror nodata answer is returned.  If no local-zone is given
</span></span><span style=display:flex><span>                local-data causes a transparent zone to  be  created  by  de-
</span></span><span style=display:flex><span>                fault.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        typetransparent
</span></span><span style=display:flex><span>                If  there  is a match from local data, the query is answered.
</span></span><span style=display:flex><span>                If the query is for a different name, or for  the  same  name
</span></span><span style=display:flex><span>                but  for  a  different  type, the query is resolved normally.
</span></span><span style=display:flex><span>                So, similar to transparent but types that are not  listed  in
</span></span><span style=display:flex><span>                local data are resolved normally, so if an A record is in the
</span></span><span style=display:flex><span>                local  data  that  does  not  cause  a  nodata reply for AAAA
</span></span><span style=display:flex><span>                queries.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        redirect
</span></span><span style=display:flex><span>                The query is answered from the local data for the zone  name.
</span></span><span style=display:flex><span>                There  may  be no local data beneath the zone name.  This an-
</span></span><span style=display:flex><span>                swers queries for the zone, and all subdomains  of  the  zone
</span></span><span style=display:flex><span>                with the local data for the zone.  It can be used to redirect
</span></span><span style=display:flex><span>                a  domain  to  return  a  different address record to the end
</span></span><span style=display:flex><span>                user,  with  local-zone:  &#34;example.com.&#34;  redirect  and   lo-
</span></span><span style=display:flex><span>                cal-data:  &#34;example.com.  A  127.0.0.1&#34; queries for www.exam-
</span></span><span style=display:flex><span>                ple.com and www.foo.example.com are redirected, so that users
</span></span><span style=display:flex><span>                with web browsers  cannot  access  sites  with  suffix  exam-
</span></span><span style=display:flex><span>                ple.com.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        inform
</span></span><span style=display:flex><span>                The  query  is  answered  normally, same as transparent.  The
</span></span><span style=display:flex><span>                client IP address (@portnumber) is printed  to  the  logfile.
</span></span><span style=display:flex><span>                The  log  message  is: timestamp, unbound-pid, info: zonename
</span></span><span style=display:flex><span>                inform IP@port queryname type class.  This option can be used
</span></span><span style=display:flex><span>                for normal resolution, but machines looking up infected names
</span></span><span style=display:flex><span>                are logged, eg. to run antivirus on them.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        inform_deny
</span></span><span style=display:flex><span>                The query is dropped, like &#39;deny&#39;, and logged, like &#39;inform&#39;.
</span></span><span style=display:flex><span>                Ie. find infected machines without answering the queries.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        inform_redirect
</span></span><span style=display:flex><span>                The query is redirected, like &#39;redirect&#39;,  and  logged,  like
</span></span><span style=display:flex><span>                &#39;inform&#39;.   Ie.  answer  queries with fixed data and also log
</span></span><span style=display:flex><span>                the machines that ask.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        always_transparent
</span></span><span style=display:flex><span>                Like transparent, but ignores local data  and  resolves  nor-
</span></span><span style=display:flex><span>                mally.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        block_a
</span></span><span style=display:flex><span>                Like  transparent,  but  ignores local data and resolves nor-
</span></span><span style=display:flex><span>                mally all query types excluding A. For A queries it  uncondi-
</span></span><span style=display:flex><span>                tionally  returns  NODATA.   Useful  in cases when there is a
</span></span><span style=display:flex><span>                need to explicitly force all apps to use  IPv6  protocol  and
</span></span><span style=display:flex><span>                avoid any queries to IPv4.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        always_refuse
</span></span><span style=display:flex><span>                Like refuse, but ignores local data and refuses the query.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        always_nxdomain
</span></span><span style=display:flex><span>                Like  static, but ignores local data and returns nxdomain for
</span></span><span style=display:flex><span>                the query.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        always_nodata
</span></span><span style=display:flex><span>                Like static, but ignores local data and  returns  nodata  for
</span></span><span style=display:flex><span>                the query.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        always_deny
</span></span><span style=display:flex><span>                Like deny, but ignores local data and drops the query.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        always_null
</span></span><span style=display:flex><span>                Always  returns  0.0.0.0  or  ::0 for every name in the zone.
</span></span><span style=display:flex><span>                Like redirect with zero data for A and AAAA.   Ignores  local
</span></span><span style=display:flex><span>                data in the zone.  Used for some block lists.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        noview
</span></span><span style=display:flex><span>                Breaks  out  of  that view and moves towards the global local
</span></span><span style=display:flex><span>                zones for answer to the query.  If  the  view  first  is  no,
</span></span><span style=display:flex><span>                it&#39;ll  resolve  normally.   If  view  first is enabled, it&#39;ll
</span></span><span style=display:flex><span>                break perform that step and check the  global  answers.   For
</span></span><span style=display:flex><span>                when  the  view has view specific overrides but some zone has
</span></span><span style=display:flex><span>                to be answered from global local zone contents.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        nodefault
</span></span><span style=display:flex><span>                Used to turn off default contents for AS112 zones. The  other
</span></span><span style=display:flex><span>                types also turn off default contents for the zone. The &#39;node-
</span></span><span style=display:flex><span>                fault&#39;  option  has  no other effect than turning off default
</span></span><span style=display:flex><span>                contents for the given zone.  Use nodefault if  you  use  ex-
</span></span><span style=display:flex><span>                actly  that zone, if you want to use a subzone, use transpar-
</span></span><span style=display:flex><span>                ent.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    The default  zones  are  localhost,  reverse  127.0.0.1  and  ::1,  the
</span></span><span style=display:flex><span>    home.arpa,  the  resolver.arpa,  the service.arpa, the onion, test, in-
</span></span><span style=display:flex><span>    valid and the AS112 zones. The AS112 zones are reverse  DNS  zones  for
</span></span><span style=display:flex><span>    private  use and reserved IP addresses for which the servers on the in-
</span></span><span style=display:flex><span>    ternet cannot provide correct answers. They are configured  by  default
</span></span><span style=display:flex><span>    to  give nxdomain (no reverse information) answers. The defaults can be
</span></span><span style=display:flex><span>    turned off by specifying your own local-zone of that name, or using the
</span></span><span style=display:flex><span>    &#39;nodefault&#39; type. Below is a list of the default zone contents.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        localhost
</span></span><span style=display:flex><span>                The IP4 and IP6 localhost information is given.  NS  and  SOA
</span></span><span style=display:flex><span>                records are provided for completeness and to satisfy some DNS
</span></span><span style=display:flex><span>                update tools. Default content:
</span></span><span style=display:flex><span>                local-zone: &#34;localhost.&#34; redirect
</span></span><span style=display:flex><span>                local-data: &#34;localhost. 10800 IN NS localhost.&#34;
</span></span><span style=display:flex><span>                local-data: &#34;localhost. 10800 IN
</span></span><span style=display:flex><span>                    SOA localhost. nobody.invalid. 1 3600 1200 604800 10800&#34;
</span></span><span style=display:flex><span>                local-data: &#34;localhost. 10800 IN A 127.0.0.1&#34;
</span></span><span style=display:flex><span>                local-data: &#34;localhost. 10800 IN AAAA ::1&#34;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        reverse IPv4 loopback
</span></span><span style=display:flex><span>                Default content:
</span></span><span style=display:flex><span>                local-zone: &#34;127.in-addr.arpa.&#34; static
</span></span><span style=display:flex><span>                local-data: &#34;127.in-addr.arpa. 10800 IN NS localhost.&#34;
</span></span><span style=display:flex><span>                local-data: &#34;127.in-addr.arpa. 10800 IN
</span></span><span style=display:flex><span>                    SOA localhost. nobody.invalid. 1 3600 1200 604800 10800&#34;
</span></span><span style=display:flex><span>                local-data: &#34;1.0.0.127.in-addr.arpa. 10800 IN
</span></span><span style=display:flex><span>                    PTR localhost.&#34;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        reverse IPv6 loopback
</span></span><span style=display:flex><span>                Default content:
</span></span><span style=display:flex><span>                local-zone: &#34;1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.
</span></span><span style=display:flex><span>                    0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa.&#34; static
</span></span><span style=display:flex><span>                local-data: &#34;1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.
</span></span><span style=display:flex><span>                    0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa. 10800 IN
</span></span><span style=display:flex><span>                    NS localhost.&#34;
</span></span><span style=display:flex><span>                local-data: &#34;1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.
</span></span><span style=display:flex><span>                    0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa. 10800 IN
</span></span><span style=display:flex><span>                    SOA localhost. nobody.invalid. 1 3600 1200 604800 10800&#34;
</span></span><span style=display:flex><span>                local-data: &#34;1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.
</span></span><span style=display:flex><span>                    0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa. 10800 IN
</span></span><span style=display:flex><span>                    PTR localhost.&#34;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        home.arpa (RFC 8375)
</span></span><span style=display:flex><span>                Default content:
</span></span><span style=display:flex><span>                local-zone: &#34;home.arpa.&#34; static
</span></span><span style=display:flex><span>                local-data: &#34;home.arpa. 10800 IN NS localhost.&#34;
</span></span><span style=display:flex><span>                local-data: &#34;home.arpa. 10800 IN
</span></span><span style=display:flex><span>                    SOA localhost. nobody.invalid. 1 3600 1200 604800 10800&#34;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        resolver.arpa (RFC 9462)
</span></span><span style=display:flex><span>                Default content:
</span></span><span style=display:flex><span>                local-zone: &#34;resolver.arpa.&#34; static
</span></span><span style=display:flex><span>                local-data: &#34;resolver.arpa. 10800 IN NS localhost.&#34;
</span></span><span style=display:flex><span>                local-data: &#34;resolver.arpa. 10800 IN
</span></span><span style=display:flex><span>                    SOA localhost. nobody.invalid. 1 3600 1200 604800 10800&#34;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        service.arpa (draft-ietf-dnssd-srp-25)
</span></span><span style=display:flex><span>                Default content:
</span></span><span style=display:flex><span>                local-zone: &#34;service.arpa.&#34; static
</span></span><span style=display:flex><span>                local-data: &#34;service.arpa. 10800 IN NS localhost.&#34;
</span></span><span style=display:flex><span>                local-data: &#34;service.arpa. 10800 IN
</span></span><span style=display:flex><span>                    SOA localhost. nobody.invalid. 1 3600 1200 604800 10800&#34;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        onion (RFC 7686)
</span></span><span style=display:flex><span>                Default content:
</span></span><span style=display:flex><span>                local-zone: &#34;onion.&#34; static
</span></span><span style=display:flex><span>                local-data: &#34;onion. 10800 IN NS localhost.&#34;
</span></span><span style=display:flex><span>                local-data: &#34;onion. 10800 IN
</span></span><span style=display:flex><span>                    SOA localhost. nobody.invalid. 1 3600 1200 604800 10800&#34;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        test (RFC 6761)
</span></span><span style=display:flex><span>                Default content:
</span></span><span style=display:flex><span>                local-zone: &#34;test.&#34; static
</span></span><span style=display:flex><span>                local-data: &#34;test. 10800 IN NS localhost.&#34;
</span></span><span style=display:flex><span>                local-data: &#34;test. 10800 IN
</span></span><span style=display:flex><span>                    SOA localhost. nobody.invalid. 1 3600 1200 604800 10800&#34;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        invalid (RFC 6761)
</span></span><span style=display:flex><span>                Default content:
</span></span><span style=display:flex><span>                local-zone: &#34;invalid.&#34; static
</span></span><span style=display:flex><span>                local-data: &#34;invalid. 10800 IN NS localhost.&#34;
</span></span><span style=display:flex><span>                local-data: &#34;invalid. 10800 IN
</span></span><span style=display:flex><span>                    SOA localhost. nobody.invalid. 1 3600 1200 604800 10800&#34;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        reverse RFC1918 local use zones
</span></span><span style=display:flex><span>                Reverse  data  for zones 10.in-addr.arpa, 16.172.in-addr.arpa
</span></span><span style=display:flex><span>                to  31.172.in-addr.arpa,   168.192.in-addr.arpa.    The   lo-
</span></span><span style=display:flex><span>                cal-zone: is set static and as local-data: SOA and NS records
</span></span><span style=display:flex><span>                are provided.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        reverse RFC3330 IP4 this, link-local, testnet and broadcast
</span></span><span style=display:flex><span>                Reverse  data for zones 0.in-addr.arpa, 254.169.in-addr.arpa,
</span></span><span style=display:flex><span>                2.0.192.in-addr.arpa (TEST  NET  1),  100.51.198.in-addr.arpa
</span></span><span style=display:flex><span>                (TEST   NET   2),   113.0.203.in-addr.arpa   (TEST   NET  3),
</span></span><span style=display:flex><span>                255.255.255.255.in-addr.arpa.  And  from  64.100.in-addr.arpa
</span></span><span style=display:flex><span>                to 127.100.in-addr.arpa (Shared Address Space).
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        reverse RFC4291 IP6 unspecified
</span></span><span style=display:flex><span>                Reverse data for zone
</span></span><span style=display:flex><span>                0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.
</span></span><span style=display:flex><span>                0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        reverse RFC4193 IPv6 Locally Assigned Local Addresses
</span></span><span style=display:flex><span>                Reverse data for zone D.F.ip6.arpa.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        reverse RFC4291 IPv6 Link Local Addresses
</span></span><span style=display:flex><span>                Reverse data for zones 8.E.F.ip6.arpa to B.E.F.ip6.arpa.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        reverse IPv6 Example Prefix
</span></span><span style=display:flex><span>                Reverse  data for zone 8.B.D.0.1.0.0.2.ip6.arpa. This zone is
</span></span><span style=display:flex><span>                used for tutorials and examples. You can remove the block  on
</span></span><span style=display:flex><span>                this zone with:
</span></span><span style=display:flex><span>                local-zone: 8.B.D.0.1.0.0.2.ip6.arpa. nodefault
</span></span><span style=display:flex><span>                You can also selectively unblock a part of the zone by making
</span></span><span style=display:flex><span>                that part transparent with a local-zone statement.  This also
</span></span><span style=display:flex><span>                works with the other default zones.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    local-data: &#34;&lt;resource record string&gt;&#34;
</span></span><span style=display:flex><span>        Configure  local data, which is served in reply to queries for it.
</span></span><span style=display:flex><span>        The query has to match exactly unless you configure the local-zone
</span></span><span style=display:flex><span>        as redirect. If not matched exactly, the  local-zone  type  deter-
</span></span><span style=display:flex><span>        mines  further processing. If local-data is configured that is not
</span></span><span style=display:flex><span>        a subdomain of a local-zone, a transparent local-zone  is  config-
</span></span><span style=display:flex><span>        ured.   For record types such as TXT, use single quotes, as in lo-
</span></span><span style=display:flex><span>        cal-data: &#39;example. TXT &#34;text&#34;&#39;.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        If you need more complicated authoritative data,  with  referrals,
</span></span><span style=display:flex><span>        wildcards,  CNAME/DNAME  support, or DNSSEC authoritative service,
</span></span><span style=display:flex><span>        setup a stub-zone for it as detailed in the stub zone section  be-
</span></span><span style=display:flex><span>        low.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    local-data-ptr: &#34;IPaddr name&#34;
</span></span><span style=display:flex><span>        Configure  local data shorthand for a PTR record with the reversed
</span></span><span style=display:flex><span>        IPv4 or IPv6 address and the host name.   For  example  &#34;192.0.2.4
</span></span><span style=display:flex><span>        www.example.com&#34;.   TTL  can  be  inserted like this: &#34;2001:DB8::4
</span></span><span style=display:flex><span>        7200 www.example.com&#34;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    local-zone-tag: &lt;zone&gt; &lt;&#34;list of tags&#34;&gt;
</span></span><span style=display:flex><span>        Assign tags to localzones. Tagged localzones will only be  applied
</span></span><span style=display:flex><span>        when the used access-control element has a matching tag. Tags must
</span></span><span style=display:flex><span>        be  defined  in  define-tags.  Enclose list of tags in quotes (&#34;&#34;)
</span></span><span style=display:flex><span>        and put spaces between tags.  When  there  are  multiple  tags  it
</span></span><span style=display:flex><span>        checks  if  the intersection of the list of tags for the query and
</span></span><span style=display:flex><span>        local-zone-tag is non-empty.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    local-zone-override: &lt;zone&gt; &lt;IP netblock&gt; &lt;type&gt;
</span></span><span style=display:flex><span>        Override the localzone type for queries  from  addresses  matching
</span></span><span style=display:flex><span>        netblock.  Use this localzone type, regardless the type configured
</span></span><span style=display:flex><span>        for  the  local-zone (both tagged and untagged) and regardless the
</span></span><span style=display:flex><span>        type configured using access-control-tag-action.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    response-ip: &lt;IP-netblock&gt; &lt;action&gt;
</span></span><span style=display:flex><span>        This requires use of the &#34;respip&#34; module.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        If the IP address in an AAAA or A RR in the answer  section  of  a
</span></span><span style=display:flex><span>        response  matches  the specified IP netblock, the specified action
</span></span><span style=display:flex><span>        will apply.  &lt;action&gt; has generally the same semantics as that for
</span></span><span style=display:flex><span>        access-control-tag-action, but there are some exceptions.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        Actions for response-ip are different from those for local-zone in
</span></span><span style=display:flex><span>        that in case of the former there is no point of such conditions as
</span></span><span style=display:flex><span>        &#34;the query matches it but there is no  local  data&#34;.   Because  of
</span></span><span style=display:flex><span>        this difference, the semantics of response-ip actions are modified
</span></span><span style=display:flex><span>        or  simplified  as follows: The static, refuse, transparent, type-
</span></span><span style=display:flex><span>        transparent, and nodefault actions are  invalid  for  response-ip.
</span></span><span style=display:flex><span>        Using  any of these will cause the configuration to be rejected as
</span></span><span style=display:flex><span>        faulty. The deny action is non-conditional, i.e. it always results
</span></span><span style=display:flex><span>        in dropping the corresponding query.  The resolution result before
</span></span><span style=display:flex><span>        applying the deny action is still cached and can be used for other
</span></span><span style=display:flex><span>        queries.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    response-ip-data: &lt;IP-netblock&gt; &lt;&#34;resource record string&#34;&gt;
</span></span><span style=display:flex><span>        This requires use of the &#34;respip&#34; module.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        This specifies the action data for response-ip with  action  being
</span></span><span style=display:flex><span>        to  redirect  as specified by &#34;resource record string&#34;.  &#34;Resource
</span></span><span style=display:flex><span>        record string&#34; is similar to  that  of  access-control-tag-action,
</span></span><span style=display:flex><span>        but  it  must be of either AAAA, A or CNAME types.  If the IP-net-
</span></span><span style=display:flex><span>        block is an IPv6/IPv4 prefix, the record must  be  AAAA/A  respec-
</span></span><span style=display:flex><span>        tively,  unless it is a CNAME (which can be used for both versions
</span></span><span style=display:flex><span>        of IP netblocks).  If it is CNAME there must not be more than  one
</span></span><span style=display:flex><span>        response-ip-data  for the same IP-netblock.  Also, CNAME and other
</span></span><span style=display:flex><span>        types of records must not coexist for the same  IP-netblock,  fol-
</span></span><span style=display:flex><span>        lowing  the  normal  rules  for CNAME records.  The textual domain
</span></span><span style=display:flex><span>        name for the CNAME does not have to be explicitly terminated  with
</span></span><span style=display:flex><span>        a  dot  (&#34;.&#34;);  the  root name is assumed to be the origin for the
</span></span><span style=display:flex><span>        name.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    response-ip-tag: &lt;IP-netblock&gt; &lt;&#34;list of tags&#34;&gt;
</span></span><span style=display:flex><span>        This requires use of the &#34;respip&#34; module.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        Assign tags to response IP-netblocks.  If the  IP  address  in  an
</span></span><span style=display:flex><span>        AAAA or A RR in the answer section of a response matches the spec-
</span></span><span style=display:flex><span>        ified  IP-netblock,  the specified tags are assigned to the IP ad-
</span></span><span style=display:flex><span>        dress.  Then, if an access-control-tag is defined for  the  client
</span></span><span style=display:flex><span>        and  it  includes  one of the tags for the response IP, the corre-
</span></span><span style=display:flex><span>        sponding access-control-tag-action will apply.  Tag matching  rule
</span></span><span style=display:flex><span>        is  the  same as that for access-control-tag and local-zones.  Un-
</span></span><span style=display:flex><span>        like local-zone-tag, response-ip-tag can be defined for an IP-net-
</span></span><span style=display:flex><span>        block even if no response-ip is defined  for  that  netblock.   If
</span></span><span style=display:flex><span>        multiple  response-ip-tag  options  are specified for the same IP-
</span></span><span style=display:flex><span>        netblock in different statements, all but the first  will  be  ig-
</span></span><span style=display:flex><span>        nored.   However,  this will not be flagged as a configuration er-
</span></span><span style=display:flex><span>        ror, but the result is probably not what was intended.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        Actions specified  in  an  access-control-tag-action  that  has  a
</span></span><span style=display:flex><span>        matching  tag with response-ip-tag can be those that are &#34;invalid&#34;
</span></span><span style=display:flex><span>        for response-ip listed above, since access-control-tag-actions can
</span></span><span style=display:flex><span>        be shared with local zones.  For these  actions,  if  they  behave
</span></span><span style=display:flex><span>        differently  depending on whether local data exists or not in case
</span></span><span style=display:flex><span>        of local zones, the behavior for response-ip-data  will  generally
</span></span><span style=display:flex><span>        result  in NOERROR/NODATA instead of NXDOMAIN, since the response-
</span></span><span style=display:flex><span>        ip data are inherently type specific, and  non-existence  of  data
</span></span><span style=display:flex><span>        does not indicate anything about the existence or non-existence of
</span></span><span style=display:flex><span>        the qname itself.  For example, if the matching tag action is sta-
</span></span><span style=display:flex><span>        tic but there is no data for the corresponding response-ip config-
</span></span><span style=display:flex><span>        uration,  then  the  result will be NOERROR/NODATA.  The only case
</span></span><span style=display:flex><span>        where NXDOMAIN is returned is when an always_nxdomain  action  ap-
</span></span><span style=display:flex><span>        plies.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ratelimit: &lt;number or 0&gt;
</span></span><span style=display:flex><span>        Enable  ratelimiting  of queries sent to nameserver for performing
</span></span><span style=display:flex><span>        recursion.  If 0, the default, it is disabled.  This option is ex-
</span></span><span style=display:flex><span>        perimental at this time.  The ratelimit is in queries  per  second
</span></span><span style=display:flex><span>        that  are  allowed.   More  queries  are turned away with an error
</span></span><span style=display:flex><span>        (servfail).  This stops recursive floods, eg. random query  names,
</span></span><span style=display:flex><span>        but not spoofed reflection floods.  Cached responses are not rate-
</span></span><span style=display:flex><span>        limited  by  this setting.  The zone of the query is determined by
</span></span><span style=display:flex><span>        examining the nameservers for it, the zone name is  used  to  keep
</span></span><span style=display:flex><span>        track  of  the rate.  For example, 1000 may be a suitable value to
</span></span><span style=display:flex><span>        stop the server from being overloaded with random names, and keeps
</span></span><span style=display:flex><span>        Unbound from sending traffic to the nameservers for  those  zones.
</span></span><span style=display:flex><span>        Configured forwarders are excluded from ratelimiting.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ratelimit-size: &lt;memory size&gt;
</span></span><span style=display:flex><span>        Give  the  size of the data structure in which the current ongoing
</span></span><span style=display:flex><span>        rates are kept track in.  Default 4m.  In bytes  or  use  m(mega),
</span></span><span style=display:flex><span>        k(kilo),  g(giga).  The ratelimit structure is small, so this data
</span></span><span style=display:flex><span>        structure likely does not need to be large.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ratelimit-slabs: &lt;number&gt;
</span></span><span style=display:flex><span>        Give power of 2 number of slabs, this is used to reduce lock  con-
</span></span><span style=display:flex><span>        tention  in  the  ratelimit tracking data structure.  Close to the
</span></span><span style=display:flex><span>        number of cpus is a fairly good setting.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ratelimit-factor: &lt;number&gt;
</span></span><span style=display:flex><span>        Set the amount of queries to rate limit  when  the  limit  is  ex-
</span></span><span style=display:flex><span>        ceeded.   If  set  to 0, all queries are dropped for domains where
</span></span><span style=display:flex><span>        the limit is exceeded.  If set to another value, 1 in that  number
</span></span><span style=display:flex><span>        is  allowed  through  to  complete.   Default is 10, allowing 1/10
</span></span><span style=display:flex><span>        traffic to flow normally.  This can make ordinary queries complete
</span></span><span style=display:flex><span>        (if repeatedly queried for), and enter the cache, whilst also mit-
</span></span><span style=display:flex><span>        igating the traffic flow by the factor given.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ratelimit-backoff: &lt;yes or no&gt;
</span></span><span style=display:flex><span>        If enabled, the ratelimit is treated as a hard failure instead  of
</span></span><span style=display:flex><span>        the  default  maximum  allowed  constant  rate.  When the limit is
</span></span><span style=display:flex><span>        reached, traffic is ratelimited and demand continues  to  be  kept
</span></span><span style=display:flex><span>        track  of  for a 2 second rate window.  No traffic is allowed, ex-
</span></span><span style=display:flex><span>        cept for ratelimit-factor, until demand decreases below  the  con-
</span></span><span style=display:flex><span>        figured ratelimit for a 2 second rate window.  Useful to set rate-
</span></span><span style=display:flex><span>        limit  to  a  suspicious rate to aggressively limit unusually high
</span></span><span style=display:flex><span>        traffic.  Default is off.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ratelimit-for-domain: &lt;domain&gt; &lt;number qps or 0&gt;
</span></span><span style=display:flex><span>        Override the global ratelimit for an exact match domain name  with
</span></span><span style=display:flex><span>        the  listed  number.   You  can give this for any number of names.
</span></span><span style=display:flex><span>        For example, for a top-level-domain you may want to have a  higher
</span></span><span style=display:flex><span>        limit  than  other  names.  A value of 0 will disable ratelimiting
</span></span><span style=display:flex><span>        for that domain.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ratelimit-below-domain: &lt;domain&gt; &lt;number qps or 0&gt;
</span></span><span style=display:flex><span>        Override the global ratelimit for a domain name that ends in  this
</span></span><span style=display:flex><span>        name.  You can give this multiple times, it then describes differ-
</span></span><span style=display:flex><span>        ent  settings  in  different  parts of the namespace.  The closest
</span></span><span style=display:flex><span>        matching suffix is used to determine the qps limit.  The rate  for
</span></span><span style=display:flex><span>        the   exact  matching  domain  name  is  not  changed,  use  rate-
</span></span><span style=display:flex><span>        limit-for-domain to set that, you might want to use different set-
</span></span><span style=display:flex><span>        tings for a top-level-domain and subdomains.  A value  of  0  will
</span></span><span style=display:flex><span>        disable ratelimiting for domain names that end in this name.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ip-ratelimit: &lt;number or 0&gt;
</span></span><span style=display:flex><span>        Enable  global  ratelimiting  of  queries accepted per IP address.
</span></span><span style=display:flex><span>        This option is experimental at this time.   The  ratelimit  is  in
</span></span><span style=display:flex><span>        queries  per second that are allowed.  More queries are completely
</span></span><span style=display:flex><span>        dropped and will not receive a reply, SERVFAIL or  otherwise.   IP
</span></span><span style=display:flex><span>        ratelimiting happens before looking in the cache. This may be use-
</span></span><span style=display:flex><span>        ful  for  mitigating  amplification attacks.  Clients with a valid
</span></span><span style=display:flex><span>        DNS Cookie will bypass the ratelimit.  If  a  ratelimit  for  such
</span></span><span style=display:flex><span>        clients  is still needed, ip-ratelimit-cookie can be used instead.
</span></span><span style=display:flex><span>        Default is 0 (disabled).
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ip-ratelimit-cookie: &lt;number or 0&gt;
</span></span><span style=display:flex><span>        Enable global ratelimiting of queries accepted per IP address with
</span></span><span style=display:flex><span>        a valid DNS Cookie.  This option is  experimental  at  this  time.
</span></span><span style=display:flex><span>        The  ratelimit  is  in  queries per second that are allowed.  More
</span></span><span style=display:flex><span>        queries are completely dropped and will not receive a reply, SERV-
</span></span><span style=display:flex><span>        FAIL or otherwise.  IP ratelimiting happens before looking in  the
</span></span><span style=display:flex><span>        cache.   This  option  could  be  useful  in  combination with al-
</span></span><span style=display:flex><span>        low_cookie in an attempt to mitigate other  amplification  attacks
</span></span><span style=display:flex><span>        than  UDP  reflections  (e.g.,  attacks  targeting Unbound itself)
</span></span><span style=display:flex><span>        which are already handled with DNS Cookies.  If used, the value is
</span></span><span style=display:flex><span>        suggested to be higher than ip-ratelimit e.g.,  tenfold.   Default
</span></span><span style=display:flex><span>        is 0 (disabled).
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ip-ratelimit-size: &lt;memory size&gt;
</span></span><span style=display:flex><span>        Give  the  size of the data structure in which the current ongoing
</span></span><span style=display:flex><span>        rates are kept track in.  Default 4m.  In bytes  or  use  m(mega),
</span></span><span style=display:flex><span>        k(kilo),  g(giga).   The  ip ratelimit structure is small, so this
</span></span><span style=display:flex><span>        data structure likely does not need to be large.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ip-ratelimit-slabs: &lt;number&gt;
</span></span><span style=display:flex><span>        Give power of 2 number of slabs, this is used to reduce lock  con-
</span></span><span style=display:flex><span>        tention in the ip ratelimit tracking data structure.  Close to the
</span></span><span style=display:flex><span>        number of cpus is a fairly good setting.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ip-ratelimit-factor: &lt;number&gt;
</span></span><span style=display:flex><span>        Set  the  amount  of  queries  to rate limit when the limit is ex-
</span></span><span style=display:flex><span>        ceeded.  If set to 0, all queries are dropped for addresses  where
</span></span><span style=display:flex><span>        the  limit is exceeded.  If set to another value, 1 in that number
</span></span><span style=display:flex><span>        is allowed through to complete.   Default  is  10,  allowing  1/10
</span></span><span style=display:flex><span>        traffic to flow normally.  This can make ordinary queries complete
</span></span><span style=display:flex><span>        (if repeatedly queried for), and enter the cache, whilst also mit-
</span></span><span style=display:flex><span>        igating the traffic flow by the factor given.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ip-ratelimit-backoff: &lt;yes or no&gt;
</span></span><span style=display:flex><span>        If  enabled, the ratelimit is treated as a hard failure instead of
</span></span><span style=display:flex><span>        the default maximum allowed constant  rate.   When  the  limit  is
</span></span><span style=display:flex><span>        reached,  traffic  is  ratelimited and demand continues to be kept
</span></span><span style=display:flex><span>        track of for a 2 second rate window.  No traffic is  allowed,  ex-
</span></span><span style=display:flex><span>        cept  for  ip-ratelimit-factor,  until  demand decreases below the
</span></span><span style=display:flex><span>        configured ratelimit for a 2 second rate window.   Useful  to  set
</span></span><span style=display:flex><span>        ip-ratelimit  to a suspicious rate to aggressively limit unusually
</span></span><span style=display:flex><span>        high traffic.  Default is off.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    outbound-msg-retry: &lt;number&gt;
</span></span><span style=display:flex><span>        The number of retries, per upstream nameserver  in  a  delegation,
</span></span><span style=display:flex><span>        that  Unbound  will  attempt  in  case a throwaway response is re-
</span></span><span style=display:flex><span>        ceived.  No response (timeout) contributes to the  retry  counter.
</span></span><span style=display:flex><span>        If  a forward/stub zone is used, this is the number of retries per
</span></span><span style=display:flex><span>        nameserver in the zone.  Default is 5.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    max-sent-count: &lt;number&gt;
</span></span><span style=display:flex><span>        Hard limit on the number of outgoing  queries  Unbound  will  make
</span></span><span style=display:flex><span>        while  resolving  a  name,  making sure large NS sets do not loop.
</span></span><span style=display:flex><span>        Results in SERVFAIL when reached.  It  resets  on  query  restarts
</span></span><span style=display:flex><span>        (e.g., CNAME) and referrals.  Default is 32.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    max-query-restarts: &lt;number&gt;
</span></span><span style=display:flex><span>        Hard  limit on the number of times Unbound is allowed to restart a
</span></span><span style=display:flex><span>        query upon encountering a CNAME record.  Results in SERVFAIL  when
</span></span><span style=display:flex><span>        reached.   Changing  this value needs caution as it can allow long
</span></span><span style=display:flex><span>        CNAME chains to be accepted, where Unbound needs  to  verify  (re-
</span></span><span style=display:flex><span>        solve) each link individually.  Default is 11.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    iter-scrub-ns: &lt;number&gt;
</span></span><span style=display:flex><span>        Limit  on the number of NS records allowed in an rrset of type NS,
</span></span><span style=display:flex><span>        from the iterator scrubber. This protects the internals of the re-
</span></span><span style=display:flex><span>        solver from overly large NS sets. Default is 20.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    iter-scrub-cname: &lt;number&gt;
</span></span><span style=display:flex><span>        Limit on the number of CNAME, DNAME records in an answer, from the
</span></span><span style=display:flex><span>        iterator scrubber. This protects the  internals  of  the  resolver
</span></span><span style=display:flex><span>        from  overly  long  indirection chains. Clips off the remainder of
</span></span><span style=display:flex><span>        the reply packet at that point.  Default is 11.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    max-global-quota: &lt;number&gt;
</span></span><span style=display:flex><span>        Limit on the number of upstream queries sent out for  an  incoming
</span></span><span style=display:flex><span>        query  and  its  subqueries from recursion. It is not reset during
</span></span><span style=display:flex><span>        the resolution. When it is exceeded the query is  failed  and  the
</span></span><span style=display:flex><span>        lookup process stops.  Default is 200.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    fast-server-permil: &lt;number&gt;
</span></span><span style=display:flex><span>        Specify how many times out of 1000 to pick from the set of fastest
</span></span><span style=display:flex><span>        servers.  0 turns the feature off.  A value of 900 would pick from
</span></span><span style=display:flex><span>        the fastest servers 90 percent of the time, and would perform nor-
</span></span><span style=display:flex><span>        mal  exploration  of  random  servers for the remaining time. When
</span></span><span style=display:flex><span>        prefetch is enabled (or serve-expired), such  prefetches  are  not
</span></span><span style=display:flex><span>        sped up, because there is no one waiting for it, and it presents a
</span></span><span style=display:flex><span>        good moment to perform server exploration. The fast-server-num op-
</span></span><span style=display:flex><span>        tion  can  be used to specify the size of the fastest servers set.
</span></span><span style=display:flex><span>        The default for fast-server-permil is 0.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    fast-server-num: &lt;number&gt;
</span></span><span style=display:flex><span>        Set the number of servers that should be used for fast server  se-
</span></span><span style=display:flex><span>        lection. Only use the fastest specified number of servers with the
</span></span><span style=display:flex><span>        fast-server-permil  option, that turns this on or off. The default
</span></span><span style=display:flex><span>        is to use the fastest 3 servers.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    answer-cookie: &lt;yes or no&gt;
</span></span><span style=display:flex><span>        If enabled, Unbound will answer to requests containing DNS Cookies
</span></span><span style=display:flex><span>        as specified in RFC 7873 and RFC 9018.  Default is no.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    cookie-secret: &lt;128 bit hex string&gt;
</span></span><span style=display:flex><span>        Server&#39;s secret for DNS Cookie generation.  Useful  to  explicitly
</span></span><span style=display:flex><span>        set  for  servers  in an anycast deployment that need to share the
</span></span><span style=display:flex><span>        secret in order to verify each other&#39;s Server Cookies.  An example
</span></span><span style=display:flex><span>        hex string would be  &#34;000102030405060708090a0b0c0d0e0f&#34;.   Default
</span></span><span style=display:flex><span>        is  a  128 bits random secret generated at startup time.  This op-
</span></span><span style=display:flex><span>        tion is ignored if a cookie-secret-file is present.  In that  case
</span></span><span style=display:flex><span>        the secrets from that file are used in DNS Cookie calculations.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    cookie-secret-file: &lt;filename&gt;
</span></span><span style=display:flex><span>        File  from  which the secrets are read used in DNS Cookie calcula-
</span></span><span style=display:flex><span>        tions. When this file exists, the secrets in this  file  are  used
</span></span><span style=display:flex><span>        and  the  secret specified by the cookie-secret option is ignored.
</span></span><span style=display:flex><span>        Enable  it  by  setting  a  filename,   like   &#34;/usr/local/etc/un-
</span></span><span style=display:flex><span>        bound_cookiesecrets.txt&#34;.  The content of this file must be manip-
</span></span><span style=display:flex><span>        ulated  with  the  add_cookie_secret, drop_cookie_secret and acti-
</span></span><span style=display:flex><span>        vate_cookie_secret commands to the unbound-control(8) tool. Please
</span></span><span style=display:flex><span>        see that manpage on how to perform a safe cookie secret  rollover.
</span></span><span style=display:flex><span>        Default is &#34;&#34; (disabled).
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    edns-client-string: &lt;IP netblock&gt; &lt;string&gt;
</span></span><span style=display:flex><span>        Include  an  EDNS0  option  containing  configured ascii string in
</span></span><span style=display:flex><span>        queries with destination address matching the configured  IP  net-
</span></span><span style=display:flex><span>        block.   This configuration option can be used multiple times. The
</span></span><span style=display:flex><span>        most specific match will be used.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    edns-client-string-opcode: &lt;opcode&gt;
</span></span><span style=display:flex><span>        EDNS0 option code for the edns-client-string  option,  from  0  to
</span></span><span style=display:flex><span>        1.       A  value from the `Reserved for Local/Experimental` range
</span></span><span style=display:flex><span>        (65001-65534) should be used.  Default is 65001.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ede: &lt;yes or no&gt;
</span></span><span style=display:flex><span>        If enabled, Unbound will respond with  Extended  DNS  Error  codes
</span></span><span style=display:flex><span>        (RFC8914).   These  EDEs provide additional information with a re-
</span></span><span style=display:flex><span>        sponse mainly for, but not limited to, DNS and DNSSEC errors.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        When the val-log-level option is also set to 2, responses with Ex-
</span></span><span style=display:flex><span>        tended DNS Errors concerning DNSSEC failures will also  contain  a
</span></span><span style=display:flex><span>        descriptive  text  message  about the reason for the failure.  De-
</span></span><span style=display:flex><span>        fault is &#34;no&#34;.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ede-serve-expired: &lt;yes or no&gt;
</span></span><span style=display:flex><span>        If enabled, Unbound will attach an Extended  DNS  Error  (RFC8914)
</span></span><span style=display:flex><span>        Code  3  -  Stale  Answer as EDNS0 option to the expired response.
</span></span><span style=display:flex><span>        The ede option needs to be enabled as well for this to work.   De-
</span></span><span style=display:flex><span>        fault is &#34;no&#34;.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    dns-error-reporting: &lt;yes or no&gt;
</span></span><span style=display:flex><span>        If  enabled,  Unbound  will send DNS Error Reports (RFC9567).  The
</span></span><span style=display:flex><span>        name servers need to express support by attaching the Report-Chan-
</span></span><span style=display:flex><span>        nel EDNS0 option on their replies specifying the  reporting  agent
</span></span><span style=display:flex><span>        for the zone.  Any errors encountered during resolution that would
</span></span><span style=display:flex><span>        result  in Unbound generating an Extended DNS Error (RFC8914) will
</span></span><span style=display:flex><span>        be reported to the zone&#39;s reporting agent.  The  ede  option  does
</span></span><span style=display:flex><span>        not  need  to be enabled for this to work.  It is advised that the
</span></span><span style=display:flex><span>        qname-minimisation option is also enabled to increase  privacy  on
</span></span><span style=display:flex><span>        the outgoing reports.  Default is &#34;no&#34;.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Remote Control Options
</span></span><span style=display:flex><span>    In  the remote-control: clause are the declarations for the remote con-
</span></span><span style=display:flex><span>    trol facility.  If this is enabled, the unbound-control(8) utility  can
</span></span><span style=display:flex><span>    be  used  to  send  commands to the running Unbound server.  The server
</span></span><span style=display:flex><span>    uses these clauses to setup TLSv1 security for the connection.  The un-
</span></span><span style=display:flex><span>    bound-control(8) utility also reads the remote-control section for  op-
</span></span><span style=display:flex><span>    tions.   To  setup  the  correct  self-signed  certificates use the un-
</span></span><span style=display:flex><span>    bound-control-setup(8) utility.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    control-enable: &lt;yes or no&gt;
</span></span><span style=display:flex><span>        The option is used to enable remote control, default is &#34;no&#34;.   If
</span></span><span style=display:flex><span>        turned off, the server does not listen for control commands.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    control-interface: &lt;ip address or interface name or path&gt;
</span></span><span style=display:flex><span>        Give  IPv4 or IPv6 addresses or local socket path to listen on for
</span></span><span style=display:flex><span>        control commands.  If an interface name is used instead of  an  ip
</span></span><span style=display:flex><span>        address,  the list of ip addresses on that interface are used.  By
</span></span><span style=display:flex><span>        default localhost (127.0.0.1 and ::1) is listened to.  Use 0.0.0.0
</span></span><span style=display:flex><span>        and ::0 to listen to all interfaces.  If you change this and  per-
</span></span><span style=display:flex><span>        missions  have  been  dropped, you must restart the server for the
</span></span><span style=display:flex><span>        change to take effect.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        If you set it to an absolute path, a unix domain socket  is  used.
</span></span><span style=display:flex><span>        This socket does not use the certificates and keys, so those files
</span></span><span style=display:flex><span>        need not be present.  To restrict access, Unbound sets permissions
</span></span><span style=display:flex><span>        on  the  file to the user and group that is configured, the access
</span></span><span style=display:flex><span>        bits are set to allow the group  members  to  access  the  control
</span></span><span style=display:flex><span>        socket file.  Put users that need to access the socket in the that
</span></span><span style=display:flex><span>        group.   To restrict access further, create a directory to put the
</span></span><span style=display:flex><span>        control socket in and restrict access to that directory.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    control-port: &lt;port number&gt;
</span></span><span style=display:flex><span>        The port number to listen on for IPv4 or IPv6 control  interfaces,
</span></span><span style=display:flex><span>        default  is  8953.   If  you change this and permissions have been
</span></span><span style=display:flex><span>        dropped, you must restart the server for the change  to  take  ef-
</span></span><span style=display:flex><span>        fect.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    control-use-cert: &lt;yes or no&gt;
</span></span><span style=display:flex><span>        For  localhost control-interface you can disable the use of TLS by
</span></span><span style=display:flex><span>        setting this option to &#34;no&#34;, default is &#34;yes&#34;.  For local sockets,
</span></span><span style=display:flex><span>        TLS is disabled and the value of this option is ignored.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    server-key-file: &lt;private key file&gt;
</span></span><span style=display:flex><span>        Path to the server private  key,  by  default  unbound_server.key.
</span></span><span style=display:flex><span>        This file is generated by the unbound-control-setup utility.  This
</span></span><span style=display:flex><span>        file is used by the Unbound server, but not by unbound-control.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    server-cert-file: &lt;certificate file.pem&gt;
</span></span><span style=display:flex><span>        Path  to  the  server  self  signed  certificate,  by  default un-
</span></span><span style=display:flex><span>        bound_server.pem.  This file  is  generated  by  the  unbound-con-
</span></span><span style=display:flex><span>        trol-setup  utility.  This file is used by the Unbound server, and
</span></span><span style=display:flex><span>        also by unbound-control.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    control-key-file: &lt;private key file&gt;
</span></span><span style=display:flex><span>        Path to the control client private key,  by  default  unbound_con-
</span></span><span style=display:flex><span>        trol.key.   This  file  is  generated by the unbound-control-setup
</span></span><span style=display:flex><span>        utility.  This file is used by unbound-control.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    control-cert-file: &lt;certificate file.pem&gt;
</span></span><span style=display:flex><span>        Path to the control client certificate,  by  default  unbound_con-
</span></span><span style=display:flex><span>        trol.pem.   This certificate has to be signed with the server cer-
</span></span><span style=display:flex><span>        tificate.  This file is  generated  by  the  unbound-control-setup
</span></span><span style=display:flex><span>        utility.  This file is used by unbound-control.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Stub Zone Options
</span></span><span style=display:flex><span>    There may be multiple stub-zone: clauses. Each with a name: and zero or
</span></span><span style=display:flex><span>    more  hostnames  or IP addresses.  For the stub zone this list of name-
</span></span><span style=display:flex><span>    servers is used. Class IN is assumed.  The servers should be  authority
</span></span><span style=display:flex><span>    servers,  not  recursors; Unbound performs the recursive processing it-
</span></span><span style=display:flex><span>    self for stub zones.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    The stub zone can be used to configure authoritative data to be used by
</span></span><span style=display:flex><span>    the resolver that cannot be accessed using the public internet servers.
</span></span><span style=display:flex><span>    This is useful for company-local data or private zones.  Setup  an  au-
</span></span><span style=display:flex><span>    thoritative  server  on  a  different host (or different port). Enter a
</span></span><span style=display:flex><span>    config entry for Unbound with stub-addr: &lt;ip address  of  host[@port]&gt;.
</span></span><span style=display:flex><span>    The Unbound resolver can then access the data, without referring to the
</span></span><span style=display:flex><span>    public internet for it.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    This  setup  allows DNSSEC signed zones to be served by that authorita-
</span></span><span style=display:flex><span>    tive server, in which case a trusted key entry with the public key  can
</span></span><span style=display:flex><span>    be  put in config, so that Unbound can validate the data and set the AD
</span></span><span style=display:flex><span>    bit on replies for the private zone (authoritative servers do  not  set
</span></span><span style=display:flex><span>    the AD bit).  This setup makes Unbound capable of answering queries for
</span></span><span style=display:flex><span>    the private zone, and can even set the AD bit (&#39;authentic&#39;), but the AA
</span></span><span style=display:flex><span>    (&#39;authoritative&#39;) bit is not set on these replies.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Consider  adding  server:  statements  for domain-insecure: and for lo-
</span></span><span style=display:flex><span>    cal-zone: name nodefault for the zone if it is a locally  served  zone.
</span></span><span style=display:flex><span>    The insecure clause stops DNSSEC from invalidating the zone.  The local
</span></span><span style=display:flex><span>    zone nodefault (or transparent) clause makes the (reverse-) zone bypass
</span></span><span style=display:flex><span>    Unbound&#39;s filtering of RFC1918 zones.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    name: &lt;domain name&gt;
</span></span><span style=display:flex><span>            Name of the stub zone. This is the full domain name of the zone.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    stub-host: &lt;domain name&gt;
</span></span><span style=display:flex><span>            Name  of  stub  zone nameserver. Is itself resolved before it is
</span></span><span style=display:flex><span>            used.  To use a nondefault port for DNS communication append &#39;@&#39;
</span></span><span style=display:flex><span>            with the port number.  If tls is enabled, then you can append  a
</span></span><span style=display:flex><span>            &#39;#&#39; and a name, then it&#39;ll check the tls authentication certifi-
</span></span><span style=display:flex><span>            cates  with  that name.  If you combine the &#39;@&#39; and &#39;#&#39;, the &#39;@&#39;
</span></span><span style=display:flex><span>            comes first.  If only &#39;#&#39; is used the default port is  the  con-
</span></span><span style=display:flex><span>            figured tls-port.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    stub-addr: &lt;IP address&gt;
</span></span><span style=display:flex><span>            IP address of stub zone nameserver. Can be IP 4 or IP 6.  To use
</span></span><span style=display:flex><span>            a nondefault port for DNS communication append &#39;@&#39; with the port
</span></span><span style=display:flex><span>            number.   If  tls  is  enabled,  then you can append a &#39;#&#39; and a
</span></span><span style=display:flex><span>            name, then it&#39;ll check the tls authentication certificates  with
</span></span><span style=display:flex><span>            that name.  If you combine the &#39;@&#39; and &#39;#&#39;, the &#39;@&#39; comes first.
</span></span><span style=display:flex><span>            If only &#39;#&#39; is used the default port is the configured tls-port.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    stub-prime: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            This  option  is  by  default no.  If enabled it performs NS set
</span></span><span style=display:flex><span>            priming, which is similar to root hints, where it  starts  using
</span></span><span style=display:flex><span>            the  list of nameservers currently published by the zone.  Thus,
</span></span><span style=display:flex><span>            if the hint list is slightly outdated, the resolver picks  up  a
</span></span><span style=display:flex><span>            correct list online.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    stub-first: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            If  enabled,  a query is attempted without the stub clause if it
</span></span><span style=display:flex><span>            fails.  The data could not be retrieved and  would  have  caused
</span></span><span style=display:flex><span>            SERVFAIL  because  the  servers  are  unreachable, instead it is
</span></span><span style=display:flex><span>            tried without this clause.  The default is no.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    stub-tls-upstream: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Enabled or disable whether the queries to this stub use TLS  for
</span></span><span style=display:flex><span>            transport.  Default is no.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    stub-ssl-upstream: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Alternate syntax for stub-tls-upstream.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    stub-tcp-upstream: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            If  it  is  set  to &#34;yes&#34; then upstream queries use TCP only for
</span></span><span style=display:flex><span>            transport regardless of global flag  tcp-upstream.   Default  is
</span></span><span style=display:flex><span>            no.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    stub-no-cache: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Default  is no.  If enabled, data inside the stub is not cached.
</span></span><span style=display:flex><span>            This is useful when you want immediate changes to be visible.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Forward Zone Options
</span></span><span style=display:flex><span>    There may be multiple forward-zone: clauses. Each with a name: and zero
</span></span><span style=display:flex><span>    or more hostnames or IP addresses.  For the forward zone this  list  of
</span></span><span style=display:flex><span>    nameservers  is  used  to forward the queries to. The servers listed as
</span></span><span style=display:flex><span>    forward-host: and forward-addr: have to handle  further  recursion  for
</span></span><span style=display:flex><span>    the  query.   Thus,  those  servers  are not authority servers, but are
</span></span><span style=display:flex><span>    (just like Unbound is) recursive servers too; Unbound does not  perform
</span></span><span style=display:flex><span>    recursion itself for the forward zone, it lets the remote server do it.
</span></span><span style=display:flex><span>    Class  IN  is assumed.  CNAMEs are chased by Unbound itself, asking the
</span></span><span style=display:flex><span>    remote server for every name in the indirection chain, to  protect  the
</span></span><span style=display:flex><span>    local cache from illegal indirect referenced items.  A forward-zone en-
</span></span><span style=display:flex><span>    try with name &#34;.&#34; and a forward-addr target will forward all queries to
</span></span><span style=display:flex><span>    that other server (unless it can answer from the cache).
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    name: &lt;domain name&gt;
</span></span><span style=display:flex><span>            Name  of  the  forward zone. This is the full domain name of the
</span></span><span style=display:flex><span>            zone.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    forward-host: &lt;domain name&gt;
</span></span><span style=display:flex><span>            Name of server to forward to. Is itself resolved  before  it  is
</span></span><span style=display:flex><span>            used.  To use a nondefault port for DNS communication append &#39;@&#39;
</span></span><span style=display:flex><span>            with  the port number.  If tls is enabled, then you can append a
</span></span><span style=display:flex><span>            &#39;#&#39; and a name, then it&#39;ll check the tls authentication certifi-
</span></span><span style=display:flex><span>            cates with that name.  If you combine the &#39;@&#39; and &#39;#&#39;,  the  &#39;@&#39;
</span></span><span style=display:flex><span>            comes  first.   If only &#39;#&#39; is used the default port is the con-
</span></span><span style=display:flex><span>            figured tls-port.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    forward-addr: &lt;IP address&gt;
</span></span><span style=display:flex><span>            IP address of server to forward to. Can be IP 4 or IP 6.  To use
</span></span><span style=display:flex><span>            a nondefault port for DNS communication append &#39;@&#39; with the port
</span></span><span style=display:flex><span>            number.  If tls is enabled, then you can  append  a  &#39;#&#39;  and  a
</span></span><span style=display:flex><span>            name,  then it&#39;ll check the tls authentication certificates with
</span></span><span style=display:flex><span>            that name.  If you combine the &#39;@&#39; and &#39;#&#39;, the &#39;@&#39; comes first.
</span></span><span style=display:flex><span>            If only &#39;#&#39; is used the default port is the configured tls-port.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            At high verbosity it logs the TLS certificate, with TLS enabled.
</span></span><span style=display:flex><span>            If you leave out the &#39;#&#39; and auth name  from  the  forward-addr,
</span></span><span style=display:flex><span>            any  name  is  accepted.  The cert must also match a CA from the
</span></span><span style=display:flex><span>            tls-cert-bundle.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    forward-first: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            If a forwarded query is met with a SERVFAIL error, and this  op-
</span></span><span style=display:flex><span>            tion is enabled, Unbound will fall back to normal recursive res-
</span></span><span style=display:flex><span>            olution for this query as if no query forwarding had been speci-
</span></span><span style=display:flex><span>            fied.  The default is &#34;no&#34;.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    forward-tls-upstream: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Enabled or disable whether the queries to this forwarder use TLS
</span></span><span style=display:flex><span>            for transport.  Default is no.  If you enable this, also config-
</span></span><span style=display:flex><span>            ure a tls-cert-bundle or use tls-win-cert to load CA certs, oth-
</span></span><span style=display:flex><span>            erwise the connections cannot be authenticated.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    forward-ssl-upstream: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Alternate syntax for forward-tls-upstream.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    forward-tcp-upstream: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            If  it  is  set  to &#34;yes&#34; then upstream queries use TCP only for
</span></span><span style=display:flex><span>            transport regardless of global flag  tcp-upstream.   Default  is
</span></span><span style=display:flex><span>            no.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    forward-no-cache: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Default  is  no.   If  enabled,  data  inside the forward is not
</span></span><span style=display:flex><span>            cached.  This is useful when you want immediate  changes  to  be
</span></span><span style=display:flex><span>            visible.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Authority Zone Options
</span></span><span style=display:flex><span>    Authority  zones are configured with auth-zone:, and each one must have
</span></span><span style=display:flex><span>    a name:.  There can be multiple ones,  by  listing  multiple  auth-zone
</span></span><span style=display:flex><span>    clauses,  each  with  a  different name, pertaining to that part of the
</span></span><span style=display:flex><span>    namespace.  The authority zone with the name closest to the name looked
</span></span><span style=display:flex><span>    up is used.  Authority zones can be processed on two distinct,  non-ex-
</span></span><span style=display:flex><span>    clusive, configurable stages.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    With for-downstream: yes (default), authority zones are processed after
</span></span><span style=display:flex><span>    local-zones  and  before  cache.  When used in this manner, Unbound re-
</span></span><span style=display:flex><span>    sponds like an authority server with no further processing  other  than
</span></span><span style=display:flex><span>    returning an answer from the zone contents.  A notable example, in this
</span></span><span style=display:flex><span>    case,  is  CNAME  records  which  are  returned  verbatim to downstream
</span></span><span style=display:flex><span>    clients without further resolution.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    With for-upstream: yes (default), authority zones are  processed  after
</span></span><span style=display:flex><span>    the cache lookup, just before going to the network to fetch information
</span></span><span style=display:flex><span>    for  recursion.   When used in this manner they provide a local copy of
</span></span><span style=display:flex><span>    an authority server that speeds up lookups for that data during resolv-
</span></span><span style=display:flex><span>    ing.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    If both options are enabled (default), client queries for an  authority
</span></span><span style=display:flex><span>    zone  are answered authoritatively from Unbound, while internal queries
</span></span><span style=display:flex><span>    that require data from the authority zone consult the local  zone  data
</span></span><span style=display:flex><span>    instead of going to the network.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    An  interesting  configuration is for-downstream: no, for-upstream: yes
</span></span><span style=display:flex><span>    that allows for hyperlocal behavior  where  both  client  and  internal
</span></span><span style=display:flex><span>    queries consult the local zone data while resolving.  In this case, the
</span></span><span style=display:flex><span>    aforementioned  CNAME  example will result in a thoroughly resolved an-
</span></span><span style=display:flex><span>    swer.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Authority zones can be read from zonefile.  And can be kept updated via
</span></span><span style=display:flex><span>    AXFR and IXFR.  After update the zonefile  is  rewritten.   The  update
</span></span><span style=display:flex><span>    mechanism uses the SOA timer values and performs SOA UDP queries to de-
</span></span><span style=display:flex><span>    tect zone changes.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    If  the  update  fetch  fails, the timers in the SOA record are used to
</span></span><span style=display:flex><span>    time another fetch attempt.  Until the SOA  expiry  timer  is  reached.
</span></span><span style=display:flex><span>    Then  the  zone  is expired.  When a zone is expired, queries are SERV-
</span></span><span style=display:flex><span>    FAIL, and any new serial number is accepted from the primary  (even  if
</span></span><span style=display:flex><span>    older),  and  if  fallback  is enabled, the fallback activates to fetch
</span></span><span style=display:flex><span>    from the upstream instead of the SERVFAIL.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    name: &lt;zone name&gt;
</span></span><span style=display:flex><span>            Name of the authority zone.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    primary: &lt;IP address or host name&gt;
</span></span><span style=display:flex><span>            Where to download a copy of the zone from, with AXFR  and  IXFR.
</span></span><span style=display:flex><span>            Multiple  primaries can be specified.  They are all tried if one
</span></span><span style=display:flex><span>            fails.  To use a nondefault port for  DNS  communication  append
</span></span><span style=display:flex><span>            &#39;@&#39; with the port number.  You can append a &#39;#&#39; and a name, then
</span></span><span style=display:flex><span>            AXFR  over  TLS  can be used and the tls authentication certifi-
</span></span><span style=display:flex><span>            cates will be checked with that name.  If you  combine  the  &#39;@&#39;
</span></span><span style=display:flex><span>            and  &#39;#&#39;,  the  &#39;@&#39; comes first.  If you point it at another Un-
</span></span><span style=display:flex><span>            bound instance, it would not work because that does not  support
</span></span><span style=display:flex><span>            AXFR/IXFR  for  the  zone,  but if you used url: to download the
</span></span><span style=display:flex><span>            zonefile as a text file from a webserver that  would  work.   If
</span></span><span style=display:flex><span>            you  specify  the  hostname,  you cannot use the domain from the
</span></span><span style=display:flex><span>            zonefile, because it may not  have  that  when  retrieving  that
</span></span><span style=display:flex><span>            data,  instead use a plain IP address to avoid a circular depen-
</span></span><span style=display:flex><span>            dency on retrieving that IP address.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    master: &lt;IP address or host name&gt;
</span></span><span style=display:flex><span>            Alternate syntax for primary.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    url: &lt;url to zonefile&gt;
</span></span><span style=display:flex><span>            Where to download a zonefile for the zone.  With http or  https.
</span></span><span style=display:flex><span>            An   example   for   the  url  is  &#34;http://www.example.com/exam-
</span></span><span style=display:flex><span>            ple.org.zone&#34;.  Multiple url statements can be given,  they  are
</span></span><span style=display:flex><span>            tried  in turn.  If only urls are given the SOA refresh timer is
</span></span><span style=display:flex><span>            used to wait for making new downloads.  If  also  primaries  are
</span></span><span style=display:flex><span>            listed,  the  primaries are first probed with UDP SOA queries to
</span></span><span style=display:flex><span>            see if the SOA serial number has changed, reducing the number of
</span></span><span style=display:flex><span>            downloads.  If none of the urls work, the  primaries  are  tried
</span></span><span style=display:flex><span>            with  IXFR  and  AXFR.   For  https, the tls-cert-bundle and the
</span></span><span style=display:flex><span>            hostname from the url are used to authenticate  the  connection.
</span></span><span style=display:flex><span>            If  you specify a hostname in the URL, you cannot use the domain
</span></span><span style=display:flex><span>            from the zonefile, because it may not have that when  retrieving
</span></span><span style=display:flex><span>            that  data,  instead  use a plain IP address to avoid a circular
</span></span><span style=display:flex><span>            dependency on retrieving that IP address.  Avoid dependencies on
</span></span><span style=display:flex><span>            name lookups by using a notation like &#34;http://192.0.2.1/unbound-
</span></span><span style=display:flex><span>            primaries/example.com.zone&#34;, with an explicit IP address.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    allow-notify: &lt;IP address or host name or netblockIP/prefix&gt;
</span></span><span style=display:flex><span>            With allow-notify you can specify additional  sources  of  noti-
</span></span><span style=display:flex><span>            fies.   When  notified,  the  server attempts to first probe and
</span></span><span style=display:flex><span>            then zone transfer.  If the notify is from a primary,  it  first
</span></span><span style=display:flex><span>            attempts that primary.  Otherwise other primaries are attempted.
</span></span><span style=display:flex><span>            If there are no primaries, but only urls, the file is downloaded
</span></span><span style=display:flex><span>            when  notified.  The primaries from primary: and url: statements
</span></span><span style=display:flex><span>            are allowed notify by default.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    fallback-enabled: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Default no.  If enabled, Unbound falls back to querying the  in-
</span></span><span style=display:flex><span>            ternet as a resolver for this zone when lookups fail.  For exam-
</span></span><span style=display:flex><span>            ple for DNSSEC validation failures.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    for-downstream: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Default  yes.  If enabled, Unbound serves authority responses to
</span></span><span style=display:flex><span>            downstream clients for this zone.  This option makes Unbound be-
</span></span><span style=display:flex><span>            have, for the queries with names in this zone, like one  of  the
</span></span><span style=display:flex><span>            authority  servers  for  that zone.  Turn it off if you want Un-
</span></span><span style=display:flex><span>            bound to provide recursion for the zone but have a local copy of
</span></span><span style=display:flex><span>            zone data.  If for-downstream is no  and  for-upstream  is  yes,
</span></span><span style=display:flex><span>            then  Unbound  will DNSSEC validate the contents of the zone be-
</span></span><span style=display:flex><span>            fore serving the zone contents to clients and  store  validation
</span></span><span style=display:flex><span>            results in the cache.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    for-upstream: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Default  yes.   If  enabled, Unbound fetches data from this data
</span></span><span style=display:flex><span>            collection for answering recursion queries.  Instead of  sending
</span></span><span style=display:flex><span>            queries  over  the  internet  to  the authority servers for this
</span></span><span style=display:flex><span>            zone, it&#39;ll fetch the data directly from the zone data.  Turn it
</span></span><span style=display:flex><span>            on when you want Unbound to  provide  recursion  for  downstream
</span></span><span style=display:flex><span>            clients,  and  use  the  zone  data  as a local copy to speed up
</span></span><span style=display:flex><span>            lookups.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    zonemd-check: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Enable this option to check ZONEMD records in the zone.  Default
</span></span><span style=display:flex><span>            is  disabled.   The  ZONEMD  record  is a checksum over the zone
</span></span><span style=display:flex><span>            data. This includes glue in the zone  and  data  from  the  zone
</span></span><span style=display:flex><span>            file, and excludes comments from the zone file.  When there is a
</span></span><span style=display:flex><span>            DNSSEC chain of trust, DNSSEC signatures are checked too.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    zonemd-reject-absence: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Enable  this  option to reject the absence of the ZONEMD record.
</span></span><span style=display:flex><span>            Without it, when zonemd is not there it is not checked.   It  is
</span></span><span style=display:flex><span>            useful  to enable for a nonDNSSEC signed zone where the operator
</span></span><span style=display:flex><span>            wants to require the verification of a ZONEMD, hence  a  missing
</span></span><span style=display:flex><span>            ZONEMD  is  a failure.  The action upon failure is controlled by
</span></span><span style=display:flex><span>            the zonemd-permissive-mode option, for log only  or  also  block
</span></span><span style=display:flex><span>            the zone.  The default is no.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            Without  the  option  absence of a ZONEMD is only a failure when
</span></span><span style=display:flex><span>            the zone is DNSSEC signed, and we have a trust anchor,  and  the
</span></span><span style=display:flex><span>            DNSSEC  verification  of  the absence of the ZONEMD fails.  With
</span></span><span style=display:flex><span>            the option enabled, the absence of a ZONEMD is always a failure,
</span></span><span style=display:flex><span>            also for nonDNSSEC signed zones.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    zonefile: &lt;filename&gt;
</span></span><span style=display:flex><span>            The filename where the zone is stored.  If  not  given  then  no
</span></span><span style=display:flex><span>            zonefile  is  used.  If the file does not exist or is empty, Un-
</span></span><span style=display:flex><span>            bound will attempt to fetch zone  data  (eg.  from  the  primary
</span></span><span style=display:flex><span>            servers).
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>View Options
</span></span><span style=display:flex><span>    There may be multiple view: clauses. Each with a name: and zero or more
</span></span><span style=display:flex><span>    local-zone  and local-data elements. Views can also contain view-first,
</span></span><span style=display:flex><span>    response-ip, response-ip-data and local-data-ptr elements.  View can be
</span></span><span style=display:flex><span>    mapped to requests by  specifying  the  view  name  in  an  access-con-
</span></span><span style=display:flex><span>    trol-view element. Options from matching views will override global op-
</span></span><span style=display:flex><span>    tions.  Global  options  will  be used if no matching view is found, or
</span></span><span style=display:flex><span>    when the matching view does not have the option specified.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    name: &lt;view name&gt;
</span></span><span style=display:flex><span>            Name of the view. Must be unique.  This  name  is  used  in  ac-
</span></span><span style=display:flex><span>            cess-control-view elements.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    local-zone: &lt;zone&gt; &lt;type&gt;
</span></span><span style=display:flex><span>            View specific local-zone elements. Has the same types and behav-
</span></span><span style=display:flex><span>            iour  as  the global local-zone elements. When there is at least
</span></span><span style=display:flex><span>            one local-zone specified and view-first is no, the  default  lo-
</span></span><span style=display:flex><span>            cal-zones  will be added to this view.  Defaults can be disabled
</span></span><span style=display:flex><span>            using the nodefault type. When view-first is yes or when a  view
</span></span><span style=display:flex><span>            does  not  have a local-zone, the global local-zone will be used
</span></span><span style=display:flex><span>            including it&#39;s default zones.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    local-data: &#34;&lt;resource record string&gt;&#34;
</span></span><span style=display:flex><span>            View specific local-data elements. Has the same behaviour as the
</span></span><span style=display:flex><span>            global local-data elements.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    local-data-ptr: &#34;IPaddr name&#34;
</span></span><span style=display:flex><span>            View specific local-data-ptr elements. Has the same behaviour as
</span></span><span style=display:flex><span>            the global local-data-ptr elements.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    view-first: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            If enabled, it attempts to use the  global  local-zone  and  lo-
</span></span><span style=display:flex><span>            cal-data if there is no match in the view specific options.  The
</span></span><span style=display:flex><span>            default is no.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Python Module Options
</span></span><span style=display:flex><span>    The  python: clause gives the settings for the python(1) script module.
</span></span><span style=display:flex><span>    This module acts like the iterator and validator modules do, on queries
</span></span><span style=display:flex><span>    and answers.  To enable the script module it has to  be  compiled  into
</span></span><span style=display:flex><span>    the  daemon,  and the word &#34;python&#34; has to be put in the module-config:
</span></span><span style=display:flex><span>    option (usually first, or between the validator and iterator). Multiple
</span></span><span style=display:flex><span>    instances of the  python  module  are  supported  by  adding  the  word
</span></span><span style=display:flex><span>    &#34;python&#34; more than once.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    If the chroot: option is enabled, you should make sure Python&#39;s library
</span></span><span style=display:flex><span>    directory  structure  is  bind mounted in the new root environment, see
</span></span><span style=display:flex><span>    mount(8).  Also the python-script: path should be specified as  an  ab-
</span></span><span style=display:flex><span>    solute  path  relative  to  the  new root, or as a relative path to the
</span></span><span style=display:flex><span>    working directory.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    python-script: &lt;python file&gt;
</span></span><span style=display:flex><span>            The script file to load. Repeat this  option  for  every  python
</span></span><span style=display:flex><span>            module instance added to the module-config: option.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Dynamic Library Module Options
</span></span><span style=display:flex><span>    The dynlib: clause gives the settings for the dynlib module.  This mod-
</span></span><span style=display:flex><span>    ule  is  only  a  very  small wrapper that allows dynamic modules to be
</span></span><span style=display:flex><span>    loaded on runtime instead of being compiled into  the  application.  To
</span></span><span style=display:flex><span>    enable the dynlib module it has to be compiled into the daemon, and the
</span></span><span style=display:flex><span>    word  &#34;dynlib&#34; has to be put in the module-config: option. Multiple in-
</span></span><span style=display:flex><span>    stances of dynamic libraries are supported by adding the word  &#34;dynlib&#34;
</span></span><span style=display:flex><span>    more than once.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    The  dynlib-file: path should be specified as an absolute path relative
</span></span><span style=display:flex><span>    to the new path set by chroot: option, or as a  relative  path  to  the
</span></span><span style=display:flex><span>    working directory.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    dynlib-file: &lt;dynlib file&gt;
</span></span><span style=display:flex><span>            The  dynamic  library file to load. Repeat this option for every
</span></span><span style=display:flex><span>            dynlib module instance added to the module-config: option.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>DNS64 Module Options
</span></span><span style=display:flex><span>    The dns64 module must be configured  in  the  module-config:  directive
</span></span><span style=display:flex><span>    e.g.,  &#34;dns64 validator iterator&#34; and be compiled into the daemon to be
</span></span><span style=display:flex><span>    enabled.  These settings go in the server: section.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    dns64-prefix: &lt;IPv6 prefix&gt;
</span></span><span style=display:flex><span>            This sets the DNS64 prefix to use  to  synthesize  AAAA  records
</span></span><span style=display:flex><span>            with.   It  must  be  /96  or  shorter.   The  default prefix is
</span></span><span style=display:flex><span>            64:ff9b::/96.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    dns64-synthall: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Debug option, default  no.   If  enabled,  synthesize  all  AAAA
</span></span><span style=display:flex><span>            records despite the presence of actual AAAA records.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    dns64-ignore-aaaa: &lt;name&gt;
</span></span><span style=display:flex><span>            List  domain  for  which  the AAAA records are ignored and the A
</span></span><span style=display:flex><span>            record is used by dns64 processing instead.  Can be entered mul-
</span></span><span style=display:flex><span>            tiple times, list a new domain for which  it  applies,  one  per
</span></span><span style=display:flex><span>            line.  Applies also to names underneath the name given.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>NAT64 Operation
</span></span><span style=display:flex><span>    NAT64  operation  allows  using a NAT64 prefix for outbound requests to
</span></span><span style=display:flex><span>    IPv4-only servers.  It is controlled by two options in the server: sec-
</span></span><span style=display:flex><span>    tion:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    do-nat64: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Use NAT64 to reach IPv4-only servers.   Consider  also  enabling
</span></span><span style=display:flex><span>            prefer-ip6  to  prefer  native  IPv6 connections to nameservers.
</span></span><span style=display:flex><span>            Default no.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    nat64-prefix: &lt;IPv6 prefix&gt;
</span></span><span style=display:flex><span>            Use a specific NAT64 prefix to  reach  IPv4-only  servers.   De-
</span></span><span style=display:flex><span>            faults  to using the prefix configured in dns64-prefix, which in
</span></span><span style=display:flex><span>            turn defaults to 64:ff9b::/96.  The prefix length must be one of
</span></span><span style=display:flex><span>            /32, /40, /48, /56, /64 or /96.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>DNSCrypt Options
</span></span><span style=display:flex><span>    The dnscrypt: clause gives the settings of the dnscrypt channel.  While
</span></span><span style=display:flex><span>    those  options  are  available, they are only meaningful if Unbound was
</span></span><span style=display:flex><span>    compiled with --enable-dnscrypt.  Currently certificate and secret/pub-
</span></span><span style=display:flex><span>    lic keys cannot be generated by Unbound.  You can use  dnscrypt-wrapper
</span></span><span style=display:flex><span>    to  generate those: &lt;https://github.com/cofyc/dnscrypt-wrapper/blob/mas-&gt;
</span></span><span style=display:flex><span>    ter/README.md#usage
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    dnscrypt-enable: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Whether or not the dnscrypt config should be  enabled.  You  may
</span></span><span style=display:flex><span>            define configuration but not activate it.  The default is no.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    dnscrypt-port: &lt;port number&gt;
</span></span><span style=display:flex><span>            On which port should dnscrypt should be activated. Note that you
</span></span><span style=display:flex><span>            should  have  a  matching interface option defined in the server
</span></span><span style=display:flex><span>            section for this port.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    dnscrypt-provider: &lt;provider name&gt;
</span></span><span style=display:flex><span>            The provider name to use to distribute certificates. This is  of
</span></span><span style=display:flex><span>            the form: 2.dnscrypt-cert.example.com.. The name MUST end with a
</span></span><span style=display:flex><span>            dot.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    dnscrypt-secret-key: &lt;path to secret key file&gt;
</span></span><span style=display:flex><span>            Path  to  the  time  limited secret key file. This option may be
</span></span><span style=display:flex><span>            specified multiple times.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    dnscrypt-provider-cert: &lt;path to cert file&gt;
</span></span><span style=display:flex><span>            Path to the certificate  related  to  the  dnscrypt-secret-keys.
</span></span><span style=display:flex><span>            This option may be specified multiple times.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    dnscrypt-provider-cert-rotated: &lt;path to cert file&gt;
</span></span><span style=display:flex><span>            Path  to  a certificate that we should be able to serve existing
</span></span><span style=display:flex><span>            connection  from   but   do   not   want   to   advertise   over
</span></span><span style=display:flex><span>            dnscrypt-provider&#39;s  TXT  record  certs distribution.  A typical
</span></span><span style=display:flex><span>            use case is when rotating  certificates,  existing  clients  may
</span></span><span style=display:flex><span>            still  use  the  client magic from the old cert in their queries
</span></span><span style=display:flex><span>            until they fetch and update the new cert. Likewise, it would al-
</span></span><span style=display:flex><span>            low one to prime the new cert/key without distributing  the  new
</span></span><span style=display:flex><span>            cert yet, this can be useful when using a network of servers us-
</span></span><span style=display:flex><span>            ing  anycast  and on which the configuration may not get updated
</span></span><span style=display:flex><span>            at the exact same time. By priming the  cert,  the  servers  can
</span></span><span style=display:flex><span>            handle  both  old  and new certs traffic while distributing only
</span></span><span style=display:flex><span>            one.  This option may be specified multiple times.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    dnscrypt-shared-secret-cache-size: &lt;memory size&gt;
</span></span><span style=display:flex><span>            Give the size of the data structure in which the  shared  secret
</span></span><span style=display:flex><span>            keys  are  kept  in.   Default  4m.   In  bytes  or use m(mega),
</span></span><span style=display:flex><span>            k(kilo), g(giga).  The shared secret cache is used when  a  same
</span></span><span style=display:flex><span>            client  is making multiple queries using the same public key. It
</span></span><span style=display:flex><span>            saves a substantial amount of CPU.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    dnscrypt-shared-secret-cache-slabs: &lt;number&gt;
</span></span><span style=display:flex><span>            Give power of 2 number of slabs, this is  used  to  reduce  lock
</span></span><span style=display:flex><span>            contention  in  the dnscrypt shared secrets cache.  Close to the
</span></span><span style=display:flex><span>            number of cpus is a fairly good setting.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    dnscrypt-nonce-cache-size: &lt;memory size&gt;
</span></span><span style=display:flex><span>            Give the size of the data structure in which the  client  nonces
</span></span><span style=display:flex><span>            are  kept  in.   Default  4m.  In bytes or use m(mega), k(kilo),
</span></span><span style=display:flex><span>            g(giga).  The nonce cache is used to  prevent  dnscrypt  message
</span></span><span style=display:flex><span>            replaying.  Client nonce should be unique for any pair of client
</span></span><span style=display:flex><span>            pk/server sk.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    dnscrypt-nonce-cache-slabs: &lt;number&gt;
</span></span><span style=display:flex><span>            Give power of 2 number of slabs, this is  used  to  reduce  lock
</span></span><span style=display:flex><span>            contention  in the dnscrypt nonce cache.  Close to the number of
</span></span><span style=display:flex><span>            cpus is a fairly good setting.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>EDNS Client Subnet Module Options
</span></span><span style=display:flex><span>    The ECS module must be configured in the module-config: directive e.g.,
</span></span><span style=display:flex><span>    &#34;subnetcache validator iterator&#34; and be compiled into the daemon to  be
</span></span><span style=display:flex><span>    enabled.  These settings go in the server: section.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    If the destination address is allowed in the configuration Unbound will
</span></span><span style=display:flex><span>    add  the  EDNS0 option to the query containing the relevant part of the
</span></span><span style=display:flex><span>    client&#39;s address.  When an answer contains the ECS option the  response
</span></span><span style=display:flex><span>    and  the option are placed in a specialized cache. If the authority in-
</span></span><span style=display:flex><span>    dicated no support, the response is stored in the regular cache.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Additionally, when a client includes the option in its queries, Unbound
</span></span><span style=display:flex><span>    will forward the option when sending the query to  addresses  that  are
</span></span><span style=display:flex><span>    explicitly  allowed  in the configuration using send-client-subnet. The
</span></span><span style=display:flex><span>    option will always be forwarded, regardless the allowed  addresses,  if
</span></span><span style=display:flex><span>    client-subnet-always-forward  is set to yes. In this case the lookup in
</span></span><span style=display:flex><span>    the regular cache is skipped.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    The maximum size of the ECS cache is controlled by &#39;msg-cache-size&#39;  in
</span></span><span style=display:flex><span>    the configuration file. On top of that, for each query only 100 differ-
</span></span><span style=display:flex><span>    ent subnets are allowed to be stored for each address family. Exceeding
</span></span><span style=display:flex><span>    that number, older entries will be purged from cache.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Note  that due to the nature of how EDNS Client Subnet works, by segre-
</span></span><span style=display:flex><span>    gating the client IP space in order to try and have tailored  responses
</span></span><span style=display:flex><span>    for  prefixes  of  unknown sizes, resolution and cache response perfor-
</span></span><span style=display:flex><span>    mance are impacted as a result.  Usage of the subnetcache module should
</span></span><span style=display:flex><span>    only be enabled in installations that require such functionality  where
</span></span><span style=display:flex><span>    the  resolver and the clients belong to different networks.  An example
</span></span><span style=display:flex><span>    of that is an open resolver installation.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    This module does not interact with the serve-expired* and prefetch: op-
</span></span><span style=display:flex><span>    tions.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    send-client-subnet: &lt;IP address&gt;
</span></span><span style=display:flex><span>            Send client source address to this authority. Append /num to in-
</span></span><span style=display:flex><span>            dicate  a  classless  delegation  netblock,  for  example   like
</span></span><span style=display:flex><span>            10.2.3.4/24 or 2001::11/64. Can be given multiple times. Author-
</span></span><span style=display:flex><span>            ities  not  listed will not receive edns-subnet information, un-
</span></span><span style=display:flex><span>            less domain in query is specified in client-subnet-zone.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    client-subnet-zone: &lt;domain&gt;
</span></span><span style=display:flex><span>            Send client source address in queries for this  domain  and  its
</span></span><span style=display:flex><span>            subdomains.  Can  be given multiple times. Zones not listed will
</span></span><span style=display:flex><span>            not receive edns-subnet information, unless hosted by  authority
</span></span><span style=display:flex><span>            specified in send-client-subnet.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    client-subnet-always-forward: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Specify   whether   the  ECS  address  check  (configured  using
</span></span><span style=display:flex><span>            send-client-subnet) is applied for  all  queries,  even  if  the
</span></span><span style=display:flex><span>            triggering query contains an ECS record, or only for queries for
</span></span><span style=display:flex><span>            which the ECS record is generated using the querier address (and
</span></span><span style=display:flex><span>            therefore  did not contain ECS data in the client query). If en-
</span></span><span style=display:flex><span>            abled, the address check is skipped when the client  query  con-
</span></span><span style=display:flex><span>            tains  an  ECS  record.  And  the lookup in the regular cache is
</span></span><span style=display:flex><span>            skipped.  Default is no.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    max-client-subnet-ipv6: &lt;number&gt;
</span></span><span style=display:flex><span>            Specifies the maximum prefix length of the client source address
</span></span><span style=display:flex><span>            we are willing to expose to third parties for IPv6.  Defaults to
</span></span><span style=display:flex><span>            56.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    max-client-subnet-ipv4: &lt;number&gt;
</span></span><span style=display:flex><span>            Specifies the maximum prefix length of the client source address
</span></span><span style=display:flex><span>            we are willing to expose to third parties for IPv4. Defaults  to
</span></span><span style=display:flex><span>            24.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    min-client-subnet-ipv6: &lt;number&gt;
</span></span><span style=display:flex><span>            Specifies  the  minimum prefix length of the IPv6 source mask we
</span></span><span style=display:flex><span>            are willing to accept in queries. Shorter source masks result in
</span></span><span style=display:flex><span>            REFUSED answers. Source mask of 0 is always accepted. Default is
</span></span><span style=display:flex><span>            0.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    min-client-subnet-ipv4: &lt;number&gt;
</span></span><span style=display:flex><span>            Specifies the minimum prefix length of the IPv4 source  mask  we
</span></span><span style=display:flex><span>            are willing to accept in queries. Shorter source masks result in
</span></span><span style=display:flex><span>            REFUSED answers. Source mask of 0 is always accepted. Default is
</span></span><span style=display:flex><span>            0.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    max-ecs-tree-size-ipv4: &lt;number&gt;
</span></span><span style=display:flex><span>            Specifies  the maximum number of subnets ECS answers kept in the
</span></span><span style=display:flex><span>            ECS radix tree.  This number applies for each qname/qclass/qtype
</span></span><span style=display:flex><span>            tuple. Defaults to 100.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    max-ecs-tree-size-ipv6: &lt;number&gt;
</span></span><span style=display:flex><span>            Specifies the maximum number of subnets ECS answers kept in  the
</span></span><span style=display:flex><span>            ECS radix tree.  This number applies for each qname/qclass/qtype
</span></span><span style=display:flex><span>            tuple. Defaults to 100.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Opportunistic IPsec Support Module Options
</span></span><span style=display:flex><span>    The  IPsec  module  must  be configured in the module-config: directive
</span></span><span style=display:flex><span>    e.g., &#34;ipsecmod validator iterator&#34; and be compiled into Unbound by us-
</span></span><span style=display:flex><span>    ing --enable-ipsecmod to be enabled.  These settings go in the  server:
</span></span><span style=display:flex><span>    section.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    When  Unbound  receives  an  A/AAAA  query that is not in the cache and
</span></span><span style=display:flex><span>    finds a valid answer, it will withhold returning the answer and instead
</span></span><span style=display:flex><span>    will generate an IPSECKEY subquery for the same domain name.  If an an-
</span></span><span style=display:flex><span>    swer was found, Unbound will call an external hook passing the  follow-
</span></span><span style=display:flex><span>    ing arguments:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        QNAME
</span></span><span style=display:flex><span>                Domain name of the A/AAAA and IPSECKEY query.  In string for-
</span></span><span style=display:flex><span>                mat.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        IPSECKEY TTL
</span></span><span style=display:flex><span>                TTL of the IPSECKEY RRset.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        A/AAAA
</span></span><span style=display:flex><span>                String  of space separated IP addresses present in the A/AAAA
</span></span><span style=display:flex><span>                RRset.  The IP addresses are in string format.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        IPSECKEY
</span></span><span style=display:flex><span>                String of space  separated  IPSECKEY  RDATA  present  in  the
</span></span><span style=display:flex><span>                IPSECKEY  RRset.   The IPSECKEY RDATA are in DNS presentation
</span></span><span style=display:flex><span>                format.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    The A/AAAA answer is then cached and returned to the  client.   If  the
</span></span><span style=display:flex><span>    external  hook  was called the TTL changes to ensure it doesn&#39;t surpass
</span></span><span style=display:flex><span>    ipsecmod-max-ttl.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    The same procedure is also followed when prefetch:  is  used,  but  the
</span></span><span style=display:flex><span>    A/AAAA answer is given to the client before the hook is called.  ipsec-
</span></span><span style=display:flex><span>    mod-max-ttl  ensures  that  the A/AAAA answer given from cache is still
</span></span><span style=display:flex><span>    relevant for opportunistic IPsec.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ipsecmod-enabled: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Specifies whether the IPsec module is enabled or not.  The IPsec
</span></span><span style=display:flex><span>            module still needs to be defined in  the  module-config:  direc-
</span></span><span style=display:flex><span>            tive.  This option facilitates turning on/off the module without
</span></span><span style=display:flex><span>            restarting/reloading Unbound.  Defaults to yes.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ipsecmod-hook: &lt;filename&gt;
</span></span><span style=display:flex><span>            Specifies  the  external  hook  that Unbound will call with sys-
</span></span><span style=display:flex><span>            tem(3).  The file can be specified as an absolute/relative path.
</span></span><span style=display:flex><span>            The file needs the proper permissions to be able to be  executed
</span></span><span style=display:flex><span>            by the same user that runs Unbound.  It must be present when the
</span></span><span style=display:flex><span>            IPsec module is defined in the module-config: directive.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ipsecmod-strict: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            If  enabled  Unbound requires the external hook to return a suc-
</span></span><span style=display:flex><span>            cess value of 0.  Failing to do so Unbound will reply with SERV-
</span></span><span style=display:flex><span>            FAIL.  The A/AAAA answer will also not be cached.   Defaults  to
</span></span><span style=display:flex><span>            no.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ipsecmod-max-ttl: &lt;seconds&gt;
</span></span><span style=display:flex><span>            Time to live maximum for A/AAAA cached records after calling the
</span></span><span style=display:flex><span>            external hook.  Defaults to 3600.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ipsecmod-ignore-bogus: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Specifies  the  behaviour of Unbound when the IPSECKEY answer is
</span></span><span style=display:flex><span>            bogus.  If set to yes, the hook will be called  and  the  A/AAAA
</span></span><span style=display:flex><span>            answer  will  be returned to the client.  If set to no, the hook
</span></span><span style=display:flex><span>            will not be called and the answer to the A/AAAA  query  will  be
</span></span><span style=display:flex><span>            SERVFAIL.  Mainly used for testing.  Defaults to no.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ipsecmod-allow: &lt;domain&gt;
</span></span><span style=display:flex><span>            Allow the ipsecmod functionality for the domain so that the mod-
</span></span><span style=display:flex><span>            ule  logic  will  be executed.  Can be given multiple times, for
</span></span><span style=display:flex><span>            different domains.  If the option is not specified, all  domains
</span></span><span style=display:flex><span>            are treated as being allowed (default).
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ipsecmod-whitelist: &lt;domain&gt;
</span></span><span style=display:flex><span>            Alternate syntax for ipsecmod-allow.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Cache DB Module Options
</span></span><span style=display:flex><span>    The  Cache DB module must be configured in the module-config: directive
</span></span><span style=display:flex><span>    e.g., &#34;validator cachedb iterator&#34; and be compiled into the daemon with
</span></span><span style=display:flex><span>    --enable-cachedb.  If this module is enabled and configured, the speci-
</span></span><span style=display:flex><span>    fied backend database works as a second level cache: When Unbound  can-
</span></span><span style=display:flex><span>    not  find an answer to a query in its built-in in-memory cache, it con-
</span></span><span style=display:flex><span>    sults the specified backend.  If it finds a valid answer in  the  back-
</span></span><span style=display:flex><span>    end,  Unbound uses it to respond to the query without performing itera-
</span></span><span style=display:flex><span>    tive DNS resolution.  If Unbound cannot even  find  an  answer  in  the
</span></span><span style=display:flex><span>    backend,  it  resolves the query as usual, and stores the answer in the
</span></span><span style=display:flex><span>    backend.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    This module interacts with the serve-expired-* options and  will  reply
</span></span><span style=display:flex><span>    with expired data if Unbound is configured for that.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    If  Unbound  was  built with --with-libhiredis on a system that has in-
</span></span><span style=display:flex><span>    stalled the hiredis C client library of Redis, then the &#34;redis&#34; backend
</span></span><span style=display:flex><span>    can be used.  This backend communicates with the specified Redis server
</span></span><span style=display:flex><span>    over a TCP connection to store and retrieve cache data.  It can be used
</span></span><span style=display:flex><span>    as a persistent and/or shared cache backend.  It should be  noted  that
</span></span><span style=display:flex><span>    Unbound  never  removes  data  stored in the Redis server, even if some
</span></span><span style=display:flex><span>    data have expired in terms of DNS TTL or the Redis  server  has  cached
</span></span><span style=display:flex><span>    too  much  data;  if  necessary  the Redis server must be configured to
</span></span><span style=display:flex><span>    limit the cache size, preferably with some kind of  least-recently-used
</span></span><span style=display:flex><span>    eviction  policy.  Additionally, the redis-expire-records option can be
</span></span><span style=display:flex><span>    used in order to set the relative DNS TTL of the message as timeout  to
</span></span><span style=display:flex><span>    the Redis records; keep in mind that some additional memory is used per
</span></span><span style=display:flex><span>    key  and  that  the expire information is stored as absolute Unix time-
</span></span><span style=display:flex><span>    stamps in Redis (computer time must be stable).  This backend uses syn-
</span></span><span style=display:flex><span>    chronous communication with the Redis server based  on  the  assumption
</span></span><span style=display:flex><span>    that  the  communication  is  stable and sufficiently fast.  The thread
</span></span><span style=display:flex><span>    waiting for a response from the Redis server cannot  handle  other  DNS
</span></span><span style=display:flex><span>    queries.   Although  the  backend  has  the ability to reconnect to the
</span></span><span style=display:flex><span>    server when the connection is closed unexpectedly and there is  a  con-
</span></span><span style=display:flex><span>    figurable  timeout in case the server is overly slow or hangs up, these
</span></span><span style=display:flex><span>    cases are assumed to be very rare.  If connection close or timeout hap-
</span></span><span style=display:flex><span>    pens too often, Unbound will be effectively unusable with this backend.
</span></span><span style=display:flex><span>    It&#39;s the administrator&#39;s responsibility to make the assumption hold.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    The cachedb: clause gives custom settings of the cache DB module.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    backend: &lt;backend name&gt;
</span></span><span style=display:flex><span>            Specify the backend database name.  The default database is  the
</span></span><span style=display:flex><span>            in-memory  backend  named  &#34;testframe&#34;,  which, as the name sug-
</span></span><span style=display:flex><span>            gests, is not of any practical use.  Depending on the build-time
</span></span><span style=display:flex><span>            configuration, &#34;redis&#34; backend may also  be  used  as  described
</span></span><span style=display:flex><span>            above.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    secret-seed: &lt;&#34;secret string&#34;&gt;
</span></span><span style=display:flex><span>            Specify a seed to calculate a hash value from query information.
</span></span><span style=display:flex><span>            This  value  will be used as the key of the corresponding answer
</span></span><span style=display:flex><span>            for the backend database and  can  be  customized  if  the  hash
</span></span><span style=display:flex><span>            should  not  be predictable operationally.  If the backend data-
</span></span><span style=display:flex><span>            base is shared by multiple Unbound instances, all instances must
</span></span><span style=display:flex><span>            use the same secret seed.  This option defaults to &#34;default&#34;.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    cachedb-no-store: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            If the backend should be read from, but  not  written  to.  This
</span></span><span style=display:flex><span>            makes  this  instance not store dns messages in the backend. But
</span></span><span style=display:flex><span>            if data is available it is retrieved. The default is no.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    cachedb-check-when-serve-expired: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            If enabled, the cachedb is checked before an expired response is
</span></span><span style=display:flex><span>            returned.  When  serve-expired  is  enabled,  without  serve-ex-
</span></span><span style=display:flex><span>            pired-client-timeout,  it then does not immediately respond with
</span></span><span style=display:flex><span>            an expired response from cache, but  instead  first  checks  the
</span></span><span style=display:flex><span>            cachedb for valid contents, and if so returns it. If the cachedb
</span></span><span style=display:flex><span>            also  has no valid contents, the serve expired response is sent.
</span></span><span style=display:flex><span>            If also serve-expired-client-timeout is enabled, the expired re-
</span></span><span style=display:flex><span>            sponse is delayed until the timeout expires. Unless  the  lookup
</span></span><span style=display:flex><span>            succeeds within the timeout. The default is yes.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    The following cachedb options are specific to the redis backend.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    redis-server-host: &lt;server address or name&gt;
</span></span><span style=display:flex><span>            The  IP  (either  v6  or v4) address or domain name of the Redis
</span></span><span style=display:flex><span>            server.  In general an IP address should be specified as  other-
</span></span><span style=display:flex><span>            wise  Unbound  will have to resolve the name of the server every
</span></span><span style=display:flex><span>            time it establishes a connection to the server.  This option de-
</span></span><span style=display:flex><span>            faults to &#34;127.0.0.1&#34;.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    redis-server-port: &lt;port number&gt;
</span></span><span style=display:flex><span>            The TCP port number of the Redis server.  This  option  defaults
</span></span><span style=display:flex><span>            to 6379.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    redis-server-path: &lt;unix socket path&gt;
</span></span><span style=display:flex><span>            The  unix socket path to connect to the Redis server. Off by de-
</span></span><span style=display:flex><span>            fault, and it can be set to &#34;&#34; to turn this  off.  Unix  sockets
</span></span><span style=display:flex><span>            may have better throughput than the IP address option.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    redis-server-password: &#34;&lt;password&gt;&#34;
</span></span><span style=display:flex><span>            The Redis AUTH password to use for the Redis server.  Only rele-
</span></span><span style=display:flex><span>            vant  if  Redis is configured for client password authorisation.
</span></span><span style=display:flex><span>            Off by default, and it can be set to &#34;&#34; to turn this off.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    redis-timeout: &lt;msec&gt;
</span></span><span style=display:flex><span>            The period until when Unbound waits for a response from the  Re-
</span></span><span style=display:flex><span>            dis  sever.   If this timeout expires Unbound closes the connec-
</span></span><span style=display:flex><span>            tion, treats it as if the Redis server does  not  have  the  re-
</span></span><span style=display:flex><span>            quested  data,  and  will  try  to re-establish a new connection
</span></span><span style=display:flex><span>            later.  This option defaults to 100 milliseconds.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    redis-command-timeout: &lt;msec&gt;
</span></span><span style=display:flex><span>            The timeout to use for Redis commands, in milliseconds.   If  0,
</span></span><span style=display:flex><span>            it uses the redis-timeout value.  The default is 0.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    redis-connect-timeout: &lt;msec&gt;
</span></span><span style=display:flex><span>            The timeout to use for Redis connection set up, in milliseconds.
</span></span><span style=display:flex><span>            If 0, it uses the redis-timeout value.  The default is 0.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    redis-expire-records: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            If  Redis  record  expiration  is enabled.  If yes, Unbound sets
</span></span><span style=display:flex><span>            timeout for Redis records so that Redis can evict keys that have
</span></span><span style=display:flex><span>            expired automatically.  If Unbound is configured with  serve-ex-
</span></span><span style=display:flex><span>            pired  and serve-expired-ttl is 0, this option is internally re-
</span></span><span style=display:flex><span>            verted to &#34;no&#34;.  Redis SETEX support is required for this option
</span></span><span style=display:flex><span>            (Redis &gt;= 2.0.0).  This option defaults to no.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    redis-logical-db: &lt;logical database index&gt;
</span></span><span style=display:flex><span>            The logical database in Redis to use.  These  are  databases  in
</span></span><span style=display:flex><span>            the  same Redis instance sharing the same configuration and per-
</span></span><span style=display:flex><span>            sisted in the same RDB/AOF file.  If unsure about using this op-
</span></span><span style=display:flex><span>            tion,  Redis  documentation  (https://redis.io/commands/select/)
</span></span><span style=display:flex><span>            suggests  not  to use a single Redis instance for multiple unre-
</span></span><span style=display:flex><span>            lated applications.  The default database in Redis  is  0  while
</span></span><span style=display:flex><span>            other  logical  databases  need  to be explicitly SELECT&#39;ed upon
</span></span><span style=display:flex><span>            connecting.  This option defaults to 0.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    redis-replica-server-host: &lt;server address or name&gt;
</span></span><span style=display:flex><span>            The IP (either v6 or v4) address or domain  name  of  the  Redis
</span></span><span style=display:flex><span>            replica server.  In general an IP address should be specified as
</span></span><span style=display:flex><span>            otherwise  Unbound  will  have to resolve the name of the server
</span></span><span style=display:flex><span>            every time it establishes a  connection  to  the  server.   This
</span></span><span style=display:flex><span>            server  is  treated  as  a read-only replica server (https://re-
</span></span><span style=display:flex><span>            dis.io/docs/management/replication/#read-only-replica).       If
</span></span><span style=display:flex><span>            specified,  all  Redis  read  commands  will  go to this replica
</span></span><span style=display:flex><span>            server, while the write commands will go  to  the  redis-server-
</span></span><span style=display:flex><span>            host.  This option defaults to &#34;&#34; (disabled).
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    redis-replica-server-port: &lt;port number&gt;
</span></span><span style=display:flex><span>            The  TCP  port  number of the Redis replica server.  This option
</span></span><span style=display:flex><span>            defaults to 6379.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    redis-replica-server-path: &lt;unix socket path&gt;
</span></span><span style=display:flex><span>            The unix socket path to connect to the Redis server. Off by  de-
</span></span><span style=display:flex><span>            fault,  and  it  can be set to &#34;&#34; to turn this off. Unix sockets
</span></span><span style=display:flex><span>            may have better throughput than the IP address option.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    redis-replica-server-password: &#34;&lt;password&gt;&#34;
</span></span><span style=display:flex><span>            The Redis AUTH password to use for  the  Redis  replica  server.
</span></span><span style=display:flex><span>            Only  relevant if Redis is configured for client password autho-
</span></span><span style=display:flex><span>            risation.  Off by default, and it can be set to &#34;&#34; to turn  this
</span></span><span style=display:flex><span>            off.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    redis-replica-timeout: &lt;msec&gt;
</span></span><span style=display:flex><span>            The  period until when Unbound waits for a response from the Re-
</span></span><span style=display:flex><span>            dis replica sever.  If this timeout expires Unbound  closes  the
</span></span><span style=display:flex><span>            connection,  treats  it  as if the Redis replica server does not
</span></span><span style=display:flex><span>            have the requested data, and will try to re-establish a new con-
</span></span><span style=display:flex><span>            nection later.  This option defaults to 100 milliseconds.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    redis-replica-command-timeout: &lt;msec&gt;
</span></span><span style=display:flex><span>            The timeout to use for Redis replica commands, in  milliseconds.
</span></span><span style=display:flex><span>            If  0,  it uses the redis-replica-timeout value.  The default is
</span></span><span style=display:flex><span>            0.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    redis-replica-connect-timeout: &lt;msec&gt;
</span></span><span style=display:flex><span>            The timeout to use for Redis replica connection set up, in  mil-
</span></span><span style=display:flex><span>            liseconds.   If 0, it uses the redis-replica-timeout value.  The
</span></span><span style=display:flex><span>            default is 0.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    redis-replica-logical-db: &lt;logical database index&gt;
</span></span><span style=display:flex><span>            Same as redis-logical-db but for the Redis replica server.  This
</span></span><span style=display:flex><span>            option defaults to 0.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>DNSTAP Logging Options
</span></span><span style=display:flex><span>    DNSTAP support, when compiled in by using --enable-dnstap,  is  enabled
</span></span><span style=display:flex><span>    in  the  dnstap:  section.   This starts an extra thread (when compiled
</span></span><span style=display:flex><span>    with threading) that writes the log information to the destination.  If
</span></span><span style=display:flex><span>    Unbound is compiled without threading it does not spawn a  thread,  but
</span></span><span style=display:flex><span>    connects per-process to the destination.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    dnstap-enable: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            If  dnstap  is enabled.  Default no.  If yes, it connects to the
</span></span><span style=display:flex><span>            dnstap server and if any of the  dnstap-log-..-messages  options
</span></span><span style=display:flex><span>            is enabled it sends logs for those messages to the server.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    dnstap-bidirectional: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Use  frame streams in bidirectional mode to transfer DNSTAP mes-
</span></span><span style=display:flex><span>            sages. Default is yes.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    dnstap-socket-path: &lt;file name&gt;
</span></span><span style=display:flex><span>            Sets the unix socket file name for connecting to the server that
</span></span><span style=display:flex><span>            is listening on that socket.  Default is &#34;&#34;.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    dnstap-ip: &lt;IPaddress[@port]&gt;
</span></span><span style=display:flex><span>            If &#34;&#34;, the unix socket is used, if set with an IP address  (IPv4
</span></span><span style=display:flex><span>            or IPv6) that address is used to connect to the server.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    dnstap-tls: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Set  this  to  use  TLS  to  connect  to the server specified in
</span></span><span style=display:flex><span>            dnstap-ip.  The default is yes.  If set to no, TCP  is  used  to
</span></span><span style=display:flex><span>            connect to the server.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    dnstap-tls-server-name: &lt;name of TLS authentication&gt;
</span></span><span style=display:flex><span>            The  TLS server name to authenticate the server with.  Used when
</span></span><span style=display:flex><span>            dnstap-tls is enabled.  If &#34;&#34; it is ignored, default &#34;&#34;.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    dnstap-tls-cert-bundle: &lt;file name of cert bundle&gt;
</span></span><span style=display:flex><span>            The pem file with certs to verify the TLS server certificate. If
</span></span><span style=display:flex><span>            &#34;&#34; the server default cert bundle is used, or the  windows  cert
</span></span><span style=display:flex><span>            bundle on windows.  Default is &#34;&#34;.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    dnstap-tls-client-key-file: &lt;file name&gt;
</span></span><span style=display:flex><span>            The  client key file for TLS client authentication. If &#34;&#34; client
</span></span><span style=display:flex><span>            authentication is not used.  Default is &#34;&#34;.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    dnstap-tls-client-cert-file: &lt;file name&gt;
</span></span><span style=display:flex><span>            The client cert file for TLS client authentication.  Default  is
</span></span><span style=display:flex><span>            &#34;&#34;.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    dnstap-send-identity: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            If enabled, the server identity is included in the log messages.
</span></span><span style=display:flex><span>            Default is no.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    dnstap-send-version: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            If  enabled, the server version if included in the log messages.
</span></span><span style=display:flex><span>            Default is no.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    dnstap-identity: &lt;string&gt;
</span></span><span style=display:flex><span>            The identity to send with messages, if &#34;&#34; the hostname is  used.
</span></span><span style=display:flex><span>            Default is &#34;&#34;.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    dnstap-version: &lt;string&gt;
</span></span><span style=display:flex><span>            The  version to send with messages, if &#34;&#34; the package version is
</span></span><span style=display:flex><span>            used.  Default is &#34;&#34;.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    dnstap-sample-rate: &lt;number&gt;
</span></span><span style=display:flex><span>            The sample rate for log of messages, it logs only 1/N  messages.
</span></span><span style=display:flex><span>            With  0  it  is disabled. Default is 0. This is useful in a high
</span></span><span style=display:flex><span>            volume environment, where log functionality would otherwise  not
</span></span><span style=display:flex><span>            be reliable. For example 10 would spend only 1/10th time on log-
</span></span><span style=display:flex><span>            ging,  and  100 would only spend a hundredth of the time on log-
</span></span><span style=display:flex><span>            ging.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    dnstap-log-resolver-query-messages: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Enable to log resolver query messages.  Default  is  no.   These
</span></span><span style=display:flex><span>            are messages from Unbound to upstream servers.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    dnstap-log-resolver-response-messages: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Enable to log resolver response messages.  Default is no.  These
</span></span><span style=display:flex><span>            are replies from upstream servers to Unbound.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    dnstap-log-client-query-messages: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Enable  to log client query messages.  Default is no.  These are
</span></span><span style=display:flex><span>            client queries to Unbound.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    dnstap-log-client-response-messages: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Enable to log client response messages.  Default is  no.   These
</span></span><span style=display:flex><span>            are responses from Unbound to clients.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    dnstap-log-forwarder-query-messages: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Enable to log forwarder query messages.  Default is no.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    dnstap-log-forwarder-response-messages: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Enable to log forwarder response messages.  Default is no.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Response Policy Zone Options
</span></span><span style=display:flex><span>    Response  Policy Zones are configured with rpz:, and each one must have
</span></span><span style=display:flex><span>    a name:. There can be multiple ones, by listing multiple  RPZ  clauses,
</span></span><span style=display:flex><span>    each with a different name. RPZ clauses are applied in order of config-
</span></span><span style=display:flex><span>    uration  and  any match from an earlier RPZ zone will terminate the RPZ
</span></span><span style=display:flex><span>    lookup. Note that a PASSTHRU action is still considered a  match.   The
</span></span><span style=display:flex><span>    respip module needs to be added to the module-config, e.g.: module-con-
</span></span><span style=display:flex><span>    fig: &#34;respip validator iterator&#34;.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    QNAME,  Response  IP  Address,  nsdname, nsip and clientip triggers are
</span></span><span style=display:flex><span>    supported.  Supported actions are: NXDOMAIN,  NODATA,  PASSTHRU,  DROP,
</span></span><span style=display:flex><span>    Local  Data,  tcp-only  and drop.  RPZ QNAME triggers are applied after
</span></span><span style=display:flex><span>    local-zones and before auth-zones.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    The RPZ zone is a regular DNS zone formatted with a SOA start record as
</span></span><span style=display:flex><span>    usual.  The items in the zone are entries, that specify what to act  on
</span></span><span style=display:flex><span>    (the  trigger)  and  what to do (the action).  The trigger to act on is
</span></span><span style=display:flex><span>    recorded in the name, the action to do  is  recorded  as  the  resource
</span></span><span style=display:flex><span>    record.   The  names  all  end  in the zone name, so you could type the
</span></span><span style=display:flex><span>    trigger names without a trailing dot in the zonefile.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    An example RPZ record, that answers example.com with NXDOMAIN
</span></span><span style=display:flex><span>        example.com CNAME .
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    The triggers are encoded in the name on the left
</span></span><span style=display:flex><span>        name                          query name
</span></span><span style=display:flex><span>        netblock.rpz-client-ip        client IP address
</span></span><span style=display:flex><span>        netblock.rpz-ip               response IP address in the answer
</span></span><span style=display:flex><span>        name.rpz-nsdname              nameserver name
</span></span><span style=display:flex><span>        netblock.rpz-nsip             nameserver IP address
</span></span><span style=display:flex><span>    The netblock is written as &lt;netblocklen&gt;.&lt;ip address in reverse&gt;.   For
</span></span><span style=display:flex><span>    IPv6 use &#39;zz&#39; for &#39;::&#39;.  Specify individual addresses with scope length
</span></span><span style=display:flex><span>    of 32 or 128.  For example, 24.10.100.51.198.rpz-ip is 198.51.100.10/24
</span></span><span style=display:flex><span>    and 32.10.zz.db8.2001.rpz-ip is 2001:db8:0:0:0:0:0:10/32.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    The actions are specified with the record on the right
</span></span><span style=display:flex><span>        CNAME .                      nxdomain reply
</span></span><span style=display:flex><span>        CNAME *.                     nodata reply
</span></span><span style=display:flex><span>        CNAME rpz-passthru.          do nothing, allow to continue
</span></span><span style=display:flex><span>        CNAME rpz-drop.              the query is dropped
</span></span><span style=display:flex><span>        CNAME rpz-tcp-only.          answer over TCP
</span></span><span style=display:flex><span>        A 192.0.2.1                  answer with this IP address
</span></span><span style=display:flex><span>    Other  records like AAAA, TXT and other CNAMEs (not rpz-..) can also be
</span></span><span style=display:flex><span>    used to answer queries with that content.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    The RPZ zones can be configured in the config file with these  settings
</span></span><span style=display:flex><span>    in the rpz: block.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    name: &lt;zone name&gt;
</span></span><span style=display:flex><span>            Name of the authority zone.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    primary: &lt;IP address or host name&gt;
</span></span><span style=display:flex><span>            Where  to  download a copy of the zone from, with AXFR and IXFR.
</span></span><span style=display:flex><span>            Multiple primaries can be specified.  They are all tried if  one
</span></span><span style=display:flex><span>            fails.   To  use  a nondefault port for DNS communication append
</span></span><span style=display:flex><span>            &#39;@&#39; with the port number.  You can append a &#39;#&#39; and a name, then
</span></span><span style=display:flex><span>            AXFR over TLS can be used and the  tls  authentication  certifi-
</span></span><span style=display:flex><span>            cates  will  be  checked with that name.  If you combine the &#39;@&#39;
</span></span><span style=display:flex><span>            and &#39;#&#39;, the &#39;@&#39; comes first.  If you point it  at  another  Un-
</span></span><span style=display:flex><span>            bound  instance, it would not work because that does not support
</span></span><span style=display:flex><span>            AXFR/IXFR for the zone, but if you used  url:  to  download  the
</span></span><span style=display:flex><span>            zonefile  as  a  text file from a webserver that would work.  If
</span></span><span style=display:flex><span>            you specify the hostname, you cannot use  the  domain  from  the
</span></span><span style=display:flex><span>            zonefile,  because  it  may  not  have that when retrieving that
</span></span><span style=display:flex><span>            data, instead use a plain IP address to avoid a circular  depen-
</span></span><span style=display:flex><span>            dency on retrieving that IP address.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    master: &lt;IP address or host name&gt;
</span></span><span style=display:flex><span>            Alternate syntax for primary.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    url: &lt;url to zonefile&gt;
</span></span><span style=display:flex><span>            Where  to download a zonefile for the zone.  With http or https.
</span></span><span style=display:flex><span>            An  example  for  the   url   is   &#34;http://www.example.com/exam-
</span></span><span style=display:flex><span>            ple.org.zone&#34;.   Multiple  url statements can be given, they are
</span></span><span style=display:flex><span>            tried in turn.  If only urls are given the SOA refresh timer  is
</span></span><span style=display:flex><span>            used  to  wait  for making new downloads.  If also primaries are
</span></span><span style=display:flex><span>            listed, the primaries are first probed with UDP SOA  queries  to
</span></span><span style=display:flex><span>            see if the SOA serial number has changed, reducing the number of
</span></span><span style=display:flex><span>            downloads.   If  none  of the urls work, the primaries are tried
</span></span><span style=display:flex><span>            with IXFR and AXFR.  For  https,  the  tls-cert-bundle  and  the
</span></span><span style=display:flex><span>            hostname from the url are used to authenticate the connection.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    allow-notify: &lt;IP address or host name or netblockIP/prefix&gt;
</span></span><span style=display:flex><span>            With  allow-notify  you  can specify additional sources of noti-
</span></span><span style=display:flex><span>            fies.  When notified, the server attempts  to  first  probe  and
</span></span><span style=display:flex><span>            then  zone  transfer.  If the notify is from a primary, it first
</span></span><span style=display:flex><span>            attempts that primary.  Otherwise other primaries are attempted.
</span></span><span style=display:flex><span>            If there are no primaries, but only urls, the file is downloaded
</span></span><span style=display:flex><span>            when notified.  The primaries from primary: and url:  statements
</span></span><span style=display:flex><span>            are allowed notify by default.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    zonefile: &lt;filename&gt;
</span></span><span style=display:flex><span>            The  filename  where  the  zone is stored.  If not given then no
</span></span><span style=display:flex><span>            zonefile is used.  If the file does not exist or is  empty,  Un-
</span></span><span style=display:flex><span>            bound  will  attempt  to  fetch  zone data (eg. from the primary
</span></span><span style=display:flex><span>            servers).
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    rpz-action-override: &lt;action&gt;
</span></span><span style=display:flex><span>            Always use this RPZ action for matching triggers from this zone.
</span></span><span style=display:flex><span>            Possible action are: nxdomain, nodata, passthru, drop,  disabled
</span></span><span style=display:flex><span>            and cname.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    rpz-cname-override: &lt;domain&gt;
</span></span><span style=display:flex><span>            The CNAME target domain to use if the cname action is configured
</span></span><span style=display:flex><span>            for rpz-action-override.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    rpz-log: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Log all applied RPZ actions for this RPZ zone. Default is no.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    rpz-log-name: &lt;name&gt;
</span></span><span style=display:flex><span>            Specify  a string to be part of the log line, for easy referenc-
</span></span><span style=display:flex><span>            ing.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    rpz-signal-nxdomain-ra: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            Signal when a query is blocked by the RPZ with NXDOMAIN with  an
</span></span><span style=display:flex><span>            unset  RA  flag.   This allows certain clients, like dnsmasq, to
</span></span><span style=display:flex><span>            infer that the domain is externally blocked. Default is no.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    for-downstream: &lt;yes or no&gt;
</span></span><span style=display:flex><span>            If enabled the zone is authoritatively answered for and  queries
</span></span><span style=display:flex><span>            for the RPZ zone information are answered to downstream clients.
</span></span><span style=display:flex><span>            This  is useful for monitoring scripts, that can then access the
</span></span><span style=display:flex><span>            SOA information to check if the RPZ information is up  to  date.
</span></span><span style=display:flex><span>            Default is no.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    tags: &lt;list of tags&gt;
</span></span><span style=display:flex><span>            Limit the policies from this RPZ clause to clients with a match-
</span></span><span style=display:flex><span>            ing  tag.  Tags  need to be defined in define-tag and can be as-
</span></span><span style=display:flex><span>            signed to client  addresses  using  access-control-tag.  Enclose
</span></span><span style=display:flex><span>            list  of  tags in quotes (&#34;&#34;) and put spaces between tags. If no
</span></span><span style=display:flex><span>            tags are specified the policies from this clause will be applied
</span></span><span style=display:flex><span>            for all clients.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>MEMORY CONTROL EXAMPLE
</span></span><span style=display:flex><span>       In the example config settings below memory usage is reduced. Some ser-
</span></span><span style=display:flex><span>       vice levels are lower, notable very large data and a high TCP load  are
</span></span><span style=display:flex><span>       no longer supported. Very large data and high TCP loads are exceptional
</span></span><span style=display:flex><span>       for the DNS.  DNSSEC validation is enabled, just add trust anchors.  If
</span></span><span style=display:flex><span>       you do not have to worry about programs using more than 3 Mb of memory,
</span></span><span style=display:flex><span>       the below example is not for you. Use the defaults to receive full ser-
</span></span><span style=display:flex><span>       vice, which on BSD-32bit tops out at 30-40 Mb after heavy usage.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>       # example settings that reduce memory usage
</span></span><span style=display:flex><span>       server:
</span></span><span style=display:flex><span>            num-threads: 1
</span></span><span style=display:flex><span>            outgoing-num-tcp: 1 # this limits TCP service, uses less buffers.
</span></span><span style=display:flex><span>            incoming-num-tcp: 1
</span></span><span style=display:flex><span>            outgoing-range: 60  # uses less memory, but less performance.
</span></span><span style=display:flex><span>            msg-buffer-size: 8192   # note this limits service, &#39;no huge stuff&#39;.
</span></span><span style=display:flex><span>            msg-cache-size: 100k
</span></span><span style=display:flex><span>            msg-cache-slabs: 1
</span></span><span style=display:flex><span>            rrset-cache-size: 100k
</span></span><span style=display:flex><span>            rrset-cache-slabs: 1
</span></span><span style=display:flex><span>            infra-cache-numhosts: 200
</span></span><span style=display:flex><span>            infra-cache-slabs: 1
</span></span><span style=display:flex><span>            key-cache-size: 100k
</span></span><span style=display:flex><span>            key-cache-slabs: 1
</span></span><span style=display:flex><span>            neg-cache-size: 10k
</span></span><span style=display:flex><span>            num-queries-per-thread: 30
</span></span><span style=display:flex><span>            target-fetch-policy: &#34;2 1 0 0 0 0&#34;
</span></span><span style=display:flex><span>            harden-large-queries: &#34;yes&#34;
</span></span><span style=display:flex><span>            harden-short-bufsize: &#34;yes&#34;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>FILES
</span></span><span style=display:flex><span>       /usr/local/etc/unbound
</span></span><span style=display:flex><span>              default Unbound working directory.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>       /usr/local/etc/unbound
</span></span><span style=display:flex><span>              default chroot(2) location.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>       /usr/local/etc/unbound/unbound.conf
</span></span><span style=display:flex><span>              Unbound configuration file.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>       /usr/local/etc/unbound/unbound.pid
</span></span><span style=display:flex><span>              default Unbound pidfile with process ID of the running daemon.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>       unbound.log
</span></span><span style=display:flex><span>              Unbound log file. default is to log to syslog(3).
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>SEE ALSO
</span></span><span style=display:flex><span>       unbound(8), unbound-checkconf(8).
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>AUTHORS
</span></span><span style=display:flex><span>       Unbound  was written by NLnet Labs. Please see CREDITS file in the dis-
</span></span><span style=display:flex><span>       tribution for further details.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>NLnet Labs                       Apr 24, 2025                  unbound.conf(5)
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://tnzzz.top/>明天吃什么？</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a> &
<a href=https://beian.miit.gov.cn/#/Integrated/index>粤ICP备2022076439号</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>